function hx(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const a=Object.getOwnPropertyDescriptor(s,o);a&&Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var S_={exports:{}},Kl={},w_={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=Symbol.for("react.element"),mx=Symbol.for("react.portal"),dx=Symbol.for("react.fragment"),fx=Symbol.for("react.strict_mode"),px=Symbol.for("react.profiler"),_x=Symbol.for("react.provider"),yx=Symbol.for("react.context"),gx=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),xx=Symbol.for("react.memo"),Sx=Symbol.for("react.lazy"),Jd=Symbol.iterator;function wx(t){return t===null||typeof t!="object"?null:(t=Jd&&t[Jd]||t["@@iterator"],typeof t=="function"?t:null)}var C_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B_=Object.assign,A_={};function Nr(t,e,n){this.props=t,this.context=e,this.refs=A_,this.updater=n||C_}Nr.prototype.isReactComponent={};Nr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V_(){}V_.prototype=Nr.prototype;function jh(t,e,n){this.props=t,this.context=e,this.refs=A_,this.updater=n||C_}var Nh=jh.prototype=new V_;Nh.constructor=jh;B_(Nh,Nr.prototype);Nh.isPureReactComponent=!0;var Xd=Array.isArray,b_=Object.prototype.hasOwnProperty,zh={current:null},P_={key:!0,ref:!0,__self:!0,__source:!0};function M_(t,e,n){var s,o={},a=null,c=null;if(e!=null)for(s in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(a=""+e.key),e)b_.call(e,s)&&!P_.hasOwnProperty(s)&&(o[s]=e[s]);var d=arguments.length-2;if(d===1)o.children=n;else if(1<d){for(var f=Array(d),y=0;y<d;y++)f[y]=arguments[y+2];o.children=f}if(t&&t.defaultProps)for(s in d=t.defaultProps,d)o[s]===void 0&&(o[s]=d[s]);return{$$typeof:oa,type:t,key:a,ref:c,props:o,_owner:zh.current}}function Cx(t,e){return{$$typeof:oa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Oh(t){return typeof t=="object"&&t!==null&&t.$$typeof===oa}function Bx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $d=/\/+/g;function Uu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bx(""+t.key):e.toString(36)}function sl(t,e,n,s,o){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case oa:case mx:c=!0}}if(c)return c=t,o=o(c),t=s===""?"."+Uu(c,0):s,Xd(o)?(n="",t!=null&&(n=t.replace($d,"$&/")+"/"),sl(o,e,n,"",function(y){return y})):o!=null&&(Oh(o)&&(o=Cx(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace($d,"$&/")+"/")+t)),e.push(o)),1;if(c=0,s=s===""?".":s+":",Xd(t))for(var d=0;d<t.length;d++){a=t[d];var f=s+Uu(a,d);c+=sl(a,e,n,f,o)}else if(f=wx(t),typeof f=="function")for(t=f.call(t),d=0;!(a=t.next()).done;)a=a.value,f=s+Uu(a,d++),c+=sl(a,e,n,f,o);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Ga(t,e,n){if(t==null)return t;var s=[],o=0;return sl(t,s,"","",function(a){return e.call(n,a,o++)}),s}function Ax(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fi={current:null},rl={transition:null},Vx={ReactCurrentDispatcher:fi,ReactCurrentBatchConfig:rl,ReactCurrentOwner:zh};Jt.Children={map:Ga,forEach:function(t,e,n){Ga(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ga(t,function(){e++}),e},toArray:function(t){return Ga(t,function(e){return e})||[]},only:function(t){if(!Oh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Jt.Component=Nr;Jt.Fragment=dx;Jt.Profiler=px;Jt.PureComponent=jh;Jt.StrictMode=fx;Jt.Suspense=vx;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vx;Jt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=B_({},t.props),o=t.key,a=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,c=zh.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(f in e)b_.call(e,f)&&!P_.hasOwnProperty(f)&&(s[f]=e[f]===void 0&&d!==void 0?d[f]:e[f])}var f=arguments.length-2;if(f===1)s.children=n;else if(1<f){d=Array(f);for(var y=0;y<f;y++)d[y]=arguments[y+2];s.children=d}return{$$typeof:oa,type:t.type,key:o,ref:a,props:s,_owner:c}};Jt.createContext=function(t){return t={$$typeof:yx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_x,_context:t},t.Consumer=t};Jt.createElement=M_;Jt.createFactory=function(t){var e=M_.bind(null,t);return e.type=t,e};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(t){return{$$typeof:gx,render:t}};Jt.isValidElement=Oh;Jt.lazy=function(t){return{$$typeof:Sx,_payload:{_status:-1,_result:t},_init:Ax}};Jt.memo=function(t,e){return{$$typeof:xx,type:t,compare:e===void 0?null:e}};Jt.startTransition=function(t){var e=rl.transition;rl.transition={};try{t()}finally{rl.transition=e}};Jt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Jt.useCallback=function(t,e){return fi.current.useCallback(t,e)};Jt.useContext=function(t){return fi.current.useContext(t)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(t){return fi.current.useDeferredValue(t)};Jt.useEffect=function(t,e){return fi.current.useEffect(t,e)};Jt.useId=function(){return fi.current.useId()};Jt.useImperativeHandle=function(t,e,n){return fi.current.useImperativeHandle(t,e,n)};Jt.useInsertionEffect=function(t,e){return fi.current.useInsertionEffect(t,e)};Jt.useLayoutEffect=function(t,e){return fi.current.useLayoutEffect(t,e)};Jt.useMemo=function(t,e){return fi.current.useMemo(t,e)};Jt.useReducer=function(t,e,n){return fi.current.useReducer(t,e,n)};Jt.useRef=function(t){return fi.current.useRef(t)};Jt.useState=function(t){return fi.current.useState(t)};Jt.useSyncExternalStore=function(t,e,n){return fi.current.useSyncExternalStore(t,e,n)};Jt.useTransition=function(){return fi.current.useTransition()};Jt.version="18.2.0";w_.exports=Jt;var nt=w_.exports;const Yl=x_(nt),bx=hx({__proto__:null,default:Yl},[nt]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px=nt,Mx=Symbol.for("react.element"),Tx=Symbol.for("react.fragment"),Ix=Object.prototype.hasOwnProperty,Dx=Px.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kx={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,n){var s,o={},a=null,c=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(c=e.ref);for(s in e)Ix.call(e,s)&&!kx.hasOwnProperty(s)&&(o[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)o[s]===void 0&&(o[s]=e[s]);return{$$typeof:Mx,type:t,key:a,ref:c,props:o,_owner:Dx.current}}Kl.Fragment=Tx;Kl.jsx=T_;Kl.jsxs=T_;S_.exports=Kl;var N=S_.exports,Mc={},I_={exports:{}},Gi={},D_={exports:{}},k_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(mt,Y){var Q=mt.length;mt.push(Y);t:for(;0<Q;){var lt=Q-1>>>1,_t=mt[lt];if(0<o(_t,Y))mt[lt]=Y,mt[Q]=_t,Q=lt;else break t}}function n(mt){return mt.length===0?null:mt[0]}function s(mt){if(mt.length===0)return null;var Y=mt[0],Q=mt.pop();if(Q!==Y){mt[0]=Q;t:for(var lt=0,_t=mt.length,Vt=_t>>>1;lt<Vt;){var Bt=2*(lt+1)-1,Ut=mt[Bt],Gt=Bt+1,Xt=mt[Gt];if(0>o(Ut,Q))Gt<_t&&0>o(Xt,Ut)?(mt[lt]=Xt,mt[Gt]=Q,lt=Gt):(mt[lt]=Ut,mt[Bt]=Q,lt=Bt);else if(Gt<_t&&0>o(Xt,Q))mt[lt]=Xt,mt[Gt]=Q,lt=Gt;else break t}}return Y}function o(mt,Y){var Q=mt.sortIndex-Y.sortIndex;return Q!==0?Q:mt.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],y=[],g=1,S=null,x=3,p=!1,C=!1,B=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(mt){for(var Y=n(y);Y!==null;){if(Y.callback===null)s(y);else if(Y.startTime<=mt)s(y),Y.sortIndex=Y.expirationTime,e(f,Y);else break;Y=n(y)}}function F(mt){if(B=!1,L(mt),!C)if(n(f)!==null)C=!0,wt(k);else{var Y=n(y);Y!==null&&Ct(F,Y.startTime-mt)}}function k(mt,Y){C=!1,B&&(B=!1,M(E),E=-1),p=!0;var Q=x;try{for(L(Y),S=n(f);S!==null&&(!(S.expirationTime>Y)||mt&&!$());){var lt=S.callback;if(typeof lt=="function"){S.callback=null,x=S.priorityLevel;var _t=lt(S.expirationTime<=Y);Y=t.unstable_now(),typeof _t=="function"?S.callback=_t:S===n(f)&&s(f),L(Y)}else s(f);S=n(f)}if(S!==null)var Vt=!0;else{var Bt=n(y);Bt!==null&&Ct(F,Bt.startTime-Y),Vt=!1}return Vt}finally{S=null,x=Q,p=!1}}var G=!1,O=null,E=-1,H=5,q=-1;function $(){return!(t.unstable_now()-q<H)}function Z(){if(O!==null){var mt=t.unstable_now();q=mt;var Y=!0;try{Y=O(!0,mt)}finally{Y?ot():(G=!1,O=null)}}else G=!1}var ot;if(typeof I=="function")ot=function(){I(Z)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,ht=gt.port2;gt.port1.onmessage=Z,ot=function(){ht.postMessage(null)}}else ot=function(){T(Z,0)};function wt(mt){O=mt,G||(G=!0,ot())}function Ct(mt,Y){E=T(function(){mt(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(mt){mt.callback=null},t.unstable_continueExecution=function(){C||p||(C=!0,wt(k))},t.unstable_forceFrameRate=function(mt){0>mt||125<mt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<mt?Math.floor(1e3/mt):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(mt){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var Q=x;x=Y;try{return mt()}finally{x=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(mt,Y){switch(mt){case 1:case 2:case 3:case 4:case 5:break;default:mt=3}var Q=x;x=mt;try{return Y()}finally{x=Q}},t.unstable_scheduleCallback=function(mt,Y,Q){var lt=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?lt+Q:lt):Q=lt,mt){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=Q+_t,mt={id:g++,callback:Y,priorityLevel:mt,startTime:Q,expirationTime:_t,sortIndex:-1},Q>lt?(mt.sortIndex=Q,e(y,mt),n(f)===null&&mt===n(y)&&(B?(M(E),E=-1):B=!0,Ct(F,Q-lt))):(mt.sortIndex=_t,e(f,mt),C||p||(C=!0,wt(k))),mt},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(mt){var Y=x;return function(){var Q=x;x=Y;try{return mt.apply(this,arguments)}finally{x=Q}}}})(k_);D_.exports=k_;var Lx=D_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_=nt,Fi=Lx;function xt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R_=new Set,Eo={};function tr(t,e){Dr(t,e),Dr(t+"Capture",e)}function Dr(t,e){for(Eo[t]=e,t=0;t<e.length;t++)R_.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tc=Object.prototype.hasOwnProperty,Rx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zd={},Qd={};function Fx(t){return Tc.call(Qd,t)?!0:Tc.call(Zd,t)?!1:Rx.test(t)?Qd[t]=!0:(Zd[t]=!0,!1)}function Ex(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gx(t,e,n,s){if(e===null||typeof e>"u"||Ex(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pi(t,e,n,s,o,a,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=c}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new pi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new pi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new pi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new pi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new pi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new pi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new pi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new pi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new pi(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uh=/[\-:]([a-z])/g;function Wh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uh,Wh);Ke[e]=new pi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uh,Wh);Ke[e]=new pi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uh,Wh);Ke[e]=new pi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new pi(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new pi(t,1,!1,t.toLowerCase(),null,!0,!0)});function qh(t,e,n,s){var o=Ke.hasOwnProperty(e)?Ke[e]:null;(o!==null?o.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gx(e,n,o,s)&&(n=null),s||o===null?Fx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,s=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Un=L_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ja=Symbol.for("react.element"),ur=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),Hh=Symbol.for("react.strict_mode"),Ic=Symbol.for("react.profiler"),F_=Symbol.for("react.provider"),E_=Symbol.for("react.context"),Jh=Symbol.for("react.forward_ref"),Dc=Symbol.for("react.suspense"),kc=Symbol.for("react.suspense_list"),Xh=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),G_=Symbol.for("react.offscreen"),Kd=Symbol.iterator;function uo(t){return t===null||typeof t!="object"?null:(t=Kd&&t[Kd]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,Wu;function vo(t){if(Wu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wu=e&&e[1]||""}return`
`+Wu+t}var qu=!1;function Hu(t,e){if(!t||qu)return"";qu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(y){var s=y}Reflect.construct(t,[],e)}else{try{e.call()}catch(y){s=y}t.call(e.prototype)}else{try{throw Error()}catch(y){s=y}t()}}catch(y){if(y&&s&&typeof y.stack=="string"){for(var o=y.stack.split(`
`),a=s.stack.split(`
`),c=o.length-1,d=a.length-1;1<=c&&0<=d&&o[c]!==a[d];)d--;for(;1<=c&&0<=d;c--,d--)if(o[c]!==a[d]){if(c!==1||d!==1)do if(c--,d--,0>d||o[c]!==a[d]){var f=`
`+o[c].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=c&&0<=d);break}}}finally{qu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vo(t):""}function jx(t){switch(t.tag){case 5:return vo(t.type);case 16:return vo("Lazy");case 13:return vo("Suspense");case 19:return vo("SuspenseList");case 0:case 2:case 15:return t=Hu(t.type,!1),t;case 11:return t=Hu(t.type.render,!1),t;case 1:return t=Hu(t.type,!0),t;default:return""}}function Lc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cr:return"Fragment";case ur:return"Portal";case Ic:return"Profiler";case Hh:return"StrictMode";case Dc:return"Suspense";case kc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case E_:return(t.displayName||"Context")+".Consumer";case F_:return(t._context.displayName||"Context")+".Provider";case Jh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xh:return e=t.displayName||null,e!==null?e:Lc(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return Lc(t(e))}catch{}}return null}function Nx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lc(e);case 8:return e===Hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zx(t){var e=j_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(c){s=""+c,a.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(c){s=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Na(t){t._valueTracker||(t._valueTracker=zx(t))}function N_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=j_(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function vl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rc(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yd(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=vs(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function z_(t,e){e=e.checked,e!=null&&qh(t,"checked",e,!1)}function Fc(t,e){z_(t,e);var n=vs(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ec(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ec(t,e.type,vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ec(t,e,n){(e!=="number"||vl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xo=Array.isArray;function Vr(t,e,n,s){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&s&&(t[n].defaultSelected=!0)}else{for(n=""+vs(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,s&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Gc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xt(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ef(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(xt(92));if(xo(n)){if(1<n.length)throw Error(xt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vs(n)}}function O_(t,e){var n=vs(e.value),s=vs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function nf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function U_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?U_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var za,W_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(za=za||document.createElement("div"),za.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=za.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ox=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(t){Ox.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bo[e]=Bo[t]})});function q_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bo.hasOwnProperty(t)&&Bo[t]?(""+e).trim():e+"px"}function H_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,o=q_(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,o):t[n]=o}}var Ux=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nc(t,e){if(e){if(Ux[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(xt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xt(62))}}function zc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oc=null;function $h(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uc=null,br=null,Pr=null;function sf(t){if(t=ua(t)){if(typeof Uc!="function")throw Error(xt(280));var e=t.stateNode;e&&(e=su(e),Uc(t.stateNode,t.type,e))}}function J_(t){br?Pr?Pr.push(t):Pr=[t]:br=t}function X_(){if(br){var t=br,e=Pr;if(Pr=br=null,sf(t),e)for(t=0;t<e.length;t++)sf(e[t])}}function $_(t,e){return t(e)}function Z_(){}var Ju=!1;function Q_(t,e,n){if(Ju)return t(e,n);Ju=!0;try{return $_(t,e,n)}finally{Ju=!1,(br!==null||Pr!==null)&&(Z_(),X_())}}function jo(t,e){var n=t.stateNode;if(n===null)return null;var s=su(n);if(s===null)return null;n=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(xt(231,e,typeof n));return n}var Wc=!1;if(jn)try{var co={};Object.defineProperty(co,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{Wc=!1}function Wx(t,e,n,s,o,a,c,d,f){var y=Array.prototype.slice.call(arguments,3);try{e.apply(n,y)}catch(g){this.onError(g)}}var Ao=!1,xl=null,Sl=!1,qc=null,qx={onError:function(t){Ao=!0,xl=t}};function Hx(t,e,n,s,o,a,c,d,f){Ao=!1,xl=null,Wx.apply(qx,arguments)}function Jx(t,e,n,s,o,a,c,d,f){if(Hx.apply(this,arguments),Ao){if(Ao){var y=xl;Ao=!1,xl=null}else throw Error(xt(198));Sl||(Sl=!0,qc=y)}}function er(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rf(t){if(er(t)!==t)throw Error(xt(188))}function Xx(t){var e=t.alternate;if(!e){if(e=er(t),e===null)throw Error(xt(188));return e!==t?null:t}for(var n=t,s=e;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return rf(o),t;if(a===s)return rf(o),e;a=a.sibling}throw Error(xt(188))}if(n.return!==s.return)n=o,s=a;else{for(var c=!1,d=o.child;d;){if(d===n){c=!0,n=o,s=a;break}if(d===s){c=!0,s=o,n=a;break}d=d.sibling}if(!c){for(d=a.child;d;){if(d===n){c=!0,n=a,s=o;break}if(d===s){c=!0,s=a,n=o;break}d=d.sibling}if(!c)throw Error(xt(189))}}if(n.alternate!==s)throw Error(xt(190))}if(n.tag!==3)throw Error(xt(188));return n.stateNode.current===n?t:e}function Y_(t){return t=Xx(t),t!==null?ty(t):null}function ty(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ty(t);if(e!==null)return e;t=t.sibling}return null}var ey=Fi.unstable_scheduleCallback,of=Fi.unstable_cancelCallback,$x=Fi.unstable_shouldYield,Zx=Fi.unstable_requestPaint,Ie=Fi.unstable_now,Qx=Fi.unstable_getCurrentPriorityLevel,Zh=Fi.unstable_ImmediatePriority,iy=Fi.unstable_UserBlockingPriority,wl=Fi.unstable_NormalPriority,Kx=Fi.unstable_LowPriority,ny=Fi.unstable_IdlePriority,tu=null,pn=null;function Yx(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(tu,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:iS,tS=Math.log,eS=Math.LN2;function iS(t){return t>>>=0,t===0?32:31-(tS(t)/eS|0)|0}var Oa=64,Ua=4194304;function So(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cl(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,o=t.suspendedLanes,a=t.pingedLanes,c=n&268435455;if(c!==0){var d=c&~o;d!==0?s=So(d):(a&=c,a!==0&&(s=So(a)))}else c=n&~o,c!==0?s=So(c):a!==0&&(s=So(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&o)&&(o=s&-s,a=e&-e,o>=a||o===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-sn(e),o=1<<n,s|=t[n],e&=~o;return s}function nS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sS(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,o=t.expirationTimes,a=t.pendingLanes;0<a;){var c=31-sn(a),d=1<<c,f=o[c];f===-1?(!(d&n)||d&s)&&(o[c]=nS(d,e)):f<=e&&(t.expiredLanes|=d),a&=~d}}function Hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sy(){var t=Oa;return Oa<<=1,!(Oa&4194240)&&(Oa=64),t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function aa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function rS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-sn(n),a=1<<o;e[o]=0,s[o]=-1,t[o]=-1,n&=~a}}function Qh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-sn(n),o=1<<s;o&e|t[s]&e&&(t[s]|=e),n&=~o}}var ie=0;function ry(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oy,Kh,ay,ly,uy,Jc=!1,Wa=[],us=null,cs=null,hs=null,No=new Map,zo=new Map,ss=[],oS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function af(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":No.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(e.pointerId)}}function ho(t,e,n,s,o,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[o]},e!==null&&(e=ua(e),e!==null&&Kh(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function aS(t,e,n,s,o){switch(e){case"focusin":return us=ho(us,t,e,n,s,o),!0;case"dragenter":return cs=ho(cs,t,e,n,s,o),!0;case"mouseover":return hs=ho(hs,t,e,n,s,o),!0;case"pointerover":var a=o.pointerId;return No.set(a,ho(No.get(a)||null,t,e,n,s,o)),!0;case"gotpointercapture":return a=o.pointerId,zo.set(a,ho(zo.get(a)||null,t,e,n,s,o)),!0}return!1}function cy(t){var e=zs(t.target);if(e!==null){var n=er(e);if(n!==null){if(e=n.tag,e===13){if(e=K_(n),e!==null){t.blockedOn=e,uy(t.priority,function(){ay(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Oc=s,n.target.dispatchEvent(s),Oc=null}else return e=ua(n),e!==null&&Kh(e),t.blockedOn=n,!1;e.shift()}return!0}function lf(t,e,n){ol(t)&&n.delete(e)}function lS(){Jc=!1,us!==null&&ol(us)&&(us=null),cs!==null&&ol(cs)&&(cs=null),hs!==null&&ol(hs)&&(hs=null),No.forEach(lf),zo.forEach(lf)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,Jc||(Jc=!0,Fi.unstable_scheduleCallback(Fi.unstable_NormalPriority,lS)))}function Oo(t){function e(o){return mo(o,t)}if(0<Wa.length){mo(Wa[0],t);for(var n=1;n<Wa.length;n++){var s=Wa[n];s.blockedOn===t&&(s.blockedOn=null)}}for(us!==null&&mo(us,t),cs!==null&&mo(cs,t),hs!==null&&mo(hs,t),No.forEach(e),zo.forEach(e),n=0;n<ss.length;n++)s=ss[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<ss.length&&(n=ss[0],n.blockedOn===null);)cy(n),n.blockedOn===null&&ss.shift()}var Mr=Un.ReactCurrentBatchConfig,Bl=!0;function uS(t,e,n,s){var o=ie,a=Mr.transition;Mr.transition=null;try{ie=1,Yh(t,e,n,s)}finally{ie=o,Mr.transition=a}}function cS(t,e,n,s){var o=ie,a=Mr.transition;Mr.transition=null;try{ie=4,Yh(t,e,n,s)}finally{ie=o,Mr.transition=a}}function Yh(t,e,n,s){if(Bl){var o=Xc(t,e,n,s);if(o===null)sc(t,e,s,Al,n),af(t,s);else if(aS(o,t,e,n,s))s.stopPropagation();else if(af(t,s),e&4&&-1<oS.indexOf(t)){for(;o!==null;){var a=ua(o);if(a!==null&&oy(a),a=Xc(t,e,n,s),a===null&&sc(t,e,s,Al,n),a===o)break;o=a}o!==null&&s.stopPropagation()}else sc(t,e,s,null,n)}}var Al=null;function Xc(t,e,n,s){if(Al=null,t=$h(s),t=zs(t),t!==null)if(e=er(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Al=t,null}function hy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qx()){case Zh:return 1;case iy:return 4;case wl:case Kx:return 16;case ny:return 536870912;default:return 16}default:return 16}}var os=null,tm=null,al=null;function my(){if(al)return al;var t,e=tm,n=e.length,s,o="value"in os?os.value:os.textContent,a=o.length;for(t=0;t<n&&e[t]===o[t];t++);var c=n-t;for(s=1;s<=c&&e[n-s]===o[a-s];s++);return al=o.slice(t,1<s?1-s:void 0)}function ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qa(){return!0}function uf(){return!1}function ji(t){function e(n,s,o,a,c){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=a,this.target=c,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qa:uf,this.isPropagationStopped=uf,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),e}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},em=ji(zr),la=we({},zr,{view:0,detail:0}),hS=ji(la),$u,Zu,fo,eu=we({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:im,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fo&&(fo&&t.type==="mousemove"?($u=t.screenX-fo.screenX,Zu=t.screenY-fo.screenY):Zu=$u=0,fo=t),$u)},movementY:function(t){return"movementY"in t?t.movementY:Zu}}),cf=ji(eu),mS=we({},eu,{dataTransfer:0}),dS=ji(mS),fS=we({},la,{relatedTarget:0}),Qu=ji(fS),pS=we({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),_S=ji(pS),yS=we({},zr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gS=ji(yS),vS=we({},zr,{data:0}),hf=ji(vS),xS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wS[t])?!!e[t]:!1}function im(){return CS}var BS=we({},la,{key:function(t){if(t.key){var e=xS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:im,charCode:function(t){return t.type==="keypress"?ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AS=ji(BS),VS=we({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mf=ji(VS),bS=we({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:im}),PS=ji(bS),MS=we({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),TS=ji(MS),IS=we({},eu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DS=ji(IS),kS=[9,13,27,32],nm=jn&&"CompositionEvent"in window,Vo=null;jn&&"documentMode"in document&&(Vo=document.documentMode);var LS=jn&&"TextEvent"in window&&!Vo,dy=jn&&(!nm||Vo&&8<Vo&&11>=Vo),df=" ",ff=!1;function fy(t,e){switch(t){case"keyup":return kS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function py(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hr=!1;function RS(t,e){switch(t){case"compositionend":return py(e);case"keypress":return e.which!==32?null:(ff=!0,df);case"textInput":return t=e.data,t===df&&ff?null:t;default:return null}}function FS(t,e){if(hr)return t==="compositionend"||!nm&&fy(t,e)?(t=my(),al=tm=os=null,hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dy&&e.locale!=="ko"?null:e.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ES[t.type]:e==="textarea"}function _y(t,e,n,s){J_(s),e=Vl(e,"onChange"),0<e.length&&(n=new em("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var bo=null,Uo=null;function GS(t){by(t,0)}function iu(t){var e=fr(t);if(N_(e))return t}function jS(t,e){if(t==="change")return e}var yy=!1;if(jn){var Ku;if(jn){var Yu="oninput"in document;if(!Yu){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),Yu=typeof _f.oninput=="function"}Ku=Yu}else Ku=!1;yy=Ku&&(!document.documentMode||9<document.documentMode)}function yf(){bo&&(bo.detachEvent("onpropertychange",gy),Uo=bo=null)}function gy(t){if(t.propertyName==="value"&&iu(Uo)){var e=[];_y(e,Uo,t,$h(t)),Q_(GS,e)}}function NS(t,e,n){t==="focusin"?(yf(),bo=e,Uo=n,bo.attachEvent("onpropertychange",gy)):t==="focusout"&&yf()}function zS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(Uo)}function OS(t,e){if(t==="click")return iu(e)}function US(t,e){if(t==="input"||t==="change")return iu(e)}function WS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:WS;function Wo(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!Tc.call(e,o)||!on(t[o],e[o]))return!1}return!0}function gf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vf(t,e){var n=gf(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=gf(n)}}function vy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xy(){for(var t=window,e=vl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vl(t.document)}return e}function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qS(t){var e=xy(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vy(n.ownerDocument.documentElement,n)){if(s!==null&&sm(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,a=Math.min(s.start,o);s=s.end===void 0?a:Math.min(s.end,o),!t.extend&&a>s&&(o=s,s=a,a=o),o=vf(n,a);var c=vf(n,s);o&&c&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HS=jn&&"documentMode"in document&&11>=document.documentMode,mr=null,$c=null,Po=null,Zc=!1;function xf(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zc||mr==null||mr!==vl(s)||(s=mr,"selectionStart"in s&&sm(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Po&&Wo(Po,s)||(Po=s,s=Vl($c,"onSelect"),0<s.length&&(e=new em("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=mr)))}function Ha(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dr={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionend:Ha("Transition","TransitionEnd")},tc={},Sy={};jn&&(Sy=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function nu(t){if(tc[t])return tc[t];if(!dr[t])return t;var e=dr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sy)return tc[t]=e[n];return t}var wy=nu("animationend"),Cy=nu("animationiteration"),By=nu("animationstart"),Ay=nu("transitionend"),Vy=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bs(t,e){Vy.set(t,e),tr(e,[t])}for(var ec=0;ec<Sf.length;ec++){var ic=Sf[ec],JS=ic.toLowerCase(),XS=ic[0].toUpperCase()+ic.slice(1);Bs(JS,"on"+XS)}Bs(wy,"onAnimationEnd");Bs(Cy,"onAnimationIteration");Bs(By,"onAnimationStart");Bs("dblclick","onDoubleClick");Bs("focusin","onFocus");Bs("focusout","onBlur");Bs(Ay,"onTransitionEnd");Dr("onMouseEnter",["mouseout","mouseover"]);Dr("onMouseLeave",["mouseout","mouseover"]);Dr("onPointerEnter",["pointerout","pointerover"]);Dr("onPointerLeave",["pointerout","pointerover"]);tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$S=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function wf(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Jx(s,e,void 0,t),t.currentTarget=null}function by(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],o=s.event;s=s.listeners;t:{var a=void 0;if(e)for(var c=s.length-1;0<=c;c--){var d=s[c],f=d.instance,y=d.currentTarget;if(d=d.listener,f!==a&&o.isPropagationStopped())break t;wf(o,d,y),a=f}else for(c=0;c<s.length;c++){if(d=s[c],f=d.instance,y=d.currentTarget,d=d.listener,f!==a&&o.isPropagationStopped())break t;wf(o,d,y),a=f}}}if(Sl)throw t=qc,Sl=!1,qc=null,t}function he(t,e){var n=e[eh];n===void 0&&(n=e[eh]=new Set);var s=t+"__bubble";n.has(s)||(Py(e,t,2,!1),n.add(s))}function nc(t,e,n){var s=0;e&&(s|=4),Py(n,t,s,e)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function qo(t){if(!t[Ja]){t[Ja]=!0,R_.forEach(function(n){n!=="selectionchange"&&($S.has(n)||nc(n,!1,t),nc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ja]||(e[Ja]=!0,nc("selectionchange",!1,e))}}function Py(t,e,n,s){switch(hy(e)){case 1:var o=uS;break;case 4:o=cS;break;default:o=Yh}n=o.bind(null,e,n,t),o=void 0,!Wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),s?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function sc(t,e,n,s,o){var a=s;if(!(e&1)&&!(e&2)&&s!==null)t:for(;;){if(s===null)return;var c=s.tag;if(c===3||c===4){var d=s.stateNode.containerInfo;if(d===o||d.nodeType===8&&d.parentNode===o)break;if(c===4)for(c=s.return;c!==null;){var f=c.tag;if((f===3||f===4)&&(f=c.stateNode.containerInfo,f===o||f.nodeType===8&&f.parentNode===o))return;c=c.return}for(;d!==null;){if(c=zs(d),c===null)return;if(f=c.tag,f===5||f===6){s=a=c;continue t}d=d.parentNode}}s=s.return}Q_(function(){var y=a,g=$h(n),S=[];t:{var x=Vy.get(t);if(x!==void 0){var p=em,C=t;switch(t){case"keypress":if(ll(n)===0)break t;case"keydown":case"keyup":p=AS;break;case"focusin":C="focus",p=Qu;break;case"focusout":C="blur",p=Qu;break;case"beforeblur":case"afterblur":p=Qu;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PS;break;case wy:case Cy:case By:p=_S;break;case Ay:p=TS;break;case"scroll":p=hS;break;case"wheel":p=DS;break;case"copy":case"cut":case"paste":p=gS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=mf}var B=(e&4)!==0,T=!B&&t==="scroll",M=B?x!==null?x+"Capture":null:x;B=[];for(var I=y,L;I!==null;){L=I;var F=L.stateNode;if(L.tag===5&&F!==null&&(L=F,M!==null&&(F=jo(I,M),F!=null&&B.push(Ho(I,F,L)))),T)break;I=I.return}0<B.length&&(x=new p(x,C,null,n,g),S.push({event:x,listeners:B}))}}if(!(e&7)){t:{if(x=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",x&&n!==Oc&&(C=n.relatedTarget||n.fromElement)&&(zs(C)||C[Nn]))break t;if((p||x)&&(x=g.window===g?g:(x=g.ownerDocument)?x.defaultView||x.parentWindow:window,p?(C=n.relatedTarget||n.toElement,p=y,C=C?zs(C):null,C!==null&&(T=er(C),C!==T||C.tag!==5&&C.tag!==6)&&(C=null)):(p=null,C=y),p!==C)){if(B=cf,F="onMouseLeave",M="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(B=mf,F="onPointerLeave",M="onPointerEnter",I="pointer"),T=p==null?x:fr(p),L=C==null?x:fr(C),x=new B(F,I+"leave",p,n,g),x.target=T,x.relatedTarget=L,F=null,zs(g)===y&&(B=new B(M,I+"enter",C,n,g),B.target=L,B.relatedTarget=T,F=B),T=F,p&&C)e:{for(B=p,M=C,I=0,L=B;L;L=lr(L))I++;for(L=0,F=M;F;F=lr(F))L++;for(;0<I-L;)B=lr(B),I--;for(;0<L-I;)M=lr(M),L--;for(;I--;){if(B===M||M!==null&&B===M.alternate)break e;B=lr(B),M=lr(M)}B=null}else B=null;p!==null&&Cf(S,x,p,B,!1),C!==null&&T!==null&&Cf(S,T,C,B,!0)}}t:{if(x=y?fr(y):window,p=x.nodeName&&x.nodeName.toLowerCase(),p==="select"||p==="input"&&x.type==="file")var k=jS;else if(pf(x))if(yy)k=US;else{k=zS;var G=NS}else(p=x.nodeName)&&p.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(k=OS);if(k&&(k=k(t,y))){_y(S,k,n,g);break t}G&&G(t,x,y),t==="focusout"&&(G=x._wrapperState)&&G.controlled&&x.type==="number"&&Ec(x,"number",x.value)}switch(G=y?fr(y):window,t){case"focusin":(pf(G)||G.contentEditable==="true")&&(mr=G,$c=y,Po=null);break;case"focusout":Po=$c=mr=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,xf(S,n,g);break;case"selectionchange":if(HS)break;case"keydown":case"keyup":xf(S,n,g)}var O;if(nm)t:{switch(t){case"compositionstart":var E="onCompositionStart";break t;case"compositionend":E="onCompositionEnd";break t;case"compositionupdate":E="onCompositionUpdate";break t}E=void 0}else hr?fy(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(dy&&n.locale!=="ko"&&(hr||E!=="onCompositionStart"?E==="onCompositionEnd"&&hr&&(O=my()):(os=g,tm="value"in os?os.value:os.textContent,hr=!0)),G=Vl(y,E),0<G.length&&(E=new hf(E,t,null,n,g),S.push({event:E,listeners:G}),O?E.data=O:(O=py(n),O!==null&&(E.data=O)))),(O=LS?RS(t,n):FS(t,n))&&(y=Vl(y,"onBeforeInput"),0<y.length&&(g=new hf("onBeforeInput","beforeinput",null,n,g),S.push({event:g,listeners:y}),g.data=O))}by(S,e)})}function Ho(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vl(t,e){for(var n=e+"Capture",s=[];t!==null;){var o=t,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=jo(t,n),a!=null&&s.unshift(Ho(t,a,o)),a=jo(t,e),a!=null&&s.push(Ho(t,a,o))),t=t.return}return s}function lr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cf(t,e,n,s,o){for(var a=e._reactName,c=[];n!==null&&n!==s;){var d=n,f=d.alternate,y=d.stateNode;if(f!==null&&f===s)break;d.tag===5&&y!==null&&(d=y,o?(f=jo(n,a),f!=null&&c.unshift(Ho(n,f,d))):o||(f=jo(n,a),f!=null&&c.push(Ho(n,f,d)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var ZS=/\r\n?/g,QS=/\u0000|\uFFFD/g;function Bf(t){return(typeof t=="string"?t:""+t).replace(ZS,`
`).replace(QS,"")}function Xa(t,e,n){if(e=Bf(e),Bf(t)!==e&&n)throw Error(xt(425))}function bl(){}var Qc=null,Kc=null;function Yc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,KS=typeof clearTimeout=="function"?clearTimeout:void 0,Af=typeof Promise=="function"?Promise:void 0,YS=typeof queueMicrotask=="function"?queueMicrotask:typeof Af<"u"?function(t){return Af.resolve(null).then(t).catch(tw)}:th;function tw(t){setTimeout(function(){throw t})}function rc(t,e){var n=e,s=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(s===0){t.removeChild(o),Oo(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=o}while(n);Oo(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Or=Math.random().toString(36).slice(2),fn="__reactFiber$"+Or,Jo="__reactProps$"+Or,Nn="__reactContainer$"+Or,eh="__reactEvents$"+Or,ew="__reactListeners$"+Or,iw="__reactHandles$"+Or;function zs(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vf(t);t!==null;){if(n=t[fn])return n;t=Vf(t)}return e}t=n,n=t.parentNode}return null}function ua(t){return t=t[fn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(xt(33))}function su(t){return t[Jo]||null}var ih=[],pr=-1;function As(t){return{current:t}}function me(t){0>pr||(t.current=ih[pr],ih[pr]=null,pr--)}function ue(t,e){pr++,ih[pr]=t.current,t.current=e}var xs={},ui=As(xs),Bi=As(!1),$s=xs;function kr(t,e){var n=t.type.contextTypes;if(!n)return xs;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(t){return t=t.childContextTypes,t!=null}function Pl(){me(Bi),me(ui)}function bf(t,e,n){if(ui.current!==xs)throw Error(xt(168));ue(ui,e),ue(Bi,n)}function My(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var o in s)if(!(o in e))throw Error(xt(108,Nx(t)||"Unknown",o));return we({},n,s)}function Ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xs,$s=ui.current,ue(ui,t),ue(Bi,Bi.current),!0}function Pf(t,e,n){var s=t.stateNode;if(!s)throw Error(xt(169));n?(t=My(t,e,$s),s.__reactInternalMemoizedMergedChildContext=t,me(Bi),me(ui),ue(ui,t)):me(Bi),ue(Bi,n)}var In=null,ru=!1,oc=!1;function Ty(t){In===null?In=[t]:In.push(t)}function nw(t){ru=!0,Ty(t)}function Vs(){if(!oc&&In!==null){oc=!0;var t=0,e=ie;try{var n=In;for(ie=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}In=null,ru=!1}catch(o){throw In!==null&&(In=In.slice(t+1)),ey(Zh,Vs),o}finally{ie=e,oc=!1}}return null}var _r=[],yr=0,Tl=null,Il=0,qi=[],Hi=0,Zs=null,Dn=1,kn="";function Es(t,e){_r[yr++]=Il,_r[yr++]=Tl,Tl=t,Il=e}function Iy(t,e,n){qi[Hi++]=Dn,qi[Hi++]=kn,qi[Hi++]=Zs,Zs=t;var s=Dn;t=kn;var o=32-sn(s)-1;s&=~(1<<o),n+=1;var a=32-sn(e)+o;if(30<a){var c=o-o%5;a=(s&(1<<c)-1).toString(32),s>>=c,o-=c,Dn=1<<32-sn(e)+o|n<<o|s,kn=a+t}else Dn=1<<a|n<<o|s,kn=t}function rm(t){t.return!==null&&(Es(t,1),Iy(t,1,0))}function om(t){for(;t===Tl;)Tl=_r[--yr],_r[yr]=null,Il=_r[--yr],_r[yr]=null;for(;t===Zs;)Zs=qi[--Hi],qi[Hi]=null,kn=qi[--Hi],qi[Hi]=null,Dn=qi[--Hi],qi[Hi]=null}var Ri=null,Li=null,_e=!1,nn=null;function Dy(t,e){var n=Ji(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ri=t,Li=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ri=t,Li=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zs!==null?{id:Dn,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ji(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ri=t,Li=null,!0):!1;default:return!1}}function nh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sh(t){if(_e){var e=Li;if(e){var n=e;if(!Mf(t,e)){if(nh(t))throw Error(xt(418));e=ms(n.nextSibling);var s=Ri;e&&Mf(t,e)?Dy(s,n):(t.flags=t.flags&-4097|2,_e=!1,Ri=t)}}else{if(nh(t))throw Error(xt(418));t.flags=t.flags&-4097|2,_e=!1,Ri=t}}}function Tf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ri=t}function $a(t){if(t!==Ri)return!1;if(!_e)return Tf(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yc(t.type,t.memoizedProps)),e&&(e=Li)){if(nh(t))throw ky(),Error(xt(418));for(;e;)Dy(t,e),e=ms(e.nextSibling)}if(Tf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(xt(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Li=ms(t.nextSibling);break t}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Li=null}}else Li=Ri?ms(t.stateNode.nextSibling):null;return!0}function ky(){for(var t=Li;t;)t=ms(t.nextSibling)}function Lr(){Li=Ri=null,_e=!1}function am(t){nn===null?nn=[t]:nn.push(t)}var sw=Un.ReactCurrentBatchConfig;function tn(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Dl=As(null),kl=null,gr=null,lm=null;function um(){lm=gr=kl=null}function cm(t){var e=Dl.current;me(Dl),t._currentValue=e}function rh(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Tr(t,e){kl=t,lm=gr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ci=!0),t.firstContext=null)}function $i(t){var e=t._currentValue;if(lm!==t)if(t={context:t,memoizedValue:e,next:null},gr===null){if(kl===null)throw Error(xt(308));gr=t,kl.dependencies={lanes:0,firstContext:t}}else gr=gr.next=t;return e}var Os=null;function hm(t){Os===null?Os=[t]:Os.push(t)}function Ly(t,e,n,s){var o=e.interleaved;return o===null?(n.next=n,hm(e)):(n.next=o.next,o.next=n),e.interleaved=n,zn(t,s)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var is=!1;function mm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ry(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ds(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,te&2){var o=s.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e,zn(t,n)}return o=s.interleaved,o===null?(e.next=e,hm(s)):(e.next=o.next,o.next=e),s.interleaved=e,zn(t,n)}function ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Qh(t,n)}}function If(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=c:a=a.next=c,n=n.next}while(n!==null);a===null?o=a=e:a=a.next=e}else o=a=e;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ll(t,e,n,s){var o=t.updateQueue;is=!1;var a=o.firstBaseUpdate,c=o.lastBaseUpdate,d=o.shared.pending;if(d!==null){o.shared.pending=null;var f=d,y=f.next;f.next=null,c===null?a=y:c.next=y,c=f;var g=t.alternate;g!==null&&(g=g.updateQueue,d=g.lastBaseUpdate,d!==c&&(d===null?g.firstBaseUpdate=y:d.next=y,g.lastBaseUpdate=f))}if(a!==null){var S=o.baseState;c=0,g=y=f=null,d=a;do{var x=d.lane,p=d.eventTime;if((s&x)===x){g!==null&&(g=g.next={eventTime:p,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});t:{var C=t,B=d;switch(x=e,p=n,B.tag){case 1:if(C=B.payload,typeof C=="function"){S=C.call(p,S,x);break t}S=C;break t;case 3:C.flags=C.flags&-65537|128;case 0:if(C=B.payload,x=typeof C=="function"?C.call(p,S,x):C,x==null)break t;S=we({},S,x);break t;case 2:is=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,x=o.effects,x===null?o.effects=[d]:x.push(d))}else p={eventTime:p,lane:x,tag:d.tag,payload:d.payload,callback:d.callback,next:null},g===null?(y=g=p,f=S):g=g.next=p,c|=x;if(d=d.next,d===null){if(d=o.shared.pending,d===null)break;x=d,d=x.next,x.next=null,o.lastBaseUpdate=x,o.shared.pending=null}}while(!0);if(g===null&&(f=S),o.baseState=f,o.firstBaseUpdate=y,o.lastBaseUpdate=g,e=o.shared.interleaved,e!==null){o=e;do c|=o.lane,o=o.next;while(o!==e)}else a===null&&(o.shared.lanes=0);Ks|=c,t.lanes=c,t.memoizedState=S}}function Df(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],o=s.callback;if(o!==null){if(s.callback=null,s=n,typeof o!="function")throw Error(xt(191,o));o.call(s)}}}var Fy=new L_.Component().refs;function oh(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ou={isMounted:function(t){return(t=t._reactInternals)?er(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=di(),o=ps(t),a=Rn(s,o);a.payload=e,n!=null&&(a.callback=n),e=ds(t,a,o),e!==null&&(rn(e,t,o,s),ul(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=di(),o=ps(t),a=Rn(s,o);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ds(t,a,o),e!==null&&(rn(e,t,o,s),ul(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=di(),s=ps(t),o=Rn(n,s);o.tag=2,e!=null&&(o.callback=e),e=ds(t,o,s),e!==null&&(rn(e,t,s,n),ul(e,t,s))}};function kf(t,e,n,s,o,a,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,c):e.prototype&&e.prototype.isPureReactComponent?!Wo(n,s)||!Wo(o,a):!0}function Ey(t,e,n){var s=!1,o=xs,a=e.contextType;return typeof a=="object"&&a!==null?a=$i(a):(o=Ai(e)?$s:ui.current,s=e.contextTypes,a=(s=s!=null)?kr(t,o):xs),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ou,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=a),e}function Lf(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&ou.enqueueReplaceState(e,e.state,null)}function ah(t,e,n,s){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=Fy,mm(t);var a=e.contextType;typeof a=="object"&&a!==null?o.context=$i(a):(a=Ai(e)?$s:ui.current,o.context=kr(t,a)),o.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(oh(t,e,a,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&ou.enqueueReplaceState(o,o.state,null),Ll(t,n,o,s),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function po(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(xt(309));var s=n.stateNode}if(!s)throw Error(xt(147,t));var o=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(c){var d=o.refs;d===Fy&&(d=o.refs={}),c===null?delete d[a]:d[a]=c},e._stringRef=a,e)}if(typeof t!="string")throw Error(xt(284));if(!n._owner)throw Error(xt(290,t))}return t}function Za(t,e){throw t=Object.prototype.toString.call(e),Error(xt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rf(t){var e=t._init;return e(t._payload)}function Gy(t){function e(M,I){if(t){var L=M.deletions;L===null?(M.deletions=[I],M.flags|=16):L.push(I)}}function n(M,I){if(!t)return null;for(;I!==null;)e(M,I),I=I.sibling;return null}function s(M,I){for(M=new Map;I!==null;)I.key!==null?M.set(I.key,I):M.set(I.index,I),I=I.sibling;return M}function o(M,I){return M=_s(M,I),M.index=0,M.sibling=null,M}function a(M,I,L){return M.index=L,t?(L=M.alternate,L!==null?(L=L.index,L<I?(M.flags|=2,I):L):(M.flags|=2,I)):(M.flags|=1048576,I)}function c(M){return t&&M.alternate===null&&(M.flags|=2),M}function d(M,I,L,F){return I===null||I.tag!==6?(I=dc(L,M.mode,F),I.return=M,I):(I=o(I,L),I.return=M,I)}function f(M,I,L,F){var k=L.type;return k===cr?g(M,I,L.props.children,F,L.key):I!==null&&(I.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===es&&Rf(k)===I.type)?(F=o(I,L.props),F.ref=po(M,I,L),F.return=M,F):(F=pl(L.type,L.key,L.props,null,M.mode,F),F.ref=po(M,I,L),F.return=M,F)}function y(M,I,L,F){return I===null||I.tag!==4||I.stateNode.containerInfo!==L.containerInfo||I.stateNode.implementation!==L.implementation?(I=fc(L,M.mode,F),I.return=M,I):(I=o(I,L.children||[]),I.return=M,I)}function g(M,I,L,F,k){return I===null||I.tag!==7?(I=Hs(L,M.mode,F,k),I.return=M,I):(I=o(I,L),I.return=M,I)}function S(M,I,L){if(typeof I=="string"&&I!==""||typeof I=="number")return I=dc(""+I,M.mode,L),I.return=M,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ja:return L=pl(I.type,I.key,I.props,null,M.mode,L),L.ref=po(M,null,I),L.return=M,L;case ur:return I=fc(I,M.mode,L),I.return=M,I;case es:var F=I._init;return S(M,F(I._payload),L)}if(xo(I)||uo(I))return I=Hs(I,M.mode,L,null),I.return=M,I;Za(M,I)}return null}function x(M,I,L,F){var k=I!==null?I.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return k!==null?null:d(M,I,""+L,F);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ja:return L.key===k?f(M,I,L,F):null;case ur:return L.key===k?y(M,I,L,F):null;case es:return k=L._init,x(M,I,k(L._payload),F)}if(xo(L)||uo(L))return k!==null?null:g(M,I,L,F,null);Za(M,L)}return null}function p(M,I,L,F,k){if(typeof F=="string"&&F!==""||typeof F=="number")return M=M.get(L)||null,d(I,M,""+F,k);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ja:return M=M.get(F.key===null?L:F.key)||null,f(I,M,F,k);case ur:return M=M.get(F.key===null?L:F.key)||null,y(I,M,F,k);case es:var G=F._init;return p(M,I,L,G(F._payload),k)}if(xo(F)||uo(F))return M=M.get(L)||null,g(I,M,F,k,null);Za(I,F)}return null}function C(M,I,L,F){for(var k=null,G=null,O=I,E=I=0,H=null;O!==null&&E<L.length;E++){O.index>E?(H=O,O=null):H=O.sibling;var q=x(M,O,L[E],F);if(q===null){O===null&&(O=H);break}t&&O&&q.alternate===null&&e(M,O),I=a(q,I,E),G===null?k=q:G.sibling=q,G=q,O=H}if(E===L.length)return n(M,O),_e&&Es(M,E),k;if(O===null){for(;E<L.length;E++)O=S(M,L[E],F),O!==null&&(I=a(O,I,E),G===null?k=O:G.sibling=O,G=O);return _e&&Es(M,E),k}for(O=s(M,O);E<L.length;E++)H=p(O,M,E,L[E],F),H!==null&&(t&&H.alternate!==null&&O.delete(H.key===null?E:H.key),I=a(H,I,E),G===null?k=H:G.sibling=H,G=H);return t&&O.forEach(function($){return e(M,$)}),_e&&Es(M,E),k}function B(M,I,L,F){var k=uo(L);if(typeof k!="function")throw Error(xt(150));if(L=k.call(L),L==null)throw Error(xt(151));for(var G=k=null,O=I,E=I=0,H=null,q=L.next();O!==null&&!q.done;E++,q=L.next()){O.index>E?(H=O,O=null):H=O.sibling;var $=x(M,O,q.value,F);if($===null){O===null&&(O=H);break}t&&O&&$.alternate===null&&e(M,O),I=a($,I,E),G===null?k=$:G.sibling=$,G=$,O=H}if(q.done)return n(M,O),_e&&Es(M,E),k;if(O===null){for(;!q.done;E++,q=L.next())q=S(M,q.value,F),q!==null&&(I=a(q,I,E),G===null?k=q:G.sibling=q,G=q);return _e&&Es(M,E),k}for(O=s(M,O);!q.done;E++,q=L.next())q=p(O,M,E,q.value,F),q!==null&&(t&&q.alternate!==null&&O.delete(q.key===null?E:q.key),I=a(q,I,E),G===null?k=q:G.sibling=q,G=q);return t&&O.forEach(function(Z){return e(M,Z)}),_e&&Es(M,E),k}function T(M,I,L,F){if(typeof L=="object"&&L!==null&&L.type===cr&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case ja:t:{for(var k=L.key,G=I;G!==null;){if(G.key===k){if(k=L.type,k===cr){if(G.tag===7){n(M,G.sibling),I=o(G,L.props.children),I.return=M,M=I;break t}}else if(G.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===es&&Rf(k)===G.type){n(M,G.sibling),I=o(G,L.props),I.ref=po(M,G,L),I.return=M,M=I;break t}n(M,G);break}else e(M,G);G=G.sibling}L.type===cr?(I=Hs(L.props.children,M.mode,F,L.key),I.return=M,M=I):(F=pl(L.type,L.key,L.props,null,M.mode,F),F.ref=po(M,I,L),F.return=M,M=F)}return c(M);case ur:t:{for(G=L.key;I!==null;){if(I.key===G)if(I.tag===4&&I.stateNode.containerInfo===L.containerInfo&&I.stateNode.implementation===L.implementation){n(M,I.sibling),I=o(I,L.children||[]),I.return=M,M=I;break t}else{n(M,I);break}else e(M,I);I=I.sibling}I=fc(L,M.mode,F),I.return=M,M=I}return c(M);case es:return G=L._init,T(M,I,G(L._payload),F)}if(xo(L))return C(M,I,L,F);if(uo(L))return B(M,I,L,F);Za(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,I!==null&&I.tag===6?(n(M,I.sibling),I=o(I,L),I.return=M,M=I):(n(M,I),I=dc(L,M.mode,F),I.return=M,M=I),c(M)):n(M,I)}return T}var Rr=Gy(!0),jy=Gy(!1),ca={},_n=As(ca),Xo=As(ca),$o=As(ca);function Us(t){if(t===ca)throw Error(xt(174));return t}function dm(t,e){switch(ue($o,e),ue(Xo,t),ue(_n,ca),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jc(e,t)}me(_n),ue(_n,e)}function Fr(){me(_n),me(Xo),me($o)}function Ny(t){Us($o.current);var e=Us(_n.current),n=jc(e,t.type);e!==n&&(ue(Xo,t),ue(_n,n))}function fm(t){Xo.current===t&&(me(_n),me(Xo))}var ve=As(0);function Rl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ac=[];function pm(){for(var t=0;t<ac.length;t++)ac[t]._workInProgressVersionPrimary=null;ac.length=0}var cl=Un.ReactCurrentDispatcher,lc=Un.ReactCurrentBatchConfig,Qs=0,Se=null,Fe=null,Ue=null,Fl=!1,Mo=!1,Zo=0,rw=0;function ii(){throw Error(xt(321))}function _m(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function ym(t,e,n,s,o,a){if(Qs=a,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cl.current=t===null||t.memoizedState===null?uw:cw,t=n(s,o),Mo){a=0;do{if(Mo=!1,Zo=0,25<=a)throw Error(xt(301));a+=1,Ue=Fe=null,e.updateQueue=null,cl.current=hw,t=n(s,o)}while(Mo)}if(cl.current=El,e=Fe!==null&&Fe.next!==null,Qs=0,Ue=Fe=Se=null,Fl=!1,e)throw Error(xt(300));return t}function gm(){var t=Zo!==0;return Zo=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Se.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Zi(){if(Fe===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ue===null?Se.memoizedState:Ue.next;if(e!==null)Ue=e,Fe=t;else{if(t===null)throw Error(xt(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ue===null?Se.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Qo(t,e){return typeof e=="function"?e(t):e}function uc(t){var e=Zi(),n=e.queue;if(n===null)throw Error(xt(311));n.lastRenderedReducer=t;var s=Fe,o=s.baseQueue,a=n.pending;if(a!==null){if(o!==null){var c=o.next;o.next=a.next,a.next=c}s.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,s=s.baseState;var d=c=null,f=null,y=a;do{var g=y.lane;if((Qs&g)===g)f!==null&&(f=f.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),s=y.hasEagerState?y.eagerState:t(s,y.action);else{var S={lane:g,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};f===null?(d=f=S,c=s):f=f.next=S,Se.lanes|=g,Ks|=g}y=y.next}while(y!==null&&y!==a);f===null?c=s:f.next=d,on(s,e.memoizedState)||(Ci=!0),e.memoizedState=s,e.baseState=c,e.baseQueue=f,n.lastRenderedState=s}if(t=n.interleaved,t!==null){o=t;do a=o.lane,Se.lanes|=a,Ks|=a,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cc(t){var e=Zi(),n=e.queue;if(n===null)throw Error(xt(311));n.lastRenderedReducer=t;var s=n.dispatch,o=n.pending,a=e.memoizedState;if(o!==null){n.pending=null;var c=o=o.next;do a=t(a,c.action),c=c.next;while(c!==o);on(a,e.memoizedState)||(Ci=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function zy(){}function Oy(t,e){var n=Se,s=Zi(),o=e(),a=!on(s.memoizedState,o);if(a&&(s.memoizedState=o,Ci=!0),s=s.queue,vm(qy.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Ko(9,Wy.bind(null,n,s,o,e),void 0,null),We===null)throw Error(xt(349));Qs&30||Uy(n,e,o)}return o}function Uy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wy(t,e,n,s){e.value=n,e.getSnapshot=s,Hy(e)&&Jy(t)}function qy(t,e,n){return n(function(){Hy(e)&&Jy(t)})}function Hy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function Jy(t){var e=zn(t,1);e!==null&&rn(e,t,1,-1)}function Ff(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t},e.queue=t,t=t.dispatch=lw.bind(null,Se,t),[e.memoizedState,t]}function Ko(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Xy(){return Zi().memoizedState}function hl(t,e,n,s){var o=dn();Se.flags|=t,o.memoizedState=Ko(1|e,n,void 0,s===void 0?null:s)}function au(t,e,n,s){var o=Zi();s=s===void 0?null:s;var a=void 0;if(Fe!==null){var c=Fe.memoizedState;if(a=c.destroy,s!==null&&_m(s,c.deps)){o.memoizedState=Ko(e,n,a,s);return}}Se.flags|=t,o.memoizedState=Ko(1|e,n,a,s)}function Ef(t,e){return hl(8390656,8,t,e)}function vm(t,e){return au(2048,8,t,e)}function $y(t,e){return au(4,2,t,e)}function Zy(t,e){return au(4,4,t,e)}function Qy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ky(t,e,n){return n=n!=null?n.concat([t]):null,au(4,4,Qy.bind(null,e,t),n)}function xm(){}function Yy(t,e){var n=Zi();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&_m(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function tg(t,e){var n=Zi();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&_m(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function eg(t,e,n){return Qs&21?(on(n,e)||(n=sy(),Se.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ci=!0),t.memoizedState=n)}function ow(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var s=lc.transition;lc.transition={};try{t(!1),e()}finally{ie=n,lc.transition=s}}function ig(){return Zi().memoizedState}function aw(t,e,n){var s=ps(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},ng(t))sg(e,n);else if(n=Ly(t,e,n,s),n!==null){var o=di();rn(n,t,s,o),rg(n,e,s)}}function lw(t,e,n){var s=ps(t),o={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(ng(t))sg(e,o);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var c=e.lastRenderedState,d=a(c,n);if(o.hasEagerState=!0,o.eagerState=d,on(d,c)){var f=e.interleaved;f===null?(o.next=o,hm(e)):(o.next=f.next,f.next=o),e.interleaved=o;return}}catch{}finally{}n=Ly(t,e,o,s),n!==null&&(o=di(),rn(n,t,s,o),rg(n,e,s))}}function ng(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function sg(t,e){Mo=Fl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rg(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Qh(t,n)}}var El={readContext:$i,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},uw={readContext:$i,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:$i,useEffect:Ef,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hl(4194308,4,Qy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return hl(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=dn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=aw.bind(null,Se,t),[s.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:Ff,useDebugValue:xm,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=Ff(!1),e=t[0];return t=ow.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Se,o=dn();if(_e){if(n===void 0)throw Error(xt(407));n=n()}else{if(n=e(),We===null)throw Error(xt(349));Qs&30||Uy(s,e,n)}o.memoizedState=n;var a={value:n,getSnapshot:e};return o.queue=a,Ef(qy.bind(null,s,a,t),[t]),s.flags|=2048,Ko(9,Wy.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=dn(),e=We.identifierPrefix;if(_e){var n=kn,s=Dn;n=(s&~(1<<32-sn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cw={readContext:$i,useCallback:Yy,useContext:$i,useEffect:vm,useImperativeHandle:Ky,useInsertionEffect:$y,useLayoutEffect:Zy,useMemo:tg,useReducer:uc,useRef:Xy,useState:function(){return uc(Qo)},useDebugValue:xm,useDeferredValue:function(t){var e=Zi();return eg(e,Fe.memoizedState,t)},useTransition:function(){var t=uc(Qo)[0],e=Zi().memoizedState;return[t,e]},useMutableSource:zy,useSyncExternalStore:Oy,useId:ig,unstable_isNewReconciler:!1},hw={readContext:$i,useCallback:Yy,useContext:$i,useEffect:vm,useImperativeHandle:Ky,useInsertionEffect:$y,useLayoutEffect:Zy,useMemo:tg,useReducer:cc,useRef:Xy,useState:function(){return cc(Qo)},useDebugValue:xm,useDeferredValue:function(t){var e=Zi();return Fe===null?e.memoizedState=t:eg(e,Fe.memoizedState,t)},useTransition:function(){var t=cc(Qo)[0],e=Zi().memoizedState;return[t,e]},useMutableSource:zy,useSyncExternalStore:Oy,useId:ig,unstable_isNewReconciler:!1};function Er(t,e){try{var n="",s=e;do n+=jx(s),s=s.return;while(s);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:o,digest:null}}function hc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mw=typeof WeakMap=="function"?WeakMap:Map;function og(t,e,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){jl||(jl=!0,gh=s),lh(t,e)},n}function ag(t,e,n){n=Rn(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var o=e.value;n.payload=function(){return s(o)},n.callback=function(){lh(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){lh(t,e),typeof s!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function Gf(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new mw;var o=new Set;s.set(e,o)}else o=s.get(e),o===void 0&&(o=new Set,s.set(e,o));o.has(n)||(o.add(n),t=Vw.bind(null,t,e,n),e.then(t,t))}function jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Nf(t,e,n,s,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rn(-1,1),e.tag=2,ds(n,e,1))),n.lanes|=1),t)}var dw=Un.ReactCurrentOwner,Ci=!1;function mi(t,e,n,s){e.child=t===null?jy(e,null,n,s):Rr(e,t.child,n,s)}function zf(t,e,n,s,o){n=n.render;var a=e.ref;return Tr(e,o),s=ym(t,e,n,s,a,o),n=gm(),t!==null&&!Ci?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,On(t,e,o)):(_e&&n&&rm(e),e.flags|=1,mi(t,e,s,o),e.child)}function Of(t,e,n,s,o){if(t===null){var a=n.type;return typeof a=="function"&&!Pm(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,lg(t,e,a,s,o)):(t=pl(n.type,null,s,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&o)){var c=a.memoizedProps;if(n=n.compare,n=n!==null?n:Wo,n(c,s)&&t.ref===e.ref)return On(t,e,o)}return e.flags|=1,t=_s(a,s),t.ref=e.ref,t.return=e,e.child=t}function lg(t,e,n,s,o){if(t!==null){var a=t.memoizedProps;if(Wo(a,s)&&t.ref===e.ref)if(Ci=!1,e.pendingProps=s=a,(t.lanes&o)!==0)t.flags&131072&&(Ci=!0);else return e.lanes=t.lanes,On(t,e,o)}return uh(t,e,n,s,o)}function ug(t,e,n){var s=e.pendingProps,o=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(xr,ki),ki|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(xr,ki),ki|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,ue(xr,ki),ki|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,ue(xr,ki),ki|=s;return mi(t,e,o,n),e.child}function cg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uh(t,e,n,s,o){var a=Ai(n)?$s:ui.current;return a=kr(e,a),Tr(e,o),n=ym(t,e,n,s,a,o),s=gm(),t!==null&&!Ci?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,On(t,e,o)):(_e&&s&&rm(e),e.flags|=1,mi(t,e,n,o),e.child)}function Uf(t,e,n,s,o){if(Ai(n)){var a=!0;Ml(e)}else a=!1;if(Tr(e,o),e.stateNode===null)ml(t,e),Ey(e,n,s),ah(e,n,s,o),s=!0;else if(t===null){var c=e.stateNode,d=e.memoizedProps;c.props=d;var f=c.context,y=n.contextType;typeof y=="object"&&y!==null?y=$i(y):(y=Ai(n)?$s:ui.current,y=kr(e,y));var g=n.getDerivedStateFromProps,S=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function";S||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==s||f!==y)&&Lf(e,c,s,y),is=!1;var x=e.memoizedState;c.state=x,Ll(e,s,c,o),f=e.memoizedState,d!==s||x!==f||Bi.current||is?(typeof g=="function"&&(oh(e,n,g,s),f=e.memoizedState),(d=is||kf(e,n,d,s,x,f,y))?(S||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=f),c.props=s,c.state=f,c.context=y,s=d):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{c=e.stateNode,Ry(t,e),d=e.memoizedProps,y=e.type===e.elementType?d:tn(e.type,d),c.props=y,S=e.pendingProps,x=c.context,f=n.contextType,typeof f=="object"&&f!==null?f=$i(f):(f=Ai(n)?$s:ui.current,f=kr(e,f));var p=n.getDerivedStateFromProps;(g=typeof p=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==S||x!==f)&&Lf(e,c,s,f),is=!1,x=e.memoizedState,c.state=x,Ll(e,s,c,o);var C=e.memoizedState;d!==S||x!==C||Bi.current||is?(typeof p=="function"&&(oh(e,n,p,s),C=e.memoizedState),(y=is||kf(e,n,y,s,x,C,f)||!1)?(g||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,C,f),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,C,f)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=C),c.props=s,c.state=C,c.context=f,s=y):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),s=!1)}return ch(t,e,n,s,a,o)}function ch(t,e,n,s,o,a){cg(t,e);var c=(e.flags&128)!==0;if(!s&&!c)return o&&Pf(e,n,!1),On(t,e,a);s=e.stateNode,dw.current=e;var d=c&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&c?(e.child=Rr(e,t.child,null,a),e.child=Rr(e,null,d,a)):mi(t,e,d,a),e.memoizedState=s.state,o&&Pf(e,n,!0),e.child}function hg(t){var e=t.stateNode;e.pendingContext?bf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bf(t,e.context,!1),dm(t,e.containerInfo)}function Wf(t,e,n,s,o){return Lr(),am(o),e.flags|=256,mi(t,e,n,s),e.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function mh(t){return{baseLanes:t,cachePool:null,transitions:null}}function mg(t,e,n){var s=e.pendingProps,o=ve.current,a=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=t!==null&&t.memoizedState===null?!1:(o&2)!==0),d?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),ue(ve,o&1),t===null)return sh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=s.children,t=s.fallback,a?(s=e.mode,a=e.child,c={mode:"hidden",children:c},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=c):a=cu(c,s,0,null),t=Hs(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=mh(n),e.memoizedState=hh,t):Sm(e,c));if(o=t.memoizedState,o!==null&&(d=o.dehydrated,d!==null))return fw(t,e,c,s,d,o,n);if(a){a=s.fallback,c=e.mode,o=t.child,d=o.sibling;var f={mode:"hidden",children:s.children};return!(c&1)&&e.child!==o?(s=e.child,s.childLanes=0,s.pendingProps=f,e.deletions=null):(s=_s(o,f),s.subtreeFlags=o.subtreeFlags&14680064),d!==null?a=_s(d,a):(a=Hs(a,c,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,c=t.child.memoizedState,c=c===null?mh(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=t.childLanes&~n,e.memoizedState=hh,s}return a=t.child,t=a.sibling,s=_s(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Sm(t,e){return e=cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qa(t,e,n,s){return s!==null&&am(s),Rr(e,t.child,null,n),t=Sm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fw(t,e,n,s,o,a,c){if(n)return e.flags&256?(e.flags&=-257,s=hc(Error(xt(422))),Qa(t,e,c,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,o=e.mode,s=cu({mode:"visible",children:s.children},o,0,null),a=Hs(a,o,c,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&Rr(e,t.child,null,c),e.child.memoizedState=mh(c),e.memoizedState=hh,a);if(!(e.mode&1))return Qa(t,e,c,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var d=s.dgst;return s=d,a=Error(xt(419)),s=hc(a,s,void 0),Qa(t,e,c,s)}if(d=(c&t.childLanes)!==0,Ci||d){if(s=We,s!==null){switch(c&-c){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|c)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,zn(t,o),rn(s,t,o,-1))}return bm(),s=hc(Error(xt(421))),Qa(t,e,c,s)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=bw.bind(null,t),o._reactRetry=e,null):(t=a.treeContext,Li=ms(o.nextSibling),Ri=e,_e=!0,nn=null,t!==null&&(qi[Hi++]=Dn,qi[Hi++]=kn,qi[Hi++]=Zs,Dn=t.id,kn=t.overflow,Zs=e),e=Sm(e,s.children),e.flags|=4096,e)}function qf(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),rh(t.return,e,n)}function mc(t,e,n,s,o){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=o)}function dg(t,e,n){var s=e.pendingProps,o=s.revealOrder,a=s.tail;if(mi(t,e,s.children,n),s=ve.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qf(t,n,e);else if(t.tag===19)qf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ue(ve,s),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Rl(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),mc(e,!1,o,n,a);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Rl(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}mc(e,!0,n,null,a);break;case"together":mc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ml(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function On(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(xt(153));if(e.child!==null){for(t=e.child,n=_s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pw(t,e,n){switch(e.tag){case 3:hg(e),Lr();break;case 5:Ny(e);break;case 1:Ai(e.type)&&Ml(e);break;case 4:dm(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,o=e.memoizedProps.value;ue(Dl,s._currentValue),s._currentValue=o;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ue(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?mg(t,e,n):(ue(ve,ve.current&1),t=On(t,e,n),t!==null?t.sibling:null);ue(ve,ve.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return dg(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ue(ve,ve.current),s)break;return null;case 22:case 23:return e.lanes=0,ug(t,e,n)}return On(t,e,n)}var fg,dh,pg,_g;fg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dh=function(){};pg=function(t,e,n,s){var o=t.memoizedProps;if(o!==s){t=e.stateNode,Us(_n.current);var a=null;switch(n){case"input":o=Rc(t,o),s=Rc(t,s),a=[];break;case"select":o=we({},o,{value:void 0}),s=we({},s,{value:void 0}),a=[];break;case"textarea":o=Gc(t,o),s=Gc(t,s),a=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=bl)}Nc(n,s);var c;n=null;for(y in o)if(!s.hasOwnProperty(y)&&o.hasOwnProperty(y)&&o[y]!=null)if(y==="style"){var d=o[y];for(c in d)d.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Eo.hasOwnProperty(y)?a||(a=[]):(a=a||[]).push(y,null));for(y in s){var f=s[y];if(d=o!=null?o[y]:void 0,s.hasOwnProperty(y)&&f!==d&&(f!=null||d!=null))if(y==="style")if(d){for(c in d)!d.hasOwnProperty(c)||f&&f.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in f)f.hasOwnProperty(c)&&d[c]!==f[c]&&(n||(n={}),n[c]=f[c])}else n||(a||(a=[]),a.push(y,n)),n=f;else y==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,d=d?d.__html:void 0,f!=null&&d!==f&&(a=a||[]).push(y,f)):y==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(y,""+f):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Eo.hasOwnProperty(y)?(f!=null&&y==="onScroll"&&he("scroll",t),a||d===f||(a=[])):(a=a||[]).push(y,f))}n&&(a=a||[]).push("style",n);var y=a;(e.updateQueue=y)&&(e.flags|=4)}};_g=function(t,e,n,s){n!==s&&(e.flags|=4)};function _o(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ni(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function _w(t,e,n){var s=e.pendingProps;switch(om(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(e),null;case 1:return Ai(e.type)&&Pl(),ni(e),null;case 3:return s=e.stateNode,Fr(),me(Bi),me(ui),pm(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&($a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(Sh(nn),nn=null))),dh(t,e),ni(e),null;case 5:fm(e);var o=Us($o.current);if(n=e.type,t!==null&&e.stateNode!=null)pg(t,e,n,s,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(xt(166));return ni(e),null}if(t=Us(_n.current),$a(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[fn]=e,s[Jo]=a,t=(e.mode&1)!==0,n){case"dialog":he("cancel",s),he("close",s);break;case"iframe":case"object":case"embed":he("load",s);break;case"video":case"audio":for(o=0;o<wo.length;o++)he(wo[o],s);break;case"source":he("error",s);break;case"img":case"image":case"link":he("error",s),he("load",s);break;case"details":he("toggle",s);break;case"input":Yd(s,a),he("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},he("invalid",s);break;case"textarea":ef(s,a),he("invalid",s)}Nc(n,a),o=null;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];c==="children"?typeof d=="string"?s.textContent!==d&&(a.suppressHydrationWarning!==!0&&Xa(s.textContent,d,t),o=["children",d]):typeof d=="number"&&s.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&Xa(s.textContent,d,t),o=["children",""+d]):Eo.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&he("scroll",s)}switch(n){case"input":Na(s),tf(s,a,!0);break;case"textarea":Na(s),nf(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=bl)}s=o,e.updateQueue=s,s!==null&&(e.flags|=4)}else{c=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=U_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=c.createElement(n,{is:s.is}):(t=c.createElement(n),n==="select"&&(c=t,s.multiple?c.multiple=!0:s.size&&(c.size=s.size))):t=c.createElementNS(t,n),t[fn]=e,t[Jo]=s,fg(t,e,!1,!1),e.stateNode=t;t:{switch(c=zc(n,s),n){case"dialog":he("cancel",t),he("close",t),o=s;break;case"iframe":case"object":case"embed":he("load",t),o=s;break;case"video":case"audio":for(o=0;o<wo.length;o++)he(wo[o],t);o=s;break;case"source":he("error",t),o=s;break;case"img":case"image":case"link":he("error",t),he("load",t),o=s;break;case"details":he("toggle",t),o=s;break;case"input":Yd(t,s),o=Rc(t,s),he("invalid",t);break;case"option":o=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},o=we({},s,{value:void 0}),he("invalid",t);break;case"textarea":ef(t,s),o=Gc(t,s),he("invalid",t);break;default:o=s}Nc(n,o),d=o;for(a in d)if(d.hasOwnProperty(a)){var f=d[a];a==="style"?H_(t,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&W_(t,f)):a==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Go(t,f):typeof f=="number"&&Go(t,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Eo.hasOwnProperty(a)?f!=null&&a==="onScroll"&&he("scroll",t):f!=null&&qh(t,a,f,c))}switch(n){case"input":Na(t),tf(t,s,!1);break;case"textarea":Na(t),nf(t);break;case"option":s.value!=null&&t.setAttribute("value",""+vs(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Vr(t,!!s.multiple,a,!1):s.defaultValue!=null&&Vr(t,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=bl)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break t;case"img":s=!0;break t;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ni(e),null;case 6:if(t&&e.stateNode!=null)_g(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(xt(166));if(n=Us($o.current),Us(_n.current),$a(e)){if(s=e.stateNode,n=e.memoizedProps,s[fn]=e,(a=s.nodeValue!==n)&&(t=Ri,t!==null))switch(t.tag){case 3:Xa(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[fn]=e,e.stateNode=s}return ni(e),null;case 13:if(me(ve),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&Li!==null&&e.mode&1&&!(e.flags&128))ky(),Lr(),e.flags|=98560,a=!1;else if(a=$a(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(xt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(xt(317));a[fn]=e}else Lr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ni(e),a=!1}else nn!==null&&(Sh(nn),nn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Ee===0&&(Ee=3):bm())),e.updateQueue!==null&&(e.flags|=4),ni(e),null);case 4:return Fr(),dh(t,e),t===null&&qo(e.stateNode.containerInfo),ni(e),null;case 10:return cm(e.type._context),ni(e),null;case 17:return Ai(e.type)&&Pl(),ni(e),null;case 19:if(me(ve),a=e.memoizedState,a===null)return ni(e),null;if(s=(e.flags&128)!==0,c=a.rendering,c===null)if(s)_o(a,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=Rl(t),c!==null){for(e.flags|=128,_o(a,!1),s=c.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,c=a.alternate,c===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,t=c.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ve,ve.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ie()>Gr&&(e.flags|=128,s=!0,_o(a,!1),e.lanes=4194304)}else{if(!s)if(t=Rl(c),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_o(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!_e)return ni(e),null}else 2*Ie()-a.renderingStartTime>Gr&&n!==1073741824&&(e.flags|=128,s=!0,_o(a,!1),e.lanes=4194304);a.isBackwards?(c.sibling=e.child,e.child=c):(n=a.last,n!==null?n.sibling=c:e.child=c,a.last=c)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ie(),e.sibling=null,n=ve.current,ue(ve,s?n&1|2:n&1),e):(ni(e),null);case 22:case 23:return Vm(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ki&1073741824&&(ni(e),e.subtreeFlags&6&&(e.flags|=8192)):ni(e),null;case 24:return null;case 25:return null}throw Error(xt(156,e.tag))}function yw(t,e){switch(om(e),e.tag){case 1:return Ai(e.type)&&Pl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fr(),me(Bi),me(ui),pm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fm(e),null;case 13:if(me(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(xt(340));Lr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ve),null;case 4:return Fr(),null;case 10:return cm(e.type._context),null;case 22:case 23:return Vm(),null;case 24:return null;default:return null}}var Ka=!1,oi=!1,gw=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function vr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){be(t,e,s)}else n.current=null}function fh(t,e,n){try{n()}catch(s){be(t,e,s)}}var Hf=!1;function vw(t,e){if(Qc=Bl,t=xy(),sm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break t}var c=0,d=-1,f=-1,y=0,g=0,S=t,x=null;e:for(;;){for(var p;S!==n||o!==0&&S.nodeType!==3||(d=c+o),S!==a||s!==0&&S.nodeType!==3||(f=c+s),S.nodeType===3&&(c+=S.nodeValue.length),(p=S.firstChild)!==null;)x=S,S=p;for(;;){if(S===t)break e;if(x===n&&++y===o&&(d=c),x===a&&++g===s&&(f=c),(p=S.nextSibling)!==null)break;S=x,x=S.parentNode}S=p}n=d===-1||f===-1?null:{start:d,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kc={focusedElem:t,selectionRange:n},Bl=!1,Tt=e;Tt!==null;)if(e=Tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Tt=t;else for(;Tt!==null;){e=Tt;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var B=C.memoizedProps,T=C.memoizedState,M=e.stateNode,I=M.getSnapshotBeforeUpdate(e.elementType===e.type?B:tn(e.type,B),T);M.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var L=e.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xt(163))}}catch(F){be(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,Tt=t;break}Tt=e.return}return C=Hf,Hf=!1,C}function To(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&t)===t){var a=o.destroy;o.destroy=void 0,a!==void 0&&fh(e,n,a)}o=o.next}while(o!==s)}}function lu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function ph(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yg(t){var e=t.alternate;e!==null&&(t.alternate=null,yg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Jo],delete e[eh],delete e[ew],delete e[iw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gg(t){return t.tag===5||t.tag===3||t.tag===4}function Jf(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||gg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _h(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bl));else if(s!==4&&(t=t.child,t!==null))for(_h(t,e,n),t=t.sibling;t!==null;)_h(t,e,n),t=t.sibling}function yh(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(yh(t,e,n),t=t.sibling;t!==null;)yh(t,e,n),t=t.sibling}var $e=null,en=!1;function Yn(t,e,n){for(n=n.child;n!==null;)vg(t,e,n),n=n.sibling}function vg(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(tu,n)}catch{}switch(n.tag){case 5:oi||vr(n,e);case 6:var s=$e,o=en;$e=null,Yn(t,e,n),$e=s,en=o,$e!==null&&(en?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(en?(t=$e,n=n.stateNode,t.nodeType===8?rc(t.parentNode,n):t.nodeType===1&&rc(t,n),Oo(t)):rc($e,n.stateNode));break;case 4:s=$e,o=en,$e=n.stateNode.containerInfo,en=!0,Yn(t,e,n),$e=s,en=o;break;case 0:case 11:case 14:case 15:if(!oi&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var a=o,c=a.destroy;a=a.tag,c!==void 0&&(a&2||a&4)&&fh(n,e,c),o=o.next}while(o!==s)}Yn(t,e,n);break;case 1:if(!oi&&(vr(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(d){be(n,e,d)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(oi=(s=oi)||n.memoizedState!==null,Yn(t,e,n),oi=s):Yn(t,e,n);break;default:Yn(t,e,n)}}function Xf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gw),e.forEach(function(s){var o=Pw.bind(null,t,s);n.has(s)||(n.add(s),s.then(o,o))})}}function Yi(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];try{var a=t,c=e,d=c;t:for(;d!==null;){switch(d.tag){case 5:$e=d.stateNode,en=!1;break t;case 3:$e=d.stateNode.containerInfo,en=!0;break t;case 4:$e=d.stateNode.containerInfo,en=!0;break t}d=d.return}if($e===null)throw Error(xt(160));vg(a,c,o),$e=null,en=!1;var f=o.alternate;f!==null&&(f.return=null),o.return=null}catch(y){be(o,e,y)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xg(e,t),e=e.sibling}function xg(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yi(e,t),mn(t),s&4){try{To(3,t,t.return),lu(3,t)}catch(B){be(t,t.return,B)}try{To(5,t,t.return)}catch(B){be(t,t.return,B)}}break;case 1:Yi(e,t),mn(t),s&512&&n!==null&&vr(n,n.return);break;case 5:if(Yi(e,t),mn(t),s&512&&n!==null&&vr(n,n.return),t.flags&32){var o=t.stateNode;try{Go(o,"")}catch(B){be(t,t.return,B)}}if(s&4&&(o=t.stateNode,o!=null)){var a=t.memoizedProps,c=n!==null?n.memoizedProps:a,d=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&z_(o,a),zc(d,c);var y=zc(d,a);for(c=0;c<f.length;c+=2){var g=f[c],S=f[c+1];g==="style"?H_(o,S):g==="dangerouslySetInnerHTML"?W_(o,S):g==="children"?Go(o,S):qh(o,g,S,y)}switch(d){case"input":Fc(o,a);break;case"textarea":O_(o,a);break;case"select":var x=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Vr(o,!!a.multiple,p,!1):x!==!!a.multiple&&(a.defaultValue!=null?Vr(o,!!a.multiple,a.defaultValue,!0):Vr(o,!!a.multiple,a.multiple?[]:"",!1))}o[Jo]=a}catch(B){be(t,t.return,B)}}break;case 6:if(Yi(e,t),mn(t),s&4){if(t.stateNode===null)throw Error(xt(162));o=t.stateNode,a=t.memoizedProps;try{o.nodeValue=a}catch(B){be(t,t.return,B)}}break;case 3:if(Yi(e,t),mn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Oo(e.containerInfo)}catch(B){be(t,t.return,B)}break;case 4:Yi(e,t),mn(t);break;case 13:Yi(e,t),mn(t),o=t.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(Bm=Ie())),s&4&&Xf(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(oi=(y=oi)||g,Yi(e,t),oi=y):Yi(e,t),mn(t),s&8192){if(y=t.memoizedState!==null,(t.stateNode.isHidden=y)&&!g&&t.mode&1)for(Tt=t,g=t.child;g!==null;){for(S=Tt=g;Tt!==null;){switch(x=Tt,p=x.child,x.tag){case 0:case 11:case 14:case 15:To(4,x,x.return);break;case 1:vr(x,x.return);var C=x.stateNode;if(typeof C.componentWillUnmount=="function"){s=x,n=x.return;try{e=s,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(B){be(s,n,B)}}break;case 5:vr(x,x.return);break;case 22:if(x.memoizedState!==null){Zf(S);continue}}p!==null?(p.return=x,Tt=p):Zf(S)}g=g.sibling}t:for(g=null,S=t;;){if(S.tag===5){if(g===null){g=S;try{o=S.stateNode,y?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=S.stateNode,f=S.memoizedProps.style,c=f!=null&&f.hasOwnProperty("display")?f.display:null,d.style.display=q_("display",c))}catch(B){be(t,t.return,B)}}}else if(S.tag===6){if(g===null)try{S.stateNode.nodeValue=y?"":S.memoizedProps}catch(B){be(t,t.return,B)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===t)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===t)break t;for(;S.sibling===null;){if(S.return===null||S.return===t)break t;g===S&&(g=null),S=S.return}g===S&&(g=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:Yi(e,t),mn(t),s&4&&Xf(t);break;case 21:break;default:Yi(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{t:{for(var n=t.return;n!==null;){if(gg(n)){var s=n;break t}n=n.return}throw Error(xt(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(Go(o,""),s.flags&=-33);var a=Jf(t);yh(t,a,o);break;case 3:case 4:var c=s.stateNode.containerInfo,d=Jf(t);_h(t,d,c);break;default:throw Error(xt(161))}}catch(f){be(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xw(t,e,n){Tt=t,Sg(t)}function Sg(t,e,n){for(var s=(t.mode&1)!==0;Tt!==null;){var o=Tt,a=o.child;if(o.tag===22&&s){var c=o.memoizedState!==null||Ka;if(!c){var d=o.alternate,f=d!==null&&d.memoizedState!==null||oi;d=Ka;var y=oi;if(Ka=c,(oi=f)&&!y)for(Tt=o;Tt!==null;)c=Tt,f=c.child,c.tag===22&&c.memoizedState!==null?Qf(o):f!==null?(f.return=c,Tt=f):Qf(o);for(;a!==null;)Tt=a,Sg(a),a=a.sibling;Tt=o,Ka=d,oi=y}$f(t)}else o.subtreeFlags&8772&&a!==null?(a.return=o,Tt=a):$f(t)}}function $f(t){for(;Tt!==null;){var e=Tt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:oi||lu(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!oi)if(n===null)s.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);s.componentDidUpdate(o,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Df(e,a,s);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Df(e,c,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var y=e.alternate;if(y!==null){var g=y.memoizedState;if(g!==null){var S=g.dehydrated;S!==null&&Oo(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xt(163))}oi||e.flags&512&&ph(e)}catch(x){be(e,e.return,x)}}if(e===t){Tt=null;break}if(n=e.sibling,n!==null){n.return=e.return,Tt=n;break}Tt=e.return}}function Zf(t){for(;Tt!==null;){var e=Tt;if(e===t){Tt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Tt=n;break}Tt=e.return}}function Qf(t){for(;Tt!==null;){var e=Tt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lu(4,e)}catch(f){be(e,n,f)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var o=e.return;try{s.componentDidMount()}catch(f){be(e,o,f)}}var a=e.return;try{ph(e)}catch(f){be(e,a,f)}break;case 5:var c=e.return;try{ph(e)}catch(f){be(e,c,f)}}}catch(f){be(e,e.return,f)}if(e===t){Tt=null;break}var d=e.sibling;if(d!==null){d.return=e.return,Tt=d;break}Tt=e.return}}var Sw=Math.ceil,Gl=Un.ReactCurrentDispatcher,wm=Un.ReactCurrentOwner,Xi=Un.ReactCurrentBatchConfig,te=0,We=null,ke=null,Qe=0,ki=0,xr=As(0),Ee=0,Yo=null,Ks=0,uu=0,Cm=0,Io=null,wi=null,Bm=0,Gr=1/0,Tn=null,jl=!1,gh=null,fs=null,Ya=!1,as=null,Nl=0,Do=0,vh=null,dl=-1,fl=0;function di(){return te&6?Ie():dl!==-1?dl:dl=Ie()}function ps(t){return t.mode&1?te&2&&Qe!==0?Qe&-Qe:sw.transition!==null?(fl===0&&(fl=sy()),fl):(t=ie,t!==0||(t=window.event,t=t===void 0?16:hy(t.type)),t):1}function rn(t,e,n,s){if(50<Do)throw Do=0,vh=null,Error(xt(185));aa(t,n,s),(!(te&2)||t!==We)&&(t===We&&(!(te&2)&&(uu|=n),Ee===4&&rs(t,Qe)),Vi(t,s),n===1&&te===0&&!(e.mode&1)&&(Gr=Ie()+500,ru&&Vs()))}function Vi(t,e){var n=t.callbackNode;sS(t,e);var s=Cl(t,t===We?Qe:0);if(s===0)n!==null&&of(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&of(n),e===1)t.tag===0?nw(Kf.bind(null,t)):Ty(Kf.bind(null,t)),YS(function(){!(te&6)&&Vs()}),n=null;else{switch(ry(s)){case 1:n=Zh;break;case 4:n=iy;break;case 16:n=wl;break;case 536870912:n=ny;break;default:n=wl}n=Mg(n,wg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wg(t,e){if(dl=-1,fl=0,te&6)throw Error(xt(327));var n=t.callbackNode;if(Ir()&&t.callbackNode!==n)return null;var s=Cl(t,t===We?Qe:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=zl(t,s);else{e=s;var o=te;te|=2;var a=Bg();(We!==t||Qe!==e)&&(Tn=null,Gr=Ie()+500,qs(t,e));do try{Bw();break}catch(d){Cg(t,d)}while(!0);um(),Gl.current=a,te=o,ke!==null?e=0:(We=null,Qe=0,e=Ee)}if(e!==0){if(e===2&&(o=Hc(t),o!==0&&(s=o,e=xh(t,o))),e===1)throw n=Yo,qs(t,0),rs(t,s),Vi(t,Ie()),n;if(e===6)rs(t,s);else{if(o=t.current.alternate,!(s&30)&&!ww(o)&&(e=zl(t,s),e===2&&(a=Hc(t),a!==0&&(s=a,e=xh(t,a))),e===1))throw n=Yo,qs(t,0),rs(t,s),Vi(t,Ie()),n;switch(t.finishedWork=o,t.finishedLanes=s,e){case 0:case 1:throw Error(xt(345));case 2:Gs(t,wi,Tn);break;case 3:if(rs(t,s),(s&130023424)===s&&(e=Bm+500-Ie(),10<e)){if(Cl(t,0)!==0)break;if(o=t.suspendedLanes,(o&s)!==s){di(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=th(Gs.bind(null,t,wi,Tn),e);break}Gs(t,wi,Tn);break;case 4:if(rs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,o=-1;0<s;){var c=31-sn(s);a=1<<c,c=e[c],c>o&&(o=c),s&=~a}if(s=o,s=Ie()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Sw(s/1960))-s,10<s){t.timeoutHandle=th(Gs.bind(null,t,wi,Tn),s);break}Gs(t,wi,Tn);break;case 5:Gs(t,wi,Tn);break;default:throw Error(xt(329))}}}return Vi(t,Ie()),t.callbackNode===n?wg.bind(null,t):null}function xh(t,e){var n=Io;return t.current.memoizedState.isDehydrated&&(qs(t,e).flags|=256),t=zl(t,e),t!==2&&(e=wi,wi=n,e!==null&&Sh(e)),t}function Sh(t){wi===null?wi=t:wi.push.apply(wi,t)}function ww(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var o=n[s],a=o.getSnapshot;o=o.value;try{if(!on(a(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rs(t,e){for(e&=~Cm,e&=~uu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),s=1<<n;t[n]=-1,e&=~s}}function Kf(t){if(te&6)throw Error(xt(327));Ir();var e=Cl(t,0);if(!(e&1))return Vi(t,Ie()),null;var n=zl(t,e);if(t.tag!==0&&n===2){var s=Hc(t);s!==0&&(e=s,n=xh(t,s))}if(n===1)throw n=Yo,qs(t,0),rs(t,e),Vi(t,Ie()),n;if(n===6)throw Error(xt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,wi,Tn),Vi(t,Ie()),null}function Am(t,e){var n=te;te|=1;try{return t(e)}finally{te=n,te===0&&(Gr=Ie()+500,ru&&Vs())}}function Ys(t){as!==null&&as.tag===0&&!(te&6)&&Ir();var e=te;te|=1;var n=Xi.transition,s=ie;try{if(Xi.transition=null,ie=1,t)return t()}finally{ie=s,Xi.transition=n,te=e,!(te&6)&&Vs()}}function Vm(){ki=xr.current,me(xr)}function qs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,KS(n)),ke!==null)for(n=ke.return;n!==null;){var s=n;switch(om(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Pl();break;case 3:Fr(),me(Bi),me(ui),pm();break;case 5:fm(s);break;case 4:Fr();break;case 13:me(ve);break;case 19:me(ve);break;case 10:cm(s.type._context);break;case 22:case 23:Vm()}n=n.return}if(We=t,ke=t=_s(t.current,null),Qe=ki=e,Ee=0,Yo=null,Cm=uu=Ks=0,wi=Io=null,Os!==null){for(e=0;e<Os.length;e++)if(n=Os[e],s=n.interleaved,s!==null){n.interleaved=null;var o=s.next,a=n.pending;if(a!==null){var c=a.next;a.next=o,s.next=c}n.pending=s}Os=null}return t}function Cg(t,e){do{var n=ke;try{if(um(),cl.current=El,Fl){for(var s=Se.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Fl=!1}if(Qs=0,Ue=Fe=Se=null,Mo=!1,Zo=0,wm.current=null,n===null||n.return===null){Ee=1,Yo=e,ke=null;break}t:{var a=t,c=n.return,d=n,f=e;if(e=Qe,d.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var y=f,g=d,S=g.tag;if(!(g.mode&1)&&(S===0||S===11||S===15)){var x=g.alternate;x?(g.updateQueue=x.updateQueue,g.memoizedState=x.memoizedState,g.lanes=x.lanes):(g.updateQueue=null,g.memoizedState=null)}var p=jf(c);if(p!==null){p.flags&=-257,Nf(p,c,d,a,e),p.mode&1&&Gf(a,y,e),e=p,f=y;var C=e.updateQueue;if(C===null){var B=new Set;B.add(f),e.updateQueue=B}else C.add(f);break t}else{if(!(e&1)){Gf(a,y,e),bm();break t}f=Error(xt(426))}}else if(_e&&d.mode&1){var T=jf(c);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Nf(T,c,d,a,e),am(Er(f,d));break t}}a=f=Er(f,d),Ee!==4&&(Ee=2),Io===null?Io=[a]:Io.push(a),a=c;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var M=og(a,f,e);If(a,M);break t;case 1:d=f;var I=a.type,L=a.stateNode;if(!(a.flags&128)&&(typeof I.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(fs===null||!fs.has(L)))){a.flags|=65536,e&=-e,a.lanes|=e;var F=ag(a,d,e);If(a,F);break t}}a=a.return}while(a!==null)}Vg(n)}catch(k){e=k,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function Bg(){var t=Gl.current;return Gl.current=El,t===null?El:t}function bm(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),We===null||!(Ks&268435455)&&!(uu&268435455)||rs(We,Qe)}function zl(t,e){var n=te;te|=2;var s=Bg();(We!==t||Qe!==e)&&(Tn=null,qs(t,e));do try{Cw();break}catch(o){Cg(t,o)}while(!0);if(um(),te=n,Gl.current=s,ke!==null)throw Error(xt(261));return We=null,Qe=0,Ee}function Cw(){for(;ke!==null;)Ag(ke)}function Bw(){for(;ke!==null&&!$x();)Ag(ke)}function Ag(t){var e=Pg(t.alternate,t,ki);t.memoizedProps=t.pendingProps,e===null?Vg(t):ke=e,wm.current=null}function Vg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yw(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,ke=null;return}}else if(n=_w(n,e,ki),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Ee===0&&(Ee=5)}function Gs(t,e,n){var s=ie,o=Xi.transition;try{Xi.transition=null,ie=1,Aw(t,e,n,s)}finally{Xi.transition=o,ie=s}return null}function Aw(t,e,n,s){do Ir();while(as!==null);if(te&6)throw Error(xt(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(xt(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(rS(t,a),t===We&&(ke=We=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ya||(Ya=!0,Mg(wl,function(){return Ir(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Xi.transition,Xi.transition=null;var c=ie;ie=1;var d=te;te|=4,wm.current=null,vw(t,n),xg(n,t),qS(Kc),Bl=!!Qc,Kc=Qc=null,t.current=n,xw(n),Zx(),te=d,ie=c,Xi.transition=a}else t.current=n;if(Ya&&(Ya=!1,as=t,Nl=o),a=t.pendingLanes,a===0&&(fs=null),Yx(n.stateNode),Vi(t,Ie()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],s(o.value,{componentStack:o.stack,digest:o.digest});if(jl)throw jl=!1,t=gh,gh=null,t;return Nl&1&&t.tag!==0&&Ir(),a=t.pendingLanes,a&1?t===vh?Do++:(Do=0,vh=t):Do=0,Vs(),null}function Ir(){if(as!==null){var t=ry(Nl),e=Xi.transition,n=ie;try{if(Xi.transition=null,ie=16>t?16:t,as===null)var s=!1;else{if(t=as,as=null,Nl=0,te&6)throw Error(xt(331));var o=te;for(te|=4,Tt=t.current;Tt!==null;){var a=Tt,c=a.child;if(Tt.flags&16){var d=a.deletions;if(d!==null){for(var f=0;f<d.length;f++){var y=d[f];for(Tt=y;Tt!==null;){var g=Tt;switch(g.tag){case 0:case 11:case 15:To(8,g,a)}var S=g.child;if(S!==null)S.return=g,Tt=S;else for(;Tt!==null;){g=Tt;var x=g.sibling,p=g.return;if(yg(g),g===y){Tt=null;break}if(x!==null){x.return=p,Tt=x;break}Tt=p}}}var C=a.alternate;if(C!==null){var B=C.child;if(B!==null){C.child=null;do{var T=B.sibling;B.sibling=null,B=T}while(B!==null)}}Tt=a}}if(a.subtreeFlags&2064&&c!==null)c.return=a,Tt=c;else t:for(;Tt!==null;){if(a=Tt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:To(9,a,a.return)}var M=a.sibling;if(M!==null){M.return=a.return,Tt=M;break t}Tt=a.return}}var I=t.current;for(Tt=I;Tt!==null;){c=Tt;var L=c.child;if(c.subtreeFlags&2064&&L!==null)L.return=c,Tt=L;else t:for(c=I;Tt!==null;){if(d=Tt,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:lu(9,d)}}catch(k){be(d,d.return,k)}if(d===c){Tt=null;break t}var F=d.sibling;if(F!==null){F.return=d.return,Tt=F;break t}Tt=d.return}}if(te=o,Vs(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(tu,t)}catch{}s=!0}return s}finally{ie=n,Xi.transition=e}}return!1}function Yf(t,e,n){e=Er(n,e),e=og(t,e,1),t=ds(t,e,1),e=di(),t!==null&&(aa(t,1,e),Vi(t,e))}function be(t,e,n){if(t.tag===3)Yf(t,t,n);else for(;e!==null;){if(e.tag===3){Yf(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(fs===null||!fs.has(s))){t=Er(n,t),t=ag(e,t,1),e=ds(e,t,1),t=di(),e!==null&&(aa(e,1,t),Vi(e,t));break}}e=e.return}}function Vw(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=di(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Qe&n)===n&&(Ee===4||Ee===3&&(Qe&130023424)===Qe&&500>Ie()-Bm?qs(t,0):Cm|=n),Vi(t,e)}function bg(t,e){e===0&&(t.mode&1?(e=Ua,Ua<<=1,!(Ua&130023424)&&(Ua=4194304)):e=1);var n=di();t=zn(t,e),t!==null&&(aa(t,e,n),Vi(t,n))}function bw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bg(t,n)}function Pw(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(xt(314))}s!==null&&s.delete(e),bg(t,n)}var Pg;Pg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bi.current)Ci=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ci=!1,pw(t,e,n);Ci=!!(t.flags&131072)}else Ci=!1,_e&&e.flags&1048576&&Iy(e,Il,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;ml(t,e),t=e.pendingProps;var o=kr(e,ui.current);Tr(e,n),o=ym(null,e,s,t,o,n);var a=gm();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(s)?(a=!0,Ml(e)):a=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,mm(e),o.updater=ou,e.stateNode=o,o._reactInternals=e,ah(e,s,t,n),e=ch(null,e,s,!0,a,n)):(e.tag=0,_e&&a&&rm(e),mi(null,e,o,n),e=e.child),e;case 16:s=e.elementType;t:{switch(ml(t,e),t=e.pendingProps,o=s._init,s=o(s._payload),e.type=s,o=e.tag=Tw(s),t=tn(s,t),o){case 0:e=uh(null,e,s,t,n);break t;case 1:e=Uf(null,e,s,t,n);break t;case 11:e=zf(null,e,s,t,n);break t;case 14:e=Of(null,e,s,tn(s.type,t),n);break t}throw Error(xt(306,s,""))}return e;case 0:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:tn(s,o),uh(t,e,s,o,n);case 1:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:tn(s,o),Uf(t,e,s,o,n);case 3:t:{if(hg(e),t===null)throw Error(xt(387));s=e.pendingProps,a=e.memoizedState,o=a.element,Ry(t,e),Ll(e,s,null,n);var c=e.memoizedState;if(s=c.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){o=Er(Error(xt(423)),e),e=Wf(t,e,s,n,o);break t}else if(s!==o){o=Er(Error(xt(424)),e),e=Wf(t,e,s,n,o);break t}else for(Li=ms(e.stateNode.containerInfo.firstChild),Ri=e,_e=!0,nn=null,n=jy(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lr(),s===o){e=On(t,e,n);break t}mi(t,e,s,n)}e=e.child}return e;case 5:return Ny(e),t===null&&sh(e),s=e.type,o=e.pendingProps,a=t!==null?t.memoizedProps:null,c=o.children,Yc(s,o)?c=null:a!==null&&Yc(s,a)&&(e.flags|=32),cg(t,e),mi(t,e,c,n),e.child;case 6:return t===null&&sh(e),null;case 13:return mg(t,e,n);case 4:return dm(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Rr(e,null,s,n):mi(t,e,s,n),e.child;case 11:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:tn(s,o),zf(t,e,s,o,n);case 7:return mi(t,e,e.pendingProps,n),e.child;case 8:return mi(t,e,e.pendingProps.children,n),e.child;case 12:return mi(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(s=e.type._context,o=e.pendingProps,a=e.memoizedProps,c=o.value,ue(Dl,s._currentValue),s._currentValue=c,a!==null)if(on(a.value,c)){if(a.children===o.children&&!Bi.current){e=On(t,e,n);break t}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var d=a.dependencies;if(d!==null){c=a.child;for(var f=d.firstContext;f!==null;){if(f.context===s){if(a.tag===1){f=Rn(-1,n&-n),f.tag=2;var y=a.updateQueue;if(y!==null){y=y.shared;var g=y.pending;g===null?f.next=f:(f.next=g.next,g.next=f),y.pending=f}}a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),rh(a.return,n,e),d.lanes|=n;break}f=f.next}}else if(a.tag===10)c=a.type===e.type?null:a.child;else if(a.tag===18){if(c=a.return,c===null)throw Error(xt(341));c.lanes|=n,d=c.alternate,d!==null&&(d.lanes|=n),rh(c,n,e),c=a.sibling}else c=a.child;if(c!==null)c.return=a;else for(c=a;c!==null;){if(c===e){c=null;break}if(a=c.sibling,a!==null){a.return=c.return,c=a;break}c=c.return}a=c}mi(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,s=e.pendingProps.children,Tr(e,n),o=$i(o),s=s(o),e.flags|=1,mi(t,e,s,n),e.child;case 14:return s=e.type,o=tn(s,e.pendingProps),o=tn(s.type,o),Of(t,e,s,o,n);case 15:return lg(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:tn(s,o),ml(t,e),e.tag=1,Ai(s)?(t=!0,Ml(e)):t=!1,Tr(e,n),Ey(e,s,o),ah(e,s,o,n),ch(null,e,s,!0,t,n);case 19:return dg(t,e,n);case 22:return ug(t,e,n)}throw Error(xt(156,e.tag))};function Mg(t,e){return ey(t,e)}function Mw(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(t,e,n,s){return new Mw(t,e,n,s)}function Pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tw(t){if(typeof t=="function")return Pm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jh)return 11;if(t===Xh)return 14}return 2}function _s(t,e){var n=t.alternate;return n===null?(n=Ji(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pl(t,e,n,s,o,a){var c=2;if(s=t,typeof t=="function")Pm(t)&&(c=1);else if(typeof t=="string")c=5;else t:switch(t){case cr:return Hs(n.children,o,a,e);case Hh:c=8,o|=8;break;case Ic:return t=Ji(12,n,e,o|2),t.elementType=Ic,t.lanes=a,t;case Dc:return t=Ji(13,n,e,o),t.elementType=Dc,t.lanes=a,t;case kc:return t=Ji(19,n,e,o),t.elementType=kc,t.lanes=a,t;case G_:return cu(n,o,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F_:c=10;break t;case E_:c=9;break t;case Jh:c=11;break t;case Xh:c=14;break t;case es:c=16,s=null;break t}throw Error(xt(130,t==null?t:typeof t,""))}return e=Ji(c,n,e,o),e.elementType=t,e.type=s,e.lanes=a,e}function Hs(t,e,n,s){return t=Ji(7,t,s,e),t.lanes=n,t}function cu(t,e,n,s){return t=Ji(22,t,s,e),t.elementType=G_,t.lanes=n,t.stateNode={isHidden:!1},t}function dc(t,e,n){return t=Ji(6,t,null,e),t.lanes=n,t}function fc(t,e,n){return e=Ji(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Iw(t,e,n,s,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Mm(t,e,n,s,o,a,c,d,f){return t=new Iw(t,e,n,d,f),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ji(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mm(a),t}function Dw(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ur,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Tg(t){if(!t)return xs;t=t._reactInternals;t:{if(er(t)!==t||t.tag!==1)throw Error(xt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(xt(171))}if(t.tag===1){var n=t.type;if(Ai(n))return My(t,n,e)}return e}function Ig(t,e,n,s,o,a,c,d,f){return t=Mm(n,s,!0,t,o,a,c,d,f),t.context=Tg(null),n=t.current,s=di(),o=ps(n),a=Rn(s,o),a.callback=e??null,ds(n,a,o),t.current.lanes=o,aa(t,o,s),Vi(t,s),t}function hu(t,e,n,s){var o=e.current,a=di(),c=ps(o);return n=Tg(n),e.context===null?e.context=n:e.pendingContext=n,e=Rn(a,c),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=ds(o,e,c),t!==null&&(rn(t,o,c,a),ul(t,o,c)),c}function Ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tm(t,e){tp(t,e),(t=t.alternate)&&tp(t,e)}function kw(){return null}var Dg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Im(t){this._internalRoot=t}mu.prototype.render=Im.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(xt(409));hu(t,e,null,null)};mu.prototype.unmount=Im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ys(function(){hu(null,t,null,null)}),e[Nn]=null}};function mu(t){this._internalRoot=t}mu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ly();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ss.length&&e!==0&&e<ss[n].priority;n++);ss.splice(n,0,t),n===0&&cy(t)}};function Dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ep(){}function Lw(t,e,n,s,o){if(o){if(typeof s=="function"){var a=s;s=function(){var y=Ol(c);a.call(y)}}var c=Ig(e,s,t,0,null,!1,!1,"",ep);return t._reactRootContainer=c,t[Nn]=c.current,qo(t.nodeType===8?t.parentNode:t),Ys(),c}for(;o=t.lastChild;)t.removeChild(o);if(typeof s=="function"){var d=s;s=function(){var y=Ol(f);d.call(y)}}var f=Mm(t,0,!1,null,null,!1,!1,"",ep);return t._reactRootContainer=f,t[Nn]=f.current,qo(t.nodeType===8?t.parentNode:t),Ys(function(){hu(e,f,n,s)}),f}function fu(t,e,n,s,o){var a=n._reactRootContainer;if(a){var c=a;if(typeof o=="function"){var d=o;o=function(){var f=Ol(c);d.call(f)}}hu(e,c,t,o)}else c=Lw(n,e,t,o,s);return Ol(c)}oy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=So(e.pendingLanes);n!==0&&(Qh(e,n|1),Vi(e,Ie()),!(te&6)&&(Gr=Ie()+500,Vs()))}break;case 13:Ys(function(){var s=zn(t,1);if(s!==null){var o=di();rn(s,t,1,o)}}),Tm(t,1)}};Kh=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=di();rn(e,t,134217728,n)}Tm(t,134217728)}};ay=function(t){if(t.tag===13){var e=ps(t),n=zn(t,e);if(n!==null){var s=di();rn(n,t,e,s)}Tm(t,e)}};ly=function(){return ie};uy=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};Uc=function(t,e,n){switch(e){case"input":if(Fc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var o=su(s);if(!o)throw Error(xt(90));N_(s),Fc(s,o)}}}break;case"textarea":O_(t,n);break;case"select":e=n.value,e!=null&&Vr(t,!!n.multiple,e,!1)}};$_=Am;Z_=Ys;var Rw={usingClientEntryPoint:!1,Events:[ua,fr,su,J_,X_,Am]},yo={findFiberByHostInstance:zs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Fw={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Y_(t),t===null?null:t.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance||kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{tu=tl.inject(Fw),pn=tl}catch{}}Gi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rw;Gi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dm(e))throw Error(xt(200));return Dw(t,e,null,n)};Gi.createRoot=function(t,e){if(!Dm(t))throw Error(xt(299));var n=!1,s="",o=Dg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Mm(t,1,!1,null,null,n,!1,s,o),t[Nn]=e.current,qo(t.nodeType===8?t.parentNode:t),new Im(e)};Gi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(xt(188)):(t=Object.keys(t).join(","),Error(xt(268,t)));return t=Y_(e),t=t===null?null:t.stateNode,t};Gi.flushSync=function(t){return Ys(t)};Gi.hydrate=function(t,e,n){if(!du(e))throw Error(xt(200));return fu(null,t,e,!0,n)};Gi.hydrateRoot=function(t,e,n){if(!Dm(t))throw Error(xt(405));var s=n!=null&&n.hydratedSources||null,o=!1,a="",c=Dg;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=Ig(e,null,t,1,n??null,o,!1,a,c),t[Nn]=e.current,qo(t),s)for(t=0;t<s.length;t++)n=s[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new mu(e)};Gi.render=function(t,e,n){if(!du(e))throw Error(xt(200));return fu(null,t,e,!1,n)};Gi.unmountComponentAtNode=function(t){if(!du(t))throw Error(xt(40));return t._reactRootContainer?(Ys(function(){fu(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1};Gi.unstable_batchedUpdates=Am;Gi.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!du(n))throw Error(xt(200));if(t==null||t._reactInternals===void 0)throw Error(xt(38));return fu(t,e,n,!1,s)};Gi.version="18.2.0-next-9e3b772b8-20220608";function kg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kg)}catch(t){console.error(t)}}kg(),I_.exports=Gi;var Lg=I_.exports;const Ew=x_(Lg);var ip=Lg;Mc.createRoot=ip.createRoot,Mc.hydrateRoot=ip.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ta.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));const np="popstate";function Gw(t){t===void 0&&(t={});function e(s,o){let{pathname:a,search:c,hash:d}=s.location;return wh("",{pathname:a,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Fg(o)}return Nw(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jw(){return Math.random().toString(36).substr(2,8)}function sp(t,e){return{usr:t.state,key:t.key,idx:e}}function wh(t,e,n,s){return n===void 0&&(n=null),ta({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ur(e):e,{state:n,key:e&&e.key||s||jw()})}function Fg(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ur(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Nw(t,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:a=!1}=s,c=o.history,d=ls.Pop,f=null,y=g();y==null&&(y=0,c.replaceState(ta({},c.state,{idx:y}),""));function g(){return(c.state||{idx:null}).idx}function S(){d=ls.Pop;let T=g(),M=T==null?null:T-y;y=T,f&&f({action:d,location:B.location,delta:M})}function x(T,M){d=ls.Push;let I=wh(B.location,T,M);n&&n(I,T),y=g()+1;let L=sp(I,y),F=B.createHref(I);try{c.pushState(L,"",F)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(F)}a&&f&&f({action:d,location:B.location,delta:1})}function p(T,M){d=ls.Replace;let I=wh(B.location,T,M);n&&n(I,T),y=g();let L=sp(I,y),F=B.createHref(I);c.replaceState(L,"",F),a&&f&&f({action:d,location:B.location,delta:0})}function C(T){let M=o.location.origin!=="null"?o.location.origin:o.location.href,I=typeof T=="string"?T:Fg(T);return I=I.replace(/ $/,"%20"),Ge(M,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,M)}let B={get action(){return d},get location(){return t(o,c)},listen(T){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(np,S),f=T,()=>{o.removeEventListener(np,S),f=null}},createHref(T){return e(o,T)},createURL:C,encodeLocation(T){let M=C(T);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:x,replace:p,go(T){return c.go(T)}};return B}var rp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rp||(rp={}));function zw(t,e,n){n===void 0&&(n="/");let s=typeof e=="string"?Ur(e):e,o=jg(s.pathname||"/",n);if(o==null)return null;let a=Eg(t);Ow(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let f=tC(o);c=Qw(a[d],f)}return c}function Eg(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(a,c,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Ge(f.relativePath.startsWith(s),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(s.length));let y=Js([s,f.relativePath]),g=n.concat(f);a.children&&a.children.length>0&&(Ge(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Eg(a.children,e,g,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:$w(y,a.index),routesMeta:g})};return t.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,c);else for(let f of Gg(a.path))o(a,c,f)}),e}function Gg(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return o?[a,""]:[a];let c=Gg(s.join("/")),d=[];return d.push(...c.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...c),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function Ow(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Zw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Uw=/^:[\w-]+$/,Ww=3,qw=2,Hw=1,Jw=10,Xw=-2,op=t=>t==="*";function $w(t,e){let n=t.split("/"),s=n.length;return n.some(op)&&(s+=Xw),e&&(s+=qw),n.filter(o=>!op(o)).reduce((o,a)=>o+(Uw.test(a)?Ww:a===""?Hw:Jw),s)}function Zw(t,e){return t.length===e.length&&t.slice(0,-1).every((s,o)=>s===e[o])?t[t.length-1]-e[e.length-1]:0}function Qw(t,e){let{routesMeta:n}=t,s={},o="/",a=[];for(let c=0;c<n.length;++c){let d=n[c],f=c===n.length-1,y=o==="/"?e:e.slice(o.length)||"/",g=Kw({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},y);if(!g)return null;Object.assign(s,g.params);let S=d.route;a.push({params:s,pathname:Js([o,g.pathname]),pathnameBase:oC(Js([o,g.pathnameBase])),route:S}),g.pathnameBase!=="/"&&(o=Js([o,g.pathnameBase]))}return a}function Kw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=Yw(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((y,g,S)=>{let{paramName:x,isOptional:p}=g;if(x==="*"){let B=d[S]||"";c=a.slice(0,a.length-B.length).replace(/(.)\/+$/,"$1")}const C=d[S];return p&&!C?y[x]=void 0:y[x]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:c,pattern:t}}function Yw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function tC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function eC(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof t=="string"?Ur(t):t;return{pathname:n?n.startsWith("/")?n:iC(n,e):e,search:aC(s),hash:lC(o)}}function iC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function pc(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sC(t,e){let n=nC(t);return e?n.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function rC(t,e,n,s){s===void 0&&(s=!1);let o;typeof t=="string"?o=Ur(t):(o=ta({},t),Ge(!o.pathname||!o.pathname.includes("?"),pc("?","pathname","search",o)),Ge(!o.pathname||!o.pathname.includes("#"),pc("#","pathname","hash",o)),Ge(!o.search||!o.search.includes("#"),pc("#","search","hash",o)));let a=t===""||o.pathname==="",c=a?"/":o.pathname,d;if(c==null)d=n;else{let S=e.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),S-=1;o.pathname=x.join("/")}d=S>=0?e[S]:"/"}let f=eC(o,d),y=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(y||g)&&(f.pathname+="/"),f}const Js=t=>t.join("/").replace(/\/\/+/g,"/"),oC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ng=["post","put","patch","delete"];new Set(Ng);const cC=["get",...Ng];new Set(cC);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ea.apply(this,arguments)}const km=nt.createContext(null),hC=nt.createContext(null),pu=nt.createContext(null),_u=nt.createContext(null),Wr=nt.createContext({outlet:null,matches:[],isDataRoute:!1}),zg=nt.createContext(null);function yu(){return nt.useContext(_u)!=null}function Og(){return yu()||Ge(!1),nt.useContext(_u).location}function Ug(t){nt.useContext(pu).static||nt.useLayoutEffect(t)}function an(){let{isDataRoute:t}=nt.useContext(Wr);return t?BC():mC()}function mC(){yu()||Ge(!1);let t=nt.useContext(km),{basename:e,future:n,navigator:s}=nt.useContext(pu),{matches:o}=nt.useContext(Wr),{pathname:a}=Og(),c=JSON.stringify(sC(o,n.v7_relativeSplatPath)),d=nt.useRef(!1);return Ug(()=>{d.current=!0}),nt.useCallback(function(y,g){if(g===void 0&&(g={}),!d.current)return;if(typeof y=="number"){s.go(y);return}let S=rC(y,JSON.parse(c),a,g.relative==="path");t==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Js([e,S.pathname])),(g.replace?s.replace:s.push)(S,g.state,g)},[e,s,c,a,t])}function dC(t,e){return fC(t,e)}function fC(t,e,n,s){yu()||Ge(!1);let{navigator:o}=nt.useContext(pu),{matches:a}=nt.useContext(Wr),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let y=Og(),g;if(e){var S;let T=typeof e=="string"?Ur(e):e;f==="/"||(S=T.pathname)!=null&&S.startsWith(f)||Ge(!1),g=T}else g=y;let x=g.pathname||"/",p=x;if(f!=="/"){let T=f.replace(/^\//,"").split("/");p="/"+x.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=zw(t,{pathname:p}),B=vC(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:Js([f,o.encodeLocation?o.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:Js([f,o.encodeLocation?o.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,n,s);return e&&B?nt.createElement(_u.Provider,{value:{location:ea({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ls.Pop}},B):B}function pC(){let t=CC(),e=uC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return nt.createElement(nt.Fragment,null,nt.createElement("h2",null,"Unexpected Application Error!"),nt.createElement("h3",{style:{fontStyle:"italic"}},e),n?nt.createElement("pre",{style:o},n):null,null)}const _C=nt.createElement(pC,null);class yC extends nt.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?nt.createElement(Wr.Provider,{value:this.props.routeContext},nt.createElement(zg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gC(t){let{routeContext:e,match:n,children:s}=t,o=nt.useContext(km);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),nt.createElement(Wr.Provider,{value:e},s)}function vC(t,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if((a=n)!=null&&a.errors)t=n.matches;else return null}let c=t,d=(o=n)==null?void 0:o.errors;if(d!=null){let g=c.findIndex(S=>S.route.id&&(d==null?void 0:d[S.route.id]));g>=0||Ge(!1),c=c.slice(0,Math.min(c.length,g+1))}let f=!1,y=-1;if(n&&s&&s.v7_partialHydration)for(let g=0;g<c.length;g++){let S=c[g];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(y=g),S.route.id){let{loaderData:x,errors:p}=n,C=S.route.loader&&x[S.route.id]===void 0&&(!p||p[S.route.id]===void 0);if(S.route.lazy||C){f=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((g,S,x)=>{let p,C=!1,B=null,T=null;n&&(p=d&&S.route.id?d[S.route.id]:void 0,B=S.route.errorElement||_C,f&&(y<0&&x===0?(AC("route-fallback",!1),C=!0,T=null):y===x&&(C=!0,T=S.route.hydrateFallbackElement||null)));let M=e.concat(c.slice(0,x+1)),I=()=>{let L;return p?L=B:C?L=T:S.route.Component?L=nt.createElement(S.route.Component,null):S.route.element?L=S.route.element:L=g,nt.createElement(gC,{match:S,routeContext:{outlet:g,matches:M,isDataRoute:n!=null},children:L})};return n&&(S.route.ErrorBoundary||S.route.errorElement||x===0)?nt.createElement(yC,{location:n.location,revalidation:n.revalidation,component:B,error:p,children:I(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):I()},null)}var Wg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Wg||{}),Ul=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ul||{});function xC(t){let e=nt.useContext(km);return e||Ge(!1),e}function SC(t){let e=nt.useContext(hC);return e||Ge(!1),e}function wC(t){let e=nt.useContext(Wr);return e||Ge(!1),e}function qg(t){let e=wC(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function CC(){var t;let e=nt.useContext(zg),n=SC(Ul.UseRouteError),s=qg(Ul.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function BC(){let{router:t}=xC(Wg.UseNavigateStable),e=qg(Ul.UseNavigateStable),n=nt.useRef(!1);return Ug(()=>{n.current=!0}),nt.useCallback(function(o,a){a===void 0&&(a={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,ea({fromRouteId:e},a)))},[t,e])}const ap={};function AC(t,e,n){!e&&!ap[t]&&(ap[t]=!0)}function Di(t){Ge(!1)}function VC(t){let{basename:e="/",children:n=null,location:s,navigationType:o=ls.Pop,navigator:a,static:c=!1,future:d}=t;yu()&&Ge(!1);let f=e.replace(/^\/*/,"/"),y=nt.useMemo(()=>({basename:f,navigator:a,static:c,future:ea({v7_relativeSplatPath:!1},d)}),[f,d,a,c]);typeof s=="string"&&(s=Ur(s));let{pathname:g="/",search:S="",hash:x="",state:p=null,key:C="default"}=s,B=nt.useMemo(()=>{let T=jg(g,f);return T==null?null:{location:{pathname:T,search:S,hash:x,state:p,key:C},navigationType:o}},[f,g,S,x,p,C,o]);return B==null?null:nt.createElement(pu.Provider,{value:y},nt.createElement(_u.Provider,{children:n,value:B}))}function bC(t){let{children:e,location:n}=t;return dC(Ch(e),n)}new Promise(()=>{});function Ch(t,e){e===void 0&&(e=[]);let n=[];return nt.Children.forEach(t,(s,o)=>{if(!nt.isValidElement(s))return;let a=[...e,o];if(s.type===nt.Fragment){n.push.apply(n,Ch(s.props.children,a));return}s.type!==Di&&Ge(!1),!s.props.index||!s.props.children||Ge(!1);let c={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Ch(s.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const PC="6";try{window.__reactRouterVersion=PC}catch{}const MC="startTransition",lp=bx[MC];function TC(t){let{basename:e,children:n,future:s,window:o}=t,a=nt.useRef();a.current==null&&(a.current=Gw({window:o,v5Compat:!0}));let c=a.current,[d,f]=nt.useState({action:c.action,location:c.location}),{v7_startTransition:y}=s||{},g=nt.useCallback(S=>{y&&lp?lp(()=>f(S)):f(S)},[f,y]);return nt.useLayoutEffect(()=>c.listen(g),[c,g]),nt.createElement(VC,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:c,future:s})}var up;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(up||(up={}));var cp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cp||(cp={}));const Hg=nt.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),gu=nt.createContext({}),Lm=nt.createContext(null),Rm=typeof document<"u",Jg=Rm?nt.useLayoutEffect:nt.useEffect,Xg=nt.createContext({strict:!1}),Fm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),IC="framerAppearId",$g="data-"+Fm(IC),DC={skipAnimations:!1,useManualTiming:!1};class hp{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function kC(t){let e=new hp,n=new hp,s=0,o=!1,a=!1;const c=new WeakSet,d={schedule:(f,y=!1,g=!1)=>{const S=g&&o,x=S?e:n;return y&&c.add(f),x.add(f)&&S&&o&&(s=e.order.length),f},cancel:f=>{n.remove(f),c.delete(f)},process:f=>{if(o){a=!0;return}if(o=!0,[e,n]=[n,e],n.clear(),s=e.order.length,s)for(let y=0;y<s;y++){const g=e.order[y];c.has(g)&&(d.schedule(g),t()),g(f)}o=!1,a&&(a=!1,d.process(f))}};return d}const el=["read","resolveKeyframes","update","preRender","render","postRender"],LC=40;function Zg(t,e){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=el.reduce((S,x)=>(S[x]=kC(()=>n=!0),S),{}),c=S=>{a[S].process(o)},d=()=>{const S=performance.now();n=!1,o.delta=s?1e3/60:Math.max(Math.min(S-o.timestamp,LC),1),o.timestamp=S,o.isProcessing=!0,el.forEach(c),o.isProcessing=!1,n&&e&&(s=!1,t(d))},f=()=>{n=!0,s=!0,o.isProcessing||t(d)};return{schedule:el.reduce((S,x)=>{const p=a[x];return S[x]=(C,B=!1,T=!1)=>(n||f(),p.schedule(C,B,T)),S},{}),cancel:S=>el.forEach(x=>a[x].cancel(S)),state:o,steps:a}}const{schedule:Em,cancel:fb}=Zg(queueMicrotask,!1);function RC(t,e,n,s){const{visualElement:o}=nt.useContext(gu),a=nt.useContext(Xg),c=nt.useContext(Lm),d=nt.useContext(Hg).reducedMotion,f=nt.useRef();s=s||a.renderer,!f.current&&s&&(f.current=s(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const y=f.current;nt.useInsertionEffect(()=>{y&&y.update(n,c)});const g=nt.useRef(!!(n[$g]&&!window.HandoffComplete));return Jg(()=>{y&&(Em.postRender(y.render),g.current&&y.animationState&&y.animationState.animateChanges())}),nt.useEffect(()=>{y&&(y.updateFeatures(),!g.current&&y.animationState&&y.animationState.animateChanges(),g.current&&(g.current=!1,window.HandoffComplete=!0))}),y}function Sr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function FC(t,e,n){return nt.useCallback(s=>{s&&t.mount&&t.mount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Sr(n)&&(n.current=s))},[e])}function ia(t){return typeof t=="string"||Array.isArray(t)}function vu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Gm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jm=["initial",...Gm];function xu(t){return vu(t.animate)||jm.some(e=>ia(t[e]))}function Qg(t){return!!(xu(t)||t.variants)}function EC(t,e){if(xu(t)){const{initial:n,animate:s}=t;return{initial:n===!1||ia(n)?n:void 0,animate:ia(s)?s:void 0}}return t.inherit!==!1?e:{}}function GC(t){const{initial:e,animate:n}=EC(t,nt.useContext(gu));return nt.useMemo(()=>({initial:e,animate:n}),[mp(e),mp(n)])}function mp(t){return Array.isArray(t)?t.join(" "):t}const dp={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},na={};for(const t in dp)na[t]={isEnabled:e=>dp[t].some(n=>!!e[n])};function jC(t){for(const e in t)na[e]={...na[e],...t[e]}}const Wl=nt.createContext({}),Kg=nt.createContext({}),NC=Symbol.for("motionComponentSymbol");function zC({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:o}){t&&jC(t);function a(d,f){let y;const g={...nt.useContext(Hg),...d,layoutId:OC(d)},{isStatic:S}=g,x=GC(d),p=s(d,S);if(!S&&Rm){x.visualElement=RC(o,p,g,e);const C=nt.useContext(Kg),B=nt.useContext(Xg).strict;x.visualElement&&(y=x.visualElement.loadFeatures(g,B,t,C))}return nt.createElement(gu.Provider,{value:x},y&&x.visualElement?nt.createElement(y,{visualElement:x.visualElement,...g}):null,n(o,d,FC(p,x.visualElement,f),p,S,x.visualElement))}const c=nt.forwardRef(a);return c[NC]=o,c}function OC({layoutId:t}){const e=nt.useContext(Wl).id;return e&&t!==void 0?e+"-"+t:t}function UC(t){function e(s,o={}){return zC(t(s,o))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(s,o)=>(n.has(o)||n.set(o,e(o)),n.get(o))})}const WC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Nm(t){return typeof t!="string"||t.includes("-")?!1:!!(WC.indexOf(t)>-1||/[A-Z]/u.test(t))}const ql={};function qC(t){Object.assign(ql,t)}const ha=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ir=new Set(ha);function Yg(t,{layout:e,layoutId:n}){return ir.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ql[t]||t==="opacity")}const ai=t=>!!(t&&t.getVelocity),HC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JC=ha.length;function XC(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},s,o){let a="";for(let c=0;c<JC;c++){const d=ha[c];if(t[d]!==void 0){const f=HC[d]||d;a+=`${f}(${t[d]}) `}}return e&&!t.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(t,s?"":a):n&&s&&(a="none"),a}const tv=t=>e=>typeof e=="string"&&e.startsWith(t),ev=tv("--"),$C=tv("var(--"),zm=t=>$C(t)?ZC.test(t.split("/*")[0].trim()):!1,ZC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,QC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ss=(t,e,n)=>n>e?e:n<t?t:n,qr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ko={...qr,transform:t=>Ss(0,1,t)},il={...qr,default:1},Lo=t=>Math.round(t*1e5)/1e5,Om=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,KC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,YC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function ma(t){return typeof t=="string"}const da=t=>({test:e=>ma(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ts=da("deg"),yn=da("%"),jt=da("px"),tB=da("vh"),eB=da("vw"),fp={...yn,parse:t=>yn.parse(t)/100,transform:t=>yn.transform(t*100)},pp={...qr,transform:Math.round},iv={borderWidth:jt,borderTopWidth:jt,borderRightWidth:jt,borderBottomWidth:jt,borderLeftWidth:jt,borderRadius:jt,radius:jt,borderTopLeftRadius:jt,borderTopRightRadius:jt,borderBottomRightRadius:jt,borderBottomLeftRadius:jt,width:jt,maxWidth:jt,height:jt,maxHeight:jt,size:jt,top:jt,right:jt,bottom:jt,left:jt,padding:jt,paddingTop:jt,paddingRight:jt,paddingBottom:jt,paddingLeft:jt,margin:jt,marginTop:jt,marginRight:jt,marginBottom:jt,marginLeft:jt,rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:il,scaleX:il,scaleY:il,scaleZ:il,skew:ts,skewX:ts,skewY:ts,distance:jt,translateX:jt,translateY:jt,translateZ:jt,x:jt,y:jt,z:jt,perspective:jt,transformPerspective:jt,opacity:ko,originX:fp,originY:fp,originZ:jt,zIndex:pp,backgroundPositionX:jt,backgroundPositionY:jt,fillOpacity:ko,strokeOpacity:ko,numOctaves:pp};function Um(t,e,n,s){const{style:o,vars:a,transform:c,transformOrigin:d}=t;let f=!1,y=!1,g=!0;for(const S in e){const x=e[S];if(ev(S)){a[S]=x;continue}const p=iv[S],C=QC(x,p);if(ir.has(S)){if(f=!0,c[S]=C,!g)continue;x!==(p.default||0)&&(g=!1)}else S.startsWith("origin")?(y=!0,d[S]=C):o[S]=C}if(e.transform||(f||s?o.transform=XC(t.transform,n,g,s):o.transform&&(o.transform="none")),y){const{originX:S="50%",originY:x="50%",originZ:p=0}=d;o.transformOrigin=`${S} ${x} ${p}`}}const Wm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nv(t,e,n){for(const s in e)!ai(e[s])&&!Yg(s,n)&&(t[s]=e[s])}function iB({transformTemplate:t},e,n){return nt.useMemo(()=>{const s=Wm();return Um(s,e,{enableHardwareAcceleration:!n},t),Object.assign({},s.vars,s.style)},[e])}function nB(t,e,n){const s=t.style||{},o={};return nv(o,s,t),Object.assign(o,iB(t,e,n)),o}function sB(t,e,n){const s={},o=nB(t,e,n);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=o,s}const rB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rB.has(t)}let sv=t=>!Hl(t);function oB(t){t&&(sv=e=>e.startsWith("on")?!Hl(e):t(e))}try{oB(require("@emotion/is-prop-valid").default)}catch{}function aB(t,e,n){const s={};for(const o in t)o==="values"&&typeof t.values=="object"||(sv(o)||n===!0&&Hl(o)||!e&&!Hl(o)||t.draggable&&o.startsWith("onDrag"))&&(s[o]=t[o]);return s}function _p(t,e,n){return typeof t=="string"?t:jt.transform(e+n*t)}function lB(t,e,n){const s=_p(e,t.x,t.width),o=_p(n,t.y,t.height);return`${s} ${o}`}const uB={offset:"stroke-dashoffset",array:"stroke-dasharray"},cB={offset:"strokeDashoffset",array:"strokeDasharray"};function hB(t,e,n=1,s=0,o=!0){t.pathLength=1;const a=o?uB:cB;t[a.offset]=jt.transform(-s);const c=jt.transform(e),d=jt.transform(n);t[a.array]=`${c} ${d}`}function qm(t,{attrX:e,attrY:n,attrScale:s,originX:o,originY:a,pathLength:c,pathSpacing:d=1,pathOffset:f=0,...y},g,S,x){if(Um(t,y,g,x),S){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:C,dimensions:B}=t;p.transform&&(B&&(C.transform=p.transform),delete p.transform),B&&(o!==void 0||a!==void 0||C.transform)&&(C.transformOrigin=lB(B,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),s!==void 0&&(p.scale=s),c!==void 0&&hB(p,c,d,f,!1)}const rv=()=>({...Wm(),attrs:{}}),Hm=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mB(t,e,n,s){const o=nt.useMemo(()=>{const a=rv();return qm(a,e,{enableHardwareAcceleration:!1},Hm(s),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};nv(a,t.style,t),o.style={...a,...o.style}}return o}function dB(t=!1){return(n,s,o,{latestValues:a},c)=>{const f=(Nm(n)?mB:sB)(s,a,c,n),y=aB(s,typeof n=="string",t),g=n!==nt.Fragment?{...y,...f,ref:o}:{},{children:S}=s,x=nt.useMemo(()=>ai(S)?S.get():S,[S]);return nt.createElement(n,{...g,children:x})}}function ov(t,{style:e,vars:n},s,o){Object.assign(t.style,e,o&&o.getProjectionStyles(s));for(const a in n)t.style.setProperty(a,n[a])}const av=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lv(t,e,n,s){ov(t,e,void 0,s);for(const o in e.attrs)t.setAttribute(av.has(o)?o:Fm(o),e.attrs[o])}function Jm(t,e,n){var s;const{style:o}=t,a={};for(const c in o)(ai(o[c])||e.style&&ai(e.style[c])||Yg(c,t)||((s=n==null?void 0:n.getValue(c))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(a[c]=o[c]);return a}function uv(t,e,n){const s=Jm(t,e,n);for(const o in t)if(ai(t[o])||ai(e[o])){const a=ha.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[a]=t[o]}return s}function Xm(t,e,n,s={},o={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,s,o)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,s,o)),e}function fB(t){const e=nt.useRef(null);return e.current===null&&(e.current=t()),e.current}const Bh=t=>Array.isArray(t),pB=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),_B=t=>Bh(t)?t[t.length-1]||0:t;function _l(t){const e=ai(t)?t.get():t;return pB(e)?e.toValue():e}function yB({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},s,o,a){const c={latestValues:gB(s,o,a,t),renderState:e()};return n&&(c.mount=d=>n(s,d,c)),c}const cv=t=>(e,n)=>{const s=nt.useContext(gu),o=nt.useContext(Lm),a=()=>yB(t,e,s,o);return n?a():fB(a)};function gB(t,e,n,s){const o={},a=s(t,{});for(const x in a)o[x]=_l(a[x]);let{initial:c,animate:d}=t;const f=xu(t),y=Qg(t);e&&y&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const S=g?d:c;return S&&typeof S!="boolean"&&!vu(S)&&(Array.isArray(S)?S:[S]).forEach(p=>{const C=Xm(t,p);if(!C)return;const{transitionEnd:B,transition:T,...M}=C;for(const I in M){let L=M[I];if(Array.isArray(L)){const F=g?L.length-1:0;L=L[F]}L!==null&&(o[I]=L)}for(const I in B)o[I]=B[I]}),o}const li=t=>t,{schedule:qe,cancel:ws,state:Ze,steps:_c}=Zg(typeof requestAnimationFrame<"u"?requestAnimationFrame:li,!0),vB={useVisualState:cv({scrapeMotionValuesFromProps:uv,createRenderState:rv,onMount:(t,e,{renderState:n,latestValues:s})=>{qe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),qe.render(()=>{qm(n,s,{enableHardwareAcceleration:!1},Hm(e.tagName),t.transformTemplate),lv(e,n)})}})},xB={useVisualState:cv({scrapeMotionValuesFromProps:Jm,createRenderState:Wm})};function SB(t,{forwardMotionProps:e=!1},n,s){return{...Nm(t)?vB:xB,preloadedFeatures:n,useRender:dB(e),createVisualElement:s,Component:t}}function Ln(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const hv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Su(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const wB=t=>e=>hv(e)&&t(e,Su(e));function Fn(t,e,n,s){return Ln(t,e,wB(n),s)}const CB=(t,e)=>n=>e(t(n)),En=(...t)=>t.reduce(CB);function mv(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const yp=mv("dragHorizontal"),gp=mv("dragVertical");function dv(t){let e=!1;if(t==="y")e=gp();else if(t==="x")e=yp();else{const n=yp(),s=gp();n&&s?e=()=>{n(),s()}:(n&&n(),s&&s())}return e}function fv(){const t=dv(!0);return t?(t(),!1):!0}class bs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function vp(t,e){const n="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End"),o=(a,c)=>{if(a.pointerType==="touch"||fv())return;const d=t.getProps();t.animationState&&d.whileHover&&t.animationState.setActive("whileHover",e),d[s]&&d[s](a,c)};return Fn(t.current,n,o,{passive:!t.getProps()[s]})}class BB extends bs{mount(){this.unmount=En(vp(this.node,!0),vp(this.node,!1))}unmount(){}}class AB extends bs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=En(Ln(this.node.current,"focus",()=>this.onFocus()),Ln(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const pv=(t,e)=>e?t===e?!0:pv(t,e.parentElement):!1;function yc(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Su(n))}class VB extends bs{constructor(){super(...arguments),this.removeStartListeners=li,this.removeEndListeners=li,this.removeAccessibleListeners=li,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=Fn(window,"pointerup",(d,f)=>{if(!this.checkPressEnd())return;const{onTap:y,onTapCancel:g,globalTapTarget:S}=this.node.getProps();!S&&!pv(this.node.current,d.target)?g&&g(d,f):y&&y(d,f)},{passive:!(s.onTap||s.onPointerUp)}),c=Fn(window,"pointercancel",(d,f)=>this.cancelPress(d,f),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=En(a,c),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const c=d=>{d.key!=="Enter"||!this.checkPressEnd()||yc("up",(f,y)=>{const{onTap:g}=this.node.getProps();g&&g(f,y)})};this.removeEndListeners(),this.removeEndListeners=Ln(this.node.current,"keyup",c),yc("down",(d,f)=>{this.startPress(d,f)})},n=Ln(this.node.current,"keydown",e),s=()=>{this.isPressing&&yc("cancel",(a,c)=>this.cancelPress(a,c))},o=Ln(this.node.current,"blur",s);this.removeAccessibleListeners=En(n,o)}}startPress(e,n){this.isPressing=!0;const{onTapStart:s,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&s(e,n)}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fv()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&s(e,n)}mount(){const e=this.node.getProps(),n=Fn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=Ln(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=En(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ah=new WeakMap,gc=new WeakMap,bB=t=>{const e=Ah.get(t.target);e&&e(t)},PB=t=>{t.forEach(bB)};function MB({root:t,...e}){const n=t||document;gc.has(n)||gc.set(n,{});const s=gc.get(n),o=JSON.stringify(e);return s[o]||(s[o]=new IntersectionObserver(PB,{root:t,...e})),s[o]}function TB(t,e,n){const s=MB(e);return Ah.set(t,n),s.observe(t),()=>{Ah.delete(t),s.unobserve(t)}}const IB={some:0,all:1};class DB extends bs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:IB[o]},d=f=>{const{isIntersecting:y}=f;if(this.isInView===y||(this.isInView=y,a&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:g,onViewportLeave:S}=this.node.getProps(),x=y?g:S;x&&x(f)};return TB(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(kB(e,n))&&this.startObserver()}unmount(){}}function kB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const LB={inView:{Feature:DB},tap:{Feature:VB},focus:{Feature:AB},hover:{Feature:BB}};function _v(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function RB(t){const e={};return t.values.forEach((n,s)=>e[s]=n.get()),e}function FB(t){const e={};return t.values.forEach((n,s)=>e[s]=n.getVelocity()),e}function wu(t,e,n){const s=t.getProps();return Xm(s,e,n!==void 0?n:s.custom,RB(t),FB(t))}const ys=t=>t*1e3,Gn=t=>t/1e3,EB={type:"spring",stiffness:500,damping:25,restSpeed:10},GB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jB={type:"keyframes",duration:.8},NB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zB=(t,{keyframes:e})=>e.length>2?jB:ir.has(t)?t.startsWith("scale")?GB(e[1]):EB:NB;function OB({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:o,repeat:a,repeatType:c,repeatDelay:d,from:f,elapsed:y,...g}){return!!Object.keys(g).length}function $m(t,e){return t[e]||t.default||t}const UB=t=>t!==null;function Cu(t,{repeat:e,repeatType:n="loop"},s){const o=t.filter(UB),a=e&&n!=="loop"&&e%2===1?0:o.length-1;return!a||s===void 0?o[a]:s}let yl;function WB(){yl=void 0}const gs={now:()=>(yl===void 0&&gs.set(Ze.isProcessing||DC.useManualTiming?Ze.timestamp:performance.now()),yl),set:t=>{yl=t,queueMicrotask(WB)}},yv=t=>/^0[^.\s]+$/u.test(t);function qB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||yv(t):!0}let gv=li;const vv=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),HB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JB(t){const e=HB.exec(t);if(!e)return[,];const[,n,s,o]=e;return[`--${n??s}`,o]}function xv(t,e,n=1){const[s,o]=JB(t);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const c=a.trim();return vv(c)?parseFloat(c):c}return zm(o)?xv(o,e,n+1):o}const XB=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xp=t=>t===qr||t===jt,Sp=(t,e)=>parseFloat(t.split(", ")[e]),wp=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const o=s.match(/^matrix3d\((.+)\)$/u);if(o)return Sp(o[1],e);{const a=s.match(/^matrix\((.+)\)$/u);return a?Sp(a[1],t):0}},$B=new Set(["x","y","z"]),ZB=ha.filter(t=>!$B.has(t));function Cp(t){const e=[];return ZB.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const jr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:wp(4,13),y:wp(5,14)};jr.translateX=jr.x;jr.translateY=jr.y;const Sv=t=>e=>e.test(t),QB={test:t=>t==="auto",parse:t=>t},wv=[qr,jt,yn,ts,eB,tB,QB],Bp=t=>wv.find(Sv(t)),Xs=new Set;let Vh=!1,bh=!1;function Cv(){if(bh){const t=Array.from(Xs).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{Cp(s).length&&(n.set(s,Cp(s)),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render()}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}bh=!1,Vh=!1,Xs.forEach(t=>t.complete()),Xs.clear()}function Bv(){Xs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bh=!0)})}function KB(){Bv(),Cv()}class Zm{constructor(e,n,s,o,a,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=o,this.element=a,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Xs.add(this),Vh||(Vh=!0,qe.read(Bv),qe.resolveKeyframes(Cv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:o}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const c=o==null?void 0:o.get(),d=e[e.length-1];if(c!==void 0)e[0]=c;else if(s&&n){const f=s.readValue(n,d);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=d),o&&c===void 0&&o.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Xs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Xs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Qm=(t,e)=>n=>!!(ma(n)&&YC.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Av=(t,e,n)=>s=>{if(!ma(s))return s;const[o,a,c,d]=s.match(Om);return{[t]:parseFloat(o),[e]:parseFloat(a),[n]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},YB=t=>Ss(0,255,t),vc={...qr,transform:t=>Math.round(YB(t))},Ws={test:Qm("rgb","red"),parse:Av("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+vc.transform(t)+", "+vc.transform(e)+", "+vc.transform(n)+", "+Lo(ko.transform(s))+")"};function t1(t){let e="",n="",s="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,s+=s,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const Ph={test:Qm("#"),parse:t1,transform:Ws.transform},wr={test:Qm("hsl","hue"),parse:Av("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+yn.transform(Lo(e))+", "+yn.transform(Lo(n))+", "+Lo(ko.transform(s))+")"},ri={test:t=>Ws.test(t)||Ph.test(t)||wr.test(t),parse:t=>Ws.test(t)?Ws.parse(t):wr.test(t)?wr.parse(t):Ph.parse(t),transform:t=>ma(t)?t:t.hasOwnProperty("red")?Ws.transform(t):wr.transform(t)};function e1(t){var e,n;return isNaN(t)&&ma(t)&&(((e=t.match(Om))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(KC))===null||n===void 0?void 0:n.length)||0)>0}const Vv="number",bv="color",i1="var",n1="var(",Ap="${}",s1=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Jl(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},o=[];let a=0;const d=e.replace(s1,f=>(ri.test(f)?(s.color.push(a),o.push(bv),n.push(ri.parse(f))):f.startsWith(n1)?(s.var.push(a),o.push(i1),n.push(f)):(s.number.push(a),o.push(Vv),n.push(parseFloat(f))),++a,Ap)).split(Ap);return{values:n,split:d,indexes:s,types:o}}function Pv(t){return Jl(t).values}function Mv(t){const{split:e,types:n}=Jl(t),s=e.length;return o=>{let a="";for(let c=0;c<s;c++)if(a+=e[c],o[c]!==void 0){const d=n[c];d===Vv?a+=Lo(o[c]):d===bv?a+=ri.transform(o[c]):a+=o[c]}return a}}const r1=t=>typeof t=="number"?0:t;function o1(t){const e=Pv(t);return Mv(t)(e.map(r1))}const Cs={test:e1,parse:Pv,createTransformer:Mv,getAnimatableNone:o1},a1=new Set(["brightness","contrast","saturate","opacity"]);function l1(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(Om)||[];if(!s)return t;const o=n.replace(s,"");let a=a1.has(e)?1:0;return s!==n&&(a*=100),e+"("+a+o+")"}const u1=/\b([a-z-]*)\(.*?\)/gu,Mh={...Cs,getAnimatableNone:t=>{const e=t.match(u1);return e?e.map(l1).join(" "):t}},c1={...iv,color:ri,backgroundColor:ri,outlineColor:ri,fill:ri,stroke:ri,borderColor:ri,borderTopColor:ri,borderRightColor:ri,borderBottomColor:ri,borderLeftColor:ri,filter:Mh,WebkitFilter:Mh},Km=t=>c1[t];function Tv(t,e){let n=Km(t);return n!==Mh&&(n=Cs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}function h1(t,e,n){let s=0,o;for(;s<t.length&&!o;)typeof t[s]=="string"&&t[s]!=="none"&&t[s]!=="0"&&(o=t[s]),s++;if(o&&n)for(const a of e)t[a]=Tv(n,o)}class Iv extends Zm{constructor(e,n,s,o){super(e,n,s,o,o==null?void 0:o.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){const y=e[f];if(typeof y=="string"&&zm(y)){const g=xv(y,n.current);g!==void 0&&(e[f]=g)}}if(!XB.has(s)||e.length!==2)return this.resolveNoneKeyframes();const[o,a]=e,c=Bp(o),d=Bp(a);if(c!==d)if(xp(c)&&xp(d))for(let f=0;f<e.length;f++){const y=e[f];typeof y=="string"&&(e[f]=parseFloat(y))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let o=0;o<e.length;o++)qB(e[o])&&s.push(o);s.length&&h1(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jr[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(s,o).jump(o,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:o}=this;if(!n.current)return;const a=n.getValue(s);a&&a.jump(this.measuredOrigin,!1);const c=o.length-1,d=o[c];o[c]=jr[s](n.measureViewportBox(),window.getComputedStyle(n.current)),d!==null&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,y])=>{n.getValue(f).set(y)}),this.resolveNoneKeyframes()}}function m1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Vp=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Cs.test(t)||t==="0")&&!t.startsWith("url("));function d1(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function f1(t,e,n,s){const o=t[0];if(o===null)return!1;const a=t[t.length-1],c=Vp(o,e),d=Vp(a,e);return!c||!d?!1:d1(t)||n==="spring"&&s}class Dv{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:c="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:n,type:s,repeat:o,repeatDelay:a,repeatType:c,...d},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&KB(),this._resolved}onKeyframesResolved(e,n){this.hasAttemptedResolve=!0;const{name:s,type:o,velocity:a,delay:c,onComplete:d,onUpdate:f,isGenerator:y}=this.options;if(!y&&!f1(e,s,o,a))if(c)this.options.duration=0;else{f==null||f(Cu(e,this.options,n)),d==null||d(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function kv(t,e){return e?t*(1e3/e):0}const p1=5;function Lv(t,e,n){const s=Math.max(e-p1,0);return kv(n-t(s),e-s)}const xc=.001,_1=.01,y1=10,g1=.05,v1=1;function x1({duration:t=800,bounce:e=.25,velocity:n=0,mass:s=1}){let o,a,c=1-e;c=Ss(g1,v1,c),t=Ss(_1,y1,Gn(t)),c<1?(o=y=>{const g=y*c,S=g*t,x=g-n,p=Th(y,c),C=Math.exp(-S);return xc-x/p*C},a=y=>{const S=y*c*t,x=S*n+n,p=Math.pow(c,2)*Math.pow(y,2)*t,C=Math.exp(-S),B=Th(Math.pow(y,2),c);return(-o(y)+xc>0?-1:1)*((x-p)*C)/B}):(o=y=>{const g=Math.exp(-y*t),S=(y-n)*t+1;return-xc+g*S},a=y=>{const g=Math.exp(-y*t),S=(n-y)*(t*t);return g*S});const d=5/t,f=w1(o,a,d);if(t=ys(t),isNaN(f))return{stiffness:100,damping:10,duration:t};{const y=Math.pow(f,2)*s;return{stiffness:y,damping:c*2*Math.sqrt(s*y),duration:t}}}const S1=12;function w1(t,e,n){let s=n;for(let o=1;o<S1;o++)s=s-t(s)/e(s);return s}function Th(t,e){return t*Math.sqrt(1-e*e)}const C1=["duration","bounce"],B1=["stiffness","damping","mass"];function bp(t,e){return e.some(n=>t[n]!==void 0)}function A1(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!bp(t,B1)&&bp(t,C1)){const n=x1(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function Rv({keyframes:t,restDelta:e,restSpeed:n,...s}){const o=t[0],a=t[t.length-1],c={done:!1,value:o},{stiffness:d,damping:f,mass:y,duration:g,velocity:S,isResolvedFromDuration:x}=A1({...s,velocity:-Gn(s.velocity||0)}),p=S||0,C=f/(2*Math.sqrt(d*y)),B=a-o,T=Gn(Math.sqrt(d/y)),M=Math.abs(B)<5;n||(n=M?.01:2),e||(e=M?.005:.5);let I;if(C<1){const L=Th(T,C);I=F=>{const k=Math.exp(-C*T*F);return a-k*((p+C*T*B)/L*Math.sin(L*F)+B*Math.cos(L*F))}}else if(C===1)I=L=>a-Math.exp(-T*L)*(B+(p+T*B)*L);else{const L=T*Math.sqrt(C*C-1);I=F=>{const k=Math.exp(-C*T*F),G=Math.min(L*F,300);return a-k*((p+C*T*B)*Math.sinh(G)+L*B*Math.cosh(G))/L}}return{calculatedDuration:x&&g||null,next:L=>{const F=I(L);if(x)c.done=L>=g;else{let k=p;L!==0&&(C<1?k=Lv(I,L,F):k=0);const G=Math.abs(k)<=n,O=Math.abs(a-F)<=e;c.done=G&&O}return c.value=c.done?a:F,c}}}function Pp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:c,min:d,max:f,restDelta:y=.5,restSpeed:g}){const S=t[0],x={done:!1,value:S},p=E=>d!==void 0&&E<d||f!==void 0&&E>f,C=E=>d===void 0?f:f===void 0||Math.abs(d-E)<Math.abs(f-E)?d:f;let B=n*e;const T=S+B,M=c===void 0?T:c(T);M!==T&&(B=M-S);const I=E=>-B*Math.exp(-E/s),L=E=>M+I(E),F=E=>{const H=I(E),q=L(E);x.done=Math.abs(H)<=y,x.value=x.done?M:q};let k,G;const O=E=>{p(x.value)&&(k=E,G=Rv({keyframes:[x.value,C(x.value)],velocity:Lv(L,E,x.value),damping:o,stiffness:a,restDelta:y,restSpeed:g}))};return O(0),{calculatedDuration:null,next:E=>{let H=!1;return!G&&k===void 0&&(H=!0,F(E),O(E)),k!==void 0&&E>=k?G.next(E-k):(!H&&F(E),x)}}}const Fv=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,V1=1e-7,b1=12;function P1(t,e,n,s,o){let a,c,d=0;do c=e+(n-e)/2,a=Fv(c,s,o)-t,a>0?n=c:e=c;while(Math.abs(a)>V1&&++d<b1);return c}function fa(t,e,n,s){if(t===e&&n===s)return li;const o=a=>P1(a,0,1,t,n);return a=>a===0||a===1?a:Fv(o(a),e,s)}const M1=fa(.42,0,1,1),T1=fa(0,0,.58,1),Ev=fa(.42,0,.58,1),I1=t=>Array.isArray(t)&&typeof t[0]!="number",Gv=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,jv=t=>e=>1-t(1-e),Ym=t=>1-Math.sin(Math.acos(t)),Nv=jv(Ym),D1=Gv(Ym),zv=fa(.33,1.53,.69,.99),td=jv(zv),k1=Gv(td),L1=t=>(t*=2)<1?.5*td(t):.5*(2-Math.pow(2,-10*(t-1))),R1={linear:li,easeIn:M1,easeInOut:Ev,easeOut:T1,circIn:Ym,circInOut:D1,circOut:Nv,backIn:td,backInOut:k1,backOut:zv,anticipate:L1},Mp=t=>{if(Array.isArray(t)){gv(t.length===4);const[e,n,s,o]=t;return fa(e,n,s,o)}else if(typeof t=="string")return R1[t];return t},sa=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},xe=(t,e,n)=>t+(e-t)*n;function Sc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function F1({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let o=0,a=0,c=0;if(!e)o=a=c=n;else{const d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;o=Sc(f,d,t+1/3),a=Sc(f,d,t),c=Sc(f,d,t-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:s}}const wc=(t,e,n)=>{const s=t*t,o=n*(e*e-s)+s;return o<0?0:Math.sqrt(o)},E1=[Ph,Ws,wr],G1=t=>E1.find(e=>e.test(t));function Tp(t){const e=G1(t);let n=e.parse(t);return e===wr&&(n=F1(n)),n}const Ip=(t,e)=>{const n=Tp(t),s=Tp(e),o={...n};return a=>(o.red=wc(n.red,s.red,a),o.green=wc(n.green,s.green,a),o.blue=wc(n.blue,s.blue,a),o.alpha=xe(n.alpha,s.alpha,a),Ws.transform(o))};function Ih(t,e){return n=>n>0?e:t}function j1(t,e){return n=>xe(t,e,n)}function ed(t){return typeof t=="number"?j1:typeof t=="string"?zm(t)?Ih:ri.test(t)?Ip:O1:Array.isArray(t)?Ov:typeof t=="object"?ri.test(t)?Ip:N1:Ih}function Ov(t,e){const n=[...t],s=n.length,o=t.map((a,c)=>ed(a)(a,e[c]));return a=>{for(let c=0;c<s;c++)n[c]=o[c](a);return n}}function N1(t,e){const n={...t,...e},s={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(s[o]=ed(t[o])(t[o],e[o]));return o=>{for(const a in s)n[a]=s[a](o);return n}}function z1(t,e){var n;const s=[],o={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const c=e.types[a],d=t.indexes[c][o[c]],f=(n=t.values[d])!==null&&n!==void 0?n:0;s[a]=f,o[c]++}return s}const O1=(t,e)=>{const n=Cs.createTransformer(e),s=Jl(t),o=Jl(e);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?En(Ov(z1(s,o),o.values),n):Ih(t,e)};function Uv(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?xe(t,e,n):ed(t)(t,e)}function U1(t,e,n){const s=[],o=n||Uv,a=t.length-1;for(let c=0;c<a;c++){let d=o(t[c],t[c+1]);if(e){const f=Array.isArray(e)?e[c]||li:e;d=En(f,d)}s.push(d)}return s}function W1(t,e,{clamp:n=!0,ease:s,mixer:o}={}){const a=t.length;if(gv(a===e.length),a===1)return()=>e[0];if(a===2&&t[0]===t[1])return()=>e[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=U1(e,s,o),d=c.length,f=y=>{let g=0;if(d>1)for(;g<t.length-2&&!(y<t[g+1]);g++);const S=sa(t[g],t[g+1],y);return c[g](S)};return n?y=>f(Ss(t[0],t[a-1],y)):f}function q1(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const o=sa(0,e,s);t.push(xe(n,1,o))}}function H1(t){const e=[0];return q1(e,t.length-1),e}function J1(t,e){return t.map(n=>n*e)}function X1(t,e){return t.map(()=>e||Ev).splice(0,t.length-1)}function Xl({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const o=I1(s)?s.map(Mp):Mp(s),a={done:!1,value:e[0]},c=J1(n&&n.length===e.length?n:H1(e),t),d=W1(c,e,{ease:Array.isArray(o)?o:X1(e,o)});return{calculatedDuration:t,next:f=>(a.value=d(f),a.done=f>=t,a)}}const Dp=2e4;function $1(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Dp;)e+=n,s=t.next(e);return e>=Dp?1/0:e}const Z1=t=>{const e=({timestamp:n})=>t(n);return{start:()=>qe.update(e,!0),stop:()=>ws(e),now:()=>Ze.isProcessing?Ze.timestamp:gs.now()}},Q1={decay:Pp,inertia:Pp,tween:Xl,keyframes:Xl,spring:Rv},K1=t=>t/100;class id extends Dv{constructor({KeyframeResolver:e=Zm,...n}){super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle";const{name:s,motionValue:o,keyframes:a}=this.options,c=(d,f)=>this.onKeyframesResolved(d,f);s&&o&&o.owner?this.resolver=o.owner.resolveKeyframes(a,c,s,o):this.resolver=new e(a,c,s,o),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a,velocity:c=0}=this.options,d=Q1[n]||Xl;let f,y;d!==Xl&&typeof e[0]!="number"&&(f=En(K1,Uv(e[0],e[1])),e=[0,100]);const g=d({...this.options,keyframes:e});a==="mirror"&&(y=d({...this.options,keyframes:[...e].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=$1(g));const{calculatedDuration:S}=g,x=S+o,p=x*(s+1)-o;return{generator:g,mirroredGenerator:y,mapPercentToKeyframes:f,calculatedDuration:S,resolvedDuration:x,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:o,generator:a,mirroredGenerator:c,mapPercentToKeyframes:d,keyframes:f,calculatedDuration:y,totalDuration:g,resolvedDuration:S}=s;if(this.startTime===null)return a.next(0);const{delay:x,repeat:p,repeatType:C,repeatDelay:B,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const M=this.currentTime-x*(this.speed>=0?1:-1),I=this.speed>=0?M<0:M>g;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let L=this.currentTime,F=a;if(p){const E=Math.min(this.currentTime,g)/S;let H=Math.floor(E),q=E%1;!q&&E>=1&&(q=1),q===1&&H--,H=Math.min(H,p+1),!!(H%2)&&(C==="reverse"?(q=1-q,B&&(q-=B/S)):C==="mirror"&&(F=c)),L=Ss(0,1,q)*S}const k=I?{done:!1,value:f[0]}:F.next(L);d&&(k.value=d(k.value));let{done:G}=k;!I&&y!==null&&(G=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return O&&o!==void 0&&(k.value=Cu(f,this.options,o)),T&&T(k.value),O&&this.finish(),k}get duration(){const{resolved:e}=this;return e?Gn(e.calculatedDuration):0}get time(){return Gn(this.currentTime)}set time(e){e=ys(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Gn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Z1,onPlay:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=s),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:e}=this.options;e&&e()}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Wv=t=>Array.isArray(t)&&typeof t[0]=="number";function qv(t){return!!(!t||typeof t=="string"&&Hv[t]||Wv(t)||Array.isArray(t)&&t.every(qv))}const Co=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Hv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Co([0,.65,.55,1]),circOut:Co([.55,0,1,.45]),backIn:Co([.31,.01,.66,-.59]),backOut:Co([.33,1.53,.69,.99])};function Jv(t){if(t)return Wv(t)?Co(t):Array.isArray(t)?t.map(Jv):Hv[t]}function Y1(t,e,n,{delay:s=0,duration:o=300,repeat:a=0,repeatType:c="loop",ease:d,times:f}={}){const y={[e]:n};f&&(y.offset=f);const g=Jv(d);return Array.isArray(g)&&(y.easing=g),t.animate(y,{delay:s,duration:o,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"})}const tA=m1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),eA=new Set(["opacity","clipPath","filter","transform"]),$l=10,iA=2e4;function nA(t){return t.type==="spring"||t.name==="backgroundColor"||!qv(t.ease)}function sA(t,e){const n=new id({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const o=[];let a=0;for(;!s.done&&a<iA;)s=n.sample(a),o.push(s.value),a+=$l;return{times:void 0,keyframes:o,duration:a-$l,ease:"linear"}}class kp extends Dv{constructor(e){super(e);const{name:n,motionValue:s,keyframes:o}=this.options;this.resolver=new Iv(o,(a,c)=>this.onKeyframesResolved(a,c),n,s),this.resolver.scheduleResolve()}initPlayback(e,n){var s;let{duration:o=300,times:a,ease:c,type:d,motionValue:f,name:y}=this.options;if(!(!((s=f.owner)===null||s===void 0)&&s.current))return!1;if(nA(this.options)){const{onComplete:S,onUpdate:x,motionValue:p,...C}=this.options,B=sA(e,C);e=B.keyframes,e.length===1&&(e[1]=e[0]),o=B.duration,a=B.times,c=B.ease,d="keyframes"}const g=Y1(f.owner.current,y,e,{...this.options,duration:o,times:a,ease:c});return g.startTime=gs.now(),this.pendingTimeline?(g.timeline=this.pendingTimeline,this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:S}=this.options;f.set(Cu(e,this.options,n)),S&&S(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:o,times:a,type:d,ease:c,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Gn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Gn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=ys(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return li;const{animation:s}=n;s.timeline=e,s.onfinish=null}return li}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:o,type:a,ease:c,times:d}=e;if(!(n.playState==="idle"||n.playState==="finished")){if(this.time){const{motionValue:f,onUpdate:y,onComplete:g,...S}=this.options,x=new id({...S,keyframes:s,duration:o,type:a,ease:c,times:d,isGenerator:!0}),p=ys(this.time);f.setWithVelocity(x.sample(p-$l).value,x.sample(p).value,$l)}this.cancel()}}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:o,repeatType:a,damping:c,type:d}=e;return tA()&&s&&eA.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!o&&a!=="mirror"&&c!==0&&d!=="inertia"}}const nd=(t,e,n,s={},o,a)=>c=>{const d=$m(s,t)||{},f=d.delay||s.delay||0;let{elapsed:y=0}=s;y=y-ys(f);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-y,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:o};OB(d)||(g={...g,...zB(t,g)}),g.duration&&(g.duration=ys(g.duration)),g.repeatDelay&&(g.repeatDelay=ys(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let S=!1;if(g.type===!1&&(g.duration=0,g.delay===0&&(S=!0)),S&&!a&&e.get()!==void 0){const x=Cu(g.keyframes,d);if(x!==void 0){qe.update(()=>{g.onUpdate(x),g.onComplete()});return}}return!a&&kp.supports(g)?new kp(g):new id(g)};function Zl(t){return!!(ai(t)&&t.add)}function sd(t,e){t.indexOf(e)===-1&&t.push(e)}function rd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class od{constructor(){this.subscriptions=[]}add(e){return sd(this.subscriptions,e),()=>rd(this.subscriptions,e)}notify(e,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,s);else for(let a=0;a<o;a++){const c=this.subscriptions[a];c&&c(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Lp=30,rA=t=>!isNaN(parseFloat(t));class oA{constructor(e,n={}){this.version="11.0.24",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,o=!0)=>{const a=gs.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.canTrackVelocity=rA(this.current),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=gs.now()}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new od);const s=this.events[e].add(n);return e==="change"?()=>{s(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=gs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Lp)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Lp);return kv(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ra(t,e){return new oA(t,e)}function aA(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ra(n))}function lA(t,e){const n=wu(t,e);let{transitionEnd:s={},transition:o={},...a}=n||{};a={...a,...s};for(const c in a){const d=_B(a[c]);aA(t,c,d)}}function uA({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Xv(t,e,{delay:n=0,transitionOverride:s,type:o}={}){var a;let{transition:c=t.getDefaultTransition(),transitionEnd:d,...f}=e;const y=t.getValue("willChange");s&&(c=s);const g=[],S=o&&t.animationState&&t.animationState.getState()[o];for(const x in f){const p=t.getValue(x,(a=t.latestValues[x])!==null&&a!==void 0?a:null),C=f[x];if(C===void 0||S&&uA(S,x))continue;const B={delay:n,elapsed:0,...$m(c||{},x)};let T=!1;if(window.HandoffAppearAnimations){const I=t.getProps()[$g];if(I){const L=window.HandoffAppearAnimations(I,x);L!==null&&(B.elapsed=L,T=!0)}}p.start(nd(x,p,C,t.shouldReduceMotion&&ir.has(x)?{type:!1}:B,t,T));const M=p.animation;M&&(Zl(y)&&(y.add(x),M.then(()=>y.remove(x))),g.push(M))}return d&&Promise.all(g).then(()=>{qe.update(()=>{d&&lA(t,d)})}),g}function Dh(t,e,n={}){var s;const o=wu(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(a=n.transitionOverride);const c=o?()=>Promise.all(Xv(t,o,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(y=0)=>{const{delayChildren:g=0,staggerChildren:S,staggerDirection:x}=a;return cA(t,e,g+y,S,x,n)}:()=>Promise.resolve(),{when:f}=a;if(f){const[y,g]=f==="beforeChildren"?[c,d]:[d,c];return y().then(()=>g())}else return Promise.all([c(),d(n.delay)])}function cA(t,e,n=0,s=0,o=1,a){const c=[],d=(t.variantChildren.size-1)*s,f=o===1?(y=0)=>y*s:(y=0)=>d-y*s;return Array.from(t.variantChildren).sort(hA).forEach((y,g)=>{y.notify("AnimationStart",e),c.push(Dh(y,e,{...a,delay:n+f(g)}).then(()=>y.notify("AnimationComplete",e)))}),Promise.all(c)}function hA(t,e){return t.sortNodePosition(e)}function mA(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const o=e.map(a=>Dh(t,a,n));s=Promise.all(o)}else if(typeof e=="string")s=Dh(t,e,n);else{const o=typeof e=="function"?wu(t,e,n.custom):e;s=Promise.all(Xv(t,o,n))}return s.then(()=>{qe.postRender(()=>{t.notify("AnimationComplete",e)})})}const dA=[...Gm].reverse(),fA=Gm.length;function pA(t){return e=>Promise.all(e.map(({animation:n,options:s})=>mA(t,n,s)))}function _A(t){let e=pA(t);const n=gA();let s=!0;const o=f=>(y,g)=>{var S;const x=wu(t,g,f==="exit"?(S=t.presenceContext)===null||S===void 0?void 0:S.custom:void 0);if(x){const{transition:p,transitionEnd:C,...B}=x;y={...y,...B,...C}}return y};function a(f){e=f(t)}function c(f){const y=t.getProps(),g=t.getVariantContext(!0)||{},S=[],x=new Set;let p={},C=1/0;for(let T=0;T<fA;T++){const M=dA[T],I=n[M],L=y[M]!==void 0?y[M]:g[M],F=ia(L),k=M===f?I.isActive:null;k===!1&&(C=T);let G=L===g[M]&&L!==y[M]&&F;if(G&&s&&t.manuallyAnimateOnMount&&(G=!1),I.protectedKeys={...p},!I.isActive&&k===null||!L&&!I.prevProp||vu(L)||typeof L=="boolean")continue;let E=yA(I.prevProp,L)||M===f&&I.isActive&&!G&&F||T>C&&F,H=!1;const q=Array.isArray(L)?L:[L];let $=q.reduce(o(M),{});k===!1&&($={});const{prevResolvedValues:Z={}}=I,ot={...Z,...$},gt=ht=>{E=!0,x.has(ht)&&(H=!0,x.delete(ht)),I.needsAnimating[ht]=!0;const wt=t.getValue(ht);wt&&(wt.liveStyle=!1)};for(const ht in ot){const wt=$[ht],Ct=Z[ht];if(p.hasOwnProperty(ht))continue;let mt=!1;Bh(wt)&&Bh(Ct)?mt=!_v(wt,Ct):mt=wt!==Ct,mt?wt!=null?gt(ht):x.add(ht):wt!==void 0&&x.has(ht)?gt(ht):I.protectedKeys[ht]=!0}I.prevProp=L,I.prevResolvedValues=$,I.isActive&&(p={...p,...$}),s&&t.blockInitialAnimation&&(E=!1),E&&(!G||H)&&S.push(...q.map(ht=>({animation:ht,options:{type:M}})))}if(x.size){const T={};x.forEach(M=>{const I=t.getBaseTarget(M),L=t.getValue(M);L&&(L.liveStyle=!0),T[M]=I===void 0?null:I}),S.push({animation:T})}let B=!!S.length;return s&&(y.initial===!1||y.initial===y.animate)&&!t.manuallyAnimateOnMount&&(B=!1),s=!1,B?e(S):Promise.resolve()}function d(f,y){var g;if(n[f].isActive===y)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(x=>{var p;return(p=x.animationState)===null||p===void 0?void 0:p.setActive(f,y)}),n[f].isActive=y;const S=c(f);for(const x in n)n[x].protectedKeys={};return S}return{animateChanges:c,setActive:d,setAnimateFunction:a,getState:()=>n}}function yA(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_v(e,t):!1}function Fs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gA(){return{animate:Fs(!0),whileInView:Fs(),whileHover:Fs(),whileTap:Fs(),whileDrag:Fs(),whileFocus:Fs(),exit:Fs()}}class vA extends bs{constructor(e){super(e),e.animationState||(e.animationState=_A(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),vu(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let xA=0;class SA extends bs{constructor(){super(...arguments),this.id=xA++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const wA={animation:{Feature:vA},exit:{Feature:SA}},Rp=(t,e)=>Math.abs(t-e);function CA(t,e){const n=Rp(t.x,e.x),s=Rp(t.y,e.y);return Math.sqrt(n**2+s**2)}class $v{constructor(e,n,{transformPagePoint:s,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Bc(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,p=CA(S.offset,{x:0,y:0})>=3;if(!x&&!p)return;const{point:C}=S,{timestamp:B}=Ze;this.history.push({...C,timestamp:B});const{onStart:T,onMove:M}=this.handlers;x||(T&&T(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,S)},this.handlePointerMove=(S,x)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=Cc(x,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(S,x)=>{this.end();const{onEnd:p,onSessionEnd:C,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Bc(S.type==="pointercancel"?this.lastMoveEventInfo:Cc(x,this.transformPagePoint),this.history);this.startEvent&&p&&p(S,T),C&&C(S,T)},!hv(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.contextWindow=o||window;const c=Su(e),d=Cc(c,this.transformPagePoint),{point:f}=d,{timestamp:y}=Ze;this.history=[{...f,timestamp:y}];const{onSessionStart:g}=n;g&&g(e,Bc(d,this.history)),this.removeListeners=En(Fn(this.contextWindow,"pointermove",this.handlePointerMove),Fn(this.contextWindow,"pointerup",this.handlePointerUp),Fn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ws(this.updatePoint)}}function Cc(t,e){return e?{point:e(t.point)}:t}function Fp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Bc({point:t},e){return{point:t,delta:Fp(t,Zv(e)),offset:Fp(t,BA(e)),velocity:AA(e,.1)}}function BA(t){return t[0]}function Zv(t){return t[t.length-1]}function AA(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const o=Zv(t);for(;n>=0&&(s=t[n],!(o.timestamp-s.timestamp>ys(e)));)n--;if(!s)return{x:0,y:0};const a=Gn(o.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const c={x:(o.x-s.x)/a,y:(o.y-s.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Ei(t){return t.max-t.min}function kh(t,e=0,n=.01){return Math.abs(t-e)<=n}function Ep(t,e,n,s=.5){t.origin=s,t.originPoint=xe(e.min,e.max,t.origin),t.scale=Ei(n)/Ei(e),(kh(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=xe(n.min,n.max,t.origin)-t.originPoint,(kh(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ro(t,e,n,s){Ep(t.x,e.x,n.x,s?s.originX:void 0),Ep(t.y,e.y,n.y,s?s.originY:void 0)}function Gp(t,e,n){t.min=n.min+e.min,t.max=t.min+Ei(e)}function VA(t,e,n){Gp(t.x,e.x,n.x),Gp(t.y,e.y,n.y)}function jp(t,e,n){t.min=e.min-n.min,t.max=t.min+Ei(e)}function Fo(t,e,n){jp(t.x,e.x,n.x),jp(t.y,e.y,n.y)}function bA(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?xe(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?xe(n,t,s.max):Math.min(t,n)),t}function Np(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function PA(t,{top:e,left:n,bottom:s,right:o}){return{x:Np(t.x,n,o),y:Np(t.y,e,s)}}function zp(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function MA(t,e){return{x:zp(t.x,e.x),y:zp(t.y,e.y)}}function TA(t,e){let n=.5;const s=Ei(t),o=Ei(e);return o>s?n=sa(e.min,e.max-s,t.min):s>o&&(n=sa(t.min,t.max-o,e.min)),Ss(0,1,n)}function IA(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Lh=.35;function DA(t=Lh){return t===!1?t=0:t===!0&&(t=Lh),{x:Op(t,"left","right"),y:Op(t,"top","bottom")}}function Op(t,e,n){return{min:Up(t,e),max:Up(t,n)}}function Up(t,e){return typeof t=="number"?t:t[e]||0}const Wp=()=>({translate:0,scale:1,origin:0,originPoint:0}),Cr=()=>({x:Wp(),y:Wp()}),qp=()=>({min:0,max:0}),Te=()=>({x:qp(),y:qp()});function Wi(t){return[t("x"),t("y")]}function Qv({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function kA({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function LA(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Ac(t){return t===void 0||t===1}function Rh({scale:t,scaleX:e,scaleY:n}){return!Ac(t)||!Ac(e)||!Ac(n)}function js(t){return Rh(t)||Kv(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Kv(t){return Hp(t.x)||Hp(t.y)}function Hp(t){return t&&t!=="0%"}function Ql(t,e,n){const s=t-n,o=e*s;return n+o}function Jp(t,e,n,s,o){return o!==void 0&&(t=Ql(t,o,s)),Ql(t,n,s)+e}function Fh(t,e=0,n=1,s,o){t.min=Jp(t.min,e,n,s,o),t.max=Jp(t.max,e,n,s,o)}function Yv(t,{x:e,y:n}){Fh(t.x,e.translate,e.scale,e.originPoint),Fh(t.y,n.translate,n.scale,n.originPoint)}function RA(t,e,n,s=!1){const o=n.length;if(!o)return;e.x=e.y=1;let a,c;for(let d=0;d<o;d++){a=n[d],c=a.projectionDelta;const f=a.instance;f&&f.style&&f.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Br(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,Yv(t,c)),s&&js(a.latestValues)&&Br(t,a.latestValues))}e.x=Xp(e.x),e.y=Xp(e.y)}function Xp(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ns(t,e){t.min=t.min+e,t.max=t.max+e}function $p(t,e,[n,s,o]){const a=e[o]!==void 0?e[o]:.5,c=xe(t.min,t.max,a);Fh(t,e[n],e[s],c,e.scale)}const FA=["x","scaleX","originX"],EA=["y","scaleY","originY"];function Br(t,e){$p(t.x,e,FA),$p(t.y,e,EA)}function t0(t,e){return Qv(LA(t.getBoundingClientRect(),e))}function GA(t,e,n){const s=t0(t,n),{scroll:o}=e;return o&&(ns(s.x,o.offset.x),ns(s.y,o.offset.y)),s}const e0=({current:t})=>t?t.ownerDocument.defaultView:null,jA=new WeakMap;class NA{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Te(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=g=>{const{dragSnapToOrigin:S}=this.getProps();S?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Su(g,"page").point)},a=(g,S)=>{const{drag:x,dragPropagation:p,onDragStart:C}=this.getProps();if(x&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=dv(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wi(T=>{let M=this.getAxisMotionValue(T).get()||0;if(yn.test(M)){const{projection:I}=this.visualElement;if(I&&I.layout){const L=I.layout.layoutBox[T];L&&(M=Ei(L)*(parseFloat(M)/100))}}this.originPoint[T]=M}),C&&C(g,S);const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},c=(g,S)=>{const{dragPropagation:x,dragDirectionLock:p,onDirectionLock:C,onDrag:B}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:T}=S;if(p&&this.currentDirection===null){this.currentDirection=zA(T),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",S.point,T),this.updateAxis("y",S.point,T),this.visualElement.render(),B&&B(g,S)},d=(g,S)=>this.stop(g,S),f=()=>Wi(g=>{var S;return this.getAnimationState(g)==="paused"&&((S=this.getAxisMotionValue(g).animation)===null||S===void 0?void 0:S.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new $v(e,{onSessionStart:o,onStart:a,onMove:c,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,contextWindow:e0(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&a(e,n)}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:o}=this.getProps();if(!s||!nl(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=bA(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&Sr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=PA(o.layoutBox,n):this.constraints=!1,this.elastic=DA(s),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Wi(c=>{this.getAxisMotionValue(c)&&(this.constraints[c]=IA(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Sr(e))return!1;const s=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=GA(s,o.root,this.visualElement.getTransformPagePoint());let c=MA(o.layout.layoutBox,a);if(n){const d=n(kA(c));this.hasMutatedConstraints=!!d,d&&(c=Qv(d))}return c}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},y=Wi(g=>{if(!nl(g,n,this.currentDirection))return;let S=f&&f[g]||{};c&&(S={min:0,max:0});const x=o?200:1e6,p=o?40:1e7,C={type:"inertia",velocity:s?e[g]:0,bounceStiffness:x,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...S};return this.startAxisValueAnimation(g,C)});return Promise.all(y).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return s.start(nd(e,s,0,n,this.visualElement))}stopAnimation(){Wi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Wi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Wi(n=>{const{drag:s}=this.getProps();if(!nl(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(n);if(o&&o.layout){const{min:c,max:d}=o.layout.layoutBox[n];a.set(e[n]-xe(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Sr(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Wi(c=>{const d=this.getAxisMotionValue(c);if(d){const f=d.get();o[c]=TA({min:f,max:f},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Wi(c=>{if(!nl(c,e,null))return;const d=this.getAxisMotionValue(c),{min:f,max:y}=this.constraints[c];d.set(xe(f,y,o[c]))})}addListeners(){if(!this.visualElement.current)return;jA.set(this.visualElement,this);const e=this.visualElement.current,n=Fn(e,"pointerdown",f=>{const{drag:y,dragListener:g=!0}=this.getProps();y&&g&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();Sr(f)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),s();const c=Ln(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",({delta:f,hasLayoutChanged:y})=>{this.isDragging&&y&&(Wi(g=>{const S=this.getAxisMotionValue(g);S&&(this.originPoint[g]+=f[g].translate,S.set(S.get()+f[g].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:c=Lh,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:a,dragElastic:c,dragMomentum:d}}}function nl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function zA(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class OA extends bs{constructor(e){super(e),this.removeGroupControls=li,this.removeListeners=li,this.controls=new NA(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||li}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zp=t=>(e,n)=>{t&&t(e,n)};class UA extends bs{constructor(){super(...arguments),this.removePointerDownListener=li}onPointerDown(e){this.session=new $v(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:e0(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:Zp(e),onStart:Zp(n),onMove:s,onEnd:(a,c)=>{delete this.session,o&&o(a,c)}}}mount(){this.removePointerDownListener=Fn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function WA(){const t=nt.useContext(Lm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,o=nt.useId();return nt.useEffect(()=>s(o),[]),!e&&n?[!1,()=>n&&n(o)]:[!0]}const gl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qp(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const go={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(jt.test(t))t=parseFloat(t);else return t;const n=Qp(t,e.target.x),s=Qp(t,e.target.y);return`${n}% ${s}%`}},qA={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,o=Cs.parse(t);if(o.length>5)return s;const a=Cs.createTransformer(t),c=typeof o[0]!="number"?1:0,d=n.x.scale*e.x,f=n.y.scale*e.y;o[0+c]/=d,o[1+c]/=f;const y=xe(d,f,.5);return typeof o[2+c]=="number"&&(o[2+c]/=y),typeof o[3+c]=="number"&&(o[3+c]/=y),a(o)}};class HA extends Yl.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:a}=e;qC(JA),a&&(n.group&&n.group.add(a),s&&s.register&&o&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),gl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:o,isPresent:a}=this.props,c=s.projection;return c&&(c.isPresent=a,o||e.layoutDependency!==n||n===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||qe.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Em.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function i0(t){const[e,n]=WA(),s=nt.useContext(Wl);return Yl.createElement(HA,{...t,layoutGroup:s,switchLayoutGroup:nt.useContext(Kg),isPresent:e,safeToRemove:n})}const JA={borderRadius:{...go,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:go,borderTopRightRadius:go,borderBottomLeftRadius:go,borderBottomRightRadius:go,boxShadow:qA},n0=["TopLeft","TopRight","BottomLeft","BottomRight"],XA=n0.length,Kp=t=>typeof t=="string"?parseFloat(t):t,Yp=t=>typeof t=="number"||jt.test(t);function $A(t,e,n,s,o,a){o?(t.opacity=xe(0,n.opacity!==void 0?n.opacity:1,ZA(s)),t.opacityExit=xe(e.opacity!==void 0?e.opacity:1,0,QA(s))):a&&(t.opacity=xe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let c=0;c<XA;c++){const d=`border${n0[c]}Radius`;let f=t_(e,d),y=t_(n,d);if(f===void 0&&y===void 0)continue;f||(f=0),y||(y=0),f===0||y===0||Yp(f)===Yp(y)?(t[d]=Math.max(xe(Kp(f),Kp(y),s),0),(yn.test(y)||yn.test(f))&&(t[d]+="%")):t[d]=y}(e.rotate||n.rotate)&&(t.rotate=xe(e.rotate||0,n.rotate||0,s))}function t_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ZA=s0(0,.5,Nv),QA=s0(.5,.95,li);function s0(t,e,n){return s=>s<t?0:s>e?1:n(sa(t,e,s))}function e_(t,e){t.min=e.min,t.max=e.max}function Ui(t,e){e_(t.x,e.x),e_(t.y,e.y)}function i_(t,e,n,s,o){return t-=e,t=Ql(t,1/n,s),o!==void 0&&(t=Ql(t,1/o,s)),t}function KA(t,e=0,n=1,s=.5,o,a=t,c=t){if(yn.test(e)&&(e=parseFloat(e),e=xe(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=xe(a.min,a.max,s);t===a&&(d-=e),t.min=i_(t.min,e,n,d,o),t.max=i_(t.max,e,n,d,o)}function n_(t,e,[n,s,o],a,c){KA(t,e[n],e[s],e[o],e.scale,a,c)}const YA=["x","scaleX","originX"],tV=["y","scaleY","originY"];function s_(t,e,n,s){n_(t.x,e,YA,n?n.x:void 0,s?s.x:void 0),n_(t.y,e,tV,n?n.y:void 0,s?s.y:void 0)}function r_(t){return t.translate===0&&t.scale===1}function r0(t){return r_(t.x)&&r_(t.y)}function eV(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function o0(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function o_(t){return Ei(t.x)/Ei(t.y)}class iV{constructor(){this.members=[]}add(e){sd(this.members,e),e.scheduleRender()}remove(e){if(rd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let s;for(let o=n;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function a_(t,e,n){let s="";const o=t.x.translate/e.x,a=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((o||a||c)&&(s=`translate3d(${o}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:y,rotateX:g,rotateY:S,skewX:x,skewY:p}=n;y&&(s+=`rotate(${y}deg) `),g&&(s+=`rotateX(${g}deg) `),S&&(s+=`rotateY(${S}deg) `),x&&(s+=`skewX(${x}deg) `),p&&(s+=`skewY(${p}deg) `)}const d=t.x.scale*e.x,f=t.y.scale*e.y;return(d!==1||f!==1)&&(s+=`scale(${d}, ${f})`),s||"none"}const nV=(t,e)=>t.depth-e.depth;class sV{constructor(){this.children=[],this.isDirty=!1}add(e){sd(this.children,e),this.isDirty=!0}remove(e){rd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nV),this.isDirty=!1,this.children.forEach(e)}}function rV(t,e){const n=gs.now(),s=({timestamp:o})=>{const a=o-n;a>=e&&(ws(s),t(a-e))};return qe.read(s,!0),()=>ws(s)}function oV(t){window.MotionDebug&&window.MotionDebug.record(t)}function aV(t){return t instanceof SVGElement&&t.tagName!=="svg"}function lV(t,e,n){const s=ai(t)?t:ra(t);return s.start(nd("",s,e,n)),s.animation}const Vc=["","X","Y","Z"],uV={visibility:"hidden"},l_=1e3;let cV=0;const Ns={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function bc(t,e,n,s){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),s&&(s[t]=0))}function a0({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(c={},d=e==null?void 0:e()){this.id=cV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ns.totalNodes=Ns.resolvedTargetDeltas=Ns.recalculatedProjection=0,this.nodes.forEach(dV),this.nodes.forEach(gV),this.nodes.forEach(vV),this.nodes.forEach(fV),oV(Ns)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new sV)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new od),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const f=this.eventHandlers.get(c);f&&f.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=aV(c),this.instance=c;const{layoutId:f,layout:y,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(y||f)&&(this.isLayoutDirty=!0),t){let S;const x=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,S&&S(),S=rV(x,250),gl.hasAnimatedSinceResize&&(gl.hasAnimatedSinceResize=!1,this.nodes.forEach(c_))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||y)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:x,hasRelativeTargetChanged:p,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const B=this.options.transition||g.getDefaultTransition()||BV,{onLayoutAnimationStart:T,onLayoutAnimationComplete:M}=g.getProps(),I=!this.targetLayout||!o0(this.targetLayout,C)||p,L=!x&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||L||x&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(S,L);const F={...$m(B,"layout"),onPlay:T,onComplete:M};(g.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else x||c_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ws(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xV),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const S=this.path[g];S.shouldResetTransform=!0,S.updateScroll("snapshot"),S.options.layoutRoot&&S.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(u_);return}this.isUpdating||this.nodes.forEach(_V),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(yV),this.nodes.forEach(hV),this.nodes.forEach(mV),this.clearAllSnapshots();const d=gs.now();Ze.delta=Ss(0,1e3/60,d-Ze.timestamp),Ze.timestamp=d,Ze.isProcessing=!0,_c.update.process(Ze),_c.preRender.process(Ze),_c.render.process(Ze),Ze.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Em.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(pV),this.sharedNodes.forEach(SV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Te(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:c,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!r0(this.projectionDelta),f=this.getTransformTemplate(),y=f?f(this.latestValues,""):void 0,g=y!==this.prevTransformTemplateValue;c&&(d||js(this.latestValues)||g)&&(o(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return c&&(f=this.removeTransform(f)),AV(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Te();const d=c.measureViewportBox(),{scroll:f}=this.root;return f&&(ns(d.x,f.offset.x),ns(d.y,f.offset.y)),d}removeElementScroll(c){const d=Te();Ui(d,c);for(let f=0;f<this.path.length;f++){const y=this.path[f],{scroll:g,options:S}=y;if(y!==this.root&&g&&S.layoutScroll){if(g.isRoot){Ui(d,c);const{scroll:x}=this.root;x&&(ns(d.x,-x.offset.x),ns(d.y,-x.offset.y))}ns(d.x,g.offset.x),ns(d.y,g.offset.y)}}return d}applyTransform(c,d=!1){const f=Te();Ui(f,c);for(let y=0;y<this.path.length;y++){const g=this.path[y];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Br(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),js(g.latestValues)&&Br(f,g.latestValues)}return js(this.latestValues)&&Br(f,this.latestValues),f}removeTransform(c){const d=Te();Ui(d,c);for(let f=0;f<this.path.length;f++){const y=this.path[f];if(!y.instance||!js(y.latestValues))continue;Rh(y.latestValues)&&y.updateSnapshot();const g=Te(),S=y.measurePageBox();Ui(g,S),s_(d,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,g)}return js(this.latestValues)&&s_(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ze.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var d;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==f;if(!(c||y&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:S,layoutId:x}=this.options;if(!(!this.layout||!(S||x))){if(this.resolvedRelativeTargetAt=Ze.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Te(),this.relativeTargetOrigin=Te(),Fo(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Te(),this.targetWithTransforms=Te()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ui(this.target,this.layout.layoutBox),Yv(this.target,this.targetDelta)):Ui(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Te(),this.relativeTargetOrigin=Te(),Fo(this.relativeTargetOrigin,this.target,p.target),Ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ns.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Rh(this.parent.latestValues)||Kv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const d=this.getLead(),f=!!this.resumingFrom||this!==d;let y=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(y=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===Ze.timestamp&&(y=!1),y)return;const{layout:g,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||S))return;Ui(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,p=this.treeScale.y;RA(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Te());const{target:C}=d;if(!C){this.projectionTransform&&(this.projectionDelta=Cr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Cr(),this.projectionDeltaWithTransform=Cr());const B=this.projectionTransform;Ro(this.projectionDelta,this.layoutCorrected,C,this.latestValues),this.projectionTransform=a_(this.projectionDelta,this.treeScale),(this.projectionTransform!==B||this.treeScale.x!==x||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),Ns.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(c,d=!1){const f=this.snapshot,y=f?f.latestValues:{},g={...this.latestValues},S=Cr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=Te(),p=f?f.source:void 0,C=this.layout?this.layout.source:void 0,B=p!==C,T=this.getStack(),M=!T||T.members.length<=1,I=!!(B&&!M&&this.options.crossfade===!0&&!this.path.some(CV));this.animationProgress=0;let L;this.mixTargetDelta=F=>{const k=F/1e3;h_(S.x,c.x,k),h_(S.y,c.y,k),this.setTargetDelta(S),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fo(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wV(this.relativeTarget,this.relativeTargetOrigin,x,k),L&&eV(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=Te()),Ui(L,this.relativeTarget)),B&&(this.animationValues=g,$A(g,y,this.latestValues,k,I,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ws(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{gl.hasAnimatedSinceResize=!0,this.currentAnimation=lV(0,l_,{...c,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(l_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:f,layout:y,latestValues:g}=c;if(!(!d||!f||!y)){if(this!==c&&this.layout&&y&&l0(this.options.animationType,this.layout.layoutBox,y.layoutBox)){f=this.target||Te();const S=Ei(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+S;const x=Ei(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+x}Ui(d,f),Br(d,g),Ro(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new iV),this.sharedNodes.get(c).add(d);const y=d.options.initialPromotionConfig;d.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:d}=this.options;return d?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:d}=this.options;return d?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:f}={}){const y=this.getStack();y&&y.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const y={};f.z&&bc("z",c,y,this.animationValues);for(let g=0;g<Vc.length;g++)bc(`rotate${Vc[g]}`,c,y,this.animationValues),bc(`skew${Vc[g]}`,c,y,this.animationValues);c.render();for(const g in y)c.setStaticValue(g,y[g]),this.animationValues&&(this.animationValues[g]=y[g]);c.scheduleRender()}getProjectionStyles(c){var d,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return uV;const y={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,y.opacity="",y.pointerEvents=_l(c==null?void 0:c.pointerEvents)||"",y.transform=g?g(this.latestValues,""):"none",y;const S=this.getLead();if(!this.projectionDelta||!this.layout||!S.target){const B={};return this.options.layoutId&&(B.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,B.pointerEvents=_l(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!js(this.latestValues)&&(B.transform=g?g({},""):"none",this.hasProjected=!1),B}const x=S.animationValues||S.latestValues;this.applyTransformsToTarget(),y.transform=a_(this.projectionDeltaWithTransform,this.treeScale,x),g&&(y.transform=g(x,y.transform));const{x:p,y:C}=this.projectionDelta;y.transformOrigin=`${p.origin*100}% ${C.origin*100}% 0`,S.animationValues?y.opacity=S===this?(f=(d=x.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:y.opacity=S===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const B in ql){if(x[B]===void 0)continue;const{correct:T,applyTo:M}=ql[B],I=y.transform==="none"?x[B]:T(x[B],S);if(M){const L=M.length;for(let F=0;F<L;F++)y[M[F]]=I}else y[B]=I}return this.options.layoutId&&(y.pointerEvents=S===this?_l(c==null?void 0:c.pointerEvents)||"":"none"),y}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var d;return(d=c.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(u_),this.root.sharedNodes.clear()}}}function hV(t){t.updateLayout()}function mV(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=t.layout,{animationType:a}=t.options,c=n.source!==t.layout.source;a==="size"?Wi(S=>{const x=c?n.measuredBox[S]:n.layoutBox[S],p=Ei(x);x.min=s[S].min,x.max=x.min+p}):l0(a,n.layoutBox,s)&&Wi(S=>{const x=c?n.measuredBox[S]:n.layoutBox[S],p=Ei(s[S]);x.max=x.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[S].max=t.relativeTarget[S].min+p)});const d=Cr();Ro(d,s,n.layoutBox);const f=Cr();c?Ro(f,t.applyTransform(o,!0),n.measuredBox):Ro(f,s,n.layoutBox);const y=!r0(d);let g=!1;if(!t.resumeFrom){const S=t.getClosestProjectingParent();if(S&&!S.resumeFrom){const{snapshot:x,layout:p}=S;if(x&&p){const C=Te();Fo(C,n.layoutBox,x.layoutBox);const B=Te();Fo(B,s,p.layoutBox),o0(C,B)||(g=!0),S.options.layoutRoot&&(t.relativeTarget=B,t.relativeTargetOrigin=C,t.relativeParent=S)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:f,layoutDelta:d,hasLayoutChanged:y,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function dV(t){Ns.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pV(t){t.clearSnapshot()}function u_(t){t.clearMeasurements()}function _V(t){t.isLayoutDirty=!1}function yV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function c_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gV(t){t.resolveTargetDelta()}function vV(t){t.calcProjection()}function xV(t){t.resetSkewAndRotation()}function SV(t){t.removeLeadSnapshot()}function h_(t,e,n){t.translate=xe(e.translate,0,n),t.scale=xe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function m_(t,e,n,s){t.min=xe(e.min,n.min,s),t.max=xe(e.max,n.max,s)}function wV(t,e,n,s){m_(t.x,e.x,n.x,s),m_(t.y,e.y,n.y,s)}function CV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BV={duration:.45,ease:[.4,0,.1,1]},d_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),f_=d_("applewebkit/")&&!d_("chrome/")?Math.round:li;function p_(t){t.min=f_(t.min),t.max=f_(t.max)}function AV(t){p_(t.x),p_(t.y)}function l0(t,e,n){return t==="position"||t==="preserve-aspect"&&!kh(o_(e),o_(n),.2)}const VV=a0({attachResizeListener:(t,e)=>Ln(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pc={current:void 0},u0=a0({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Pc.current){const t=new VV({});t.mount(window),t.setOptions({layoutScroll:!0}),Pc.current=t}return Pc.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),bV={pan:{Feature:UA},drag:{Feature:OA,ProjectionNode:u0,MeasureLayout:i0}},Eh={current:null},c0={current:!1};function PV(){if(c0.current=!0,!!Rm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Eh.current=t.matches;t.addListener(e),e()}else Eh.current=!1}function MV(t,e,n){const{willChange:s}=e;for(const o in e){const a=e[o],c=n[o];if(ai(a))t.addValue(o,a),Zl(s)&&s.add(o);else if(ai(c))t.addValue(o,ra(a,{owner:t})),Zl(s)&&s.remove(o);else if(c!==a)if(t.hasValue(o)){const d=t.getValue(o);d.liveStyle===!0?d.jump(a):d.hasAnimated||d.set(a)}else{const d=t.getStaticValue(o);t.addValue(o,ra(d!==void 0?d:a,{owner:t}))}}for(const o in n)e[o]===void 0&&t.removeValue(o);return e}const __=new WeakMap,TV=[...wv,ri,Cs],IV=t=>TV.find(Sv(t)),h0=Object.keys(na),DV=h0.length,y_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],kV=jm.length;class LV{constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:a,visualState:c},d={}){this.resolveKeyframes=(x,p,C,B)=>new this.KeyframeResolver(x,p,C,B,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>qe.render(this.render,!1,!0);const{latestValues:f,renderState:y}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=y,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=xu(n),this.isVariantNode=Qg(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...S}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in S){const p=S[x];f[x]!==void 0&&ai(p)&&(p.set(f[x],!1),Zl(g)&&g.add(x))}}scrapeMotionValuesFromProps(e,n,s){return{}}mount(e){this.current=e,__.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),c0.current||PV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Eh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){__.delete(this.current),this.projection&&this.projection.unmount(),ws(this.notifyUpdate),ws(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const s=ir.has(e),o=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&qe.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},s,o,a){let c,d;for(let f=0;f<DV;f++){const y=h0[f],{isEnabled:g,Feature:S,ProjectionNode:x,MeasureLayout:p}=na[y];x&&(c=x),g(n)&&(!this.features[y]&&S&&(this.features[y]=new S(this)),p&&(d=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:f,layout:y,drag:g,dragConstraints:S,layoutScroll:x,layoutRoot:p}=n;this.projection.setOptions({layoutId:f,layout:y,alwaysMeasureLayout:!!g||S&&Sr(S),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof y=="string"?y:"both",initialPromotionConfig:a,layoutScroll:x,layoutRoot:p})}return d}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Te()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<y_.length;s++){const o=y_[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=e["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=MV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<kV;s++){const o=jm[s],a=this.props[o];(ia(a)||a===!1)&&(n[o]=a)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=ra(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(vv(o)||yv(o))?o=parseFloat(o):!IV(o)&&Cs.test(n)&&(o=Tv(e,n)),this.setBaseTarget(e,ai(o)?o.get():o)),ai(o)?o.get():o}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n,s;const{initial:o}=this.props,a=typeof o=="string"||typeof o=="object"?(s=Xm(this.props,o,(n=this.presenceContext)===null||n===void 0?void 0:n.custom))===null||s===void 0?void 0:s[e]:void 0;if(o&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,e);return c!==void 0&&!ai(c)?c:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new od),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class m0 extends LV{constructor(){super(...arguments),this.KeyframeResolver=Iv}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}}function RV(t){return window.getComputedStyle(t)}class FV extends m0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(ir.has(n)){const s=Km(n);return s&&s.default||0}else{const s=RV(e),o=(ev(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return t0(e,n)}build(e,n,s,o){Um(e,n,s,o.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Jm(e,n,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ai(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,s,o){ov(e,n,s,o)}}class EV extends m0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ir.has(n)){const s=Km(n);return s&&s.default||0}return n=av.has(n)?n:Fm(n),e.getAttribute(n)}measureInstanceViewportBox(){return Te()}scrapeMotionValuesFromProps(e,n){return uv(e,n,this)}build(e,n,s,o){qm(e,n,s,this.isSVGTag,o.transformTemplate)}renderInstance(e,n,s,o){lv(e,n,s,o)}mount(e){this.isSVGTag=Hm(e.tagName),super.mount(e)}}const GV=(t,e)=>Nm(t)?new EV(e,{enableHardwareAcceleration:!1}):new FV(e,{enableHardwareAcceleration:!0}),jV={layout:{ProjectionNode:u0,MeasureLayout:i0}},NV={...wA,...LB,...bV,...jV},Pt=UC((t,e)=>SB(t,e,NV,GV));function zV(){const t=nt.useRef(!1);return Jg(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function OV(){const t=zV(),[e,n]=nt.useState(0),s=nt.useCallback(()=>{t.current&&n(e+1)},[e]);return[nt.useCallback(()=>qe.postRender(s),[s]),e]}const UV=nt.createContext(null),WV=t=>!t.isLayoutDirty&&t.willUpdate(!1);function g_(){const t=new Set,e=new WeakMap,n=()=>t.forEach(WV);return{add:s=>{t.add(s),e.set(s,s.addEventListener("willUpdate",n))},remove:s=>{t.delete(s);const o=e.get(s);o&&(o(),e.delete(s)),n()},dirty:n}}const d0=t=>t===!0,qV=t=>d0(t===!0)||t==="id",HV=({children:t,id:e,inherit:n=!0})=>{const s=nt.useContext(Wl),o=nt.useContext(UV),[a,c]=OV(),d=nt.useRef(null),f=s.id||o;d.current===null&&(qV(n)&&f&&(e=e?f+"-"+e:f),d.current={id:e,group:d0(n)&&s.group||g_()});const y=nt.useMemo(()=>({...d.current,forceRender:a}),[c]);return nt.createElement(Wl.Provider,{value:y},t)},ad=({text:t,delay:e,hover:n})=>{const[s,o]=nt.useState(0),[a,c]=nt.useState([]),d=an(),[f,y]=nt.useState(!1),g=4;nt.useEffect(()=>{if(s<t.length){const p=setTimeout(()=>{c([...a,t[s]]),o(C=>C+1)},e);return()=>clearTimeout(p)}},[s,e,t]);const S={position(p){return{translateX:p*400-200,translateY:p*1e3-2e3,transition:{translateY:{delay:.1,duration:g,ease:"easeIn"},translateX:{ease:"easeIn",type:"spring",duration:g,damping:10,stiffness:50,restDelta:.001}}}}},x=()=>{s==t.length&&(y(!0),setTimeout(()=>{d("/2")},(g+.5)*1e3))};return n?N.jsx("span",{id:"text",onMouseEnter:x,children:a.map((p,C)=>N.jsx(Pt.span,{className:"letter",animate:f?"position":null,variants:S,custom:Math.random(),children:p},C))}):N.jsx("span",{id:"text",children:a})},JV=()=>{const t={width:"15px",height:"15px",position:"absolute",top:"5px",left:"5px",borderRadius:"50%",border:"1px solid white"};return N.jsx("div",{className:"websitewrapper",children:N.jsxs("div",{className:"websitecontainer",children:[N.jsx("div",{style:t}),N.jsx("div",{style:{...t,left:"30px"}}),N.jsx("div",{style:{...t,left:"55px"}}),N.jsx(ad,{text:"The personal site is a translation of the self, a mirror of the fragmentations of the human mind.",delay:30,hover:!0}),N.jsx("div",{className:"corner",children:"hyperlink//"})]})})},XV=()=>{const t=an(),[e,n]=nt.useState(!1),s=2,o=["/img/bag.png","/img/balls.png","/img/books.png","/img/bracelet.png","/img/cam.png","/img/candle.png","/img/ceramic.png","/img/cross.png","/img/fukt.png","/img/ghost.png","/img/greece.png","/img/hondje.png","/img/jager.png","/img/keys.png","/img/matches.png","/img/mug.png","/img/pic.png","/img/polish.png","/img/rings.png","/img/sudoku.png","/img/turtle.png"],a={overflow:"scroll",position:"relative"},c={width:"15px",height:"15px",position:"absolute",top:"5px",left:"5px",borderRadius:"50%",border:"1px solid white"},d={opac(S){return{opacity:1,transition:{delay:S*.3}}},pos(S){return{opacity:0,translateX:-window.innerWidth,translateY:window.innerHeight,scale:0,transition:{duration:.8}}},move(){return{translateX:-window.innerWidth,translateY:window.innerHeight,scale:0,transition:{duration:s}}}},f=(S,x)=>Math.floor(Math.random()*(x-S+1))+S;let y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19];const g=()=>{n(!0),setTimeout(()=>{t("/3")},(s+.5)*1e3)};return N.jsxs("div",{className:"websitewrapper",children:[y.map((S,x)=>N.jsx(Pt.div,{id:x,className:"pic",style:{height:100,border:"1px solid rgb(102,164,255)",padding:"10px",position:"absolute",top:f(20,window.innerHeight-150),left:f(20,window.innerWidth-120)},custom:x,variants:d,initial:{opacity:0},animate:e?"pos":"opac",children:N.jsx("img",{id:S,height:"100",src:o[f(0,o.length-1)],onMouseOver:p=>{p.currentTarget.src=o[f(0,o.length-1)]}})},x)),N.jsxs(Pt.div,{className:"websitecontainer",style:a,animate:e?"move":null,variants:d,children:[N.jsx("div",{style:c}),N.jsx("div",{style:{...c,left:"30px"}}),N.jsx("div",{style:{...c,left:"55px"}}),N.jsx(ad,{text:"Building a personal website begins with the my: .myVariable, .myContainer, .myStyle, my home. My work in progress, my never-ending project, my ever-changing identity objectified / personified. My corner of the web, tucked away and rarely visited, but my own.",delay:20}),N.jsx(Pt.img,{className:"click",src:"/img/laptop.png",style:{position:"absolute",bottom:"30px",right:"45px",width:"100px"},initial:{opacity:0},animate:{opacity:1,transition:{delay:2}},onClick:S=>{g()}}),N.jsx("div",{className:"corner",children:"hyperlink//"})]})]})},$V=()=>{const t=an(),[e,n]=nt.useState(!1),[s,o]=nt.useState(!1),[a,c]=nt.useState(!1);var d=[1,2,3,4,5,6,7,8],f=2;const y={flexDirection:"column",alignItems:"start",gap:"2rem"},g={maxWidth:"clamp(400px, 40vw, 80vw",textDecoration:"underline 1em white",textUnderlineOffset:"-0.8em",textDecorationSkipInk:"none",marginLeft:"5rem",display:a?"none":"block",lineHeight:"1.7rem"},S={width:"90vw",marginLeft:"5rem",display:"flex",flexDirection:"row",gap:a?"0":"1rem",alignContent:"stretch",justifyContent:a?"center":"flex-start"},x={width:"40vw",height:"40vh",padding:"50px",display:"flex",alignItems:"center",border:"2px solid white",position:"relative"},p={width:"15px",height:"15px",position:"absolute",top:"5px",left:"5px",borderRadius:"50%",border:"1px solid white"},C={start(){return{x:-window.innerWidth,y:window.innerHeight,scale:0}},moveIn(){return{x:0,y:0,scale:1,transition:{type:"spring",duration:2,damping:10,stiffness:100,restDelta:.01}}},drift(I){return{y:-1e3,x:-1e3/I,rotate:-100/I,scale:.1,transition:{duration:f}}}},B=()=>{n(!0)},T=()=>{o(!0),setTimeout(()=>{document.getElementsByClassName("webcontainer3").style.display="none"},f*1e3)},M=()=>{c(!0),setTimeout(()=>{t("/4")},1500)};return N.jsxs("div",{className:"websitewrapper",style:y,children:[N.jsxs(Pt.span,{style:g,initial:{y:-window.innerHeight/4},animate:s?{y:-window.innerHeight/2,transition:{duration:1}}:{y:0},children:["Find me by my ",N.jsx("span",{className:"link",onClick:B,children:"name"}),", a piece of my mind taking refuge in a cell of a data centre, surrounded by the hive mind of the www, occupying a piece of land with the physical infrastructure of digital space: cables, data centres, what is keeping the cloud from drifting into space."]}),N.jsx(HV,{children:N.jsxs(Pt.div,{style:S,children:[N.jsxs(Pt.div,{layout:!0,style:x,variants:C,initial:{x:-window.innerWidth/2,y:window.innerHeight/2,scale:0},animate:e?"moveIn":null,children:[N.jsx("div",{layout:!0,style:p}),N.jsx("div",{layout:!0,style:{...p,left:"30px"}}),N.jsx("div",{layout:!0,style:{...p,left:"55px"}}),N.jsx("div",{layout:!0,className:"corner",children:"hyperlink//"})]}),d.map((I,L)=>{const[F,k]=nt.useState(!1);return e&&setTimeout(()=>{k(!0)},2e3+L*(1e3-L*30)),I==8?N.jsxs(Pt.div,{layout:!0,className:"webcontainer3-8",variants:C,animate:s?"drift":null,custom:L+1,style:{width:a?"0":F?"30vw":"0",border:F?"2px solid white":"none",opacity:F?"1":"0"},children:[N.jsx("span",{style:{backgroundColor:"white",width:"100%",textAlign:"center",lineHeight:"2rem"},className:"link",onClick:T,children:" drift "}),N.jsx("div",{layout:!0,style:p}),N.jsx("div",{layout:!0,className:"corner",children:"//"})]}):N.jsxs(Pt.div,{layout:!0,className:"webcontainer3",variants:C,animate:s?"drift":null,custom:L+1,onAnimationComplete:M,style:{width:a?"0":F?"30vw":"0",border:F?"2px solid white":"none",display:a?"none":"block",opacity:F?"1":"0"},children:[N.jsx("div",{layout:!0,style:p}),N.jsx("div",{layout:!0,className:"corner",children:"//"})]})})]})})]})},ZV=()=>{const[t,e]=nt.useState(!1),n=an();var s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];const o={flexDirection:"column",alignItems:"start",gap:"2rem"},a={width:"90vw",marginLeft:"5rem",display:"flex",flexDirection:"row",gap:"0",alignContent:"stretch",justifyContent:"center"},c={width:"40vw",height:"40vh",padding:"50px",display:"flex",alignItems:"center",border:"2px solid white",overflow:"hidden",position:"relative",color:"white"},d={width:"15px",height:"15px",position:"absolute",top:"5px",left:"5px",borderRadius:"50%",border:"1px solid white"},f={width:"200px",height:"200px",borderRadius:"50%",border:"2px solid white",backgroundColor:"rgb(0, 0, 255)",position:"absolute",top:window.innerHeight/2-100,right:window.innerWidth/2-100},y=()=>{setTimeout(()=>{n("/5")},1e3)};return N.jsxs("div",{className:"websitewrapper",style:o,children:[N.jsx(Pt.div,{style:a,animate:t?{scale:0,transition:{duration:7}}:null,children:N.jsxs(Pt.div,{layout:!0,style:c,children:[N.jsx("div",{className:"click",style:{...d,backgroundColor:"red"},onClick:()=>{e(!0)}}),N.jsx("div",{style:{...d,left:"30px"}}),N.jsx("div",{style:{...d,left:"55px"}}),N.jsx(Pt.span,{initial:{y:window.innerHeight/2},animate:{y:0},transition:{duration:2,type:"spring",damping:5,stiffness:30,restDelta:.001},children:"In our digital world, owned by the few and populated by standardised and bastardised online profiles, inhabiting a small corner by yourself is an act of resistance. A continuation of decades of liberation from centralised corporations trying to take control of your corpus. Taking over online territory and making it one's own was a rebellious response to the protocols of the internet from the moment of its widespread adoption. Even the father of the internet looked down his nose at digital homes."}),N.jsx("div",{className:"corner",children:"hyperlink//"})]})}),s.map((g,S)=>{var x=(Math.ceil(Math.random())*Math.round(Math.random())?1:-1)*(window.innerWidth/2+600+Math.random()*8e3),p=(Math.random()-0)*(window.innerHeight+Math.random()*8e3- -(window.innerHeight+Math.random()*8e3))/1+-(window.innerHeight+Math.random()*8e3);return N.jsx(Pt.div,{className:"icon-round",style:f,initial:{x,y:p,scale:2},animate:t?{x:0,y:0,scale:.2,transition:{duration:7}}:null},S)}),s.map((g,S)=>{var x=(Math.ceil(Math.random())*Math.round(Math.random())?1:-1)*(window.innerHeight/2+600+Math.random()*8e3),p=(Math.random()-0)*(window.innerWidth+Math.random()*8e3- -(window.innerWidth+Math.random()*8e3))/1+-(window.innerWidth+Math.random()*8e3);return N.jsx(Pt.div,{className:"icon-round",style:f,initial:{x:p,y:x,scale:2},animate:t?{x:0,y:0,scale:.2,transition:{duration:7}}:null,onAnimationComplete:y},S)})]})};function Gh({init:t,speed:e,type:n}){let[s,o]=nt.useState(parseInt(t));const[a,c]=nt.useState(!1);let d=Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:2});nt.useEffect(()=>{c(!0)},[]),nt.useEffect(()=>{setTimeout(()=>{n=="min"?o(s-1):o(s+1)},parseInt(e))});let f=d.format(s);return N.jsx(Pt.div,{children:f})}class v_ extends Yl.Component{constructor(e){super(e),this.containeEl=document.createElement("div"),this.containeEl.style.fontFamily="Helvetica",this.props.text?this.containeEl.style.fontSize="2rem":(this.containeEl.style.fontSize="6rem",this.containeEl.style.color="rgb(0, 0, 255)"),this.externalWindow=null,this.state={left:this.props.left,top:this.props.top,width:this.props.width,height:this.props.height}}render(){return Ew.createPortal(this.props.children,this.containeEl)}componentDidMount(){this.externalWindow=window.open("","",`width=${this.state.width}},height=${this.state.height},left=${this.state.left},top=${this.state.top}`),this.externalWindow.document.body.appendChild(this.containeEl)}componentWillUnmount(){this.externalWindow.close()}}const QV=()=>{const[t,e]=nt.useState(!1),n=an(),s={width:"200px",height:"200px",borderRadius:"50%",border:"2px solid white",position:"absolute",top:window.innerHeight/2-100,right:window.innerWidth/2-100},o={textDecoration:"underline 0.9em white",textUnderlineOffset:"-0.7em",textDecorationSkipInk:"none",display:"block"},a={hidden(){return{x:-window.innerWidth-300}},show(){return{x:0,transition:{duration:0,staggerChildren:.5}}}},c={hidden(){return{x:-window.innerWidth-300,scaleX:2}},show(){return{x:0,scaleX:1,transition:{duration:1.5,type:"spring",bounce:.3}}}},d=()=>{e(!0),setTimeout(()=>{n("/6")},100)};return N.jsxs("div",{className:"websitewrapper",children:[N.jsx(Pt.div,{className:"icon-round",style:s,initial:{scale:.2}}),N.jsxs(Pt.div,{style:{zIndex:20},variants:a,initial:"hidden",animate:t?null:"show",children:[N.jsx(Pt.span,{style:o,variants:c,children:"Creating your online home is asking to be seen as you are "}),N.jsx(Pt.span,{style:o,variants:c,children:"you, not accommodating the prefab existence that social "}),N.jsx(Pt.span,{style:o,variants:c,children:"networking sites impose on us. A domain to control by "}),N.jsxs(Pt.span,{style:o,variants:c,children:["yourself, to name, to find and ",N.jsx("span",{className:"link",onClick:d,children:"link"})," and help find."]})]})]})};function KV(){const t=an(),[e,n]=nt.useState(0),[s,o]=nt.useState(!1),[a,c]=nt.useState(!1),[d,f]=nt.useState(!1),[y,g]=nt.useState(!1),S={width:"500px",height:"500px",borderRadius:"50%",border:"2px solid white",backgroundColor:"rgb(0, 0, 255)",position:"absolute",zIndex:0},x={width:"40vw",textDecoration:"underline 0.9em white",textUnderlineOffset:"-0.8em",textDecorationSkipInk:"none",display:"block",zIndex:100},p=[{init:0,type:"plus",speed:400},{init:129,type:"plus",speed:1e3},{init:936,type:"plus",speed:500},{init:2479,type:"plus",speed:100},{init:6082,type:"min",speed:100},{init:82937,type:"plus",speed:20},{init:500928,type:"min",speed:20},{init:133200,type:"plus",speed:10},{init:5039210,type:"min",speed:""},{init:50029,type:"plus",speed:50}],C=window.innerWidth,B=window.innerHeight,T=window.innerWidth/2+300,M=[-5,-4,-3,-2,-1,0,1,2,3,4,5],I=[-2,-1,0,1,2],L={zoom(F,k){return{scale:.2,x:T*.2*F,y:T*.2*k}}};return onmousemove=function(F){let k=F.target.className;const G=document.querySelector("#cursor");k.includes("click")||k.includes("link")?G.style.display="none":(G.style.display="block",G.style.left=`${F.pageX}px`,G.style.top=`${F.pageY}px`,G.innerHTML=`${F.pageX}<br/>${F.pageY}`),n((window.innerWidth/2-F.clientX)*.6),F.clientX>window.innerWidth-20?o(!0):F.clientX<20?c(!0):(o(!1),c(!1))},y&&setTimeout(()=>{t("/7")},5500),N.jsxs("div",{className:"websitewrapper",children:[p.map((F,k)=>N.jsxs(v_,{left:Math.random()*C,top:Math.random()*B,width:350,height:150,children:[N.jsx(Gh,{init:F.init,type:F.type,speed:F.speed}),N.jsx("span",{style:{fontSize:"1rem"},children:"Followers"})]},k)),N.jsx(v_,{left:C/2-200,top:B/2-150,width:400,height:300,text:!0,children:N.jsxs("p",{children:["Hypertext connecting us, travelling through portals on the web to our digital homes, changed to hyperconnectivity: how many followers do ",N.jsx("i",{children:"you"})," have?"]})}),N.jsx(Pt.div,{style:{zIndex:20,x:e},initial:{scale:.2},animate:y?{x:(T-250)*.2,y:B/2+100,transition:{duration:3}}:d?{scale:.2,x:(T-250)*.2,transition:{duration:5}}:{scale:1,transition:{delay:1,duration:2,type:"spring",bounce:.5}},children:N.jsx("span",{style:x,id:"textmove",children:"(Not) all spaces are created equal. Networking sites present a cookie cutter template, where everyone can customise the appropriate amount to feel represented, but not so far to feel understood. Equal. The only content is the me. Everything about me, yet no matter the effort, networking sites yield anonymity, or convention. Personal sites invariably shimmer with identity, even among their bright and sterile networking neighbours."})}),N.jsx(Pt.div,{style:{position:"absolute",transformOrigin:"center",width:"100%",height:"100%"},animate:d&&{scale:.15,transition:{duration:5}},onAnimationComplete:()=>{g(!0)},children:M.map((F,k)=>N.jsx("div",{children:I.map((G,O)=>N.jsx(Pt.div,{className:d?"icon-round":F==1||F==-1?"icon-round click":"icon-round",style:S,onTap:()=>{(F==1||F==-1)&&f(!0)},variants:L,custom:[F,G],initial:{x:T*F+(C/2-250),y:T*G+B/2-250,scale:.2},animate:y?{y:B/2-250,scale:1,transition:{duration:Math.random()*4+2,type:"spring",bounce:.5}}:d?{scale:1}:a?{x:F==0?null:T*F+C/2-250+150,scale:1}:s?{x:F==0?null:T*F+C/2-250-150,scale:1}:{scale:1,transition:{delay:1,duration:1,type:"spring",bounce:.5}}},k+O))},k))})]})}function YV(){const t=an(),[e,n]=nt.useState(!1),s={width:"500px",height:"500px",borderRadius:"50%",border:"2px solid white",backgroundColor:"rgb(0, 0, 255)",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"200px",color:"white",zIndex:0},o={position:"absolute"},a={width:"40vw",textDecoration:"underline 0.9em white",textUnderlineOffset:"-0.8em",textDecorationSkipInk:"none",display:"block",zIndex:100},c={width:"45vw",height:"50vh",backgroundColor:"black",border:"2px solid white",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",color:"white",padding:"3rem",boxSizing:"border-box"},d=[-5,-4,-3,-2,-1,0,1,2,3,4,5],f=[-2,-1,0,1,2];return N.jsx("div",{children:N.jsxs("div",{className:"websitewrapper",children:[N.jsx(Pt.div,{style:o,initial:{y:window.innerHeight/1.5,x:-window.innerWidth/2+500},animate:e?{y:window.innerHeight/4,x:-window.innerWidth/2-300,transition:{ease:[.7,0,1,1],duration:4}}:{y:window.innerHeight/4,transition:{duration:2,type:"spring",bounce:"0.5"}},children:N.jsx("span",{style:a,children:"The third space is online. Where do we go when we want to go anywhere? But this third space is steadily privatised, enforcing rules and restrictions on its use. We rely on for-profit platforms to maintain our online presence, occupying our designated humble container. Where is the library, the corner cafe, the rooftop garden of the digital space?"})}),N.jsx(Pt.div,{style:{position:"absolute",transformOrigin:"center",width:"100%",height:"100%",scale:"0.15"},animate:e?{x:-window.innerWidth/3,transition:{delay:2,duration:4,ease:[.5,0,1,1]}}:null,children:d.map((y,g)=>N.jsx("div",{children:f.map((S,x)=>N.jsx(Pt.div,{className:"icon-round",style:{...s,transformOrigin:"center"},initial:{y:window.innerHeight/2-250,x:(window.innerWidth/2+300)*y+(window.innerWidth/2-250)},animate:e?{x:(window.innerWidth/2+100)*5+(window.innerWidth/2-250),transition:{ease:[.7,0,1,1],duration:Math.random()*5+2}}:null,children:N.jsx(Pt.span,{className:"click",onTap:()=>{n(!0)},initial:{opacity:0},children:"xxx"},x+g)},g+x))},g))}),N.jsx(Pt.div,{style:c,initial:{x:window.innerWidth},animate:e?{x:0,transition:{duration:7}}:null,onAnimationComplete:()=>t("/8"),children:"Our digital presence is homeless. We rent a /room in a hotel we cant decorate. Our memories and experiences reside in the cloud. We reside in the cloud. We expect to shape the cloud but in reality the cloud shapes us. The cloud is optimised. Everything exists according to rules and regulations. Moving out, transforming into drops of rain, of something, and creating novel existence is hardly an option."})]})})}const Mn=(t,e,n,s,o)=>(t-e)*(o-s)/(n-e)+s;function tb(){const t=an(),[e,n]=nt.useState(0),s={width:"45vw",display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:"10px"},o={height:"50vh",backgroundColor:"black",border:"2px solid white",gridColumnStart:"1",gridColumnEnd:"3",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white",padding:"3rem",boxSizing:"border-box"},a={backgroundColor:"black",border:"2px solid white",marginTop:"10px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",boxSizing:"border-box",fontSize:"10rem",lineHeight:"8rem"},c={position:"absolute",width:"45vw",fontFamily:"clacon",color:"white"};return N.jsxs("div",{className:"websitewrapper",children:[N.jsxs(Pt.div,{initial:{y:35},style:s,animate:{y:e==0?null:e%2==0||e==11?-(e-1)*80:-e*80},children:[N.jsxs("div",{style:o,children:[N.jsx(Pt.span,{children:"Our digital presence is homeless. We rent a /room in a hotel we cant decorate. Our memories and experiences reside in the cloud. We reside in the cloud. We expect to shape the cloud but in reality the cloud shapes us. The cloud is optimised. Everything exists according to rules and regulations. Moving out, transforming into drops of rain, of something, and creating novel existence is hardly an option."}),N.jsx(Pt.span,{className:"click",style:{fontSize:"5rem",height:"0",lineHeight:"4rem"},initial:{y:10,scale:0},animate:e==0?{height:"auto",scale:1,transition:{delay:2}}:{height:"0",scale:"0"},onTap:()=>{n(1)},children:"+"})]}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==1&&{height:"45vh",scale:1,transition:{type:"linear",duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==1?{scale:0}:{scale:1},onTap:()=>n(2),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==2&&{height:"45vh",scale:1,transition:{type:"linear",duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==2?{scale:0}:{scale:1},onTap:()=>n(3),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==3&&{height:"45vh",scale:1,transition:{type:"linear",duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==3?{scale:0}:{scale:1},onTap:()=>n(4),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==4&&{height:"45vh",scale:1,transition:{type:"linear",duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==4?{scale:0}:{scale:1},onTap:()=>n(5),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==5&&{height:"45vh",scale:1,transition:{type:"linear",duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==5?{scale:0}:{scale:1},onTap:()=>n(6),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==6&&{height:"45vh",scale:1,transition:{type:"linear",duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==6?{scale:0}:{scale:1},onTap:()=>n(7),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==11?{translateX:Mn(Math.random(),0,1,-window.innerWidth,0),translateY:Mn(Math.random(),0,1,-window.innerHeight/1.5,-window.innerHeight),height:"50vh",scale:.9,rotate:"-25deg",transition:{duration:5}}:e==7&&{height:"45vh",scale:1,transition:{ease:[.4,0,1,1],duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==7?{scale:0}:{scale:1},onTap:()=>n(8),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==11?{translateX:Mn(Math.random(),0,1,0,window.innerWidth),translateY:Mn(Math.random(),0,1,-window.innerHeight,-window.innerHeight*2),height:"50vh",scale:.9,rotate:"25deg",transition:{duration:5}}:e==8&&{height:"45vh",scale:1,transition:{ease:[.4,0,1,1],duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==8?{scale:0}:{scale:1},onTap:()=>n(9),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==11?{translateX:Mn(Math.random(),0,1,-window.innerWidth,0),translateY:Mn(Math.random(),0,1,-window.innerHeight,-window.innerHeight*2),height:"50vh",scale:.9,rotate:"-25deg",transition:{duration:5}}:e==9&&{height:"45vh",scale:1,transition:{ease:[.4,0,1,1],duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==9?{scale:0}:{scale:1},onTap:()=>n(10),children:"+"})}),N.jsx(Pt.div,{style:{...a,height:"0"},initial:{scale:0},animate:e==11?{translateX:Mn(Math.random(),0,1,0,window.innerWidth),translateY:Mn(Math.random(),0,1,-window.innerHeight,-window.innerHeight*2),height:"50vh",scale:.9,rotate:"25deg",transition:{duration:5}}:e==10&&{height:"45vh",scale:1,transition:{ease:[.4,0,1,1],duration:.1}},children:N.jsx(Pt.span,{className:"click",initial:{scale:1},animate:e!==10?{scale:0}:{scale:1},onTap:()=>n(11),children:">>>"})})]}),N.jsx(Pt.div,{style:c,initial:{y:window.innerHeight},animate:e==11&&{y:0,transition:{duration:5,type:"spring",bounce:"0.3"}},onAnimationComplete:()=>t("/9"),children:N.jsx(Pt.p,{children:"We dont anymore understand the construction of this digital space we are afforded. The architecture of our digital bodies is hidden underneath a thick veil of algorithms and obfuscated code. We live in ignorance of the frameworks that uphold our lives. The web as it once was translated unreadable programming languages to understandable source code and visible webpages. Now preprocessors generate unreadable code from understandable programming, rejecting repurposing and reviewing."})})]})}function Ar(t,e){return Math.floor(Math.random()*(e-t+1))+t}function eb(t){var e=0;return t.length===2?e=Ar(t[0],t[1]):e=t[Ar(0,t.length-1)],String.fromCharCode(e)}var ib=function(e){var n=e.playOnMount,s=n===void 0?!0:n,o=e.text,a=o===void 0?"":o,c=e.speed,d=c===void 0?1:c,f=e.seed,y=f===void 0?1:f,g=e.step,S=g===void 0?1:g,x=e.tick,p=x===void 0?1:x,C=e.scramble,B=C===void 0?1:C,T=e.chance,M=T===void 0?1:T,I=e.overflow,L=I===void 0?!0:I,F=e.range,k=F===void 0?[65,125]:F,G=e.overdrive,O=G===void 0?!0:G,E=e.onAnimationStart,H=e.onAnimationFrame,q=e.onAnimationEnd,$=e.ignore,Z=$===void 0?[" "]:$,ot=typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1;ot&&(S=a.length,M=0,O=!1);var gt=nt.useRef(null),ht=nt.useRef(0),wt=nt.useRef(0),Ct=1e3/(60*d),mt=nt.useRef(0),Y=nt.useRef(0),Q=nt.useRef([]),lt=nt.useRef(0),_t=function(et,bt){return Z.includes(""+et)?et:bt},Vt=function(){if(Y.current!==a.length)for(var et=0;et<y;et++){var bt=Ar(Y.current,Q.current.length);typeof Q.current[bt]!="number"&&typeof Q.current[bt]<"u"&&(Q.current[bt]=_t(Q.current[bt],Ar(0,10)>=(1-M)*10?B||y:0))}},Bt=function(){for(var et=0;et<S;et++)if(Y.current<a.length){var bt=Y.current,kt=Ar(0,10)>=(1-M)*10;Q.current[bt]=_t(a[Y.current],kt?B+Ar(0,Math.ceil(B/2)):0),Y.current++}},Ut=function(){a.length<Q.current.length&&(Q.current.pop(),Q.current.splice(a.length,S));for(var et=0;et<S;et++)Q.current.length<a.length&&Q.current.push(_t(a[Q.current.length+1],null))},Gt=function(){if(O)for(var et=0;et<S;et++){var bt=Math.max(Q.current.length,a.length);lt.current<bt&&(Q.current[lt.current]=_t(a[lt.current],String.fromCharCode(typeof O=="boolean"?95:O)),lt.current++)}},Xt=function(){Bt(),Ut(),Vt()},ft=function yt(et){if(d){ht.current=requestAnimationFrame(yt),Gt();var bt=et-wt.current;bt>Ct&&(wt.current=et,mt.current%p===0&&Xt(),rt())}},rt=function(){if(gt.current){for(var et="",bt=0;bt<Q.current.length;bt++){var kt=Q.current[bt];switch(!0){case(typeof kt=="number"&&kt>0):et+=eb(k),bt<=Y.current&&(Q.current[bt]=Q.current[bt]-1);break;case(typeof kt=="string"&&(bt>=a.length||bt>=Y.current)):et+=kt;break;case(kt===a[bt]&&bt<Y.current):et+=a[bt];break;case(kt===0&&bt<a.length):et+=a[bt],Q.current[bt]=a[bt];break;default:et+=""}}gt.current.innerHTML=et,H&&H(et),et===a&&(Q.current.splice(a.length,Q.current.length),q&&q(),cancelAnimationFrame(ht.current)),mt.current++}},dt=function(){mt.current=0,Y.current=0,lt.current=0,L||(Q.current=new Array(a==null?void 0:a.length))},ut=function(){cancelAnimationFrame(ht.current),dt(),E&&E(),ht.current=requestAnimationFrame(ft)};return nt.useEffect(function(){dt()},[a]),nt.useEffect(function(){return cancelAnimationFrame(ht.current),ht.current=requestAnimationFrame(ft),function(){cancelAnimationFrame(ht.current)}},[ft]),nt.useEffect(function(){s||(Q.current=a.split(""),mt.current=a.length,Y.current=a.length,lt.current=a.length,rt(),cancelAnimationFrame(ht.current))},[]),{ref:gt,replay:ut}};const nb=({move:t,classs:e,text:n,customchar:s,cont:o,secondtext:a})=>{const[c,d]=nt.useState([]),[f,y]=nt.useState([]),g=[],S=[];nt.useEffect(()=>{d(n.split(" ")),s&&y(String(s).split(",")),setTimeout(()=>{x()},10)},[]),c.forEach((C,B)=>{let T=C.split("");g.push(T)}),s&&f.forEach((C,B)=>{S.push(C)});const x=()=>{document.querySelectorAll(`.${e}`).forEach((C,B)=>{let T=C.innerHTML;setTimeout(()=>{let M=["0","1","2","3","4","5","{","}","+","-","=","*","#",";","A","B","C","D","E","F"];M.push(T),M.forEach((I,L)=>{let F=Mn(Math.random(),0,1,0,M.length);setTimeout(()=>{C.innerHTML=M[parseInt(F)]},L*70)}),setTimeout(()=>{C.innerHTML=T},M.length*70)},B*4)})};function p(C,B){let T=s?S:["0","1","2","3","4","5","{","}","+","-","=","*","#",";"];T.push(B),T.forEach((M,I)=>{setTimeout(()=>{C.target.innerHTML=M},(I+1)*70)})}return N.jsx("div",{style:{cursor:"default"},children:g.map((C,B)=>N.jsxs("div",{style:{display:"inline-block"},children:[C.map((T,M)=>N.jsx(Pt.span,{className:e,onHoverStart:I=>p(I,T),children:T},B+M)),""]},B))})},sb=()=>{const t=an(),[e,n]=nt.useState(!1),[s,o]=nt.useState("We dont anymore understand the construction of this digital space we are afforded. The architecture of our digital bodies is hidden underneath a thick veil of algorithms and obfuscated code. We live in ignorance of the frameworks that uphold our lives. The web as it once was translated unreadable programming languages to understandable source code and visible webpages. Now preprocessors generate unreadable code from understandable programming, rejecting repurposing and reviewing."),a={position:"absolute",width:"45.1vw",fontFamily:"clacon",color:"white"},{ref:c}=ib({text:s,speed:.7,overflow:!0,tick:4,step:6,overdrive:!1,scramble:30}),d=()=>{n(!0),setTimeout(()=>{o("Being online now means presenting ourselves, marketing ourselves. Conforming to the space that was carved out for us, and trying to yield the most attention. We consume the meticulously created profiles of our peers, scrolling through endless mirrors of ourselves, or rather what we are supposed to be. The longer you scroll, the more revenue you create. Maximise your value.")},1e3)};return N.jsxs("div",{className:"websitewrapper",children:[N.jsxs(Pt.div,{style:{...a,display:e?"none":"block"},initial:{y:0},children:[N.jsx(nb,{classs:"paragraph",text:"We dont anymore understand the construction of this digital space we are afforded. The architecture of our digital bodies is hidden underneath a thick veil of algorithms and obfuscated code. We live in ignorance of the frameworks that uphold our lives. The web as it once was translated unreadable programming languages to understandable source code and visible webpages. Now preprocessors generate unreadable code from understandable programming, rejecting repurposing and reviewing."}),N.jsxs(Pt.div,{className:"click",style:{height:"0"},initial:{scaleY:0},animate:{height:"auto",scaleY:1,transition:{delay:2}},onTap:d,children:[N.jsx(Pt.span,{className:"paragraph",onHoverStart:f=>{f.target.innerHTML=">"},onHoverEnd:f=>{f.target.innerHTML="#"},children:"#"}),N.jsx(Pt.span,{className:"paragraph",onHoverStart:f=>{f.target.innerHTML=">"},onHoverEnd:f=>{f.target.innerHTML="#"},children:"#"}),N.jsx(Pt.span,{className:"paragraph",onHoverStart:f=>{f.target.innerHTML=">"},onHoverEnd:f=>{f.target.innerHTML="#"},children:"#"})]})]}),N.jsxs(Pt.div,{style:{...a,width:"45vw",display:e?"block":"none"},initial:{x:0,y:0},children:[N.jsx("p",{ref:c}),N.jsxs(Pt.div,{className:"click",style:{height:"0"},initial:{scaleY:0},animate:e&&{height:"auto",scaleY:1,transition:{delay:2}},onTap:()=>{t("/10")},children:[N.jsx(Pt.span,{className:"paragraph",onHoverStart:f=>{f.target.innerHTML=">"},onHoverEnd:f=>{f.target.innerHTML="#"},children:"#"}),N.jsx(Pt.span,{className:"paragraph",onHoverStart:f=>{f.target.innerHTML=">"},onHoverEnd:f=>{f.target.innerHTML="#"},children:"#"}),N.jsx(Pt.span,{className:"paragraph",onHoverStart:f=>{f.target.innerHTML=">"},onHoverEnd:f=>{f.target.innerHTML="#"},children:"#"})]})]})]})},rb=()=>{const t=an(),e={position:"absolute",width:"45vw",fontFamily:"clacon",color:"white"},n={width:"90vh",height:"90vh",backgroundColor:"rgb(0, 0, 255)",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"},s={width:"50vw",textDecoration:"underline 1em white",textUnderlineOffset:"-0.8em",textDecorationSkipInk:"none",display:"block",zIndex:100,lineHeight:"1.7rem"};let o=window.innerWidth/5,a=window.innerWidth/5;const[c,d]=nt.useState([{src:"/img/sqr/bag.png",x:0*o+10,y:0},{src:"/img/sqr/balls.png",x:o+10,y:0},{src:"",x:3*o+10,y:0},{src:"/img/sqr/books.png",x:o+10,y:a},{src:"/img/sqr/bracelet.png",x:2*o+10,y:a},{src:"",x:4*o+10,y:a},{src:"/img/sqr/cam.png",x:0*o+10,y:a*2},{src:"/img/sqr/candle.png",x:2*o+10,y:a*2},{src:"/img/sqr/ceramic.png",x:3*o+10,y:a*2},{src:"/img/sqr/cross.png",x:o+10,y:a*3},{src:"",x:3*o+10,y:a*3},{src:"/img/sqr/fukt.png",x:4*o+10,y:a*3},{src:"/img/sqr/ghost.png",x:o+10,y:a*4},{src:"",x:2*o+10,y:a*4},{src:"",x:4*o+10,y:a*4},{src:"/img/sqr/greece.png",x:0*o+10,y:a*5},{src:"/img/sqr/hondje.png",x:3*o+10,y:a*5},{src:"/img/sqr/jager.png",x:4*o+10,y:a*5},{src:"",x:0*o+10,y:a*6},{src:"/img/sqr/keys.png",x:2*o+10,y:a*6},{src:"/img/sqr/matches.png",x:4*o+10,y:a*6},{src:"/img/sqr/mug.png",x:o+10,y:a*7},{src:"/img/sqr/pic.png",x:2*o+10,y:a*7},{src:"",x:0*o+10,y:a*8},{src:"/img/sqr/polish.png",x:o+10,y:a*8},{src:"/img/sqr/rings.png",x:2*o+10,y:a*8},{src:"/img/sqr/sudoku.png",x:4*o+10,y:a*8},{src:"",x:o+10,y:a*9},{src:"/img/sqr/turtle.png",x:3*o+10,y:a*9},{src:"",x:0*o+10,y:a*3}]);return N.jsxs("div",{className:"websitewrapper",children:[N.jsxs(Pt.div,{style:e,animate:{y:-window.innerHeight,transition:{duration:5}},children:["Being online now means presenting ourselves, marketing ourselves. Conforming to the space that was carved out for us, and trying to yield the most attention. We consume the meticulously created profiles of our peers, scrolling through endless mirrors of ourselves, or rather what we are supposed to be. The longer you scroll, the more revenue you create. Maximise your value.",N.jsx("br",{}),"###"]}),N.jsx(Pt.div,{style:n,className:"icon-light",initial:{y:window.innerHeight},animate:{y:0,transition:{duration:5}}}),N.jsx(Pt.div,{style:{position:"relative",width:"100vw",height:"100vh"},initial:{y:window.innerHeight*2},animate:{y:-window.innerHeight*5,transition:{duration:35}},children:c.map((f,y)=>N.jsx(Pt.div,{className:f.src==""?"crossout":"",style:{height:window.innerWidth/5-20,width:window.innerWidth/5-20,border:"2px solid rgb(102,164,255)",position:"absolute",top:f.y,left:f.x},children:N.jsx("img",{src:f.src,style:{height:window.innerWidth/5-20}})},y))}),N.jsx(Pt.div,{style:{position:"absolute"},initial:{y:window.innerHeight},animate:{y:0,transition:{delay:22,duration:5}},onAnimationComplete:()=>{t("/11")},children:N.jsxs("span",{style:s,children:["The #id has transformed into the .class. Repetitive use of identical components, the only unique identifier being the ",N.jsx("span",{className:"link",children:"UID"})," in the infinite database of user profiles. We are all created equal, we are all created the same."]})})]})};var ob={exports:{}};/*!
 * matter-js 0.19.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(t,e){(function(s,o){t.exports=o()})(Ou,function(){return function(n){var s={};function o(a){if(s[a])return s[a].exports;var c=s[a]={i:a,l:!1,exports:{}};return n[a].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=n,o.c=s,o.d=function(a,c,d){o.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,c){if(c&1&&(a=o(a)),c&8||c&4&&typeof a=="object"&&a&&a.__esModule)return a;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),c&2&&typeof a!="string")for(var f in a)o.d(d,f,(function(y){return a[y]}).bind(null,f));return d},o.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(c,"a",c),c},o.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},o.p="",o(o.s=20)}([function(n,s){var o={};n.exports=o,function(){o._baseDelta=1e3/60,o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o._warnedOnce={},o._decomp=null,o.extend=function(c,d){var f,y;typeof d=="boolean"?(f=2,y=d):(f=1,y=!0);for(var g=f;g<arguments.length;g++){var S=arguments[g];if(S)for(var x in S)y&&S[x]&&S[x].constructor===Object&&(!c[x]||c[x].constructor===Object)?(c[x]=c[x]||{},o.extend(c[x],y,S[x])):c[x]=S[x]}return c},o.clone=function(c,d){return o.extend({},d,c)},o.keys=function(c){if(Object.keys)return Object.keys(c);var d=[];for(var f in c)d.push(f);return d},o.values=function(c){var d=[];if(Object.keys){for(var f=Object.keys(c),y=0;y<f.length;y++)d.push(c[f[y]]);return d}for(var g in c)d.push(c[g]);return d},o.get=function(c,d,f,y){d=d.split(".").slice(f,y);for(var g=0;g<d.length;g+=1)c=c[d[g]];return c},o.set=function(c,d,f,y,g){var S=d.split(".").slice(y,g);return o.get(c,d,0,-1)[S[S.length-1]]=f,f},o.shuffle=function(c){for(var d=c.length-1;d>0;d--){var f=Math.floor(o.random()*(d+1)),y=c[d];c[d]=c[f],c[f]=y}return c},o.choose=function(c){return c[Math.floor(o.random()*c.length)]},o.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},o.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},o.isFunction=function(c){return typeof c=="function"},o.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},o.isString=function(c){return toString.call(c)==="[object String]"},o.clamp=function(c,d,f){return c<d?d:c>f?f:c},o.sign=function(c){return c<0?-1:1},o.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-o._nowStartTime},o.random=function(c,d){return c=typeof c<"u"?c:0,d=typeof d<"u"?d:1,c+a()*(d-c)};var a=function(){return o._seed=(o._seed*9301+49297)%233280,o._seed/233280};o.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");o._warnedOnce[c]||(o.warn(c),o._warnedOnce[c]=!0)},o.deprecated=function(c,d,f){c[d]=o.chain(function(){o.warnOnce(" deprecated ",f)},c[d])},o.nextId=function(){return o._nextId++},o.indexOf=function(c,d){if(c.indexOf)return c.indexOf(d);for(var f=0;f<c.length;f++)if(c[f]===d)return f;return-1},o.map=function(c,d){if(c.map)return c.map(d);for(var f=[],y=0;y<c.length;y+=1)f.push(d(c[y]));return f},o.topologicalSort=function(c){var d=[],f=[],y=[];for(var g in c)!f[g]&&!y[g]&&o._topologicalSort(g,f,y,c,d);return d},o._topologicalSort=function(c,d,f,y,g){var S=y[c]||[];f[c]=!0;for(var x=0;x<S.length;x+=1){var p=S[x];f[p]||d[p]||o._topologicalSort(p,d,f,y,g)}f[c]=!1,d[c]=!0,g.push(c)},o.chain=function(){for(var c=[],d=0;d<arguments.length;d+=1){var f=arguments[d];f._chained?c.push.apply(c,f._chained):c.push(f)}var y=function(){for(var g,S=new Array(arguments.length),x=0,p=arguments.length;x<p;x++)S[x]=arguments[x];for(x=0;x<c.length;x+=1){var C=c[x].apply(g,S);typeof C<"u"&&(g=C)}return g};return y._chained=c,y},o.chainPathBefore=function(c,d,f){return o.set(c,d,o.chain(f,o.get(c,d)))},o.chainPathAfter=function(c,d,f){return o.set(c,d,o.chain(o.get(c,d),f))},o.setDecomp=function(c){o._decomp=c},o.getDecomp=function(){var c=o._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof Ou<"u"&&(c=Ou.decomp)}catch{c=null}return c}}()},function(n,s){var o={};n.exports=o,function(){o.create=function(a){var c={min:{x:0,y:0},max:{x:0,y:0}};return a&&o.update(c,a),c},o.update=function(a,c,d){a.min.x=1/0,a.max.x=-1/0,a.min.y=1/0,a.max.y=-1/0;for(var f=0;f<c.length;f++){var y=c[f];y.x>a.max.x&&(a.max.x=y.x),y.x<a.min.x&&(a.min.x=y.x),y.y>a.max.y&&(a.max.y=y.y),y.y<a.min.y&&(a.min.y=y.y)}d&&(d.x>0?a.max.x+=d.x:a.min.x+=d.x,d.y>0?a.max.y+=d.y:a.min.y+=d.y)},o.contains=function(a,c){return c.x>=a.min.x&&c.x<=a.max.x&&c.y>=a.min.y&&c.y<=a.max.y},o.overlaps=function(a,c){return a.min.x<=c.max.x&&a.max.x>=c.min.x&&a.max.y>=c.min.y&&a.min.y<=c.max.y},o.translate=function(a,c){a.min.x+=c.x,a.max.x+=c.x,a.min.y+=c.y,a.max.y+=c.y},o.shift=function(a,c){var d=a.max.x-a.min.x,f=a.max.y-a.min.y;a.min.x=c.x,a.max.x=c.x+d,a.min.y=c.y,a.max.y=c.y+f}}()},function(n,s){var o={};n.exports=o,function(){o.create=function(a,c){return{x:a||0,y:c||0}},o.clone=function(a){return{x:a.x,y:a.y}},o.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},o.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y},o.rotate=function(a,c,d){var f=Math.cos(c),y=Math.sin(c);d||(d={});var g=a.x*f-a.y*y;return d.y=a.x*y+a.y*f,d.x=g,d},o.rotateAbout=function(a,c,d,f){var y=Math.cos(c),g=Math.sin(c);f||(f={});var S=d.x+((a.x-d.x)*y-(a.y-d.y)*g);return f.y=d.y+((a.x-d.x)*g+(a.y-d.y)*y),f.x=S,f},o.normalise=function(a){var c=o.magnitude(a);return c===0?{x:0,y:0}:{x:a.x/c,y:a.y/c}},o.dot=function(a,c){return a.x*c.x+a.y*c.y},o.cross=function(a,c){return a.x*c.y-a.y*c.x},o.cross3=function(a,c,d){return(c.x-a.x)*(d.y-a.y)-(c.y-a.y)*(d.x-a.x)},o.add=function(a,c,d){return d||(d={}),d.x=a.x+c.x,d.y=a.y+c.y,d},o.sub=function(a,c,d){return d||(d={}),d.x=a.x-c.x,d.y=a.y-c.y,d},o.mult=function(a,c){return{x:a.x*c,y:a.y*c}},o.div=function(a,c){return{x:a.x/c,y:a.y/c}},o.perp=function(a,c){return c=c===!0?-1:1,{x:c*-a.y,y:c*a.x}},o.neg=function(a){return{x:-a.x,y:-a.y}},o.angle=function(a,c){return Math.atan2(c.y-a.y,c.x-a.x)},o._temp=[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]}()},function(n,s,o){var a={};n.exports=a;var c=o(2),d=o(0);(function(){a.create=function(f,y){for(var g=[],S=0;S<f.length;S++){var x=f[S],p={x:x.x,y:x.y,index:S,body:y,isInternal:!1};g.push(p)}return g},a.fromPath=function(f,y){var g=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,S=[];return f.replace(g,function(x,p,C){S.push({x:parseFloat(p),y:parseFloat(C)})}),a.create(S,y)},a.centre=function(f){for(var y=a.area(f,!0),g={x:0,y:0},S,x,p,C=0;C<f.length;C++)p=(C+1)%f.length,S=c.cross(f[C],f[p]),x=c.mult(c.add(f[C],f[p]),S),g=c.add(g,x);return c.div(g,6*y)},a.mean=function(f){for(var y={x:0,y:0},g=0;g<f.length;g++)y.x+=f[g].x,y.y+=f[g].y;return c.div(y,f.length)},a.area=function(f,y){for(var g=0,S=f.length-1,x=0;x<f.length;x++)g+=(f[S].x-f[x].x)*(f[S].y+f[x].y),S=x;return y?g/2:Math.abs(g)/2},a.inertia=function(f,y){for(var g=0,S=0,x=f,p,C,B=0;B<x.length;B++)C=(B+1)%x.length,p=Math.abs(c.cross(x[C],x[B])),g+=p*(c.dot(x[C],x[C])+c.dot(x[C],x[B])+c.dot(x[B],x[B])),S+=p;return y/6*(g/S)},a.translate=function(f,y,g){g=typeof g<"u"?g:1;var S=f.length,x=y.x*g,p=y.y*g,C;for(C=0;C<S;C++)f[C].x+=x,f[C].y+=p;return f},a.rotate=function(f,y,g){if(y!==0){var S=Math.cos(y),x=Math.sin(y),p=g.x,C=g.y,B=f.length,T,M,I,L;for(L=0;L<B;L++)T=f[L],M=T.x-p,I=T.y-C,T.x=p+(M*S-I*x),T.y=C+(M*x+I*S);return f}},a.contains=function(f,y){for(var g=y.x,S=y.y,x=f.length,p=f[x-1],C,B=0;B<x;B++){if(C=f[B],(g-p.x)*(C.y-p.y)+(S-p.y)*(p.x-C.x)>0)return!1;p=C}return!0},a.scale=function(f,y,g,S){if(y===1&&g===1)return f;S=S||a.centre(f);for(var x,p,C=0;C<f.length;C++)x=f[C],p=c.sub(x,S),f[C].x=S.x+p.x*y,f[C].y=S.y+p.y*g;return f},a.chamfer=function(f,y,g,S,x){typeof y=="number"?y=[y]:y=y||[8],g=typeof g<"u"?g:-1,S=S||2,x=x||14;for(var p=[],C=0;C<f.length;C++){var B=f[C-1>=0?C-1:f.length-1],T=f[C],M=f[(C+1)%f.length],I=y[C<y.length?C:y.length-1];if(I===0){p.push(T);continue}var L=c.normalise({x:T.y-B.y,y:B.x-T.x}),F=c.normalise({x:M.y-T.y,y:T.x-M.x}),k=Math.sqrt(2*Math.pow(I,2)),G=c.mult(d.clone(L),I),O=c.normalise(c.mult(c.add(L,F),.5)),E=c.sub(T,c.mult(O,k)),H=g;g===-1&&(H=Math.pow(I,.32)*1.75),H=d.clamp(H,S,x),H%2===1&&(H+=1);for(var q=Math.acos(c.dot(L,F)),$=q/H,Z=0;Z<H;Z++)p.push(c.add(c.rotate(G,$*Z),E))}return p},a.clockwiseSort=function(f){var y=a.mean(f);return f.sort(function(g,S){return c.angle(y,g)-c.angle(y,S)}),f},a.isConvex=function(f){var y=0,g=f.length,S,x,p,C;if(g<3)return null;for(S=0;S<g;S++)if(x=(S+1)%g,p=(S+2)%g,C=(f[x].x-f[S].x)*(f[p].y-f[x].y),C-=(f[x].y-f[S].y)*(f[p].x-f[x].x),C<0?y|=1:C>0&&(y|=2),y===3)return!1;return y!==0?!0:null},a.hull=function(f){var y=[],g=[],S,x;for(f=f.slice(0),f.sort(function(p,C){var B=p.x-C.x;return B!==0?B:p.y-C.y}),x=0;x<f.length;x+=1){for(S=f[x];g.length>=2&&c.cross3(g[g.length-2],g[g.length-1],S)<=0;)g.pop();g.push(S)}for(x=f.length-1;x>=0;x-=1){for(S=f[x];y.length>=2&&c.cross3(y[y.length-2],y[y.length-1],S)<=0;)y.pop();y.push(S)}return y.pop(),g.pop(),y.concat(g)}})()},function(n,s,o){var a={};n.exports=a;var c=o(3),d=o(2),f=o(7),y=o(0),g=o(1),S=o(11);(function(){a._timeCorrection=!0,a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a._baseDelta=1e3/60,a.create=function(p){var C={id:y.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},B=y.extend(C,p);return x(B,p),B},a.nextGroup=function(p){return p?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var x=function(p,C){C=C||{},a.set(p,{bounds:p.bounds||g.create(p.vertices),positionPrev:p.positionPrev||d.clone(p.position),anglePrev:p.anglePrev||p.angle,vertices:p.vertices,parts:p.parts||[p],isStatic:p.isStatic,isSleeping:p.isSleeping,parent:p.parent||p}),c.rotate(p.vertices,p.angle,p.position),S.rotate(p.axes,p.angle),g.update(p.bounds,p.vertices,p.velocity),a.set(p,{axes:C.axes||p.axes,area:C.area||p.area,mass:C.mass||p.mass,inertia:C.inertia||p.inertia});var B=p.isStatic?"#14151f":y.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),T=p.isStatic?"#555":"#ccc",M=p.isStatic&&p.render.fillStyle===null?1:0;p.render.fillStyle=p.render.fillStyle||B,p.render.strokeStyle=p.render.strokeStyle||T,p.render.lineWidth=p.render.lineWidth||M,p.render.sprite.xOffset+=-(p.bounds.min.x-p.position.x)/(p.bounds.max.x-p.bounds.min.x),p.render.sprite.yOffset+=-(p.bounds.min.y-p.position.y)/(p.bounds.max.y-p.bounds.min.y)};a.set=function(p,C,B){var T;typeof C=="string"&&(T=C,C={},C[T]=B);for(T in C)if(Object.prototype.hasOwnProperty.call(C,T))switch(B=C[T],T){case"isStatic":a.setStatic(p,B);break;case"isSleeping":f.set(p,B);break;case"mass":a.setMass(p,B);break;case"density":a.setDensity(p,B);break;case"inertia":a.setInertia(p,B);break;case"vertices":a.setVertices(p,B);break;case"position":a.setPosition(p,B);break;case"angle":a.setAngle(p,B);break;case"velocity":a.setVelocity(p,B);break;case"angularVelocity":a.setAngularVelocity(p,B);break;case"speed":a.setSpeed(p,B);break;case"angularSpeed":a.setAngularSpeed(p,B);break;case"parts":a.setParts(p,B);break;case"centre":a.setCentre(p,B);break;default:p[T]=B}},a.setStatic=function(p,C){for(var B=0;B<p.parts.length;B++){var T=p.parts[B];T.isStatic=C,C?(T._original={restitution:T.restitution,friction:T.friction,mass:T.mass,inertia:T.inertia,density:T.density,inverseMass:T.inverseMass,inverseInertia:T.inverseInertia},T.restitution=0,T.friction=1,T.mass=T.inertia=T.density=1/0,T.inverseMass=T.inverseInertia=0,T.positionPrev.x=T.position.x,T.positionPrev.y=T.position.y,T.anglePrev=T.angle,T.angularVelocity=0,T.speed=0,T.angularSpeed=0,T.motion=0):T._original&&(T.restitution=T._original.restitution,T.friction=T._original.friction,T.mass=T._original.mass,T.inertia=T._original.inertia,T.density=T._original.density,T.inverseMass=T._original.inverseMass,T.inverseInertia=T._original.inverseInertia,T._original=null)}},a.setMass=function(p,C){var B=p.inertia/(p.mass/6);p.inertia=B*(C/6),p.inverseInertia=1/p.inertia,p.mass=C,p.inverseMass=1/p.mass,p.density=p.mass/p.area},a.setDensity=function(p,C){a.setMass(p,C*p.area),p.density=C},a.setInertia=function(p,C){p.inertia=C,p.inverseInertia=1/p.inertia},a.setVertices=function(p,C){C[0].body===p?p.vertices=C:p.vertices=c.create(C,p),p.axes=S.fromVertices(p.vertices),p.area=c.area(p.vertices),a.setMass(p,p.density*p.area);var B=c.centre(p.vertices);c.translate(p.vertices,B,-1),a.setInertia(p,a._inertiaScale*c.inertia(p.vertices,p.mass)),c.translate(p.vertices,p.position),g.update(p.bounds,p.vertices,p.velocity)},a.setParts=function(p,C,B){var T;for(C=C.slice(0),p.parts.length=0,p.parts.push(p),p.parent=p,T=0;T<C.length;T++){var M=C[T];M!==p&&(M.parent=p,p.parts.push(M))}if(p.parts.length!==1){if(B=typeof B<"u"?B:!0,B){var I=[];for(T=0;T<C.length;T++)I=I.concat(C[T].vertices);c.clockwiseSort(I);var L=c.hull(I),F=c.centre(L);a.setVertices(p,L),c.translate(p.vertices,F)}var k=a._totalProperties(p);p.area=k.area,p.parent=p,p.position.x=k.centre.x,p.position.y=k.centre.y,p.positionPrev.x=k.centre.x,p.positionPrev.y=k.centre.y,a.setMass(p,k.mass),a.setInertia(p,k.inertia),a.setPosition(p,k.centre)}},a.setCentre=function(p,C,B){B?(p.positionPrev.x+=C.x,p.positionPrev.y+=C.y,p.position.x+=C.x,p.position.y+=C.y):(p.positionPrev.x=C.x-(p.position.x-p.positionPrev.x),p.positionPrev.y=C.y-(p.position.y-p.positionPrev.y),p.position.x=C.x,p.position.y=C.y)},a.setPosition=function(p,C,B){var T=d.sub(C,p.position);B?(p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.velocity.x=T.x,p.velocity.y=T.y,p.speed=d.magnitude(T)):(p.positionPrev.x+=T.x,p.positionPrev.y+=T.y);for(var M=0;M<p.parts.length;M++){var I=p.parts[M];I.position.x+=T.x,I.position.y+=T.y,c.translate(I.vertices,T),g.update(I.bounds,I.vertices,p.velocity)}},a.setAngle=function(p,C,B){var T=C-p.angle;B?(p.anglePrev=p.angle,p.angularVelocity=T,p.angularSpeed=Math.abs(T)):p.anglePrev+=T;for(var M=0;M<p.parts.length;M++){var I=p.parts[M];I.angle+=T,c.rotate(I.vertices,T,p.position),S.rotate(I.axes,T),g.update(I.bounds,I.vertices,p.velocity),M>0&&d.rotateAbout(I.position,T,p.position,I.position)}},a.setVelocity=function(p,C){var B=p.deltaTime/a._baseDelta;p.positionPrev.x=p.position.x-C.x*B,p.positionPrev.y=p.position.y-C.y*B,p.velocity.x=(p.position.x-p.positionPrev.x)/B,p.velocity.y=(p.position.y-p.positionPrev.y)/B,p.speed=d.magnitude(p.velocity)},a.getVelocity=function(p){var C=a._baseDelta/p.deltaTime;return{x:(p.position.x-p.positionPrev.x)*C,y:(p.position.y-p.positionPrev.y)*C}},a.getSpeed=function(p){return d.magnitude(a.getVelocity(p))},a.setSpeed=function(p,C){a.setVelocity(p,d.mult(d.normalise(a.getVelocity(p)),C))},a.setAngularVelocity=function(p,C){var B=p.deltaTime/a._baseDelta;p.anglePrev=p.angle-C*B,p.angularVelocity=(p.angle-p.anglePrev)/B,p.angularSpeed=Math.abs(p.angularVelocity)},a.getAngularVelocity=function(p){return(p.angle-p.anglePrev)*a._baseDelta/p.deltaTime},a.getAngularSpeed=function(p){return Math.abs(a.getAngularVelocity(p))},a.setAngularSpeed=function(p,C){a.setAngularVelocity(p,y.sign(a.getAngularVelocity(p))*C)},a.translate=function(p,C,B){a.setPosition(p,d.add(p.position,C),B)},a.rotate=function(p,C,B,T){if(!B)a.setAngle(p,p.angle+C,T);else{var M=Math.cos(C),I=Math.sin(C),L=p.position.x-B.x,F=p.position.y-B.y;a.setPosition(p,{x:B.x+(L*M-F*I),y:B.y+(L*I+F*M)},T),a.setAngle(p,p.angle+C,T)}},a.scale=function(p,C,B,T){var M=0,I=0;T=T||p.position;for(var L=0;L<p.parts.length;L++){var F=p.parts[L];c.scale(F.vertices,C,B,T),F.axes=S.fromVertices(F.vertices),F.area=c.area(F.vertices),a.setMass(F,p.density*F.area),c.translate(F.vertices,{x:-F.position.x,y:-F.position.y}),a.setInertia(F,a._inertiaScale*c.inertia(F.vertices,F.mass)),c.translate(F.vertices,{x:F.position.x,y:F.position.y}),L>0&&(M+=F.area,I+=F.inertia),F.position.x=T.x+(F.position.x-T.x)*C,F.position.y=T.y+(F.position.y-T.y)*B,g.update(F.bounds,F.vertices,p.velocity)}p.parts.length>1&&(p.area=M,p.isStatic||(a.setMass(p,p.density*M),a.setInertia(p,I))),p.circleRadius&&(C===B?p.circleRadius*=C:p.circleRadius=null)},a.update=function(p,C){C=(typeof C<"u"?C:1e3/60)*p.timeScale;var B=C*C,T=a._timeCorrection?C/(p.deltaTime||C):1,M=1-p.frictionAir*(C/y._baseDelta),I=(p.position.x-p.positionPrev.x)*T,L=(p.position.y-p.positionPrev.y)*T;p.velocity.x=I*M+p.force.x/p.mass*B,p.velocity.y=L*M+p.force.y/p.mass*B,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.position.x+=p.velocity.x,p.position.y+=p.velocity.y,p.deltaTime=C,p.angularVelocity=(p.angle-p.anglePrev)*M*T+p.torque/p.inertia*B,p.anglePrev=p.angle,p.angle+=p.angularVelocity;for(var F=0;F<p.parts.length;F++){var k=p.parts[F];c.translate(k.vertices,p.velocity),F>0&&(k.position.x+=p.velocity.x,k.position.y+=p.velocity.y),p.angularVelocity!==0&&(c.rotate(k.vertices,p.angularVelocity,p.position),S.rotate(k.axes,p.angularVelocity),F>0&&d.rotateAbout(k.position,p.angularVelocity,p.position,k.position)),g.update(k.bounds,k.vertices,p.velocity)}},a.updateVelocities=function(p){var C=a._baseDelta/p.deltaTime,B=p.velocity;B.x=(p.position.x-p.positionPrev.x)*C,B.y=(p.position.y-p.positionPrev.y)*C,p.speed=Math.sqrt(B.x*B.x+B.y*B.y),p.angularVelocity=(p.angle-p.anglePrev)*C,p.angularSpeed=Math.abs(p.angularVelocity)},a.applyForce=function(p,C,B){var T={x:C.x-p.position.x,y:C.y-p.position.y};p.force.x+=B.x,p.force.y+=B.y,p.torque+=T.x*B.y-T.y*B.x},a._totalProperties=function(p){for(var C={mass:0,area:0,inertia:0,centre:{x:0,y:0}},B=p.parts.length===1?0:1;B<p.parts.length;B++){var T=p.parts[B],M=T.mass!==1/0?T.mass:1;C.mass+=M,C.area+=T.area,C.inertia+=T.inertia,C.centre=d.add(C.centre,d.mult(T.position,M))}return C.centre=d.div(C.centre,C.mass),C}})()},function(n,s,o){var a={};n.exports=a;var c=o(0);(function(){a.on=function(d,f,y){for(var g=f.split(" "),S,x=0;x<g.length;x++)S=g[x],d.events=d.events||{},d.events[S]=d.events[S]||[],d.events[S].push(y);return y},a.off=function(d,f,y){if(!f){d.events={};return}typeof f=="function"&&(y=f,f=c.keys(d.events).join(" "));for(var g=f.split(" "),S=0;S<g.length;S++){var x=d.events[g[S]],p=[];if(y&&x)for(var C=0;C<x.length;C++)x[C]!==y&&p.push(x[C]);d.events[g[S]]=p}},a.trigger=function(d,f,y){var g,S,x,p,C=d.events;if(C&&c.keys(C).length>0){y||(y={}),g=f.split(" ");for(var B=0;B<g.length;B++)if(S=g[B],x=C[S],x){p=c.clone(y,!1),p.name=S,p.source=d;for(var T=0;T<x.length;T++)x[T].apply(d,[p])}}}})()},function(n,s,o){var a={};n.exports=a;var c=o(5),d=o(0),f=o(1),y=o(4);(function(){a.create=function(g){return d.extend({id:d.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},g)},a.setModified=function(g,S,x,p){if(g.isModified=S,S&&g.cache&&(g.cache.allBodies=null,g.cache.allConstraints=null,g.cache.allComposites=null),x&&g.parent&&a.setModified(g.parent,S,x,p),p)for(var C=0;C<g.composites.length;C++){var B=g.composites[C];a.setModified(B,S,x,p)}},a.add=function(g,S){var x=[].concat(S);c.trigger(g,"beforeAdd",{object:S});for(var p=0;p<x.length;p++){var C=x[p];switch(C.type){case"body":if(C.parent!==C){d.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(g,C);break;case"constraint":a.addConstraint(g,C);break;case"composite":a.addComposite(g,C);break;case"mouseConstraint":a.addConstraint(g,C.constraint);break}}return c.trigger(g,"afterAdd",{object:S}),g},a.remove=function(g,S,x){var p=[].concat(S);c.trigger(g,"beforeRemove",{object:S});for(var C=0;C<p.length;C++){var B=p[C];switch(B.type){case"body":a.removeBody(g,B,x);break;case"constraint":a.removeConstraint(g,B,x);break;case"composite":a.removeComposite(g,B,x);break;case"mouseConstraint":a.removeConstraint(g,B.constraint);break}}return c.trigger(g,"afterRemove",{object:S}),g},a.addComposite=function(g,S){return g.composites.push(S),S.parent=g,a.setModified(g,!0,!0,!1),g},a.removeComposite=function(g,S,x){var p=d.indexOf(g.composites,S);if(p!==-1&&a.removeCompositeAt(g,p),x)for(var C=0;C<g.composites.length;C++)a.removeComposite(g.composites[C],S,!0);return g},a.removeCompositeAt=function(g,S){return g.composites.splice(S,1),a.setModified(g,!0,!0,!1),g},a.addBody=function(g,S){return g.bodies.push(S),a.setModified(g,!0,!0,!1),g},a.removeBody=function(g,S,x){var p=d.indexOf(g.bodies,S);if(p!==-1&&a.removeBodyAt(g,p),x)for(var C=0;C<g.composites.length;C++)a.removeBody(g.composites[C],S,!0);return g},a.removeBodyAt=function(g,S){return g.bodies.splice(S,1),a.setModified(g,!0,!0,!1),g},a.addConstraint=function(g,S){return g.constraints.push(S),a.setModified(g,!0,!0,!1),g},a.removeConstraint=function(g,S,x){var p=d.indexOf(g.constraints,S);if(p!==-1&&a.removeConstraintAt(g,p),x)for(var C=0;C<g.composites.length;C++)a.removeConstraint(g.composites[C],S,!0);return g},a.removeConstraintAt=function(g,S){return g.constraints.splice(S,1),a.setModified(g,!0,!0,!1),g},a.clear=function(g,S,x){if(x)for(var p=0;p<g.composites.length;p++)a.clear(g.composites[p],S,!0);return S?g.bodies=g.bodies.filter(function(C){return C.isStatic}):g.bodies.length=0,g.constraints.length=0,g.composites.length=0,a.setModified(g,!0,!0,!1),g},a.allBodies=function(g){if(g.cache&&g.cache.allBodies)return g.cache.allBodies;for(var S=[].concat(g.bodies),x=0;x<g.composites.length;x++)S=S.concat(a.allBodies(g.composites[x]));return g.cache&&(g.cache.allBodies=S),S},a.allConstraints=function(g){if(g.cache&&g.cache.allConstraints)return g.cache.allConstraints;for(var S=[].concat(g.constraints),x=0;x<g.composites.length;x++)S=S.concat(a.allConstraints(g.composites[x]));return g.cache&&(g.cache.allConstraints=S),S},a.allComposites=function(g){if(g.cache&&g.cache.allComposites)return g.cache.allComposites;for(var S=[].concat(g.composites),x=0;x<g.composites.length;x++)S=S.concat(a.allComposites(g.composites[x]));return g.cache&&(g.cache.allComposites=S),S},a.get=function(g,S,x){var p,C;switch(x){case"body":p=a.allBodies(g);break;case"constraint":p=a.allConstraints(g);break;case"composite":p=a.allComposites(g).concat(g);break}return p?(C=p.filter(function(B){return B.id.toString()===S.toString()}),C.length===0?null:C[0]):null},a.move=function(g,S,x){return a.remove(g,S),a.add(x,S),g},a.rebase=function(g){for(var S=a.allBodies(g).concat(a.allConstraints(g)).concat(a.allComposites(g)),x=0;x<S.length;x++)S[x].id=d.nextId();return g},a.translate=function(g,S,x){for(var p=x?a.allBodies(g):g.bodies,C=0;C<p.length;C++)y.translate(p[C],S);return g},a.rotate=function(g,S,x,p){for(var C=Math.cos(S),B=Math.sin(S),T=p?a.allBodies(g):g.bodies,M=0;M<T.length;M++){var I=T[M],L=I.position.x-x.x,F=I.position.y-x.y;y.setPosition(I,{x:x.x+(L*C-F*B),y:x.y+(L*B+F*C)}),y.rotate(I,S)}return g},a.scale=function(g,S,x,p,C){for(var B=C?a.allBodies(g):g.bodies,T=0;T<B.length;T++){var M=B[T],I=M.position.x-p.x,L=M.position.y-p.y;y.setPosition(M,{x:p.x+I*S,y:p.y+L*x}),y.scale(M,S,x)}return g},a.bounds=function(g){for(var S=a.allBodies(g),x=[],p=0;p<S.length;p+=1){var C=S[p];x.push(C.bounds.min,C.bounds.max)}return f.create(x)}})()},function(n,s,o){var a={};n.exports=a;var c=o(4),d=o(5),f=o(0);(function(){a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(y,g){for(var S=g/f._baseDelta,x=a._motionSleepThreshold,p=0;p<y.length;p++){var C=y[p],B=c.getSpeed(C),T=c.getAngularSpeed(C),M=B*B+T*T;if(C.force.x!==0||C.force.y!==0){a.set(C,!1);continue}var I=Math.min(C.motion,M),L=Math.max(C.motion,M);C.motion=a._minBias*I+(1-a._minBias)*L,C.sleepThreshold>0&&C.motion<x?(C.sleepCounter+=1,C.sleepCounter>=C.sleepThreshold/S&&a.set(C,!0)):C.sleepCounter>0&&(C.sleepCounter-=1)}},a.afterCollisions=function(y){for(var g=a._motionSleepThreshold,S=0;S<y.length;S++){var x=y[S];if(x.isActive){var p=x.collision,C=p.bodyA.parent,B=p.bodyB.parent;if(!(C.isSleeping&&B.isSleeping||C.isStatic||B.isStatic)&&(C.isSleeping||B.isSleeping)){var T=C.isSleeping&&!C.isStatic?C:B,M=T===C?B:C;!T.isStatic&&M.motion>g&&a.set(T,!1)}}}},a.set=function(y,g){var S=y.isSleeping;g?(y.isSleeping=!0,y.sleepCounter=y.sleepThreshold,y.positionImpulse.x=0,y.positionImpulse.y=0,y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.anglePrev=y.angle,y.speed=0,y.angularSpeed=0,y.motion=0,S||d.trigger(y,"sleepStart")):(y.isSleeping=!1,y.sleepCounter=0,S&&d.trigger(y,"sleepEnd"))}})()},function(n,s,o){var a={};n.exports=a;var c=o(3),d=o(9);(function(){var f=[],y={overlap:0,axis:null},g={overlap:0,axis:null};a.create=function(S,x){return{pair:null,collided:!1,bodyA:S,bodyB:x,parentA:S.parent,parentB:x.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},a.collides=function(S,x,p){if(a._overlapAxes(y,S.vertices,x.vertices,S.axes),y.overlap<=0||(a._overlapAxes(g,x.vertices,S.vertices,x.axes),g.overlap<=0))return null;var C=p&&p.table[d.id(S,x)],B;C?B=C.collision:(B=a.create(S,x),B.collided=!0,B.bodyA=S.id<x.id?S:x,B.bodyB=S.id<x.id?x:S,B.parentA=B.bodyA.parent,B.parentB=B.bodyB.parent),S=B.bodyA,x=B.bodyB;var T;y.overlap<g.overlap?T=y:T=g;var M=B.normal,I=B.supports,L=T.axis,F=L.x,k=L.y;F*(x.position.x-S.position.x)+k*(x.position.y-S.position.y)<0?(M.x=F,M.y=k):(M.x=-F,M.y=-k),B.tangent.x=-M.y,B.tangent.y=M.x,B.depth=T.overlap,B.penetration.x=M.x*B.depth,B.penetration.y=M.y*B.depth;var G=a._findSupports(S,x,M,1),O=0;if(c.contains(S.vertices,G[0])&&(I[O++]=G[0]),c.contains(S.vertices,G[1])&&(I[O++]=G[1]),O<2){var E=a._findSupports(x,S,M,-1);c.contains(x.vertices,E[0])&&(I[O++]=E[0]),O<2&&c.contains(x.vertices,E[1])&&(I[O++]=E[1])}return O===0&&(I[O++]=G[0]),I.length=O,B},a._overlapAxes=function(S,x,p,C){var B=x.length,T=p.length,M=x[0].x,I=x[0].y,L=p[0].x,F=p[0].y,k=C.length,G=Number.MAX_VALUE,O=0,E,H,q,$,Z,ot;for(Z=0;Z<k;Z++){var gt=C[Z],ht=gt.x,wt=gt.y,Ct=M*ht+I*wt,mt=L*ht+F*wt,Y=Ct,Q=mt;for(ot=1;ot<B;ot+=1)$=x[ot].x*ht+x[ot].y*wt,$>Y?Y=$:$<Ct&&(Ct=$);for(ot=1;ot<T;ot+=1)$=p[ot].x*ht+p[ot].y*wt,$>Q?Q=$:$<mt&&(mt=$);if(H=Y-mt,q=Q-Ct,E=H<q?H:q,E<G&&(G=E,O=Z,E<=0))break}S.axis=C[O],S.overlap=G},a._projectToAxis=function(S,x,p){for(var C=x[0].x*p.x+x[0].y*p.y,B=C,T=1;T<x.length;T+=1){var M=x[T].x*p.x+x[T].y*p.y;M>B?B=M:M<C&&(C=M)}S.min=C,S.max=B},a._findSupports=function(S,x,p,C){var B=x.vertices,T=B.length,M=S.position.x,I=S.position.y,L=p.x*C,F=p.y*C,k=Number.MAX_VALUE,G,O,E,H,q;for(q=0;q<T;q+=1)O=B[q],H=L*(M-O.x)+F*(I-O.y),H<k&&(k=H,G=O);return E=B[(T+G.index-1)%T],k=L*(M-E.x)+F*(I-E.y),O=B[(G.index+1)%T],L*(M-O.x)+F*(I-O.y)<k?(f[0]=G,f[1]=O,f):(f[0]=G,f[1]=E,f)}})()},function(n,s,o){var a={};n.exports=a;var c=o(16);(function(){a.create=function(d,f){var y=d.bodyA,g=d.bodyB,S={id:a.id(y,g),bodyA:y,bodyB:g,collision:d,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:y.isSensor||g.isSensor,timeCreated:f,timeUpdated:f,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(S,d,f),S},a.update=function(d,f,y){var g=d.contacts,S=f.supports,x=d.activeContacts,p=f.parentA,C=f.parentB,B=p.vertices.length;d.isActive=!0,d.timeUpdated=y,d.collision=f,d.separation=f.depth,d.inverseMass=p.inverseMass+C.inverseMass,d.friction=p.friction<C.friction?p.friction:C.friction,d.frictionStatic=p.frictionStatic>C.frictionStatic?p.frictionStatic:C.frictionStatic,d.restitution=p.restitution>C.restitution?p.restitution:C.restitution,d.slop=p.slop>C.slop?p.slop:C.slop,f.pair=d,x.length=0;for(var T=0;T<S.length;T++){var M=S[T],I=M.body===p?M.index:B+M.index,L=g[I];L?x.push(L):x.push(g[I]=c.create(M))}},a.setActive=function(d,f,y){f?(d.isActive=!0,d.timeUpdated=y):(d.isActive=!1,d.activeContacts.length=0)},a.id=function(d,f){return d.id<f.id?"A"+d.id+"B"+f.id:"A"+f.id+"B"+d.id}})()},function(n,s,o){var a={};n.exports=a;var c=o(3),d=o(2),f=o(7),y=o(1),g=o(11),S=o(0);(function(){a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(x){var p=x;p.bodyA&&!p.pointA&&(p.pointA={x:0,y:0}),p.bodyB&&!p.pointB&&(p.pointB={x:0,y:0});var C=p.bodyA?d.add(p.bodyA.position,p.pointA):p.pointA,B=p.bodyB?d.add(p.bodyB.position,p.pointB):p.pointB,T=d.magnitude(d.sub(C,B));p.length=typeof p.length<"u"?p.length:T,p.id=p.id||S.nextId(),p.label=p.label||"Constraint",p.type="constraint",p.stiffness=p.stiffness||(p.length>0?1:.7),p.damping=p.damping||0,p.angularStiffness=p.angularStiffness||0,p.angleA=p.bodyA?p.bodyA.angle:p.angleA,p.angleB=p.bodyB?p.bodyB.angle:p.angleB,p.plugin={};var M={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return p.length===0&&p.stiffness>.1?(M.type="pin",M.anchors=!1):p.stiffness<.9&&(M.type="spring"),p.render=S.extend(M,p.render),p},a.preSolveAll=function(x){for(var p=0;p<x.length;p+=1){var C=x[p],B=C.constraintImpulse;C.isStatic||B.x===0&&B.y===0&&B.angle===0||(C.position.x+=B.x,C.position.y+=B.y,C.angle+=B.angle)}},a.solveAll=function(x,p){for(var C=S.clamp(p/S._baseDelta,0,1),B=0;B<x.length;B+=1){var T=x[B],M=!T.bodyA||T.bodyA&&T.bodyA.isStatic,I=!T.bodyB||T.bodyB&&T.bodyB.isStatic;(M||I)&&a.solve(x[B],C)}for(B=0;B<x.length;B+=1)T=x[B],M=!T.bodyA||T.bodyA&&T.bodyA.isStatic,I=!T.bodyB||T.bodyB&&T.bodyB.isStatic,!M&&!I&&a.solve(x[B],C)},a.solve=function(x,p){var C=x.bodyA,B=x.bodyB,T=x.pointA,M=x.pointB;if(!(!C&&!B)){C&&!C.isStatic&&(d.rotate(T,C.angle-x.angleA,T),x.angleA=C.angle),B&&!B.isStatic&&(d.rotate(M,B.angle-x.angleB,M),x.angleB=B.angle);var I=T,L=M;if(C&&(I=d.add(C.position,T)),B&&(L=d.add(B.position,M)),!(!I||!L)){var F=d.sub(I,L),k=d.magnitude(F);k<a._minLength&&(k=a._minLength);var G=(k-x.length)/k,O=x.stiffness>=1||x.length===0,E=O?x.stiffness*p:x.stiffness*p*p,H=x.damping*p,q=d.mult(F,G*E),$=(C?C.inverseMass:0)+(B?B.inverseMass:0),Z=(C?C.inverseInertia:0)+(B?B.inverseInertia:0),ot=$+Z,gt,ht,wt,Ct,mt;if(H>0){var Y=d.create();wt=d.div(F,k),mt=d.sub(B&&d.sub(B.position,B.positionPrev)||Y,C&&d.sub(C.position,C.positionPrev)||Y),Ct=d.dot(wt,mt)}C&&!C.isStatic&&(ht=C.inverseMass/$,C.constraintImpulse.x-=q.x*ht,C.constraintImpulse.y-=q.y*ht,C.position.x-=q.x*ht,C.position.y-=q.y*ht,H>0&&(C.positionPrev.x-=H*wt.x*Ct*ht,C.positionPrev.y-=H*wt.y*Ct*ht),gt=d.cross(T,q)/ot*a._torqueDampen*C.inverseInertia*(1-x.angularStiffness),C.constraintImpulse.angle-=gt,C.angle-=gt),B&&!B.isStatic&&(ht=B.inverseMass/$,B.constraintImpulse.x+=q.x*ht,B.constraintImpulse.y+=q.y*ht,B.position.x+=q.x*ht,B.position.y+=q.y*ht,H>0&&(B.positionPrev.x+=H*wt.x*Ct*ht,B.positionPrev.y+=H*wt.y*Ct*ht),gt=d.cross(M,q)/ot*a._torqueDampen*B.inverseInertia*(1-x.angularStiffness),B.constraintImpulse.angle+=gt,B.angle+=gt)}}},a.postSolveAll=function(x){for(var p=0;p<x.length;p++){var C=x[p],B=C.constraintImpulse;if(!(C.isStatic||B.x===0&&B.y===0&&B.angle===0)){f.set(C,!1);for(var T=0;T<C.parts.length;T++){var M=C.parts[T];c.translate(M.vertices,B),T>0&&(M.position.x+=B.x,M.position.y+=B.y),B.angle!==0&&(c.rotate(M.vertices,B.angle,C.position),g.rotate(M.axes,B.angle),T>0&&d.rotateAbout(M.position,B.angle,C.position,M.position)),y.update(M.bounds,M.vertices,C.velocity)}B.angle*=a._warming,B.x*=a._warming,B.y*=a._warming}}},a.pointAWorld=function(x){return{x:(x.bodyA?x.bodyA.position.x:0)+(x.pointA?x.pointA.x:0),y:(x.bodyA?x.bodyA.position.y:0)+(x.pointA?x.pointA.y:0)}},a.pointBWorld=function(x){return{x:(x.bodyB?x.bodyB.position.x:0)+(x.pointB?x.pointB.x:0),y:(x.bodyB?x.bodyB.position.y:0)+(x.pointB?x.pointB.y:0)}}})()},function(n,s,o){var a={};n.exports=a;var c=o(2),d=o(0);(function(){a.fromVertices=function(f){for(var y={},g=0;g<f.length;g++){var S=(g+1)%f.length,x=c.normalise({x:f[S].y-f[g].y,y:f[g].x-f[S].x}),p=x.y===0?1/0:x.x/x.y;p=p.toFixed(3).toString(),y[p]=x}return d.values(y)},a.rotate=function(f,y){if(y!==0)for(var g=Math.cos(y),S=Math.sin(y),x=0;x<f.length;x++){var p=f[x],C;C=p.x*g-p.y*S,p.y=p.x*S+p.y*g,p.x=C}}})()},function(n,s,o){var a={};n.exports=a;var c=o(3),d=o(0),f=o(4),y=o(1),g=o(2);(function(){a.rectangle=function(S,x,p,C,B){B=B||{};var T={label:"Rectangle Body",position:{x:S,y:x},vertices:c.fromPath("L 0 0 L "+p+" 0 L "+p+" "+C+" L 0 "+C)};if(B.chamfer){var M=B.chamfer;T.vertices=c.chamfer(T.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete B.chamfer}return f.create(d.extend({},T,B))},a.trapezoid=function(S,x,p,C,B,T){T=T||{},B*=.5;var M=(1-B*2)*p,I=p*B,L=I+M,F=L+I,k;B<.5?k="L 0 0 L "+I+" "+-C+" L "+L+" "+-C+" L "+F+" 0":k="L 0 0 L "+L+" "+-C+" L "+F+" 0";var G={label:"Trapezoid Body",position:{x:S,y:x},vertices:c.fromPath(k)};if(T.chamfer){var O=T.chamfer;G.vertices=c.chamfer(G.vertices,O.radius,O.quality,O.qualityMin,O.qualityMax),delete T.chamfer}return f.create(d.extend({},G,T))},a.circle=function(S,x,p,C,B){C=C||{};var T={label:"Circle Body",circleRadius:p};B=B||25;var M=Math.ceil(Math.max(10,Math.min(B,p)));return M%2===1&&(M+=1),a.polygon(S,x,M,p,d.extend({},T,C))},a.polygon=function(S,x,p,C,B){if(B=B||{},p<3)return a.circle(S,x,C,B);for(var T=2*Math.PI/p,M="",I=T*.5,L=0;L<p;L+=1){var F=I+L*T,k=Math.cos(F)*C,G=Math.sin(F)*C;M+="L "+k.toFixed(3)+" "+G.toFixed(3)+" "}var O={label:"Polygon Body",position:{x:S,y:x},vertices:c.fromPath(M)};if(B.chamfer){var E=B.chamfer;O.vertices=c.chamfer(O.vertices,E.radius,E.quality,E.qualityMin,E.qualityMax),delete B.chamfer}return f.create(d.extend({},O,B))},a.fromVertices=function(S,x,p,C,B,T,M,I){var L=d.getDecomp(),F,k,G,O,E,H,q,$,Z,ot,gt;for(F=!!(L&&L.quickDecomp),C=C||{},G=[],B=typeof B<"u"?B:!1,T=typeof T<"u"?T:.01,M=typeof M<"u"?M:10,I=typeof I<"u"?I:.01,d.isArray(p[0])||(p=[p]),ot=0;ot<p.length;ot+=1)if(H=p[ot],O=c.isConvex(H),E=!O,E&&!F&&d.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),O||!F)O?H=c.clockwiseSort(H):H=c.hull(H),G.push({position:{x:S,y:x},vertices:H});else{var ht=H.map(function(Gt){return[Gt.x,Gt.y]});L.makeCCW(ht),T!==!1&&L.removeCollinearPoints(ht,T),I!==!1&&L.removeDuplicatePoints&&L.removeDuplicatePoints(ht,I);var wt=L.quickDecomp(ht);for(q=0;q<wt.length;q++){var Ct=wt[q],mt=Ct.map(function(Gt){return{x:Gt[0],y:Gt[1]}});M>0&&c.area(mt)<M||G.push({position:c.centre(mt),vertices:mt})}}for(q=0;q<G.length;q++)G[q]=f.create(d.extend(G[q],C));if(B){var Y=5;for(q=0;q<G.length;q++){var Q=G[q];for($=q+1;$<G.length;$++){var lt=G[$];if(y.overlaps(Q.bounds,lt.bounds)){var _t=Q.vertices,Vt=lt.vertices;for(Z=0;Z<Q.vertices.length;Z++)for(gt=0;gt<lt.vertices.length;gt++){var Bt=g.magnitudeSquared(g.sub(_t[(Z+1)%_t.length],Vt[gt])),Ut=g.magnitudeSquared(g.sub(_t[Z],Vt[(gt+1)%Vt.length]));Bt<Y&&Ut<Y&&(_t[Z].isInternal=!0,Vt[gt].isInternal=!0)}}}}}return G.length>1?(k=f.create(d.extend({parts:G.slice(0)},C)),f.setPosition(k,{x:S,y:x}),k):G[0]}})()},function(n,s,o){var a={};n.exports=a;var c=o(0),d=o(8);(function(){a.create=function(f){var y={bodies:[],pairs:null};return c.extend(y,f)},a.setBodies=function(f,y){f.bodies=y.slice(0)},a.clear=function(f){f.bodies=[]},a.collisions=function(f){var y=[],g=f.pairs,S=f.bodies,x=S.length,p=a.canCollide,C=d.collides,B,T;for(S.sort(a._compareBoundsX),B=0;B<x;B++){var M=S[B],I=M.bounds,L=M.bounds.max.x,F=M.bounds.max.y,k=M.bounds.min.y,G=M.isStatic||M.isSleeping,O=M.parts.length,E=O===1;for(T=B+1;T<x;T++){var H=S[T],q=H.bounds;if(q.min.x>L)break;if(!(F<q.min.y||k>q.max.y)&&!(G&&(H.isStatic||H.isSleeping))&&p(M.collisionFilter,H.collisionFilter)){var $=H.parts.length;if(E&&$===1){var Z=C(M,H,g);Z&&y.push(Z)}else for(var ot=O>1?1:0,gt=$>1?1:0,ht=ot;ht<O;ht++)for(var wt=M.parts[ht],I=wt.bounds,Ct=gt;Ct<$;Ct++){var mt=H.parts[Ct],q=mt.bounds;if(!(I.min.x>q.max.x||I.max.x<q.min.x||I.max.y<q.min.y||I.min.y>q.max.y)){var Z=C(wt,mt,g);Z&&y.push(Z)}}}}}return y},a.canCollide=function(f,y){return f.group===y.group&&f.group!==0?f.group>0:(f.mask&y.category)!==0&&(y.mask&f.category)!==0},a._compareBoundsX=function(f,y){return f.bounds.min.x-y.bounds.min.x}})()},function(n,s,o){var a={};n.exports=a;var c=o(0);(function(){a.create=function(d){var f={};return d||c.log("Mouse.create: element was undefined, defaulting to document.body","warn"),f.element=d||document.body,f.absolute={x:0,y:0},f.position={x:0,y:0},f.mousedownPosition={x:0,y:0},f.mouseupPosition={x:0,y:0},f.offset={x:0,y:0},f.scale={x:1,y:1},f.wheelDelta=0,f.button=-1,f.pixelRatio=parseInt(f.element.getAttribute("data-pixel-ratio"),10)||1,f.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},f.mousemove=function(y){var g=a._getRelativeMousePosition(y,f.element,f.pixelRatio),S=y.changedTouches;S&&(f.button=0,y.preventDefault()),f.absolute.x=g.x,f.absolute.y=g.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.sourceEvents.mousemove=y},f.mousedown=function(y){var g=a._getRelativeMousePosition(y,f.element,f.pixelRatio),S=y.changedTouches;S?(f.button=0,y.preventDefault()):f.button=y.button,f.absolute.x=g.x,f.absolute.y=g.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.mousedownPosition.x=f.position.x,f.mousedownPosition.y=f.position.y,f.sourceEvents.mousedown=y},f.mouseup=function(y){var g=a._getRelativeMousePosition(y,f.element,f.pixelRatio),S=y.changedTouches;S&&y.preventDefault(),f.button=-1,f.absolute.x=g.x,f.absolute.y=g.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.mouseupPosition.x=f.position.x,f.mouseupPosition.y=f.position.y,f.sourceEvents.mouseup=y},f.mousewheel=function(y){f.wheelDelta=Math.max(-1,Math.min(1,y.wheelDelta||-y.detail)),y.preventDefault()},a.setElement(f,f.element),f},a.setElement=function(d,f){d.element=f,f.addEventListener("mousemove",d.mousemove),f.addEventListener("mousedown",d.mousedown),f.addEventListener("mouseup",d.mouseup),f.addEventListener("mousewheel",d.mousewheel),f.addEventListener("DOMMouseScroll",d.mousewheel),f.addEventListener("touchmove",d.mousemove),f.addEventListener("touchstart",d.mousedown),f.addEventListener("touchend",d.mouseup)},a.clearSourceEvents=function(d){d.sourceEvents.mousemove=null,d.sourceEvents.mousedown=null,d.sourceEvents.mouseup=null,d.sourceEvents.mousewheel=null,d.wheelDelta=0},a.setOffset=function(d,f){d.offset.x=f.x,d.offset.y=f.y,d.position.x=d.absolute.x*d.scale.x+d.offset.x,d.position.y=d.absolute.y*d.scale.y+d.offset.y},a.setScale=function(d,f){d.scale.x=f.x,d.scale.y=f.y,d.position.x=d.absolute.x*d.scale.x+d.offset.x,d.position.y=d.absolute.y*d.scale.y+d.offset.y},a._getRelativeMousePosition=function(d,f,y){var g=f.getBoundingClientRect(),S=document.documentElement||document.body.parentNode||document.body,x=window.pageXOffset!==void 0?window.pageXOffset:S.scrollLeft,p=window.pageYOffset!==void 0?window.pageYOffset:S.scrollTop,C=d.changedTouches,B,T;return C?(B=C[0].pageX-g.left-x,T=C[0].pageY-g.top-p):(B=d.pageX-g.left-x,T=d.pageY-g.top-p),{x:B/(f.clientWidth/(f.width||f.clientWidth)*y),y:T/(f.clientHeight/(f.height||f.clientHeight)*y)}}})()},function(n,s,o){var a={};n.exports=a;var c=o(0);(function(){a._registry={},a.register=function(d){if(a.isPlugin(d)||c.warn("Plugin.register:",a.toString(d),"does not implement all required fields."),d.name in a._registry){var f=a._registry[d.name],y=a.versionParse(d.version).number,g=a.versionParse(f.version).number;y>g?(c.warn("Plugin.register:",a.toString(f),"was upgraded to",a.toString(d)),a._registry[d.name]=d):y<g?c.warn("Plugin.register:",a.toString(f),"can not be downgraded to",a.toString(d)):d!==f&&c.warn("Plugin.register:",a.toString(d),"is already registered to different plugin object")}else a._registry[d.name]=d;return d},a.resolve=function(d){return a._registry[a.dependencyParse(d).name]},a.toString=function(d){return typeof d=="string"?d:(d.name||"anonymous")+"@"+(d.version||d.range||"0.0.0")},a.isPlugin=function(d){return d&&d.name&&d.version&&d.install},a.isUsed=function(d,f){return d.used.indexOf(f)>-1},a.isFor=function(d,f){var y=d.for&&a.dependencyParse(d.for);return!d.for||f.name===y.name&&a.versionSatisfies(f.version,y.range)},a.use=function(d,f){if(d.uses=(d.uses||[]).concat(f||[]),d.uses.length===0){c.warn("Plugin.use:",a.toString(d),"does not specify any dependencies to install.");return}for(var y=a.dependencies(d),g=c.topologicalSort(y),S=[],x=0;x<g.length;x+=1)if(g[x]!==d.name){var p=a.resolve(g[x]);if(!p){S.push(" "+g[x]);continue}a.isUsed(d,p.name)||(a.isFor(p,d)||(c.warn("Plugin.use:",a.toString(p),"is for",p.for,"but installed on",a.toString(d)+"."),p._warned=!0),p.install?p.install(d):(c.warn("Plugin.use:",a.toString(p),"does not specify an install function."),p._warned=!0),p._warned?(S.push(" "+a.toString(p)),delete p._warned):S.push(" "+a.toString(p)),d.used.push(p.name))}S.length>0&&c.info(S.join("  "))},a.dependencies=function(d,f){var y=a.dependencyParse(d),g=y.name;if(f=f||{},!(g in f)){d=a.resolve(d)||d,f[g]=c.map(d.uses||[],function(x){a.isPlugin(x)&&a.register(x);var p=a.dependencyParse(x),C=a.resolve(x);return C&&!a.versionSatisfies(C.version,p.range)?(c.warn("Plugin.dependencies:",a.toString(C),"does not satisfy",a.toString(p),"used by",a.toString(y)+"."),C._warned=!0,d._warned=!0):C||(c.warn("Plugin.dependencies:",a.toString(x),"used by",a.toString(y),"could not be resolved."),d._warned=!0),p.name});for(var S=0;S<f[g].length;S+=1)a.dependencies(f[g][S],f);return f}},a.dependencyParse=function(d){if(c.isString(d)){var f=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return f.test(d)||c.warn("Plugin.dependencyParse:",d,"is not a valid dependency string."),{name:d.split("@")[0],range:d.split("@")[1]||"*"}}return{name:d.name,range:d.range||d.version}},a.versionParse=function(d){var f=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;f.test(d)||c.warn("Plugin.versionParse:",d,"is not a valid version or range.");var y=f.exec(d),g=Number(y[4]),S=Number(y[5]),x=Number(y[6]);return{isRange:!!(y[1]||y[2]),version:y[3],range:d,operator:y[1]||y[2]||"",major:g,minor:S,patch:x,parts:[g,S,x],prerelease:y[7],number:g*1e8+S*1e4+x}},a.versionSatisfies=function(d,f){f=f||"*";var y=a.versionParse(f),g=a.versionParse(d);if(y.isRange){if(y.operator==="*"||d==="*")return!0;if(y.operator===">")return g.number>y.number;if(y.operator===">=")return g.number>=y.number;if(y.operator==="~")return g.major===y.major&&g.minor===y.minor&&g.patch>=y.patch;if(y.operator==="^")return y.major>0?g.major===y.major&&g.number>=y.number:y.minor>0?g.minor===y.minor&&g.patch>=y.patch:g.patch===y.patch}return d===f||d==="*"}})()},function(n,s){var o={};n.exports=o,function(){o.create=function(a){return{vertex:a,normalImpulse:0,tangentImpulse:0}}}()},function(n,s,o){var a={};n.exports=a;var c=o(7),d=o(18),f=o(13),y=o(19),g=o(5),S=o(6),x=o(10),p=o(0),C=o(4);(function(){a.create=function(B){B=B||{};var T={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},M=p.extend(T,B);return M.world=B.world||S.create({label:"World"}),M.pairs=B.pairs||y.create(),M.detector=B.detector||f.create(),M.grid={buckets:[]},M.world.gravity=M.gravity,M.broadphase=M.grid,M.metrics={},M},a.update=function(B,T){var M=p.now(),I=B.world,L=B.detector,F=B.pairs,k=B.timing,G=k.timestamp,O;T=typeof T<"u"?T:p._baseDelta,T*=k.timeScale,k.timestamp+=T,k.lastDelta=T;var E={timestamp:k.timestamp,delta:T};g.trigger(B,"beforeUpdate",E);var H=S.allBodies(I),q=S.allConstraints(I);for(I.isModified&&(f.setBodies(L,H),S.setModified(I,!1,!1,!0)),B.enableSleeping&&c.update(H,T),a._bodiesApplyGravity(H,B.gravity),T>0&&a._bodiesUpdate(H,T),x.preSolveAll(H),O=0;O<B.constraintIterations;O++)x.solveAll(q,T);x.postSolveAll(H),L.pairs=B.pairs;var $=f.collisions(L);y.update(F,$,G),B.enableSleeping&&c.afterCollisions(F.list),F.collisionStart.length>0&&g.trigger(B,"collisionStart",{pairs:F.collisionStart});var Z=p.clamp(20/B.positionIterations,0,1);for(d.preSolvePosition(F.list),O=0;O<B.positionIterations;O++)d.solvePosition(F.list,T,Z);for(d.postSolvePosition(H),x.preSolveAll(H),O=0;O<B.constraintIterations;O++)x.solveAll(q,T);for(x.postSolveAll(H),d.preSolveVelocity(F.list),O=0;O<B.velocityIterations;O++)d.solveVelocity(F.list,T);return a._bodiesUpdateVelocities(H),F.collisionActive.length>0&&g.trigger(B,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&g.trigger(B,"collisionEnd",{pairs:F.collisionEnd}),a._bodiesClearForces(H),g.trigger(B,"afterUpdate",E),B.timing.lastElapsed=p.now()-M,B},a.merge=function(B,T){if(p.extend(B,T),T.world){B.world=T.world,a.clear(B);for(var M=S.allBodies(B.world),I=0;I<M.length;I++){var L=M[I];c.set(L,!1),L.id=p.nextId()}}},a.clear=function(B){y.clear(B.pairs),f.clear(B.detector)},a._bodiesClearForces=function(B){for(var T=B.length,M=0;M<T;M++){var I=B[M];I.force.x=0,I.force.y=0,I.torque=0}},a._bodiesApplyGravity=function(B,T){var M=typeof T.scale<"u"?T.scale:.001,I=B.length;if(!(T.x===0&&T.y===0||M===0))for(var L=0;L<I;L++){var F=B[L];F.isStatic||F.isSleeping||(F.force.y+=F.mass*T.y*M,F.force.x+=F.mass*T.x*M)}},a._bodiesUpdate=function(B,T){for(var M=B.length,I=0;I<M;I++){var L=B[I];L.isStatic||L.isSleeping||C.update(L,T)}},a._bodiesUpdateVelocities=function(B){for(var T=B.length,M=0;M<T;M++)C.updateVelocities(B[M])}})()},function(n,s,o){var a={};n.exports=a;var c=o(3),d=o(0),f=o(1);(function(){a._restingThresh=2,a._restingThreshTangent=Math.sqrt(6),a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a._frictionMaxStatic=Number.MAX_VALUE,a.preSolvePosition=function(y){var g,S,x,p=y.length;for(g=0;g<p;g++)S=y[g],S.isActive&&(x=S.activeContacts.length,S.collision.parentA.totalContacts+=x,S.collision.parentB.totalContacts+=x)},a.solvePosition=function(y,g,S){var x,p,C,B,T,M,I,L,F=a._positionDampen*(S||1),k=d.clamp(g/d._baseDelta,0,1),G=y.length;for(x=0;x<G;x++)p=y[x],!(!p.isActive||p.isSensor)&&(C=p.collision,B=C.parentA,T=C.parentB,M=C.normal,p.separation=M.x*(T.positionImpulse.x+C.penetration.x-B.positionImpulse.x)+M.y*(T.positionImpulse.y+C.penetration.y-B.positionImpulse.y));for(x=0;x<G;x++)p=y[x],!(!p.isActive||p.isSensor)&&(C=p.collision,B=C.parentA,T=C.parentB,M=C.normal,L=p.separation-p.slop*k,(B.isStatic||T.isStatic)&&(L*=2),B.isStatic||B.isSleeping||(I=F/B.totalContacts,B.positionImpulse.x+=M.x*L*I,B.positionImpulse.y+=M.y*L*I),T.isStatic||T.isSleeping||(I=F/T.totalContacts,T.positionImpulse.x-=M.x*L*I,T.positionImpulse.y-=M.y*L*I))},a.postSolvePosition=function(y){for(var g=a._positionWarming,S=y.length,x=c.translate,p=f.update,C=0;C<S;C++){var B=y[C],T=B.positionImpulse,M=T.x,I=T.y,L=B.velocity;if(B.totalContacts=0,M!==0||I!==0){for(var F=0;F<B.parts.length;F++){var k=B.parts[F];x(k.vertices,T),p(k.bounds,k.vertices,L),k.position.x+=M,k.position.y+=I}B.positionPrev.x+=M,B.positionPrev.y+=I,M*L.x+I*L.y<0?(T.x=0,T.y=0):(T.x*=g,T.y*=g)}}},a.preSolveVelocity=function(y){var g=y.length,S,x;for(S=0;S<g;S++){var p=y[S];if(!(!p.isActive||p.isSensor)){var C=p.activeContacts,B=C.length,T=p.collision,M=T.parentA,I=T.parentB,L=T.normal,F=T.tangent;for(x=0;x<B;x++){var k=C[x],G=k.vertex,O=k.normalImpulse,E=k.tangentImpulse;if(O!==0||E!==0){var H=L.x*O+F.x*E,q=L.y*O+F.y*E;M.isStatic||M.isSleeping||(M.positionPrev.x+=H*M.inverseMass,M.positionPrev.y+=q*M.inverseMass,M.anglePrev+=M.inverseInertia*((G.x-M.position.x)*q-(G.y-M.position.y)*H)),I.isStatic||I.isSleeping||(I.positionPrev.x-=H*I.inverseMass,I.positionPrev.y-=q*I.inverseMass,I.anglePrev-=I.inverseInertia*((G.x-I.position.x)*q-(G.y-I.position.y)*H))}}}}},a.solveVelocity=function(y,g){var S=g/d._baseDelta,x=S*S,p=x*S,C=-a._restingThresh*S,B=a._restingThreshTangent,T=a._frictionNormalMultiplier*S,M=a._frictionMaxStatic,I=y.length,L,F,k,G;for(k=0;k<I;k++){var O=y[k];if(!(!O.isActive||O.isSensor)){var E=O.collision,H=E.parentA,q=E.parentB,$=H.velocity,Z=q.velocity,ot=E.normal.x,gt=E.normal.y,ht=E.tangent.x,wt=E.tangent.y,Ct=O.activeContacts,mt=Ct.length,Y=1/mt,Q=H.inverseMass+q.inverseMass,lt=O.friction*O.frictionStatic*T;for($.x=H.position.x-H.positionPrev.x,$.y=H.position.y-H.positionPrev.y,Z.x=q.position.x-q.positionPrev.x,Z.y=q.position.y-q.positionPrev.y,H.angularVelocity=H.angle-H.anglePrev,q.angularVelocity=q.angle-q.anglePrev,G=0;G<mt;G++){var _t=Ct[G],Vt=_t.vertex,Bt=Vt.x-H.position.x,Ut=Vt.y-H.position.y,Gt=Vt.x-q.position.x,Xt=Vt.y-q.position.y,ft=$.x-Ut*H.angularVelocity,rt=$.y+Bt*H.angularVelocity,dt=Z.x-Xt*q.angularVelocity,ut=Z.y+Gt*q.angularVelocity,yt=ft-dt,et=rt-ut,bt=ot*yt+gt*et,kt=ht*yt+wt*et,Nt=O.separation+bt,Et=Math.min(Nt,1);Et=Nt<0?0:Et;var ne=Et*lt;kt<-ne||kt>ne?(F=kt>0?kt:-kt,L=O.friction*(kt>0?1:-1)*p,L<-F?L=-F:L>F&&(L=F)):(L=kt,F=M);var ye=Bt*gt-Ut*ot,De=Gt*gt-Xt*ot,Ye=Y/(Q+H.inverseInertia*ye*ye+q.inverseInertia*De*De),Ce=(1+O.restitution)*bt*Ye;if(L*=Ye,bt<C)_t.normalImpulse=0;else{var l=_t.normalImpulse;_t.normalImpulse+=Ce,_t.normalImpulse>0&&(_t.normalImpulse=0),Ce=_t.normalImpulse-l}if(kt<-B||kt>B)_t.tangentImpulse=0;else{var _i=_t.tangentImpulse;_t.tangentImpulse+=L,_t.tangentImpulse<-F&&(_t.tangentImpulse=-F),_t.tangentImpulse>F&&(_t.tangentImpulse=F),L=_t.tangentImpulse-_i}var $t=ot*Ce+ht*L,qt=gt*Ce+wt*L;H.isStatic||H.isSleeping||(H.positionPrev.x+=$t*H.inverseMass,H.positionPrev.y+=qt*H.inverseMass,H.anglePrev+=(Bt*qt-Ut*$t)*H.inverseInertia),q.isStatic||q.isSleeping||(q.positionPrev.x-=$t*q.inverseMass,q.positionPrev.y-=qt*q.inverseMass,q.anglePrev-=(Gt*qt-Xt*$t)*q.inverseInertia)}}}}})()},function(n,s,o){var a={};n.exports=a;var c=o(9),d=o(0);(function(){a.create=function(f){return d.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},f)},a.update=function(f,y,g){var S=f.list,x=S.length,p=f.table,C=y.length,B=f.collisionStart,T=f.collisionEnd,M=f.collisionActive,I,L,F,k;for(B.length=0,T.length=0,M.length=0,k=0;k<x;k++)S[k].confirmedActive=!1;for(k=0;k<C;k++)I=y[k],F=I.pair,F?(F.isActive?M.push(F):B.push(F),c.update(F,I,g),F.confirmedActive=!0):(F=c.create(I,g),p[F.id]=F,B.push(F),S.push(F));var G=[];for(x=S.length,k=0;k<x;k++)F=S[k],F.confirmedActive||(c.setActive(F,!1,g),T.push(F),!F.collision.bodyA.isSleeping&&!F.collision.bodyB.isSleeping&&G.push(k));for(k=0;k<G.length;k++)L=G[k]-k,F=S[L],S.splice(L,1),delete p[F.id]},a.clear=function(f){return f.table={},f.list.length=0,f.collisionStart.length=0,f.collisionActive.length=0,f.collisionEnd.length=0,f}})()},function(n,s,o){var a=n.exports=o(21);a.Axes=o(11),a.Bodies=o(12),a.Body=o(4),a.Bounds=o(1),a.Collision=o(8),a.Common=o(0),a.Composite=o(6),a.Composites=o(22),a.Constraint=o(10),a.Contact=o(16),a.Detector=o(13),a.Engine=o(17),a.Events=o(5),a.Grid=o(23),a.Mouse=o(14),a.MouseConstraint=o(24),a.Pair=o(9),a.Pairs=o(19),a.Plugin=o(15),a.Query=o(25),a.Render=o(26),a.Resolver=o(18),a.Runner=o(27),a.SAT=o(28),a.Sleeping=o(7),a.Svg=o(29),a.Vector=o(2),a.Vertices=o(3),a.World=o(30),a.Engine.run=a.Runner.run,a.Common.deprecated(a.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(n,s,o){var a={};n.exports=a;var c=o(15),d=o(0);(function(){a.name="matter-js",a.version="0.19.0",a.uses=[],a.used=[],a.use=function(){c.use(a,Array.prototype.slice.call(arguments))},a.before=function(f,y){return f=f.replace(/^Matter./,""),d.chainPathBefore(a,f,y)},a.after=function(f,y){return f=f.replace(/^Matter./,""),d.chainPathAfter(a,f,y)}})()},function(n,s,o){var a={};n.exports=a;var c=o(6),d=o(10),f=o(0),y=o(4),g=o(12),S=f.deprecated;(function(){a.stack=function(x,p,C,B,T,M,I){for(var L=c.create({label:"Stack"}),F=x,k=p,G,O=0,E=0;E<B;E++){for(var H=0,q=0;q<C;q++){var $=I(F,k,q,E,G,O);if($){var Z=$.bounds.max.y-$.bounds.min.y,ot=$.bounds.max.x-$.bounds.min.x;Z>H&&(H=Z),y.translate($,{x:ot*.5,y:Z*.5}),F=$.bounds.max.x+T,c.addBody(L,$),G=$,O+=1}else F+=T}k+=H+M,F=x}return L},a.chain=function(x,p,C,B,T,M){for(var I=x.bodies,L=1;L<I.length;L++){var F=I[L-1],k=I[L],G=F.bounds.max.y-F.bounds.min.y,O=F.bounds.max.x-F.bounds.min.x,E=k.bounds.max.y-k.bounds.min.y,H=k.bounds.max.x-k.bounds.min.x,q={bodyA:F,pointA:{x:O*p,y:G*C},bodyB:k,pointB:{x:H*B,y:E*T}},$=f.extend(q,M);c.addConstraint(x,d.create($))}return x.label+=" Chain",x},a.mesh=function(x,p,C,B,T){var M=x.bodies,I,L,F,k,G;for(I=0;I<C;I++){for(L=1;L<p;L++)F=M[L-1+I*p],k=M[L+I*p],c.addConstraint(x,d.create(f.extend({bodyA:F,bodyB:k},T)));if(I>0)for(L=0;L<p;L++)F=M[L+(I-1)*p],k=M[L+I*p],c.addConstraint(x,d.create(f.extend({bodyA:F,bodyB:k},T))),B&&L>0&&(G=M[L-1+(I-1)*p],c.addConstraint(x,d.create(f.extend({bodyA:G,bodyB:k},T)))),B&&L<p-1&&(G=M[L+1+(I-1)*p],c.addConstraint(x,d.create(f.extend({bodyA:G,bodyB:k},T))))}return x.label+=" Mesh",x},a.pyramid=function(x,p,C,B,T,M,I){return a.stack(x,p,C,B,T,M,function(L,F,k,G,O,E){var H=Math.min(B,Math.ceil(C/2)),q=O?O.bounds.max.x-O.bounds.min.x:0;if(!(G>H)){G=H-G;var $=G,Z=C-1-G;if(!(k<$||k>Z)){E===1&&y.translate(O,{x:(k+(C%2===1?1:-1))*q,y:0});var ot=O?k*q:0;return I(x+ot+k*T,F,k,G,O,E)}}})},a.newtonsCradle=function(x,p,C,B,T){for(var M=c.create({label:"Newtons Cradle"}),I=0;I<C;I++){var L=1.9,F=g.circle(x+I*(B*L),p+T,B,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),k=d.create({pointA:{x:x+I*(B*L),y:p},bodyB:F});c.addBody(M,F),c.addConstraint(M,k)}return M},S(a,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),a.car=function(x,p,C,B,T){var M=y.nextGroup(!0),I=20,L=-C*.5+I,F=C*.5-I,k=0,G=c.create({label:"Car"}),O=g.rectangle(x,p,C,B,{collisionFilter:{group:M},chamfer:{radius:B*.5},density:2e-4}),E=g.circle(x+L,p+k,T,{collisionFilter:{group:M},friction:.8}),H=g.circle(x+F,p+k,T,{collisionFilter:{group:M},friction:.8}),q=d.create({bodyB:O,pointB:{x:L,y:k},bodyA:E,stiffness:1,length:0}),$=d.create({bodyB:O,pointB:{x:F,y:k},bodyA:H,stiffness:1,length:0});return c.addBody(G,O),c.addBody(G,E),c.addBody(G,H),c.addConstraint(G,q),c.addConstraint(G,$),G},S(a,"car","Composites.car  moved to car example"),a.softBody=function(x,p,C,B,T,M,I,L,F,k){F=f.extend({inertia:1/0},F),k=f.extend({stiffness:.2,render:{type:"line",anchors:!1}},k);var G=a.stack(x,p,C,B,T,M,function(O,E){return g.circle(O,E,L,F)});return a.mesh(G,C,B,I,k),G.label="Soft Body",G},S(a,"softBody","Composites.softBody  moved to softBody and cloth examples")})()},function(n,s,o){var a={};n.exports=a;var c=o(9),d=o(0),f=d.deprecated;(function(){a.create=function(y){var g={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return d.extend(g,y)},a.update=function(y,g,S,x){var p,C,B,T=S.world,M=y.buckets,I,L,F=!1;for(p=0;p<g.length;p++){var k=g[p];if(!(k.isSleeping&&!x)&&!(T.bounds&&(k.bounds.max.x<T.bounds.min.x||k.bounds.min.x>T.bounds.max.x||k.bounds.max.y<T.bounds.min.y||k.bounds.min.y>T.bounds.max.y))){var G=a._getRegion(y,k);if(!k.region||G.id!==k.region.id||x){(!k.region||x)&&(k.region=G);var O=a._regionUnion(G,k.region);for(C=O.startCol;C<=O.endCol;C++)for(B=O.startRow;B<=O.endRow;B++){L=a._getBucketId(C,B),I=M[L];var E=C>=G.startCol&&C<=G.endCol&&B>=G.startRow&&B<=G.endRow,H=C>=k.region.startCol&&C<=k.region.endCol&&B>=k.region.startRow&&B<=k.region.endRow;!E&&H&&H&&I&&a._bucketRemoveBody(y,I,k),(k.region===G||E&&!H||x)&&(I||(I=a._createBucket(M,L)),a._bucketAddBody(y,I,k))}k.region=G,F=!0}}}F&&(y.pairsList=a._createActivePairsList(y))},f(a,"update","Grid.update  replaced by Matter.Detector"),a.clear=function(y){y.buckets={},y.pairs={},y.pairsList=[]},f(a,"clear","Grid.clear  replaced by Matter.Detector"),a._regionUnion=function(y,g){var S=Math.min(y.startCol,g.startCol),x=Math.max(y.endCol,g.endCol),p=Math.min(y.startRow,g.startRow),C=Math.max(y.endRow,g.endRow);return a._createRegion(S,x,p,C)},a._getRegion=function(y,g){var S=g.bounds,x=Math.floor(S.min.x/y.bucketWidth),p=Math.floor(S.max.x/y.bucketWidth),C=Math.floor(S.min.y/y.bucketHeight),B=Math.floor(S.max.y/y.bucketHeight);return a._createRegion(x,p,C,B)},a._createRegion=function(y,g,S,x){return{id:y+","+g+","+S+","+x,startCol:y,endCol:g,startRow:S,endRow:x}},a._getBucketId=function(y,g){return"C"+y+"R"+g},a._createBucket=function(y,g){var S=y[g]=[];return S},a._bucketAddBody=function(y,g,S){var x=y.pairs,p=c.id,C=g.length,B;for(B=0;B<C;B++){var T=g[B];if(!(S.id===T.id||S.isStatic&&T.isStatic)){var M=p(S,T),I=x[M];I?I[2]+=1:x[M]=[S,T,1]}}g.push(S)},a._bucketRemoveBody=function(y,g,S){var x=y.pairs,p=c.id,C;g.splice(d.indexOf(g,S),1);var B=g.length;for(C=0;C<B;C++){var T=x[p(S,g[C])];T&&(T[2]-=1)}},a._createActivePairsList=function(y){var g,S=y.pairs,x=d.keys(S),p=x.length,C=[],B;for(B=0;B<p;B++)g=S[x[B]],g[2]>0?C.push(g):delete S[x[B]];return C}})()},function(n,s,o){var a={};n.exports=a;var c=o(3),d=o(7),f=o(14),y=o(5),g=o(13),S=o(10),x=o(6),p=o(0),C=o(1);(function(){a.create=function(B,T){var M=(B?B.mouse:null)||(T?T.mouse:null);M||(B&&B.render&&B.render.canvas?M=f.create(B.render.canvas):T&&T.element?M=f.create(T.element):(M=f.create(),p.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var I=S.create({label:"Mouse Constraint",pointA:M.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),L={type:"mouseConstraint",mouse:M,element:null,body:null,constraint:I,collisionFilter:{category:1,mask:4294967295,group:0}},F=p.extend(L,T);return y.on(B,"beforeUpdate",function(){var k=x.allBodies(B.world);a.update(F,k),a._triggerEvents(F)}),F},a.update=function(B,T){var M=B.mouse,I=B.constraint,L=B.body;if(M.button===0){if(I.bodyB)d.set(I.bodyB,!1),I.pointA=M.position;else for(var F=0;F<T.length;F++)if(L=T[F],C.contains(L.bounds,M.position)&&g.canCollide(L.collisionFilter,B.collisionFilter))for(var k=L.parts.length>1?1:0;k<L.parts.length;k++){var G=L.parts[k];if(c.contains(G.vertices,M.position)){I.pointA=M.position,I.bodyB=B.body=L,I.pointB={x:M.position.x-L.position.x,y:M.position.y-L.position.y},I.angleB=L.angle,d.set(L,!1),y.trigger(B,"startdrag",{mouse:M,body:L});break}}}else I.bodyB=B.body=null,I.pointB=null,L&&y.trigger(B,"enddrag",{mouse:M,body:L})},a._triggerEvents=function(B){var T=B.mouse,M=T.sourceEvents;M.mousemove&&y.trigger(B,"mousemove",{mouse:T}),M.mousedown&&y.trigger(B,"mousedown",{mouse:T}),M.mouseup&&y.trigger(B,"mouseup",{mouse:T}),f.clearSourceEvents(T)}})()},function(n,s,o){var a={};n.exports=a;var c=o(2),d=o(8),f=o(1),y=o(12),g=o(3);(function(){a.collides=function(S,x){for(var p=[],C=x.length,B=S.bounds,T=d.collides,M=f.overlaps,I=0;I<C;I++){var L=x[I],F=L.parts.length,k=F===1?0:1;if(M(L.bounds,B))for(var G=k;G<F;G++){var O=L.parts[G];if(M(O.bounds,B)){var E=T(O,S);if(E){p.push(E);break}}}}return p},a.ray=function(S,x,p,C){C=C||1e-100;for(var B=c.angle(x,p),T=c.magnitude(c.sub(x,p)),M=(p.x+x.x)*.5,I=(p.y+x.y)*.5,L=y.rectangle(M,I,T,C,{angle:B}),F=a.collides(L,S),k=0;k<F.length;k+=1){var G=F[k];G.body=G.bodyB=G.bodyA}return F},a.region=function(S,x,p){for(var C=[],B=0;B<S.length;B++){var T=S[B],M=f.overlaps(T.bounds,x);(M&&!p||!M&&p)&&C.push(T)}return C},a.point=function(S,x){for(var p=[],C=0;C<S.length;C++){var B=S[C];if(f.contains(B.bounds,x))for(var T=B.parts.length===1?0:1;T<B.parts.length;T++){var M=B.parts[T];if(f.contains(M.bounds,x)&&g.contains(M.vertices,x)){p.push(B);break}}}return p}})()},function(n,s,o){var a={};n.exports=a;var c=o(4),d=o(0),f=o(6),y=o(1),g=o(5),S=o(2),x=o(14);(function(){var p,C;typeof window<"u"&&(p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(k){window.setTimeout(function(){k(d.now())},1e3/60)},C=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),a._goodFps=30,a._goodDelta=1e3/60,a.create=function(k){var G={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!k.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},O=d.extend(G,k);return O.canvas&&(O.canvas.width=O.options.width||O.canvas.width,O.canvas.height=O.options.height||O.canvas.height),O.mouse=k.mouse,O.engine=k.engine,O.canvas=O.canvas||M(O.options.width,O.options.height),O.context=O.canvas.getContext("2d"),O.textures={},O.bounds=O.bounds||{min:{x:0,y:0},max:{x:O.canvas.width,y:O.canvas.height}},O.controller=a,O.options.showBroadphase=!1,O.options.pixelRatio!==1&&a.setPixelRatio(O,O.options.pixelRatio),d.isElement(O.element)&&O.element.appendChild(O.canvas),O},a.run=function(k){(function G(O){k.frameRequestId=p(G),B(k,O),a.world(k,O),(k.options.showStats||k.options.showDebug)&&a.stats(k,k.context,O),(k.options.showPerformance||k.options.showDebug)&&a.performance(k,k.context,O)})()},a.stop=function(k){C(k.frameRequestId)},a.setPixelRatio=function(k,G){var O=k.options,E=k.canvas;G==="auto"&&(G=I(E)),O.pixelRatio=G,E.setAttribute("data-pixel-ratio",G),E.width=O.width*G,E.height=O.height*G,E.style.width=O.width+"px",E.style.height=O.height+"px"},a.lookAt=function(k,G,O,E){E=typeof E<"u"?E:!0,G=d.isArray(G)?G:[G],O=O||{x:0,y:0};for(var H={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},q=0;q<G.length;q+=1){var $=G[q],Z=$.bounds?$.bounds.min:$.min||$.position||$,ot=$.bounds?$.bounds.max:$.max||$.position||$;Z&&ot&&(Z.x<H.min.x&&(H.min.x=Z.x),ot.x>H.max.x&&(H.max.x=ot.x),Z.y<H.min.y&&(H.min.y=Z.y),ot.y>H.max.y&&(H.max.y=ot.y))}var gt=H.max.x-H.min.x+2*O.x,ht=H.max.y-H.min.y+2*O.y,wt=k.canvas.height,Ct=k.canvas.width,mt=Ct/wt,Y=gt/ht,Q=1,lt=1;Y>mt?lt=Y/mt:Q=mt/Y,k.options.hasBounds=!0,k.bounds.min.x=H.min.x,k.bounds.max.x=H.min.x+gt*Q,k.bounds.min.y=H.min.y,k.bounds.max.y=H.min.y+ht*lt,E&&(k.bounds.min.x+=gt*.5-gt*Q*.5,k.bounds.max.x+=gt*.5-gt*Q*.5,k.bounds.min.y+=ht*.5-ht*lt*.5,k.bounds.max.y+=ht*.5-ht*lt*.5),k.bounds.min.x-=O.x,k.bounds.max.x-=O.x,k.bounds.min.y-=O.y,k.bounds.max.y-=O.y,k.mouse&&(x.setScale(k.mouse,{x:(k.bounds.max.x-k.bounds.min.x)/k.canvas.width,y:(k.bounds.max.y-k.bounds.min.y)/k.canvas.height}),x.setOffset(k.mouse,k.bounds.min))},a.startViewTransform=function(k){var G=k.bounds.max.x-k.bounds.min.x,O=k.bounds.max.y-k.bounds.min.y,E=G/k.options.width,H=O/k.options.height;k.context.setTransform(k.options.pixelRatio/E,0,0,k.options.pixelRatio/H,0,0),k.context.translate(-k.bounds.min.x,-k.bounds.min.y)},a.endViewTransform=function(k){k.context.setTransform(k.options.pixelRatio,0,0,k.options.pixelRatio,0,0)},a.world=function(k,G){var O=d.now(),E=k.engine,H=E.world,q=k.canvas,$=k.context,Z=k.options,ot=k.timing,gt=f.allBodies(H),ht=f.allConstraints(H),wt=Z.wireframes?Z.wireframeBackground:Z.background,Ct=[],mt=[],Y,Q={timestamp:E.timing.timestamp};if(g.trigger(k,"beforeRender",Q),k.currentBackground!==wt&&F(k,wt),$.globalCompositeOperation="source-in",$.fillStyle="transparent",$.fillRect(0,0,q.width,q.height),$.globalCompositeOperation="source-over",Z.hasBounds){for(Y=0;Y<gt.length;Y++){var lt=gt[Y];y.overlaps(lt.bounds,k.bounds)&&Ct.push(lt)}for(Y=0;Y<ht.length;Y++){var _t=ht[Y],Vt=_t.bodyA,Bt=_t.bodyB,Ut=_t.pointA,Gt=_t.pointB;Vt&&(Ut=S.add(Vt.position,_t.pointA)),Bt&&(Gt=S.add(Bt.position,_t.pointB)),!(!Ut||!Gt)&&(y.contains(k.bounds,Ut)||y.contains(k.bounds,Gt))&&mt.push(_t)}a.startViewTransform(k),k.mouse&&(x.setScale(k.mouse,{x:(k.bounds.max.x-k.bounds.min.x)/k.options.width,y:(k.bounds.max.y-k.bounds.min.y)/k.options.height}),x.setOffset(k.mouse,k.bounds.min))}else mt=ht,Ct=gt,k.options.pixelRatio!==1&&k.context.setTransform(k.options.pixelRatio,0,0,k.options.pixelRatio,0,0);!Z.wireframes||E.enableSleeping&&Z.showSleeping?a.bodies(k,Ct,$):(Z.showConvexHulls&&a.bodyConvexHulls(k,Ct,$),a.bodyWireframes(k,Ct,$)),Z.showBounds&&a.bodyBounds(k,Ct,$),(Z.showAxes||Z.showAngleIndicator)&&a.bodyAxes(k,Ct,$),Z.showPositions&&a.bodyPositions(k,Ct,$),Z.showVelocity&&a.bodyVelocity(k,Ct,$),Z.showIds&&a.bodyIds(k,Ct,$),Z.showSeparations&&a.separations(k,E.pairs.list,$),Z.showCollisions&&a.collisions(k,E.pairs.list,$),Z.showVertexNumbers&&a.vertexNumbers(k,Ct,$),Z.showMousePosition&&a.mousePosition(k,k.mouse,$),a.constraints(mt,$),Z.hasBounds&&a.endViewTransform(k),g.trigger(k,"afterRender",Q),ot.lastElapsed=d.now()-O},a.stats=function(k,G,O){for(var E=k.engine,H=E.world,q=f.allBodies(H),$=0,Z=55,ot=44,gt=0,ht=0,wt=0;wt<q.length;wt+=1)$+=q[wt].parts.length;var Ct={Part:$,Body:q.length,Cons:f.allConstraints(H).length,Comp:f.allComposites(H).length,Pair:E.pairs.list.length};G.fillStyle="#0e0f19",G.fillRect(gt,ht,Z*5.5,ot),G.font="12px Arial",G.textBaseline="top",G.textAlign="right";for(var mt in Ct){var Y=Ct[mt];G.fillStyle="#aaa",G.fillText(mt,gt+Z,ht+8),G.fillStyle="#eee",G.fillText(Y,gt+Z,ht+26),gt+=Z}},a.performance=function(k,G){var O=k.engine,E=k.timing,H=E.deltaHistory,q=E.elapsedHistory,$=E.timestampElapsedHistory,Z=E.engineDeltaHistory,ot=E.engineElapsedHistory,gt=O.timing.lastDelta,ht=T(H),wt=T(q),Ct=T(Z),mt=T(ot),Y=T($),Q=Y/ht||0,lt=1e3/ht||0,_t=4,Vt=12,Bt=60,Ut=34,Gt=10,Xt=69;G.fillStyle="#0e0f19",G.fillRect(0,50,Vt*4+Bt*5+22,Ut),a.status(G,Gt,Xt,Bt,_t,H.length,Math.round(lt)+" fps",lt/a._goodFps,function(ft){return H[ft]/ht-1}),a.status(G,Gt+Vt+Bt,Xt,Bt,_t,Z.length,gt.toFixed(2)+" dt",a._goodDelta/gt,function(ft){return Z[ft]/Ct-1}),a.status(G,Gt+(Vt+Bt)*2,Xt,Bt,_t,ot.length,mt.toFixed(2)+" ut",1-mt/a._goodFps,function(ft){return ot[ft]/mt-1}),a.status(G,Gt+(Vt+Bt)*3,Xt,Bt,_t,q.length,wt.toFixed(2)+" rt",1-wt/a._goodFps,function(ft){return q[ft]/wt-1}),a.status(G,Gt+(Vt+Bt)*4,Xt,Bt,_t,$.length,Q.toFixed(2)+" x",Q*Q*Q,function(ft){return($[ft]/H[ft]/Q||0)-1})},a.status=function(k,G,O,E,H,q,$,Z,ot){k.strokeStyle="#888",k.fillStyle="#444",k.lineWidth=1,k.fillRect(G,O+7,E,1),k.beginPath(),k.moveTo(G,O+7-H*d.clamp(.4*ot(0),-2,2));for(var gt=0;gt<E;gt+=1)k.lineTo(G+gt,O+7-(gt<q?H*d.clamp(.4*ot(gt),-2,2):0));k.stroke(),k.fillStyle="hsl("+d.clamp(25+95*Z,0,120)+",100%,60%)",k.fillRect(G,O-7,4,4),k.font="12px Arial",k.textBaseline="middle",k.textAlign="right",k.fillStyle="#eee",k.fillText($,G+E,O-5)},a.constraints=function(k,G){for(var O=G,E=0;E<k.length;E++){var H=k[E];if(!(!H.render.visible||!H.pointA||!H.pointB)){var q=H.bodyA,$=H.bodyB,Z,ot;if(q?Z=S.add(q.position,H.pointA):Z=H.pointA,H.render.type==="pin")O.beginPath(),O.arc(Z.x,Z.y,3,0,2*Math.PI),O.closePath();else{if($?ot=S.add($.position,H.pointB):ot=H.pointB,O.beginPath(),O.moveTo(Z.x,Z.y),H.render.type==="spring")for(var gt=S.sub(ot,Z),ht=S.perp(S.normalise(gt)),wt=Math.ceil(d.clamp(H.length/5,12,20)),Ct,mt=1;mt<wt;mt+=1)Ct=mt%2===0?1:-1,O.lineTo(Z.x+gt.x*(mt/wt)+ht.x*Ct*4,Z.y+gt.y*(mt/wt)+ht.y*Ct*4);O.lineTo(ot.x,ot.y)}H.render.lineWidth&&(O.lineWidth=H.render.lineWidth,O.strokeStyle=H.render.strokeStyle,O.stroke()),H.render.anchors&&(O.fillStyle=H.render.strokeStyle,O.beginPath(),O.arc(Z.x,Z.y,3,0,2*Math.PI),O.arc(ot.x,ot.y,3,0,2*Math.PI),O.closePath(),O.fill())}}},a.bodies=function(k,G,O){var E=O;k.engine;var H=k.options,q=H.showInternalEdges||!H.wireframes,$,Z,ot,gt;for(ot=0;ot<G.length;ot++)if($=G[ot],!!$.render.visible){for(gt=$.parts.length>1?1:0;gt<$.parts.length;gt++)if(Z=$.parts[gt],!!Z.render.visible){if(H.showSleeping&&$.isSleeping?E.globalAlpha=.5*Z.render.opacity:Z.render.opacity!==1&&(E.globalAlpha=Z.render.opacity),Z.render.sprite&&Z.render.sprite.texture&&!H.wireframes){var ht=Z.render.sprite,wt=L(k,ht.texture);E.translate(Z.position.x,Z.position.y),E.rotate(Z.angle),E.drawImage(wt,wt.width*-ht.xOffset*ht.xScale,wt.height*-ht.yOffset*ht.yScale,wt.width*ht.xScale,wt.height*ht.yScale),E.rotate(-Z.angle),E.translate(-Z.position.x,-Z.position.y)}else{if(Z.circleRadius)E.beginPath(),E.arc(Z.position.x,Z.position.y,Z.circleRadius,0,2*Math.PI);else{E.beginPath(),E.moveTo(Z.vertices[0].x,Z.vertices[0].y);for(var Ct=1;Ct<Z.vertices.length;Ct++)!Z.vertices[Ct-1].isInternal||q?E.lineTo(Z.vertices[Ct].x,Z.vertices[Ct].y):E.moveTo(Z.vertices[Ct].x,Z.vertices[Ct].y),Z.vertices[Ct].isInternal&&!q&&E.moveTo(Z.vertices[(Ct+1)%Z.vertices.length].x,Z.vertices[(Ct+1)%Z.vertices.length].y);E.lineTo(Z.vertices[0].x,Z.vertices[0].y),E.closePath()}H.wireframes?(E.lineWidth=1,E.strokeStyle="#bbb",E.stroke()):(E.fillStyle=Z.render.fillStyle,Z.render.lineWidth&&(E.lineWidth=Z.render.lineWidth,E.strokeStyle=Z.render.strokeStyle,E.stroke()),E.fill())}E.globalAlpha=1}}},a.bodyWireframes=function(k,G,O){var E=O,H=k.options.showInternalEdges,q,$,Z,ot,gt;for(E.beginPath(),Z=0;Z<G.length;Z++)if(q=G[Z],!!q.render.visible)for(gt=q.parts.length>1?1:0;gt<q.parts.length;gt++){for($=q.parts[gt],E.moveTo($.vertices[0].x,$.vertices[0].y),ot=1;ot<$.vertices.length;ot++)!$.vertices[ot-1].isInternal||H?E.lineTo($.vertices[ot].x,$.vertices[ot].y):E.moveTo($.vertices[ot].x,$.vertices[ot].y),$.vertices[ot].isInternal&&!H&&E.moveTo($.vertices[(ot+1)%$.vertices.length].x,$.vertices[(ot+1)%$.vertices.length].y);E.lineTo($.vertices[0].x,$.vertices[0].y)}E.lineWidth=1,E.strokeStyle="#bbb",E.stroke()},a.bodyConvexHulls=function(k,G,O){var E=O,H,q,$;for(E.beginPath(),q=0;q<G.length;q++)if(H=G[q],!(!H.render.visible||H.parts.length===1)){for(E.moveTo(H.vertices[0].x,H.vertices[0].y),$=1;$<H.vertices.length;$++)E.lineTo(H.vertices[$].x,H.vertices[$].y);E.lineTo(H.vertices[0].x,H.vertices[0].y)}E.lineWidth=1,E.strokeStyle="rgba(255,255,255,0.2)",E.stroke()},a.vertexNumbers=function(k,G,O){var E=O,H,q,$;for(H=0;H<G.length;H++){var Z=G[H].parts;for($=Z.length>1?1:0;$<Z.length;$++){var ot=Z[$];for(q=0;q<ot.vertices.length;q++)E.fillStyle="rgba(255,255,255,0.2)",E.fillText(H+"_"+q,ot.position.x+(ot.vertices[q].x-ot.position.x)*.8,ot.position.y+(ot.vertices[q].y-ot.position.y)*.8)}}},a.mousePosition=function(k,G,O){var E=O;E.fillStyle="rgba(255,255,255,0.8)",E.fillText(G.position.x+"  "+G.position.y,G.position.x+5,G.position.y-5)},a.bodyBounds=function(k,G,O){var E=O;k.engine;var H=k.options;E.beginPath();for(var q=0;q<G.length;q++){var $=G[q];if($.render.visible)for(var Z=G[q].parts,ot=Z.length>1?1:0;ot<Z.length;ot++){var gt=Z[ot];E.rect(gt.bounds.min.x,gt.bounds.min.y,gt.bounds.max.x-gt.bounds.min.x,gt.bounds.max.y-gt.bounds.min.y)}}H.wireframes?E.strokeStyle="rgba(255,255,255,0.08)":E.strokeStyle="rgba(0,0,0,0.1)",E.lineWidth=1,E.stroke()},a.bodyAxes=function(k,G,O){var E=O;k.engine;var H=k.options,q,$,Z,ot;for(E.beginPath(),$=0;$<G.length;$++){var gt=G[$],ht=gt.parts;if(gt.render.visible)if(H.showAxes)for(Z=ht.length>1?1:0;Z<ht.length;Z++)for(q=ht[Z],ot=0;ot<q.axes.length;ot++){var wt=q.axes[ot];E.moveTo(q.position.x,q.position.y),E.lineTo(q.position.x+wt.x*20,q.position.y+wt.y*20)}else for(Z=ht.length>1?1:0;Z<ht.length;Z++)for(q=ht[Z],ot=0;ot<q.axes.length;ot++)E.moveTo(q.position.x,q.position.y),E.lineTo((q.vertices[0].x+q.vertices[q.vertices.length-1].x)/2,(q.vertices[0].y+q.vertices[q.vertices.length-1].y)/2)}H.wireframes?(E.strokeStyle="indianred",E.lineWidth=1):(E.strokeStyle="rgba(255, 255, 255, 0.4)",E.globalCompositeOperation="overlay",E.lineWidth=2),E.stroke(),E.globalCompositeOperation="source-over"},a.bodyPositions=function(k,G,O){var E=O;k.engine;var H=k.options,q,$,Z,ot;for(E.beginPath(),Z=0;Z<G.length;Z++)if(q=G[Z],!!q.render.visible)for(ot=0;ot<q.parts.length;ot++)$=q.parts[ot],E.arc($.position.x,$.position.y,3,0,2*Math.PI,!1),E.closePath();for(H.wireframes?E.fillStyle="indianred":E.fillStyle="rgba(0,0,0,0.5)",E.fill(),E.beginPath(),Z=0;Z<G.length;Z++)q=G[Z],q.render.visible&&(E.arc(q.positionPrev.x,q.positionPrev.y,2,0,2*Math.PI,!1),E.closePath());E.fillStyle="rgba(255,165,0,0.8)",E.fill()},a.bodyVelocity=function(k,G,O){var E=O;E.beginPath();for(var H=0;H<G.length;H++){var q=G[H];if(q.render.visible){var $=c.getVelocity(q);E.moveTo(q.position.x,q.position.y),E.lineTo(q.position.x+$.x,q.position.y+$.y)}}E.lineWidth=3,E.strokeStyle="cornflowerblue",E.stroke()},a.bodyIds=function(k,G,O){var E=O,H,q;for(H=0;H<G.length;H++)if(G[H].render.visible){var $=G[H].parts;for(q=$.length>1?1:0;q<$.length;q++){var Z=$[q];E.font="12px Arial",E.fillStyle="rgba(255,255,255,0.5)",E.fillText(Z.id,Z.position.x+10,Z.position.y-10)}}},a.collisions=function(k,G,O){var E=O,H=k.options,q,$,Z,ot;for(E.beginPath(),Z=0;Z<G.length;Z++)if(q=G[Z],!!q.isActive)for($=q.collision,ot=0;ot<q.activeContacts.length;ot++){var gt=q.activeContacts[ot],ht=gt.vertex;E.rect(ht.x-1.5,ht.y-1.5,3.5,3.5)}for(H.wireframes?E.fillStyle="rgba(255,255,255,0.7)":E.fillStyle="orange",E.fill(),E.beginPath(),Z=0;Z<G.length;Z++)if(q=G[Z],!!q.isActive&&($=q.collision,q.activeContacts.length>0)){var wt=q.activeContacts[0].vertex.x,Ct=q.activeContacts[0].vertex.y;q.activeContacts.length===2&&(wt=(q.activeContacts[0].vertex.x+q.activeContacts[1].vertex.x)/2,Ct=(q.activeContacts[0].vertex.y+q.activeContacts[1].vertex.y)/2),$.bodyB===$.supports[0].body||$.bodyA.isStatic===!0?E.moveTo(wt-$.normal.x*8,Ct-$.normal.y*8):E.moveTo(wt+$.normal.x*8,Ct+$.normal.y*8),E.lineTo(wt,Ct)}H.wireframes?E.strokeStyle="rgba(255,165,0,0.7)":E.strokeStyle="orange",E.lineWidth=1,E.stroke()},a.separations=function(k,G,O){var E=O,H=k.options,q,$,Z,ot,gt;for(E.beginPath(),gt=0;gt<G.length;gt++)if(q=G[gt],!!q.isActive){$=q.collision,Z=$.bodyA,ot=$.bodyB;var ht=1;!ot.isStatic&&!Z.isStatic&&(ht=.5),ot.isStatic&&(ht=0),E.moveTo(ot.position.x,ot.position.y),E.lineTo(ot.position.x-$.penetration.x*ht,ot.position.y-$.penetration.y*ht),ht=1,!ot.isStatic&&!Z.isStatic&&(ht=.5),Z.isStatic&&(ht=0),E.moveTo(Z.position.x,Z.position.y),E.lineTo(Z.position.x+$.penetration.x*ht,Z.position.y+$.penetration.y*ht)}H.wireframes?E.strokeStyle="rgba(255,165,0,0.5)":E.strokeStyle="orange",E.stroke()},a.inspector=function(k,G){k.engine;var O=k.selected,E=k.render,H=E.options,q;if(H.hasBounds){var $=E.bounds.max.x-E.bounds.min.x,Z=E.bounds.max.y-E.bounds.min.y,ot=$/E.options.width,gt=Z/E.options.height;G.scale(1/ot,1/gt),G.translate(-E.bounds.min.x,-E.bounds.min.y)}for(var ht=0;ht<O.length;ht++){var wt=O[ht].data;switch(G.translate(.5,.5),G.lineWidth=1,G.strokeStyle="rgba(255,165,0,0.9)",G.setLineDash([1,2]),wt.type){case"body":q=wt.bounds,G.beginPath(),G.rect(Math.floor(q.min.x-3),Math.floor(q.min.y-3),Math.floor(q.max.x-q.min.x+6),Math.floor(q.max.y-q.min.y+6)),G.closePath(),G.stroke();break;case"constraint":var Ct=wt.pointA;wt.bodyA&&(Ct=wt.pointB),G.beginPath(),G.arc(Ct.x,Ct.y,10,0,2*Math.PI),G.closePath(),G.stroke();break}G.setLineDash([]),G.translate(-.5,-.5)}k.selectStart!==null&&(G.translate(.5,.5),G.lineWidth=1,G.strokeStyle="rgba(255,165,0,0.6)",G.fillStyle="rgba(255,165,0,0.1)",q=k.selectBounds,G.beginPath(),G.rect(Math.floor(q.min.x),Math.floor(q.min.y),Math.floor(q.max.x-q.min.x),Math.floor(q.max.y-q.min.y)),G.closePath(),G.stroke(),G.fill(),G.translate(-.5,-.5)),H.hasBounds&&G.setTransform(1,0,0,1,0,0)};var B=function(k,G){var O=k.engine,E=k.timing,H=E.historySize,q=O.timing.timestamp;E.delta=G-E.lastTime||a._goodDelta,E.lastTime=G,E.timestampElapsed=q-E.lastTimestamp||0,E.lastTimestamp=q,E.deltaHistory.unshift(E.delta),E.deltaHistory.length=Math.min(E.deltaHistory.length,H),E.engineDeltaHistory.unshift(O.timing.lastDelta),E.engineDeltaHistory.length=Math.min(E.engineDeltaHistory.length,H),E.timestampElapsedHistory.unshift(E.timestampElapsed),E.timestampElapsedHistory.length=Math.min(E.timestampElapsedHistory.length,H),E.engineElapsedHistory.unshift(O.timing.lastElapsed),E.engineElapsedHistory.length=Math.min(E.engineElapsedHistory.length,H),E.elapsedHistory.unshift(E.lastElapsed),E.elapsedHistory.length=Math.min(E.elapsedHistory.length,H)},T=function(k){for(var G=0,O=0;O<k.length;O+=1)G+=k[O];return G/k.length||0},M=function(k,G){var O=document.createElement("canvas");return O.width=k,O.height=G,O.oncontextmenu=function(){return!1},O.onselectstart=function(){return!1},O},I=function(k){var G=k.getContext("2d"),O=window.devicePixelRatio||1,E=G.webkitBackingStorePixelRatio||G.mozBackingStorePixelRatio||G.msBackingStorePixelRatio||G.oBackingStorePixelRatio||G.backingStorePixelRatio||1;return O/E},L=function(k,G){var O=k.textures[G];return O||(O=k.textures[G]=new Image,O.src=G,O)},F=function(k,G){var O=G;/(jpg|gif|png)$/.test(G)&&(O="url("+G+")"),k.canvas.style.background=O,k.canvas.style.backgroundSize="contain",k.currentBackground=G}})()},function(n,s,o){var a={};n.exports=a;var c=o(5),d=o(17),f=o(0);(function(){var y,g;if(typeof window<"u"&&(y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,g=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!y){var S;y=function(x){S=setTimeout(function(){x(f.now())},1e3/60)},g=function(){clearTimeout(S)}}a.create=function(x){var p={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},C=f.extend(p,x);return C.delta=C.delta||1e3/C.fps,C.deltaMin=C.deltaMin||1e3/C.fps,C.deltaMax=C.deltaMax||1e3/(C.fps*.5),C.fps=1e3/C.delta,C},a.run=function(x,p){return typeof x.positionIterations<"u"&&(p=x,x=a.create()),function C(B){x.frameRequestId=y(C),B&&x.enabled&&a.tick(x,p,B)}(),x},a.tick=function(x,p,C){var B=p.timing,T;x.isFixed?T=x.delta:(T=C-x.timePrev||x.delta,x.timePrev=C,x.deltaHistory.push(T),x.deltaHistory=x.deltaHistory.slice(-x.deltaSampleSize),T=Math.min.apply(null,x.deltaHistory),T=T<x.deltaMin?x.deltaMin:T,T=T>x.deltaMax?x.deltaMax:T,x.delta=T);var M={timestamp:B.timestamp};c.trigger(x,"beforeTick",M),x.frameCounter+=1,C-x.counterTimestamp>=1e3&&(x.fps=x.frameCounter*((C-x.counterTimestamp)/1e3),x.counterTimestamp=C,x.frameCounter=0),c.trigger(x,"tick",M),c.trigger(x,"beforeUpdate",M),d.update(p,T),c.trigger(x,"afterUpdate",M),c.trigger(x,"afterTick",M)},a.stop=function(x){g(x.frameRequestId)},a.start=function(x,p){a.run(x,p)}})()},function(n,s,o){var a={};n.exports=a;var c=o(8),d=o(0),f=d.deprecated;(function(){a.collides=function(y,g){return c.collides(y,g)},f(a,"collides","SAT.collides  replaced by Collision.collides")})()},function(n,s,o){var a={};n.exports=a,o(1);var c=o(0);(function(){a.pathToVertices=function(d,f){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var y,g,S,x,p,C,B,T,M,I,L=[],F,k,G=0,O=0,E=0;f=f||15;var H=function($,Z,ot){var gt=ot%2===1&&ot>1;if(!M||$!=M.x||Z!=M.y){M&&gt?(F=M.x,k=M.y):(F=0,k=0);var ht={x:F+$,y:k+Z};(gt||!M)&&(M=ht),L.push(ht),O=F+$,E=k+Z}},q=function($){var Z=$.pathSegTypeAsLetter.toUpperCase();if(Z!=="Z"){switch(Z){case"M":case"L":case"T":case"C":case"S":case"Q":O=$.x,E=$.y;break;case"H":O=$.x;break;case"V":E=$.y;break}H(O,E,$.pathSegType)}};for(a._svgPathToAbsolute(d),S=d.getTotalLength(),C=[],y=0;y<d.pathSegList.numberOfItems;y+=1)C.push(d.pathSegList.getItem(y));for(B=C.concat();G<S;){if(I=d.getPathSegAtLength(G),p=C[I],p!=T){for(;B.length&&B[0]!=p;)q(B.shift());T=p}switch(p.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":x=d.getPointAtLength(G),H(x.x,x.y,0);break}G+=f}for(y=0,g=B.length;y<g;++y)q(B[y]);return L},a._svgPathToAbsolute=function(d){for(var f,y,g,S,x,p,C=d.pathSegList,B=0,T=0,M=C.numberOfItems,I=0;I<M;++I){var L=C.getItem(I),F=L.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(F))"x"in L&&(B=L.x),"y"in L&&(T=L.y);else switch("x1"in L&&(g=B+L.x1),"x2"in L&&(x=B+L.x2),"y1"in L&&(S=T+L.y1),"y2"in L&&(p=T+L.y2),"x"in L&&(B+=L.x),"y"in L&&(T+=L.y),F){case"m":C.replaceItem(d.createSVGPathSegMovetoAbs(B,T),I);break;case"l":C.replaceItem(d.createSVGPathSegLinetoAbs(B,T),I);break;case"h":C.replaceItem(d.createSVGPathSegLinetoHorizontalAbs(B),I);break;case"v":C.replaceItem(d.createSVGPathSegLinetoVerticalAbs(T),I);break;case"c":C.replaceItem(d.createSVGPathSegCurvetoCubicAbs(B,T,g,S,x,p),I);break;case"s":C.replaceItem(d.createSVGPathSegCurvetoCubicSmoothAbs(B,T,x,p),I);break;case"q":C.replaceItem(d.createSVGPathSegCurvetoQuadraticAbs(B,T,g,S),I);break;case"t":C.replaceItem(d.createSVGPathSegCurvetoQuadraticSmoothAbs(B,T),I);break;case"a":C.replaceItem(d.createSVGPathSegArcAbs(B,T,L.r1,L.r2,L.angle,L.largeArcFlag,L.sweepFlag),I);break;case"z":case"Z":B=f,T=y;break}(F=="M"||F=="m")&&(f=B,y=T)}}})()},function(n,s,o){var a={};n.exports=a;var c=o(6);o(0),function(){a.create=c.create,a.add=c.add,a.remove=c.remove,a.clear=c.clear,a.addComposite=c.addComposite,a.addBody=c.addBody,a.addConstraint=c.addConstraint}()}])})})(ob);var ab={exports:{}};(function(t){var e=function(n){var s=Object.prototype,o=s.hasOwnProperty,a=Object.defineProperty||function(Y,Q,lt){Y[Q]=lt.value},c,d=typeof Symbol=="function"?Symbol:{},f=d.iterator||"@@iterator",y=d.asyncIterator||"@@asyncIterator",g=d.toStringTag||"@@toStringTag";function S(Y,Q,lt){return Object.defineProperty(Y,Q,{value:lt,enumerable:!0,configurable:!0,writable:!0}),Y[Q]}try{S({},"")}catch{S=function(Q,lt,_t){return Q[lt]=_t}}function x(Y,Q,lt,_t){var Vt=Q&&Q.prototype instanceof L?Q:L,Bt=Object.create(Vt.prototype),Ut=new wt(_t||[]);return a(Bt,"_invoke",{value:Z(Y,lt,Ut)}),Bt}n.wrap=x;function p(Y,Q,lt){try{return{type:"normal",arg:Y.call(Q,lt)}}catch(_t){return{type:"throw",arg:_t}}}var C="suspendedStart",B="suspendedYield",T="executing",M="completed",I={};function L(){}function F(){}function k(){}var G={};S(G,f,function(){return this});var O=Object.getPrototypeOf,E=O&&O(O(Ct([])));E&&E!==s&&o.call(E,f)&&(G=E);var H=k.prototype=L.prototype=Object.create(G);F.prototype=k,a(H,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:F,configurable:!0}),F.displayName=S(k,g,"GeneratorFunction");function q(Y){["next","throw","return"].forEach(function(Q){S(Y,Q,function(lt){return this._invoke(Q,lt)})})}n.isGeneratorFunction=function(Y){var Q=typeof Y=="function"&&Y.constructor;return Q?Q===F||(Q.displayName||Q.name)==="GeneratorFunction":!1},n.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,k):(Y.__proto__=k,S(Y,g,"GeneratorFunction")),Y.prototype=Object.create(H),Y},n.awrap=function(Y){return{__await:Y}};function $(Y,Q){function lt(Bt,Ut,Gt,Xt){var ft=p(Y[Bt],Y,Ut);if(ft.type==="throw")Xt(ft.arg);else{var rt=ft.arg,dt=rt.value;return dt&&typeof dt=="object"&&o.call(dt,"__await")?Q.resolve(dt.__await).then(function(ut){lt("next",ut,Gt,Xt)},function(ut){lt("throw",ut,Gt,Xt)}):Q.resolve(dt).then(function(ut){rt.value=ut,Gt(rt)},function(ut){return lt("throw",ut,Gt,Xt)})}}var _t;function Vt(Bt,Ut){function Gt(){return new Q(function(Xt,ft){lt(Bt,Ut,Xt,ft)})}return _t=_t?_t.then(Gt,Gt):Gt()}a(this,"_invoke",{value:Vt})}q($.prototype),S($.prototype,y,function(){return this}),n.AsyncIterator=$,n.async=function(Y,Q,lt,_t,Vt){Vt===void 0&&(Vt=Promise);var Bt=new $(x(Y,Q,lt,_t),Vt);return n.isGeneratorFunction(Q)?Bt:Bt.next().then(function(Ut){return Ut.done?Ut.value:Bt.next()})};function Z(Y,Q,lt){var _t=C;return function(Bt,Ut){if(_t===T)throw new Error("Generator is already running");if(_t===M){if(Bt==="throw")throw Ut;return mt()}for(lt.method=Bt,lt.arg=Ut;;){var Gt=lt.delegate;if(Gt){var Xt=ot(Gt,lt);if(Xt){if(Xt===I)continue;return Xt}}if(lt.method==="next")lt.sent=lt._sent=lt.arg;else if(lt.method==="throw"){if(_t===C)throw _t=M,lt.arg;lt.dispatchException(lt.arg)}else lt.method==="return"&&lt.abrupt("return",lt.arg);_t=T;var ft=p(Y,Q,lt);if(ft.type==="normal"){if(_t=lt.done?M:B,ft.arg===I)continue;return{value:ft.arg,done:lt.done}}else ft.type==="throw"&&(_t=M,lt.method="throw",lt.arg=ft.arg)}}}function ot(Y,Q){var lt=Q.method,_t=Y.iterator[lt];if(_t===c)return Q.delegate=null,lt==="throw"&&Y.iterator.return&&(Q.method="return",Q.arg=c,ot(Y,Q),Q.method==="throw")||lt!=="return"&&(Q.method="throw",Q.arg=new TypeError("The iterator does not provide a '"+lt+"' method")),I;var Vt=p(_t,Y.iterator,Q.arg);if(Vt.type==="throw")return Q.method="throw",Q.arg=Vt.arg,Q.delegate=null,I;var Bt=Vt.arg;if(!Bt)return Q.method="throw",Q.arg=new TypeError("iterator result is not an object"),Q.delegate=null,I;if(Bt.done)Q[Y.resultName]=Bt.value,Q.next=Y.nextLoc,Q.method!=="return"&&(Q.method="next",Q.arg=c);else return Bt;return Q.delegate=null,I}q(H),S(H,g,"Generator"),S(H,f,function(){return this}),S(H,"toString",function(){return"[object Generator]"});function gt(Y){var Q={tryLoc:Y[0]};1 in Y&&(Q.catchLoc=Y[1]),2 in Y&&(Q.finallyLoc=Y[2],Q.afterLoc=Y[3]),this.tryEntries.push(Q)}function ht(Y){var Q=Y.completion||{};Q.type="normal",delete Q.arg,Y.completion=Q}function wt(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(gt,this),this.reset(!0)}n.keys=function(Y){var Q=Object(Y),lt=[];for(var _t in Q)lt.push(_t);return lt.reverse(),function Vt(){for(;lt.length;){var Bt=lt.pop();if(Bt in Q)return Vt.value=Bt,Vt.done=!1,Vt}return Vt.done=!0,Vt}};function Ct(Y){if(Y!=null){var Q=Y[f];if(Q)return Q.call(Y);if(typeof Y.next=="function")return Y;if(!isNaN(Y.length)){var lt=-1,_t=function Vt(){for(;++lt<Y.length;)if(o.call(Y,lt))return Vt.value=Y[lt],Vt.done=!1,Vt;return Vt.value=c,Vt.done=!0,Vt};return _t.next=_t}}throw new TypeError(typeof Y+" is not iterable")}n.values=Ct;function mt(){return{value:c,done:!0}}return wt.prototype={constructor:wt,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(ht),!Y)for(var Q in this)Q.charAt(0)==="t"&&o.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=c)},stop:function(){this.done=!0;var Y=this.tryEntries[0],Q=Y.completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var Q=this;function lt(Xt,ft){return Bt.type="throw",Bt.arg=Y,Q.next=Xt,ft&&(Q.method="next",Q.arg=c),!!ft}for(var _t=this.tryEntries.length-1;_t>=0;--_t){var Vt=this.tryEntries[_t],Bt=Vt.completion;if(Vt.tryLoc==="root")return lt("end");if(Vt.tryLoc<=this.prev){var Ut=o.call(Vt,"catchLoc"),Gt=o.call(Vt,"finallyLoc");if(Ut&&Gt){if(this.prev<Vt.catchLoc)return lt(Vt.catchLoc,!0);if(this.prev<Vt.finallyLoc)return lt(Vt.finallyLoc)}else if(Ut){if(this.prev<Vt.catchLoc)return lt(Vt.catchLoc,!0)}else if(Gt){if(this.prev<Vt.finallyLoc)return lt(Vt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Y,Q){for(var lt=this.tryEntries.length-1;lt>=0;--lt){var _t=this.tryEntries[lt];if(_t.tryLoc<=this.prev&&o.call(_t,"finallyLoc")&&this.prev<_t.finallyLoc){var Vt=_t;break}}Vt&&(Y==="break"||Y==="continue")&&Vt.tryLoc<=Q&&Q<=Vt.finallyLoc&&(Vt=null);var Bt=Vt?Vt.completion:{};return Bt.type=Y,Bt.arg=Q,Vt?(this.method="next",this.next=Vt.finallyLoc,I):this.complete(Bt)},complete:function(Y,Q){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&Q&&(this.next=Q),I},finish:function(Y){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var lt=this.tryEntries[Q];if(lt.finallyLoc===Y)return this.complete(lt.completion,lt.afterLoc),ht(lt),I}},catch:function(Y){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var lt=this.tryEntries[Q];if(lt.tryLoc===Y){var _t=lt.completion;if(_t.type==="throw"){var Vt=_t.arg;ht(lt)}return Vt}}throw new Error("illegal catch attempt")},delegateYield:function(Y,Q,lt){return this.delegate={iterator:Ct(Y),resultName:Q,nextLoc:lt},this.method==="next"&&(this.arg=c),I}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(ab);var si=function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(s,o,a){n.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:a})},n.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.t=function(s,o){if(1&o&&(s=n(s)),8&o||4&o&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&o&&typeof s!="string")for(var c in s)n.d(a,c,(function(d){return s[d]}).bind(null,c));return a},n.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(o,"a",o),o},n.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},n.p="",n(n.s=5)}([function(t,e,n){t.exports=n(3)()},function(t,e,n){(function(s){function o(j,i){return j!==void 0?j:i}const a=1e37,c=1e-5,d=c*c,f=3.14159265359,y=2,g=8,S=.1,x=2,p=.008,C=2/180*f,B=2*p,T=8,M=32,I=1,L=.2,F=8/180*f,k=2,G=k*k,O=.5*f,E=O*O,H=.2,q=.75,$=-1,Z=.75,ot=1,gt=.25,ht=.5,wt=4,Ct=256,mt=2.5,Y=.5,Q=.01,lt=2/180*f;class _t{constructor(i=0,r=0,u=0){this.major=0,this.minor=0,this.revision=0,this.major=i,this.minor=r,this.revision=u}toString(){return this.major+"."+this.minor+"."+this.revision}}const Vt=new _t(2,3,2);function Bt(j,i){const r=[];for(let u=0;u<j;++u)r.push(i(u));return r}function Ut(j,i=0){const r=[];for(let u=0;u<j;++u)r.push(i);return r}const Gt=f/180,Xt=180/f,ft=2*f,rt=Math.abs,dt=Math.min,ut=Math.max;function yt(j,i,r){return j<i?i:j>r?r:j}const et=isFinite;function bt(j){return j*j}function kt(j){return 1/Math.sqrt(j)}const Nt=Math.sqrt,Et=Math.pow,ne=Math.cos,ye=Math.sin,De=Math.acos,Ye=Math.asin,Ce=Math.atan2;class l{constructor(i=0,r=0){this.x=i,this.y=r}Clone(){return new l(this.x,this.y)}SetZero(){return this.x=0,this.y=0,this}Set(i,r){return this.x=i,this.y=r,this}Copy(i){return this.x=i.x,this.y=i.y,this}SelfAdd(i){return this.x+=i.x,this.y+=i.y,this}SelfAddXY(i,r){return this.x+=i,this.y+=r,this}SelfSub(i){return this.x-=i.x,this.y-=i.y,this}SelfSubXY(i,r){return this.x-=i,this.y-=r,this}SelfMul(i){return this.x*=i,this.y*=i,this}SelfMulAdd(i,r){return this.x+=i*r.x,this.y+=i*r.y,this}SelfMulSub(i,r){return this.x-=i*r.x,this.y-=i*r.y,this}Dot(i){return this.x*i.x+this.y*i.y}Cross(i){return this.x*i.y-this.y*i.x}Length(){const i=this.x,r=this.y;return Math.sqrt(i*i+r*r)}LengthSquared(){const i=this.x,r=this.y;return i*i+r*r}Normalize(){const i=this.Length();if(i>=c){const r=1/i;this.x*=r,this.y*=r}return i}SelfNormalize(){const i=this.Length();if(i>=c){const r=1/i;this.x*=r,this.y*=r}return this}SelfRotate(i){const r=Math.cos(i),u=Math.sin(i),h=this.x;return this.x=r*h-u*this.y,this.y=u*h+r*this.y,this}SelfRotateCosSin(i,r){const u=this.x;return this.x=i*u-r*this.y,this.y=r*u+i*this.y,this}IsValid(){return isFinite(this.x)&&isFinite(this.y)}SelfCrossVS(i){const r=this.x;return this.x=i*this.y,this.y=-i*r,this}SelfCrossSV(i){const r=this.x;return this.x=-i*this.y,this.y=i*r,this}SelfMinV(i){return this.x=dt(this.x,i.x),this.y=dt(this.y,i.y),this}SelfMaxV(i){return this.x=ut(this.x,i.x),this.y=ut(this.y,i.y),this}SelfAbs(){return this.x=rt(this.x),this.y=rt(this.y),this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this}SelfSkew(){const i=this.x;return this.x=-this.y,this.y=i,this}static MakeArray(i){return Bt(i,r=>new l)}static AbsV(i,r){return r.x=rt(i.x),r.y=rt(i.y),r}static MinV(i,r,u){return u.x=dt(i.x,r.x),u.y=dt(i.y,r.y),u}static MaxV(i,r,u){return u.x=ut(i.x,r.x),u.y=ut(i.y,r.y),u}static ClampV(i,r,u,h){return h.x=yt(i.x,r.x,u.x),h.y=yt(i.y,r.y,u.y),h}static RotateV(i,r,u){const h=i.x,m=i.y,_=Math.cos(r),v=Math.sin(r);return u.x=_*h-v*m,u.y=v*h+_*m,u}static DotVV(i,r){return i.x*r.x+i.y*r.y}static CrossVV(i,r){return i.x*r.y-i.y*r.x}static CrossVS(i,r,u){const h=i.x;return u.x=r*i.y,u.y=-r*h,u}static CrossVOne(i,r){const u=i.x;return r.x=i.y,r.y=-u,r}static CrossSV(i,r,u){const h=r.x;return u.x=-i*r.y,u.y=i*h,u}static CrossOneV(i,r){const u=i.x;return r.x=-i.y,r.y=u,r}static AddVV(i,r,u){return u.x=i.x+r.x,u.y=i.y+r.y,u}static SubVV(i,r,u){return u.x=i.x-r.x,u.y=i.y-r.y,u}static MulSV(i,r,u){return u.x=r.x*i,u.y=r.y*i,u}static MulVS(i,r,u){return u.x=i.x*r,u.y=i.y*r,u}static AddVMulSV(i,r,u,h){return h.x=i.x+r*u.x,h.y=i.y+r*u.y,h}static SubVMulSV(i,r,u,h){return h.x=i.x-r*u.x,h.y=i.y-r*u.y,h}static AddVCrossSV(i,r,u,h){const m=u.x;return h.x=i.x-r*u.y,h.y=i.y+r*m,h}static MidVV(i,r,u){return u.x=.5*(i.x+r.x),u.y=.5*(i.y+r.y),u}static ExtVV(i,r,u){return u.x=.5*(r.x-i.x),u.y=.5*(r.y-i.y),u}static IsEqualToV(i,r){return i.x===r.x&&i.y===r.y}static DistanceVV(i,r){const u=i.x-r.x,h=i.y-r.y;return Math.sqrt(u*u+h*h)}static DistanceSquaredVV(i,r){const u=i.x-r.x,h=i.y-r.y;return u*u+h*h}static NegV(i,r){return r.x=-i.x,r.y=-i.y,r}}l.ZERO=new l(0,0),l.UNITX=new l(1,0),l.UNITY=new l(0,1),l.s_t0=new l,l.s_t1=new l,l.s_t2=new l,l.s_t3=new l;const _i=new l(0,0);class $t{constructor(i=0,r=0,u=0){this.x=i,this.y=r,this.z=u}Clone(){return new $t(this.x,this.y,this.z)}SetZero(){return this.x=0,this.y=0,this.z=0,this}SetXYZ(i,r,u){return this.x=i,this.y=r,this.z=u,this}Copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}SelfAdd(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z,this}SelfAddXYZ(i,r,u){return this.x+=i,this.y+=r,this.z+=u,this}SelfSub(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z,this}SelfSubXYZ(i,r,u){return this.x-=i,this.y-=r,this.z-=u,this}SelfMul(i){return this.x*=i,this.y*=i,this.z*=i,this}static DotV3V3(i,r){return i.x*r.x+i.y*r.y+i.z*r.z}static CrossV3V3(i,r,u){const h=i.x,m=i.y,_=i.z,v=r.x,w=r.y,V=r.z;return u.x=m*V-_*w,u.y=_*v-h*V,u.z=h*w-m*v,u}}$t.ZERO=new $t(0,0,0),$t.s_t0=new $t;class qt{constructor(){this.ex=new l(1,0),this.ey=new l(0,1)}Clone(){return new qt().Copy(this)}static FromVV(i,r){return new qt().SetVV(i,r)}static FromSSSS(i,r,u,h){return new qt().SetSSSS(i,r,u,h)}static FromAngle(i){return new qt().SetAngle(i)}SetSSSS(i,r,u,h){return this.ex.Set(i,u),this.ey.Set(r,h),this}SetVV(i,r){return this.ex.Copy(i),this.ey.Copy(r),this}SetAngle(i){const r=Math.cos(i),u=Math.sin(i);return this.ex.Set(r,u),this.ey.Set(-u,r),this}Copy(i){return this.ex.Copy(i.ex),this.ey.Copy(i.ey),this}SetIdentity(){return this.ex.Set(1,0),this.ey.Set(0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this}GetAngle(){return Math.atan2(this.ex.y,this.ex.x)}GetInverse(i){const r=this.ex.x,u=this.ey.x,h=this.ex.y,m=this.ey.y;let _=r*m-u*h;return _!==0&&(_=1/_),i.ex.x=_*m,i.ey.x=-_*u,i.ex.y=-_*h,i.ey.y=_*r,i}Solve(i,r,u){const h=this.ex.x,m=this.ey.x,_=this.ex.y,v=this.ey.y;let w=h*v-m*_;return w!==0&&(w=1/w),u.x=w*(v*i-m*r),u.y=w*(h*r-_*i),u}SelfAbs(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this}SelfInv(){return this.GetInverse(this),this}SelfAddM(i){return this.ex.SelfAdd(i.ex),this.ey.SelfAdd(i.ey),this}SelfSubM(i){return this.ex.SelfSub(i.ex),this.ey.SelfSub(i.ey),this}static AbsM(i,r){const u=i.ex,h=i.ey;return r.ex.x=rt(u.x),r.ex.y=rt(u.y),r.ey.x=rt(h.x),r.ey.y=rt(h.y),r}static MulMV(i,r,u){const h=i.ex,m=i.ey,_=r.x,v=r.y;return u.x=h.x*_+m.x*v,u.y=h.y*_+m.y*v,u}static MulTMV(i,r,u){const h=i.ex,m=i.ey,_=r.x,v=r.y;return u.x=h.x*_+h.y*v,u.y=m.x*_+m.y*v,u}static AddMM(i,r,u){const h=i.ex,m=i.ey,_=r.ex,v=r.ey;return u.ex.x=h.x+_.x,u.ex.y=h.y+_.y,u.ey.x=m.x+v.x,u.ey.y=m.y+v.y,u}static MulMM(i,r,u){const h=i.ex.x,m=i.ex.y,_=i.ey.x,v=i.ey.y,w=r.ex.x,V=r.ex.y,b=r.ey.x,A=r.ey.y;return u.ex.x=h*w+_*V,u.ex.y=m*w+v*V,u.ey.x=h*b+_*A,u.ey.y=m*b+v*A,u}static MulTMM(i,r,u){const h=i.ex.x,m=i.ex.y,_=i.ey.x,v=i.ey.y,w=r.ex.x,V=r.ex.y,b=r.ey.x,A=r.ey.y;return u.ex.x=h*w+m*V,u.ex.y=_*w+v*V,u.ey.x=h*b+m*A,u.ey.y=_*b+v*A,u}}qt.IDENTITY=new qt;class de{constructor(){this.ex=new $t(1,0,0),this.ey=new $t(0,1,0),this.ez=new $t(0,0,1)}Clone(){return new de().Copy(this)}SetVVV(i,r,u){return this.ex.Copy(i),this.ey.Copy(r),this.ez.Copy(u),this}Copy(i){return this.ex.Copy(i.ex),this.ey.Copy(i.ey),this.ez.Copy(i.ez),this}SetIdentity(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this}SelfAddM(i){return this.ex.SelfAdd(i.ex),this.ey.SelfAdd(i.ey),this.ez.SelfAdd(i.ez),this}Solve33(i,r,u,h){const m=this.ex.x,_=this.ex.y,v=this.ex.z,w=this.ey.x,V=this.ey.y,b=this.ey.z,A=this.ez.x,P=this.ez.y,D=this.ez.z;let R=m*(V*D-b*P)+_*(b*A-w*D)+v*(w*P-V*A);return R!==0&&(R=1/R),h.x=R*(i*(V*D-b*P)+r*(b*A-w*D)+u*(w*P-V*A)),h.y=R*(m*(r*D-u*P)+_*(u*A-i*D)+v*(i*P-r*A)),h.z=R*(m*(V*u-b*r)+_*(b*i-w*u)+v*(w*r-V*i)),h}Solve22(i,r,u){const h=this.ex.x,m=this.ey.x,_=this.ex.y,v=this.ey.y;let w=h*v-m*_;return w!==0&&(w=1/w),u.x=w*(v*i-m*r),u.y=w*(h*r-_*i),u}GetInverse22(i){const r=this.ex.x,u=this.ey.x,h=this.ex.y,m=this.ey.y;let _=r*m-u*h;_!==0&&(_=1/_),i.ex.x=_*m,i.ey.x=-_*u,i.ex.z=0,i.ex.y=-_*h,i.ey.y=_*r,i.ey.z=0,i.ez.x=0,i.ez.y=0,i.ez.z=0}GetSymInverse33(i){let r=$t.DotV3V3(this.ex,$t.CrossV3V3(this.ey,this.ez,$t.s_t0));r!==0&&(r=1/r);const u=this.ex.x,h=this.ey.x,m=this.ez.x,_=this.ey.y,v=this.ez.y,w=this.ez.z;i.ex.x=r*(_*w-v*v),i.ex.y=r*(m*v-h*w),i.ex.z=r*(h*v-m*_),i.ey.x=i.ex.y,i.ey.y=r*(u*w-m*m),i.ey.z=r*(m*h-u*v),i.ez.x=i.ex.z,i.ez.y=i.ey.z,i.ez.z=r*(u*_-h*h)}static MulM33V3(i,r,u){const h=r.x,m=r.y,_=r.z;return u.x=i.ex.x*h+i.ey.x*m+i.ez.x*_,u.y=i.ex.y*h+i.ey.y*m+i.ez.y*_,u.z=i.ex.z*h+i.ey.z*m+i.ez.z*_,u}static MulM33XYZ(i,r,u,h,m){return m.x=i.ex.x*r+i.ey.x*u+i.ez.x*h,m.y=i.ex.y*r+i.ey.y*u+i.ez.y*h,m.z=i.ex.z*r+i.ey.z*u+i.ez.z*h,m}static MulM33V2(i,r,u){const h=r.x,m=r.y;return u.x=i.ex.x*h+i.ey.x*m,u.y=i.ex.y*h+i.ey.y*m,u}static MulM33XY(i,r,u,h){return h.x=i.ex.x*r+i.ey.x*u,h.y=i.ex.y*r+i.ey.y*u,h}}de.IDENTITY=new de;class tt{constructor(i=0){this.s=0,this.c=1,i&&(this.s=Math.sin(i),this.c=Math.cos(i))}Clone(){return new tt().Copy(this)}Copy(i){return this.s=i.s,this.c=i.c,this}SetAngle(i){return this.s=Math.sin(i),this.c=Math.cos(i),this}SetIdentity(){return this.s=0,this.c=1,this}GetAngle(){return Math.atan2(this.s,this.c)}GetXAxis(i){return i.x=this.c,i.y=this.s,i}GetYAxis(i){return i.x=-this.s,i.y=this.c,i}static MulRR(i,r,u){const h=i.c,m=i.s,_=r.c,v=r.s;return u.s=m*_+h*v,u.c=h*_-m*v,u}static MulTRR(i,r,u){const h=i.c,m=i.s,_=r.c,v=r.s;return u.s=h*v-m*_,u.c=h*_+m*v,u}static MulRV(i,r,u){const h=i.c,m=i.s,_=r.x,v=r.y;return u.x=h*_-m*v,u.y=m*_+h*v,u}static MulTRV(i,r,u){const h=i.c,m=i.s,_=r.x,v=r.y;return u.x=h*_+m*v,u.y=-m*_+h*v,u}}tt.IDENTITY=new tt;class ct{constructor(){this.p=new l,this.q=new tt}Clone(){return new ct().Copy(this)}Copy(i){return this.p.Copy(i.p),this.q.Copy(i.q),this}SetIdentity(){return this.p.SetZero(),this.q.SetIdentity(),this}SetPositionRotation(i,r){return this.p.Copy(i),this.q.Copy(r),this}SetPositionAngle(i,r){return this.p.Copy(i),this.q.SetAngle(r),this}SetPosition(i){return this.p.Copy(i),this}SetPositionXY(i,r){return this.p.Set(i,r),this}SetRotation(i){return this.q.Copy(i),this}SetRotationAngle(i){return this.q.SetAngle(i),this}GetPosition(){return this.p}GetRotation(){return this.q}GetRotationAngle(){return this.q.GetAngle()}GetAngle(){return this.q.GetAngle()}static MulXV(i,r,u){const h=i.q.c,m=i.q.s,_=r.x,v=r.y;return u.x=h*_-m*v+i.p.x,u.y=m*_+h*v+i.p.y,u}static MulTXV(i,r,u){const h=i.q.c,m=i.q.s,_=r.x-i.p.x,v=r.y-i.p.y;return u.x=h*_+m*v,u.y=-m*_+h*v,u}static MulXX(i,r,u){return tt.MulRR(i.q,r.q,u.q),l.AddVV(tt.MulRV(i.q,r.p,u.p),i.p,u.p),u}static MulTXX(i,r,u){return tt.MulTRR(i.q,r.q,u.q),tt.MulTRV(i.q,l.SubVV(r.p,i.p,u.p),u.p),u}}ct.IDENTITY=new ct;class Pe{constructor(){this.localCenter=new l,this.c0=new l,this.c=new l,this.a0=0,this.a=0,this.alpha0=0}Clone(){return new Pe().Copy(this)}Copy(i){return this.localCenter.Copy(i.localCenter),this.c0.Copy(i.c0),this.c.Copy(i.c),this.a0=i.a0,this.a=i.a,this.alpha0=i.alpha0,this}GetTransform(i,r){const u=1-r;i.p.x=u*this.c0.x+r*this.c.x,i.p.y=u*this.c0.y+r*this.c.y;const h=u*this.a0+r*this.a;return i.q.SetAngle(h),i.p.SelfSub(tt.MulRV(i.q,this.localCenter,l.s_t0)),i}Advance(i){const r=(i-this.alpha0)/(1-this.alpha0),u=1-r;this.c0.x=u*this.c0.x+r*this.c.x,this.c0.y=u*this.c0.y+r*this.c.y,this.a0=u*this.a0+r*this.a,this.alpha0=i}Normalize(){const i=ft*Math.floor(this.a0/ft);this.a0-=i,this.a-=i}}class Kt{constructor(i=.5,r=.5,u=.5,h=1){this.r=i,this.g=r,this.b=u,this.a=h}Clone(){return new Kt().Copy(this)}Copy(i){return this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this}IsEqual(i){return this.r===i.r&&this.g===i.g&&this.b===i.b&&this.a===i.a}IsZero(){return this.r===0&&this.g===0&&this.b===0&&this.a===0}Set(i,r,u,h=this.a){this.SetRGBA(i,r,u,h)}SetByteRGB(i,r,u){return this.r=i/255,this.g=r/255,this.b=u/255,this}SetByteRGBA(i,r,u,h){return this.r=i/255,this.g=r/255,this.b=u/255,this.a=h/255,this}SetRGB(i,r,u){return this.r=i,this.g=r,this.b=u,this}SetRGBA(i,r,u,h){return this.r=i,this.g=r,this.b=u,this.a=h,this}SelfAdd(i){return this.r+=i.r,this.g+=i.g,this.b+=i.b,this.a+=i.a,this}Add(i,r){return r.r=this.r+i.r,r.g=this.g+i.g,r.b=this.b+i.b,r.a=this.a+i.a,r}SelfSub(i){return this.r-=i.r,this.g-=i.g,this.b-=i.b,this.a-=i.a,this}Sub(i,r){return r.r=this.r-i.r,r.g=this.g-i.g,r.b=this.b-i.b,r.a=this.a-i.a,r}SelfMul(i){return this.r*=i,this.g*=i,this.b*=i,this.a*=i,this}Mul(i,r){return r.r=this.r*i,r.g=this.g*i,r.b=this.b*i,r.a=this.a*i,r}Mix(i,r){Kt.MixColors(this,i,r)}static MixColors(i,r,u){const h=u*(r.r-i.r),m=u*(r.g-i.g),_=u*(r.b-i.b),v=u*(r.a-i.a);i.r+=h,i.g+=m,i.b+=_,i.a+=v,r.r-=h,r.g-=m,r.b-=_,r.a-=v}MakeStyleString(i=this.a){return Kt.MakeStyleString(this.r,this.g,this.b,i)}static MakeStyleString(i,r,u,h=1){return i*=255,r*=255,u*=255,h<1?`rgba(${i},${r},${u},${h})`:`rgb(${i},${r},${u})`}}var Ot;Kt.ZERO=new Kt(0,0,0,0),Kt.RED=new Kt(1,0,0),Kt.GREEN=new Kt(0,1,0),Kt.BLUE=new Kt(0,0,1),(Ot=s.b2DrawFlags||(s.b2DrawFlags={}))[Ot.e_none=0]="e_none",Ot[Ot.e_shapeBit=1]="e_shapeBit",Ot[Ot.e_jointBit=2]="e_jointBit",Ot[Ot.e_aabbBit=4]="e_aabbBit",Ot[Ot.e_pairBit=8]="e_pairBit",Ot[Ot.e_centerOfMassBit=16]="e_centerOfMassBit",Ot[Ot.e_particleBit=32]="e_particleBit",Ot[Ot.e_controllerBit=64]="e_controllerBit",Ot[Ot.e_all=63]="e_all";class Yt{constructor(){this.m_start=Date.now()}Reset(){return this.m_start=Date.now(),this}GetMilliseconds(){return Date.now()-this.m_start}}class ci{constructor(i){this.m_stack=[],this.m_count=0,this.m_stack=Bt(i,r=>null),this.m_count=0}Reset(){return this.m_count=0,this}Push(i){this.m_stack[this.m_count]=i,this.m_count++}Pop(){this.m_count--;const i=this.m_stack[this.m_count];if(this.m_stack[this.m_count]=null,i===null)throw new Error;return i}GetCount(){return this.m_count}}class fe{constructor(){this.m_buffer=l.MakeArray(2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}Copy(i){return i.m_vertices===i.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(i.m_buffer[0]),this.m_buffer[1].Copy(i.m_buffer[1])):this.m_vertices=i.m_vertices,this.m_count=i.m_count,this.m_radius=i.m_radius,this}Reset(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this}SetShape(i,r){i.SetupDistanceProxy(this,r)}SetVerticesRadius(i,r,u){this.m_vertices=i,this.m_count=r,this.m_radius=u}GetSupport(i){let r=0,u=l.DotVV(this.m_vertices[0],i);for(let h=1;h<this.m_count;++h){const m=l.DotVV(this.m_vertices[h],i);m>u&&(r=h,u=m)}return r}GetSupportVertex(i){let r=0,u=l.DotVV(this.m_vertices[0],i);for(let h=1;h<this.m_count;++h){const m=l.DotVV(this.m_vertices[h],i);m>u&&(r=h,u=m)}return this.m_vertices[r]}GetVertexCount(){return this.m_count}GetVertex(i){return this.m_vertices[i]}}class Le{constructor(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}Reset(){return this.metric=0,this.count=0,this}}class ti{constructor(){this.proxyA=new fe,this.proxyB=new fe,this.transformA=new ct,this.transformB=new ct,this.useRadii=!1}Reset(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this}}class gn{constructor(){this.pointA=new l,this.pointB=new l,this.distance=0,this.iterations=0}Reset(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this}}s.b2_gjkCalls=0,s.b2_gjkIters=0,s.b2_gjkMaxIters=0;class vn{constructor(){this.wA=new l,this.wB=new l,this.w=new l,this.a=0,this.indexA=0,this.indexB=0}Copy(i){return this.wA.Copy(i.wA),this.wB.Copy(i.wB),this.w.Copy(i.w),this.a=i.a,this.indexA=i.indexA,this.indexB=i.indexB,this}}class Be{constructor(){this.m_v1=new vn,this.m_v2=new vn,this.m_v3=new vn,this.m_vertices=[],this.m_count=0,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}ReadCache(i,r,u,h,m){this.m_count=i.count;const _=this.m_vertices;for(let v=0;v<this.m_count;++v){const w=_[v];w.indexA=i.indexA[v],w.indexB=i.indexB[v];const V=r.GetVertex(w.indexA),b=h.GetVertex(w.indexB);ct.MulXV(u,V,w.wA),ct.MulXV(m,b,w.wB),l.SubVV(w.wB,w.wA,w.w),w.a=0}if(this.m_count>1){const v=i.metric,w=this.GetMetric();(w<.5*v||2*v<w||w<c)&&(this.m_count=0)}if(this.m_count===0){const v=_[0];v.indexA=0,v.indexB=0;const w=r.GetVertex(0),V=h.GetVertex(0);ct.MulXV(u,w,v.wA),ct.MulXV(m,V,v.wB),l.SubVV(v.wB,v.wA,v.w),v.a=1,this.m_count=1}}WriteCache(i){i.metric=this.GetMetric(),i.count=this.m_count;const r=this.m_vertices;for(let u=0;u<this.m_count;++u)i.indexA[u]=r[u].indexA,i.indexB[u]=r[u].indexB}GetSearchDirection(i){switch(this.m_count){case 1:return l.NegV(this.m_v1.w,i);case 2:{const r=l.SubVV(this.m_v2.w,this.m_v1.w,i);return l.CrossVV(r,l.NegV(this.m_v1.w,l.s_t0))>0?l.CrossOneV(r,i):l.CrossVOne(r,i)}default:return i.SetZero()}}GetClosestPoint(i){switch(this.m_count){case 0:return i.SetZero();case 1:return i.Copy(this.m_v1.w);case 2:return i.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:default:return i.SetZero()}}GetWitnessPoints(i,r){switch(this.m_count){case 0:break;case 1:i.Copy(this.m_v1.wA),r.Copy(this.m_v1.wB);break;case 2:i.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,i.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,r.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,r.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:r.x=i.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,r.y=i.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}}GetMetric(){switch(this.m_count){case 0:case 1:return 0;case 2:return l.DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return l.CrossVV(l.SubVV(this.m_v2.w,this.m_v1.w,l.s_t0),l.SubVV(this.m_v3.w,this.m_v1.w,l.s_t1));default:return 0}}Solve2(){const i=this.m_v1.w,r=this.m_v2.w,u=l.SubVV(r,i,Be.s_e12),h=-l.DotVV(i,u);if(h<=0)return this.m_v1.a=1,void(this.m_count=1);const m=l.DotVV(r,u);if(m<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);const _=1/(m+h);this.m_v1.a=m*_,this.m_v2.a=h*_,this.m_count=2}Solve3(){const i=this.m_v1.w,r=this.m_v2.w,u=this.m_v3.w,h=l.SubVV(r,i,Be.s_e12),m=l.DotVV(i,h),_=l.DotVV(r,h),v=_,w=-m,V=l.SubVV(u,i,Be.s_e13),b=l.DotVV(i,V),A=l.DotVV(u,V),P=A,D=-b,R=l.SubVV(u,r,Be.s_e23),z=l.DotVV(r,R),U=l.DotVV(u,R),J=U,W=-z,K=l.CrossVV(h,V),it=K*l.CrossVV(r,u),at=K*l.CrossVV(u,i),st=K*l.CrossVV(i,r);if(w<=0&&D<=0)return this.m_v1.a=1,void(this.m_count=1);if(v>0&&w>0&&st<=0){const St=1/(v+w);return this.m_v1.a=v*St,this.m_v2.a=w*St,void(this.m_count=2)}if(P>0&&D>0&&at<=0){const St=1/(P+D);return this.m_v1.a=P*St,this.m_v3.a=D*St,this.m_count=2,void this.m_v2.Copy(this.m_v3)}if(v<=0&&W<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(P<=0&&J<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(J>0&&W>0&&it<=0){const St=1/(J+W);return this.m_v2.a=J*St,this.m_v3.a=W*St,this.m_count=2,void this.m_v1.Copy(this.m_v3)}const pt=1/(it+at+st);this.m_v1.a=it*pt,this.m_v2.a=at*pt,this.m_v3.a=st*pt,this.m_count=3}}Be.s_e12=new l,Be.s_e13=new l,Be.s_e23=new l;const nr=new Be,Wn=[0,0,0],ln=[0,0,0],pa=new l,_a=new l,Hr=new l,ya=new l,ga=new l;function un(j,i,r){++s.b2_gjkCalls;const u=r.proxyA,h=r.proxyB,m=r.transformA,_=r.transformB,v=nr;v.ReadCache(i,u,m,h,_);const w=v.m_vertices,V=Wn,b=ln;let A=0,P=0;for(;P<20;){A=v.m_count;for(let U=0;U<A;++U)V[U]=w[U].indexA,b[U]=w[U].indexB;switch(v.m_count){case 1:break;case 2:v.Solve2();break;case 3:v.Solve3()}if(v.m_count===3)break;const D=v.GetSearchDirection(_a);if(D.LengthSquared()<d)break;const R=w[v.m_count];R.indexA=u.GetSupport(tt.MulTRV(m.q,l.NegV(D,l.s_t0),ya)),ct.MulXV(m,u.GetVertex(R.indexA),R.wA),R.indexB=h.GetSupport(tt.MulTRV(_.q,D,ga)),ct.MulXV(_,h.GetVertex(R.indexB),R.wB),l.SubVV(R.wB,R.wA,R.w),++P,++s.b2_gjkIters;let z=!1;for(let U=0;U<A;++U)if(R.indexA===V[U]&&R.indexB===b[U]){z=!0;break}if(z)break;++v.m_count}if(s.b2_gjkMaxIters=ut(s.b2_gjkMaxIters,P),v.GetWitnessPoints(j.pointA,j.pointB),j.distance=l.DistanceVV(j.pointA,j.pointB),j.iterations=P,v.WriteCache(i),r.useRadii){const D=u.m_radius,R=h.m_radius;if(j.distance>D+R&&j.distance>c){j.distance-=D+R;const z=l.SubVV(j.pointB,j.pointA,Hr);z.Normalize(),j.pointA.SelfMulAdd(D,z),j.pointB.SelfMulSub(R,z)}else{const z=l.MidVV(j.pointA,j.pointB,pa);j.pointA.Copy(z),j.pointB.Copy(z),j.distance=0}}}const Jr=new l,Xr=new Be,Qi=new l,ld=new l,f0=new l,p0=new l,_0=new l,y0=new l;var va,qn,Hn;(va=s.b2ContactFeatureType||(s.b2ContactFeatureType={}))[va.e_vertex=0]="e_vertex",va[va.e_face=1]="e_face";class ud{constructor(){this._key=0,this._key_invalid=!1,this._indexA=0,this._indexB=0,this._typeA=0,this._typeB=0}get key(){return this._key_invalid&&(this._key_invalid=!1,this._key=this._indexA|this._indexB<<8|this._typeA<<16|this._typeB<<24),this._key}set key(i){this._key=i,this._key_invalid=!1,this._indexA=255&this._key,this._indexB=this._key>>8&255,this._typeA=this._key>>16&255,this._typeB=this._key>>24&255}get indexA(){return this._indexA}set indexA(i){this._indexA=i,this._key_invalid=!0}get indexB(){return this._indexB}set indexB(i){this._indexB=i,this._key_invalid=!0}get typeA(){return this._typeA}set typeA(i){this._typeA=i,this._key_invalid=!0}get typeB(){return this._typeB}set typeB(i){this._typeB=i,this._key_invalid=!0}}class sr{constructor(){this.cf=new ud}Copy(i){return this.key=i.key,this}Clone(){return new sr().Copy(this)}get key(){return this.cf.key}set key(i){this.cf.key=i}}class xa{constructor(){this.localPoint=new l,this.normalImpulse=0,this.tangentImpulse=0,this.id=new sr}static MakeArray(i){return Bt(i,r=>new xa)}Reset(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0}Copy(i){return this.localPoint.Copy(i.localPoint),this.normalImpulse=i.normalImpulse,this.tangentImpulse=i.tangentImpulse,this.id.Copy(i.id),this}}(qn=s.b2ManifoldType||(s.b2ManifoldType={}))[qn.e_unknown=-1]="e_unknown",qn[qn.e_circles=0]="e_circles",qn[qn.e_faceA=1]="e_faceA",qn[qn.e_faceB=2]="e_faceB";class $r{constructor(){this.points=xa.MakeArray(y),this.localNormal=new l,this.localPoint=new l,this.type=s.b2ManifoldType.e_unknown,this.pointCount=0}Reset(){for(let i=0;i<y;++i)this.points[i].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=s.b2ManifoldType.e_unknown,this.pointCount=0}Copy(i){this.pointCount=i.pointCount;for(let r=0;r<y;++r)this.points[r].Copy(i.points[r]);return this.localNormal.Copy(i.localNormal),this.localPoint.Copy(i.localPoint),this.type=i.type,this}Clone(){return new $r().Copy(this)}}class Me{constructor(){this.normal=new l,this.points=l.MakeArray(y),this.separations=Ut(y)}Initialize(i,r,u,h,m){if(i.pointCount!==0)switch(i.type){case s.b2ManifoldType.e_circles:{this.normal.Set(1,0);const _=ct.MulXV(r,i.localPoint,Me.Initialize_s_pointA),v=ct.MulXV(h,i.points[0].localPoint,Me.Initialize_s_pointB);l.DistanceSquaredVV(_,v)>d&&l.SubVV(v,_,this.normal).SelfNormalize();const w=l.AddVMulSV(_,u,this.normal,Me.Initialize_s_cA),V=l.SubVMulSV(v,m,this.normal,Me.Initialize_s_cB);l.MidVV(w,V,this.points[0]),this.separations[0]=l.DotVV(l.SubVV(V,w,l.s_t0),this.normal);break}case s.b2ManifoldType.e_faceA:{tt.MulRV(r.q,i.localNormal,this.normal);const _=ct.MulXV(r,i.localPoint,Me.Initialize_s_planePoint);for(let v=0;v<i.pointCount;++v){const w=ct.MulXV(h,i.points[v].localPoint,Me.Initialize_s_clipPoint),V=u-l.DotVV(l.SubVV(w,_,l.s_t0),this.normal),b=l.AddVMulSV(w,V,this.normal,Me.Initialize_s_cA),A=l.SubVMulSV(w,m,this.normal,Me.Initialize_s_cB);l.MidVV(b,A,this.points[v]),this.separations[v]=l.DotVV(l.SubVV(A,b,l.s_t0),this.normal)}break}case s.b2ManifoldType.e_faceB:{tt.MulRV(h.q,i.localNormal,this.normal);const _=ct.MulXV(h,i.localPoint,Me.Initialize_s_planePoint);for(let v=0;v<i.pointCount;++v){const w=ct.MulXV(r,i.points[v].localPoint,Me.Initialize_s_clipPoint),V=m-l.DotVV(l.SubVV(w,_,l.s_t0),this.normal),b=l.AddVMulSV(w,V,this.normal,Me.Initialize_s_cB),A=l.SubVMulSV(w,u,this.normal,Me.Initialize_s_cA);l.MidVV(A,b,this.points[v]),this.separations[v]=l.DotVV(l.SubVV(A,b,l.s_t0),this.normal)}this.normal.SelfNeg();break}}}}Me.Initialize_s_pointA=new l,Me.Initialize_s_pointB=new l,Me.Initialize_s_cA=new l,Me.Initialize_s_cB=new l,Me.Initialize_s_planePoint=new l,Me.Initialize_s_clipPoint=new l,(Hn=s.b2PointState||(s.b2PointState={}))[Hn.b2_nullState=0]="b2_nullState",Hn[Hn.b2_addState=1]="b2_addState",Hn[Hn.b2_persistState=2]="b2_persistState",Hn[Hn.b2_removeState=3]="b2_removeState";class xn{constructor(){this.v=new l,this.id=new sr}static MakeArray(i){return Bt(i,r=>new xn)}Copy(i){return this.v.Copy(i.v),this.id.Copy(i.id),this}}class Sa{constructor(){this.p1=new l,this.p2=new l,this.maxFraction=1}Copy(i){return this.p1.Copy(i.p1),this.p2.Copy(i.p2),this.maxFraction=i.maxFraction,this}}class Bu{constructor(){this.normal=new l,this.fraction=0}Copy(i){return this.normal.Copy(i.normal),this.fraction=i.fraction,this}}class je{constructor(){this.lowerBound=new l,this.upperBound=new l,this.m_cache_center=new l,this.m_cache_extent=new l}Copy(i){return this.lowerBound.Copy(i.lowerBound),this.upperBound.Copy(i.upperBound),this}IsValid(){const i=this.upperBound.x-this.lowerBound.x,r=this.upperBound.y-this.lowerBound.y;let u=i>=0&&r>=0;return u=u&&this.lowerBound.IsValid()&&this.upperBound.IsValid()}GetCenter(){return l.MidVV(this.lowerBound,this.upperBound,this.m_cache_center)}GetExtents(){return l.ExtVV(this.lowerBound,this.upperBound,this.m_cache_extent)}GetPerimeter(){const i=this.upperBound.x-this.lowerBound.x,r=this.upperBound.y-this.lowerBound.y;return 2*(i+r)}Combine1(i){return this.lowerBound.x=dt(this.lowerBound.x,i.lowerBound.x),this.lowerBound.y=dt(this.lowerBound.y,i.lowerBound.y),this.upperBound.x=ut(this.upperBound.x,i.upperBound.x),this.upperBound.y=ut(this.upperBound.y,i.upperBound.y),this}Combine2(i,r){return this.lowerBound.x=dt(i.lowerBound.x,r.lowerBound.x),this.lowerBound.y=dt(i.lowerBound.y,r.lowerBound.y),this.upperBound.x=ut(i.upperBound.x,r.upperBound.x),this.upperBound.y=ut(i.upperBound.y,r.upperBound.y),this}static Combine(i,r,u){return u.Combine2(i,r),u}Contains(i){let r=!0;return r=(r=(r=(r=r&&this.lowerBound.x<=i.lowerBound.x)&&this.lowerBound.y<=i.lowerBound.y)&&i.upperBound.x<=this.upperBound.x)&&i.upperBound.y<=this.upperBound.y}RayCast(i,r){let u=-a,h=a;const m=r.p1.x,_=r.p1.y,v=r.p2.x-r.p1.x,w=r.p2.y-r.p1.y,V=rt(v),b=rt(w),A=i.normal;if(V<c){if(m<this.lowerBound.x||this.upperBound.x<m)return!1}else{const P=1/v;let D=(this.lowerBound.x-m)*P,R=(this.upperBound.x-m)*P,z=-1;if(D>R){const U=D;D=R,R=U,z=1}if(D>u&&(A.x=z,A.y=0,u=D),h=dt(h,R),u>h)return!1}if(b<c){if(_<this.lowerBound.y||this.upperBound.y<_)return!1}else{const P=1/w;let D=(this.lowerBound.y-_)*P,R=(this.upperBound.y-_)*P,z=-1;if(D>R){const U=D;D=R,R=U,z=1}if(D>u&&(A.x=0,A.y=z,u=D),h=dt(h,R),u>h)return!1}return!(u<0||r.maxFraction<u||(i.fraction=u,0))}TestContain(i){return!(i.x<this.lowerBound.x||this.upperBound.x<i.x||i.y<this.lowerBound.y||this.upperBound.y<i.y)}TestOverlap(i){const r=i.lowerBound.x-this.upperBound.x,u=i.lowerBound.y-this.upperBound.y,h=this.lowerBound.x-i.upperBound.x,m=this.lowerBound.y-i.upperBound.y;return!(r>0||u>0||h>0||m>0)}}function Au(j,i){const r=i.lowerBound.x-j.upperBound.x,u=i.lowerBound.y-j.upperBound.y,h=j.lowerBound.x-i.upperBound.x,m=j.lowerBound.y-i.upperBound.y;return!(r>0||u>0||h>0||m>0)}function Zr(j,i,r,u,h){let m=0;const _=i[0],v=i[1],w=l.DotVV(r,_.v)-u,V=l.DotVV(r,v.v)-u;if(w<=0&&j[m++].Copy(_),V<=0&&j[m++].Copy(v),w*V<0){const b=w/(w-V),A=j[m].v;A.x=_.v.x+b*(v.v.x-_.v.x),A.y=_.v.y+b*(v.v.y-_.v.y);const P=j[m].id;P.cf.indexA=h,P.cf.indexB=_.id.cf.indexB,P.cf.typeA=s.b2ContactFeatureType.e_vertex,P.cf.typeB=s.b2ContactFeatureType.e_face,++m}return m}const g0=new ti,v0=new Le,x0=new gn;function Vu(j,i,r,u,h,m){const _=g0.Reset();_.proxyA.SetShape(j,i),_.proxyB.SetShape(r,u),_.transformA.Copy(h),_.transformB.Copy(m),_.useRadii=!0;const v=v0.Reset();v.count=0;const w=x0.Reset();return un(w,v,_),w.distance<10*c}function se(j){if(j===null)throw new Error;return j}class cd{constructor(i=0){this.m_id=0,this.aabb=new je,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.m_id=i}IsLeaf(){return this.child1===null}}class re{constructor(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0,this.m_stack=new ci(256)}Query(i,r){if(this.m_root===null)return;const u=this.m_stack.Reset();for(u.Push(this.m_root);u.GetCount()>0;){const h=u.Pop();if(h.aabb.TestOverlap(i))if(h.IsLeaf()){if(!r(h))return}else u.Push(se(h.child1)),u.Push(se(h.child2))}}QueryPoint(i,r){if(this.m_root===null)return;const u=this.m_stack.Reset();for(u.Push(this.m_root);u.GetCount()>0;){const h=u.Pop();if(h.aabb.TestContain(i))if(h.IsLeaf()){if(!r(h))return}else u.Push(se(h.child1)),u.Push(se(h.child2))}}RayCast(i,r){if(this.m_root===null)return;const u=i.p1,h=i.p2,m=l.SubVV(h,u,re.s_r);m.Normalize();const _=l.CrossOneV(m,re.s_v),v=l.AbsV(_,re.s_abs_v);let w=i.maxFraction;const V=re.s_segmentAABB;let b=u.x+w*(h.x-u.x),A=u.y+w*(h.y-u.y);V.lowerBound.x=dt(u.x,b),V.lowerBound.y=dt(u.y,A),V.upperBound.x=ut(u.x,b),V.upperBound.y=ut(u.y,A);const P=this.m_stack.Reset();for(P.Push(this.m_root);P.GetCount()>0;){const D=P.Pop();if(!Au(D.aabb,V))continue;const R=D.aabb.GetCenter(),z=D.aabb.GetExtents();if(!(rt(l.DotVV(_,l.SubVV(u,R,l.s_t0)))-l.DotVV(v,z)>0))if(D.IsLeaf()){const J=re.s_subInput;J.p1.Copy(i.p1),J.p2.Copy(i.p2),J.maxFraction=w;const W=r(J,D);if(W===0)return;W>0&&(w=W,b=u.x+w*(h.x-u.x),A=u.y+w*(h.y-u.y),V.lowerBound.x=dt(u.x,b),V.lowerBound.y=dt(u.y,A),V.upperBound.x=ut(u.x,b),V.upperBound.y=ut(u.y,A))}else P.Push(se(D.child1)),P.Push(se(D.child2))}}AllocateNode(){if(this.m_freeList){const i=this.m_freeList;return this.m_freeList=i.parent,i.parent=null,i.child1=null,i.child2=null,i.height=0,delete i.userData,i}return new cd(re.s_node_id++)}FreeNode(i){i.parent=this.m_freeList,i.child1=null,i.child2=null,i.height=-1,delete i.userData,this.m_freeList=i}CreateProxy(i,r){const u=this.AllocateNode(),h=S,m=S;return u.aabb.lowerBound.x=i.lowerBound.x-h,u.aabb.lowerBound.y=i.lowerBound.y-m,u.aabb.upperBound.x=i.upperBound.x+h,u.aabb.upperBound.y=i.upperBound.y+m,u.userData=r,u.height=0,this.InsertLeaf(u),u}DestroyProxy(i){this.RemoveLeaf(i),this.FreeNode(i)}MoveProxy(i,r,u){if(i.aabb.Contains(r))return!1;this.RemoveLeaf(i);const h=S+x*(u.x>0?u.x:-u.x),m=S+x*(u.y>0?u.y:-u.y);return i.aabb.lowerBound.x=r.lowerBound.x-h,i.aabb.lowerBound.y=r.lowerBound.y-m,i.aabb.upperBound.x=r.upperBound.x+h,i.aabb.upperBound.y=r.upperBound.y+m,this.InsertLeaf(i),!0}InsertLeaf(i){if(++this.m_insertionCount,this.m_root===null)return this.m_root=i,void(this.m_root.parent=null);const r=i.aabb;let u=this.m_root;for(;!u.IsLeaf();){const w=se(u.child1),V=se(u.child2),b=u.aabb.GetPerimeter(),A=re.s_combinedAABB;A.Combine2(u.aabb,r);const P=A.GetPerimeter(),D=2*P,R=2*(P-b);let z;const U=re.s_aabb;let J,W,K;if(w.IsLeaf()?(U.Combine2(r,w.aabb),z=U.GetPerimeter()+R):(U.Combine2(r,w.aabb),J=w.aabb.GetPerimeter(),W=U.GetPerimeter(),z=W-J+R),V.IsLeaf()?(U.Combine2(r,V.aabb),K=U.GetPerimeter()+R):(U.Combine2(r,V.aabb),J=V.aabb.GetPerimeter(),W=U.GetPerimeter(),K=W-J+R),D<z&&D<K)break;u=z<K?w:V}const h=u,m=h.parent,_=this.AllocateNode();_.parent=m,delete _.userData,_.aabb.Combine2(r,h.aabb),_.height=h.height+1,m?(m.child1===h?m.child1=_:m.child2=_,_.child1=h,_.child2=i,h.parent=_,i.parent=_):(_.child1=h,_.child2=i,h.parent=_,i.parent=_,this.m_root=_);let v=i.parent;for(;v!==null;){const w=se((v=this.Balance(v)).child1),V=se(v.child2);v.height=1+ut(w.height,V.height),v.aabb.Combine2(w.aabb,V.aabb),v=v.parent}}RemoveLeaf(i){if(i===this.m_root)return void(this.m_root=null);const r=se(i.parent),u=r&&r.parent;let h;if(h=r.child1===i?se(r.child2):se(r.child1),u){u.child1===r?u.child1=h:u.child2=h,h.parent=u,this.FreeNode(r);let m=u;for(;m;){const _=se((m=this.Balance(m)).child1),v=se(m.child2);m.aabb.Combine2(_.aabb,v.aabb),m.height=1+ut(_.height,v.height),m=m.parent}}else this.m_root=h,h.parent=null,this.FreeNode(r)}Balance(i){if(i.IsLeaf()||i.height<2)return i;const r=se(i.child1),u=se(i.child2),h=u.height-r.height;if(h>1){const m=se(u.child1),_=se(u.child2);return u.child1=i,u.parent=i.parent,i.parent=u,u.parent!==null?u.parent.child1===i?u.parent.child1=u:u.parent.child2=u:this.m_root=u,m.height>_.height?(u.child2=m,i.child2=_,_.parent=i,i.aabb.Combine2(r.aabb,_.aabb),u.aabb.Combine2(i.aabb,m.aabb),i.height=1+ut(r.height,_.height),u.height=1+ut(i.height,m.height)):(u.child2=_,i.child2=m,m.parent=i,i.aabb.Combine2(r.aabb,m.aabb),u.aabb.Combine2(i.aabb,_.aabb),i.height=1+ut(r.height,m.height),u.height=1+ut(i.height,_.height)),u}if(h<-1){const m=se(r.child1),_=se(r.child2);return r.child1=i,r.parent=i.parent,i.parent=r,r.parent!==null?r.parent.child1===i?r.parent.child1=r:r.parent.child2=r:this.m_root=r,m.height>_.height?(r.child2=m,i.child1=_,_.parent=i,i.aabb.Combine2(u.aabb,_.aabb),r.aabb.Combine2(i.aabb,m.aabb),i.height=1+ut(u.height,_.height),r.height=1+ut(i.height,m.height)):(r.child2=_,i.child1=m,m.parent=i,i.aabb.Combine2(u.aabb,m.aabb),r.aabb.Combine2(i.aabb,_.aabb),i.height=1+ut(u.height,m.height),r.height=1+ut(i.height,_.height)),r}return i}GetHeight(){return this.m_root===null?0:this.m_root.height}static GetAreaNode(i){if(i===null||i.IsLeaf())return 0;let r=i.aabb.GetPerimeter();return r+=re.GetAreaNode(i.child1),r+=re.GetAreaNode(i.child2)}GetAreaRatio(){if(this.m_root===null)return 0;const i=this.m_root,r=i.aabb.GetPerimeter();return re.GetAreaNode(this.m_root)/r}ComputeHeightNode(i){if(!i||i.IsLeaf())return 0;const r=this.ComputeHeightNode(i.child1),u=this.ComputeHeightNode(i.child2);return 1+ut(r,u)}ComputeHeight(){return this.ComputeHeightNode(this.m_root)}ValidateStructure(i){if(i===null)return;this.m_root;const r=i;if(r.IsLeaf())return;const u=se(r.child1),h=se(r.child2);this.ValidateStructure(u),this.ValidateStructure(h)}ValidateMetrics(i){if(i===null)return;const r=i;if(r.IsLeaf())return;const u=se(r.child1),h=se(r.child2);re.s_aabb.Combine2(u.aabb,h.aabb),this.ValidateMetrics(u),this.ValidateMetrics(h)}Validate(){}static GetMaxBalanceNode(i,r){if(i===null||i.height<=1)return r;const u=se(i.child1),h=se(i.child2),m=rt(h.height-u.height);return ut(r,m)}GetMaxBalance(){return re.GetMaxBalanceNode(this.m_root,0)}RebuildBottomUp(){this.Validate()}static ShiftOriginNode(i,r){if(i===null||i.height<=1)return;const u=i.child1,h=i.child2;re.ShiftOriginNode(u,r),re.ShiftOriginNode(h,r),i.aabb.lowerBound.SelfSub(r),i.aabb.upperBound.SelfSub(r)}ShiftOrigin(i){re.ShiftOriginNode(this.m_root,i)}}re.s_r=new l,re.s_v=new l,re.s_abs_v=new l,re.s_segmentAABB=new je,re.s_subInput=new Sa,re.s_combinedAABB=new je,re.s_aabb=new je,re.s_node_id=0;class hd{constructor(i,r){this.proxyA=i,this.proxyB=r}}class md{constructor(){this.m_tree=new re,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[]}CreateProxy(i,r){const u=this.m_tree.CreateProxy(i,r);return++this.m_proxyCount,this.BufferMove(u),u}DestroyProxy(i){this.UnBufferMove(i),--this.m_proxyCount,this.m_tree.DestroyProxy(i)}MoveProxy(i,r,u){this.m_tree.MoveProxy(i,r,u)&&this.BufferMove(i)}TouchProxy(i){this.BufferMove(i)}GetProxyCount(){return this.m_proxyCount}UpdatePairs(i){this.m_pairCount=0;for(let u=0;u<this.m_moveCount;++u){const h=this.m_moveBuffer[u];if(h===null)continue;const m=h.aabb;this.m_tree.Query(m,_=>{if(_.m_id===h.m_id)return!0;let v,w;if(_.m_id<h.m_id?(v=_,w=h):(v=h,w=_),this.m_pairCount===this.m_pairBuffer.length)this.m_pairBuffer[this.m_pairCount]=new hd(v,w);else{const V=this.m_pairBuffer[this.m_pairCount];V.proxyA=v,V.proxyB=w}return++this.m_pairCount,!0})}this.m_moveCount=0,this.m_pairBuffer.length=this.m_pairCount,this.m_pairBuffer.sort(dd);let r=0;for(;r<this.m_pairCount;){const u=this.m_pairBuffer[r],h=u.proxyA.userData,m=u.proxyB.userData;for(i(h,m),++r;r<this.m_pairCount;){const _=this.m_pairBuffer[r];if(_.proxyA.m_id!==u.proxyA.m_id||_.proxyB.m_id!==u.proxyB.m_id)break;++r}}}Query(i,r){this.m_tree.Query(i,r)}QueryPoint(i,r){this.m_tree.QueryPoint(i,r)}RayCast(i,r){this.m_tree.RayCast(i,r)}GetTreeHeight(){return this.m_tree.GetHeight()}GetTreeBalance(){return this.m_tree.GetMaxBalance()}GetTreeQuality(){return this.m_tree.GetAreaRatio()}ShiftOrigin(i){this.m_tree.ShiftOrigin(i)}BufferMove(i){this.m_moveBuffer[this.m_moveCount]=i,++this.m_moveCount}UnBufferMove(i){const r=this.m_moveBuffer.indexOf(i);this.m_moveBuffer[r]=null}}function dd(j,i){return j.proxyA.m_id===i.proxyA.m_id?j.proxyB.m_id-i.proxyB.m_id:j.proxyA.m_id-i.proxyA.m_id}s.b2_toiTime=0,s.b2_toiMaxTime=0,s.b2_toiCalls=0,s.b2_toiIters=0,s.b2_toiMaxIters=0,s.b2_toiRootIters=0,s.b2_toiMaxRootIters=0;const wa=new ct,Ca=new ct,Sn=new l,wn=new l,rr=new l,fd=new l,pd=new l;class bu{constructor(){this.proxyA=new fe,this.proxyB=new fe,this.sweepA=new Pe,this.sweepB=new Pe,this.tMax=0}}var cn,Jn;(cn=s.b2TOIOutputState||(s.b2TOIOutputState={}))[cn.e_unknown=0]="e_unknown",cn[cn.e_failed=1]="e_failed",cn[cn.e_overlapped=2]="e_overlapped",cn[cn.e_touching=3]="e_touching",cn[cn.e_separated=4]="e_separated";class Pu{constructor(){this.state=s.b2TOIOutputState.e_unknown,this.t=0}}(Jn=s.b2SeparationFunctionType||(s.b2SeparationFunctionType={}))[Jn.e_unknown=-1]="e_unknown",Jn[Jn.e_points=0]="e_points",Jn[Jn.e_faceA=1]="e_faceA",Jn[Jn.e_faceB=2]="e_faceB";class _d{constructor(){this.m_sweepA=new Pe,this.m_sweepB=new Pe,this.m_type=s.b2SeparationFunctionType.e_unknown,this.m_localPoint=new l,this.m_axis=new l}Initialize(i,r,u,h,m,_){this.m_proxyA=r,this.m_proxyB=h;const v=i.count;this.m_sweepA.Copy(u),this.m_sweepB.Copy(m);const w=wa,V=Ca;if(this.m_sweepA.GetTransform(w,_),this.m_sweepB.GetTransform(V,_),v===1){this.m_type=s.b2SeparationFunctionType.e_points;const b=this.m_proxyA.GetVertex(i.indexA[0]),A=this.m_proxyB.GetVertex(i.indexB[0]),P=ct.MulXV(w,b,Sn),D=ct.MulXV(V,A,wn);l.SubVV(D,P,this.m_axis);const R=this.m_axis.Normalize();return this.m_localPoint.SetZero(),R}if(i.indexA[0]===i.indexA[1]){this.m_type=s.b2SeparationFunctionType.e_faceB;const b=this.m_proxyB.GetVertex(i.indexB[0]),A=this.m_proxyB.GetVertex(i.indexB[1]);l.CrossVOne(l.SubVV(A,b,l.s_t0),this.m_axis).SelfNormalize();const P=tt.MulRV(V.q,this.m_axis,rr);l.MidVV(b,A,this.m_localPoint);const D=ct.MulXV(V,this.m_localPoint,wn),R=this.m_proxyA.GetVertex(i.indexA[0]),z=ct.MulXV(w,R,Sn);let U=l.DotVV(l.SubVV(z,D,l.s_t0),P);return U<0&&(this.m_axis.SelfNeg(),U=-U),U}{this.m_type=s.b2SeparationFunctionType.e_faceA;const b=this.m_proxyA.GetVertex(i.indexA[0]),A=this.m_proxyA.GetVertex(i.indexA[1]);l.CrossVOne(l.SubVV(A,b,l.s_t0),this.m_axis).SelfNormalize();const P=tt.MulRV(w.q,this.m_axis,rr);l.MidVV(b,A,this.m_localPoint);const D=ct.MulXV(w,this.m_localPoint,Sn),R=this.m_proxyB.GetVertex(i.indexB[0]),z=ct.MulXV(V,R,wn);let U=l.DotVV(l.SubVV(z,D,l.s_t0),P);return U<0&&(this.m_axis.SelfNeg(),U=-U),U}}FindMinSeparation(i,r,u){const h=wa,m=Ca;switch(this.m_sweepA.GetTransform(h,u),this.m_sweepB.GetTransform(m,u),this.m_type){case s.b2SeparationFunctionType.e_points:{const _=tt.MulTRV(h.q,this.m_axis,fd),v=tt.MulTRV(m.q,l.NegV(this.m_axis,l.s_t0),pd);i[0]=this.m_proxyA.GetSupport(_),r[0]=this.m_proxyB.GetSupport(v);const w=this.m_proxyA.GetVertex(i[0]),V=this.m_proxyB.GetVertex(r[0]),b=ct.MulXV(h,w,Sn),A=ct.MulXV(m,V,wn);return l.DotVV(l.SubVV(A,b,l.s_t0),this.m_axis)}case s.b2SeparationFunctionType.e_faceA:{const _=tt.MulRV(h.q,this.m_axis,rr),v=ct.MulXV(h,this.m_localPoint,Sn),w=tt.MulTRV(m.q,l.NegV(_,l.s_t0),pd);i[0]=-1,r[0]=this.m_proxyB.GetSupport(w);const V=this.m_proxyB.GetVertex(r[0]),b=ct.MulXV(m,V,wn);return l.DotVV(l.SubVV(b,v,l.s_t0),_)}case s.b2SeparationFunctionType.e_faceB:{const _=tt.MulRV(m.q,this.m_axis,rr),v=ct.MulXV(m,this.m_localPoint,wn),w=tt.MulTRV(h.q,l.NegV(_,l.s_t0),fd);r[0]=-1,i[0]=this.m_proxyA.GetSupport(w);const V=this.m_proxyA.GetVertex(i[0]),b=ct.MulXV(h,V,Sn);return l.DotVV(l.SubVV(b,v,l.s_t0),_)}default:return i[0]=-1,r[0]=-1,0}}Evaluate(i,r,u){const h=wa,m=Ca;switch(this.m_sweepA.GetTransform(h,u),this.m_sweepB.GetTransform(m,u),this.m_type){case s.b2SeparationFunctionType.e_points:{const _=this.m_proxyA.GetVertex(i),v=this.m_proxyB.GetVertex(r),w=ct.MulXV(h,_,Sn),V=ct.MulXV(m,v,wn);return l.DotVV(l.SubVV(V,w,l.s_t0),this.m_axis)}case s.b2SeparationFunctionType.e_faceA:{const _=tt.MulRV(h.q,this.m_axis,rr),v=ct.MulXV(h,this.m_localPoint,Sn),w=this.m_proxyB.GetVertex(r),V=ct.MulXV(m,w,wn);return l.DotVV(l.SubVV(V,v,l.s_t0),_)}case s.b2SeparationFunctionType.e_faceB:{const _=tt.MulRV(m.q,this.m_axis,rr),v=ct.MulXV(m,this.m_localPoint,wn),w=this.m_proxyA.GetVertex(i),V=ct.MulXV(h,w,Sn);return l.DotVV(l.SubVV(V,v,l.s_t0),_)}default:return 0}}}const S0=new Yt,w0=new Le,C0=new ti,B0=new gn,A0=new _d,V0=[0],b0=[0],P0=new Pe,M0=new Pe;function Mu(j,i){const r=S0.Reset();++s.b2_toiCalls,j.state=s.b2TOIOutputState.e_unknown,j.t=i.tMax;const u=i.proxyA,h=i.proxyB,m=ut(g,u.m_count,h.m_count),_=P0.Copy(i.sweepA),v=M0.Copy(i.sweepB);_.Normalize(),v.Normalize();const w=i.tMax,V=u.m_radius+h.m_radius,b=ut(p,V-3*p),A=.25*p;let P=0,D=0;const R=w0;R.count=0;const z=C0;for(z.proxyA.Copy(i.proxyA),z.proxyB.Copy(i.proxyB),z.useRadii=!1;;){const J=wa,W=Ca;_.GetTransform(J,P),v.GetTransform(W,P),z.transformA.Copy(J),z.transformB.Copy(W);const K=B0;if(un(K,R,z),K.distance<=0){j.state=s.b2TOIOutputState.e_overlapped,j.t=0;break}if(K.distance<b+A){j.state=s.b2TOIOutputState.e_touching,j.t=P;break}const it=A0;it.Initialize(R,u,_,h,v,P);let at=!1,st=w,pt=0;for(;;){const St=V0,Dt=b0;let It=it.FindMinSeparation(St,Dt,st);if(It>b+A){j.state=s.b2TOIOutputState.e_separated,j.t=w,at=!0;break}if(It>b-A){P=st;break}let Mt=it.Evaluate(St[0],Dt[0],P);if(Mt<b-A){j.state=s.b2TOIOutputState.e_failed,j.t=P,at=!0;break}if(Mt<=b+A){j.state=s.b2TOIOutputState.e_touching,j.t=P,at=!0;break}let At=0,vt=P,Wt=st;for(;;){let Ft=0;Ft=1&At?vt+(b-Mt)*(Wt-vt)/(It-Mt):.5*(vt+Wt),++At,++s.b2_toiRootIters;const Qt=it.Evaluate(St[0],Dt[0],Ft);if(rt(Qt-b)<A){st=Ft;break}if(Qt>b?(vt=Ft,Mt=Qt):(Wt=Ft,It=Qt),At===50)break}if(s.b2_toiMaxRootIters=ut(s.b2_toiMaxRootIters,At),++pt===m)break}if(++D,++s.b2_toiIters,at)break;if(D===20){j.state=s.b2TOIOutputState.e_failed,j.t=P;break}}s.b2_toiMaxIters=ut(s.b2_toiMaxIters,D);const U=r.GetMilliseconds();s.b2_toiMaxTime=ut(s.b2_toiMaxTime,U),s.b2_toiTime+=U}const T0=new l,I0=new l;function yd(j,i,r,u,h){j.pointCount=0;const m=ct.MulXV(r,i.m_p,T0),_=ct.MulXV(h,u.m_p,I0),v=l.DistanceSquaredVV(m,_),w=i.m_radius+u.m_radius;v>w*w||(j.type=s.b2ManifoldType.e_circles,j.localPoint.Copy(i.m_p),j.localNormal.SetZero(),j.pointCount=1,j.points[0].localPoint.Copy(u.m_p),j.points[0].id.key=0)}const D0=new l,k0=new l,L0=new l;function gd(j,i,r,u,h){j.pointCount=0;const m=ct.MulXV(h,u.m_p,D0),_=ct.MulTXV(r,m,k0);let v=0,w=-a;const V=i.m_radius+u.m_radius,b=i.m_count,A=i.m_vertices,P=i.m_normals;for(let K=0;K<b;++K){const it=l.DotVV(P[K],l.SubVV(_,A[K],l.s_t0));if(it>V)return;it>w&&(w=it,v=K)}const D=v,R=(D+1)%b,z=A[D],U=A[R];if(w<c)return j.pointCount=1,j.type=s.b2ManifoldType.e_faceA,j.localNormal.Copy(P[v]),l.MidVV(z,U,j.localPoint),j.points[0].localPoint.Copy(u.m_p),void(j.points[0].id.key=0);const J=l.DotVV(l.SubVV(_,z,l.s_t0),l.SubVV(U,z,l.s_t1)),W=l.DotVV(l.SubVV(_,U,l.s_t0),l.SubVV(z,U,l.s_t1));if(J<=0){if(l.DistanceSquaredVV(_,z)>V*V)return;j.pointCount=1,j.type=s.b2ManifoldType.e_faceA,l.SubVV(_,z,j.localNormal).SelfNormalize(),j.localPoint.Copy(z),j.points[0].localPoint.Copy(u.m_p),j.points[0].id.key=0}else if(W<=0){if(l.DistanceSquaredVV(_,U)>V*V)return;j.pointCount=1,j.type=s.b2ManifoldType.e_faceA,l.SubVV(_,U,j.localNormal).SelfNormalize(),j.localPoint.Copy(U),j.points[0].localPoint.Copy(u.m_p),j.points[0].id.key=0}else{const K=l.MidVV(z,U,L0);if(l.DotVV(l.SubVV(_,K,l.s_t1),P[D])>V)return;j.pointCount=1,j.type=s.b2ManifoldType.e_faceA,j.localNormal.Copy(P[D]).SelfNormalize(),j.localPoint.Copy(K),j.points[0].localPoint.Copy(u.m_p),j.points[0].id.key=0}}const R0=new l,F0=new l,E0=new l,G0=new l;function Ba(j,i,r,u,h){const m=j.m_vertices,_=j.m_normals,v=u.m_count,w=u.m_vertices,V=tt.MulRV(i.q,_[r],R0),b=tt.MulTRV(h.q,V,F0);let A=0,P=a;for(let U=0;U<v;++U){const J=l.DotVV(w[U],b);J<P&&(P=J,A=U)}const D=ct.MulXV(i,m[r],E0),R=ct.MulXV(h,w[A],G0);return l.DotVV(l.SubVV(R,D,l.s_t0),V)}const j0=new l,N0=new l;function vd(j,i,r,u,h){const m=i.m_count,_=i.m_normals,v=l.SubVV(ct.MulXV(h,u.m_centroid,l.s_t0),ct.MulXV(r,i.m_centroid,l.s_t1),j0),w=tt.MulTRV(r.q,v,N0);let V=0,b=-a;for(let K=0;K<m;++K){const it=l.DotVV(_[K],w);it>b&&(b=it,V=K)}let A=Ba(i,r,V,u,h);const P=(V+m-1)%m,D=Ba(i,r,P,u,h),R=(V+1)%m,z=Ba(i,r,R,u,h);let U=0,J=0,W=0;if(D>A&&D>z)W=-1,U=P,J=D;else{if(!(z>A))return j[0]=V,A;W=1,U=R,J=z}for(;(A=Ba(i,r,V=W===-1?(U+m-1)%m:(U+1)%m,u,h))>J;)U=V,J=A;return j[0]=U,J}const z0=new l,O0=xn.MakeArray(2),U0=xn.MakeArray(2),W0=xn.MakeArray(2),q0=[0],H0=[0],J0=new l,X0=new l,$0=new l,Z0=new l,Q0=new l,K0=new l,Y0=new l,tx=new l;function xd(j,i,r,u,h){j.pointCount=0;const m=i.m_radius+u.m_radius,_=q0;_[0]=0;const v=vd(_,i,r,u,h);if(v>m)return;const w=H0;w[0]=0;const V=vd(w,u,h,i,r);if(V>m)return;let b,A,P,D,R=0,z=0;V>.98*v+.001?(b=u,A=i,P=h,D=r,R=w[0],j.type=s.b2ManifoldType.e_faceB,z=1):(b=i,A=u,P=r,D=h,R=_[0],j.type=s.b2ManifoldType.e_faceA,z=0);const U=O0;(function(Je,hn,bn,xi,Oe,Xe){const Si=hn.m_normals,Pn=Oe.m_count,ks=Oe.m_vertices,lo=Oe.m_normals,Ls=tt.MulTRV(Xe.q,tt.MulRV(bn.q,Si[xi],l.s_t0),z0);let Qn=0,Rs=a;for(let Ea=0;Ea<Pn;++Ea){const Hd=l.DotVV(Ls,lo[Ea]);Hd<Rs&&(Rs=Hd,Qn=Ea)}const Kn=Qn,La=(Kn+1)%Pn,Wd=Je[0];ct.MulXV(Xe,ks[Kn],Wd.v);const Ra=Wd.id.cf;Ra.indexA=xi,Ra.indexB=Kn,Ra.typeA=s.b2ContactFeatureType.e_face,Ra.typeB=s.b2ContactFeatureType.e_vertex;const qd=Je[1];ct.MulXV(Xe,ks[La],qd.v);const Fa=qd.id.cf;Fa.indexA=xi,Fa.indexB=La,Fa.typeA=s.b2ContactFeatureType.e_face,Fa.typeB=s.b2ContactFeatureType.e_vertex})(U,b,P,R,A,D);const J=b.m_count,W=b.m_vertices,K=R,it=(R+1)%J,at=W[K],st=W[it],pt=l.SubVV(st,at,J0);pt.Normalize();const St=l.CrossVOne(pt,X0),Dt=l.MidVV(at,st,$0),It=tt.MulRV(P.q,pt,Q0),Mt=l.CrossVOne(It,Z0),At=ct.MulXV(P,at,Y0),vt=ct.MulXV(P,st,tx),Wt=l.DotVV(Mt,At),Ft=-l.DotVV(It,At)+m,Qt=l.DotVV(It,vt)+m,le=U0,oe=W0,Re=l.NegV(It,K0);if(Zr(le,U,Re,Ft,K)<2||Zr(oe,le,It,Qt,it)<2)return;j.localNormal.Copy(St),j.localPoint.Copy(Dt);let vi=0;for(let Je=0;Je<y;++Je){const hn=oe[Je];if(l.DotVV(Mt,hn.v)-Wt<=m){const xi=j.points[vi];if(ct.MulTXV(D,hn.v,xi.localPoint),xi.id.Copy(hn.id),z){const Oe=xi.id.cf;xi.id.cf.indexA=Oe.indexB,xi.id.cf.indexB=Oe.indexA,xi.id.cf.typeA=Oe.typeB,xi.id.cf.typeB=Oe.typeA}++vi}}j.pointCount=vi}const ex=new l,ix=new l,Tu=new l,nx=new l,sx=new l,rx=new l,ox=new l,ax=new sr;function Iu(j,i,r,u,h){j.pointCount=0;const m=ct.MulTXV(r,ct.MulXV(h,u.m_p,l.s_t0),ex),_=i.m_vertex1,v=i.m_vertex2,w=l.SubVV(v,_,ix),V=l.DotVV(w,l.SubVV(v,m,l.s_t0)),b=l.DotVV(w,l.SubVV(m,_,l.s_t0)),A=i.m_radius+u.m_radius,P=ax;if(P.cf.indexB=0,P.cf.typeB=s.b2ContactFeatureType.e_vertex,b<=0){const W=_,K=l.SubVV(m,W,Tu);if(l.DotVV(K,K)>A*A)return;if(i.m_hasVertex0){const at=i.m_vertex0,st=_,pt=l.SubVV(st,at,nx);if(l.DotVV(pt,l.SubVV(st,m,l.s_t0))>0)return}return P.cf.indexA=0,P.cf.typeA=s.b2ContactFeatureType.e_vertex,j.pointCount=1,j.type=s.b2ManifoldType.e_circles,j.localNormal.SetZero(),j.localPoint.Copy(W),j.points[0].id.Copy(P),void j.points[0].localPoint.Copy(u.m_p)}if(V<=0){const W=v,K=l.SubVV(m,W,Tu);if(l.DotVV(K,K)>A*A)return;if(i.m_hasVertex3){const at=i.m_vertex3,st=v,pt=l.SubVV(at,st,sx);if(l.DotVV(pt,l.SubVV(m,st,l.s_t0))>0)return}return P.cf.indexA=1,P.cf.typeA=s.b2ContactFeatureType.e_vertex,j.pointCount=1,j.type=s.b2ManifoldType.e_circles,j.localNormal.SetZero(),j.localPoint.Copy(W),j.points[0].id.Copy(P),void j.points[0].localPoint.Copy(u.m_p)}const D=l.DotVV(w,w),R=rx;R.x=1/D*(V*_.x+b*v.x),R.y=1/D*(V*_.y+b*v.y);const z=l.SubVV(m,R,Tu);if(l.DotVV(z,z)>A*A)return;const J=ox.Set(-w.y,w.x);l.DotVV(J,l.SubVV(m,_,l.s_t0))<0&&J.Set(-J.x,-J.y),J.Normalize(),P.cf.indexA=0,P.cf.typeA=s.b2ContactFeatureType.e_face,j.pointCount=1,j.type=s.b2ManifoldType.e_faceA,j.localNormal.Copy(J),j.localPoint.Copy(_),j.points[0].id.Copy(P),j.points[0].localPoint.Copy(u.m_p)}class Sd{constructor(){this.type=0,this.index=0,this.separation=0}}class lx{constructor(){this.vertices=[],this.normals=[],this.count=0}}class pe{constructor(){this.m_polygonB=new lx,this.m_xf=new ct,this.m_centroidB=new l,this.m_v0=new l,this.m_v1=new l,this.m_v2=new l,this.m_v3=new l,this.m_normal0=new l,this.m_normal1=new l,this.m_normal2=new l,this.m_normal=new l,this.m_type1=0,this.m_type2=0,this.m_lowerLimit=new l,this.m_upperLimit=new l,this.m_radius=0,this.m_front=!1}Collide(i,r,u,h,m){ct.MulTXX(u,m,this.m_xf),ct.MulXV(this.m_xf,h.m_centroid,this.m_centroidB),this.m_v0.Copy(r.m_vertex0),this.m_v1.Copy(r.m_vertex1),this.m_v2.Copy(r.m_vertex2),this.m_v3.Copy(r.m_vertex3);const _=r.m_hasVertex0,v=r.m_hasVertex3,w=l.SubVV(this.m_v2,this.m_v1,pe.s_edge1);w.Normalize(),this.m_normal1.Set(w.y,-w.x);const V=l.DotVV(this.m_normal1,l.SubVV(this.m_centroidB,this.m_v1,l.s_t0));let b=0,A=0,P=!1,D=!1;if(_){const st=l.SubVV(this.m_v1,this.m_v0,pe.s_edge0);st.Normalize(),this.m_normal0.Set(st.y,-st.x),P=l.CrossVV(st,w)>=0,b=l.DotVV(this.m_normal0,l.SubVV(this.m_centroidB,this.m_v0,l.s_t0))}if(v){const st=l.SubVV(this.m_v3,this.m_v2,pe.s_edge2);st.Normalize(),this.m_normal2.Set(st.y,-st.x),D=l.CrossVV(w,st)>0,A=l.DotVV(this.m_normal2,l.SubVV(this.m_centroidB,this.m_v2,l.s_t0))}_&&v?P&&D?(this.m_front=b>=0||V>=0||A>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):P?(this.m_front=b>=0||V>=0&&A>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):D?(this.m_front=A>=0||b>=0&&V>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=b>=0&&V>=0&&A>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):_?P?(this.m_front=b>=0||V>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):(this.m_front=b>=0&&V>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):v?D?(this.m_front=V>=0||A>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=V>=0&&A>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=V>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=h.m_count;for(let st=0;st<h.m_count;++st)this.m_polygonB.vertices.length<=st&&this.m_polygonB.vertices.push(new l),this.m_polygonB.normals.length<=st&&this.m_polygonB.normals.push(new l),ct.MulXV(this.m_xf,h.m_vertices[st],this.m_polygonB.vertices[st]),tt.MulRV(this.m_xf.q,h.m_normals[st],this.m_polygonB.normals[st]);this.m_radius=h.m_radius+r.m_radius,i.pointCount=0;const R=this.ComputeEdgeSeparation(pe.s_edgeAxis);if(R.type===0||R.separation>this.m_radius)return;const z=this.ComputePolygonSeparation(pe.s_polygonAxis);if(z.type!==0&&z.separation>this.m_radius)return;let U;U=z.type===0?R:z.separation>.98*R.separation+.001?z:R;const J=pe.s_ie,W=pe.s_rf;if(U.type===1){i.type=s.b2ManifoldType.e_faceA;let st=0,pt=l.DotVV(this.m_normal,this.m_polygonB.normals[0]);for(let At=1;At<this.m_polygonB.count;++At){const vt=l.DotVV(this.m_normal,this.m_polygonB.normals[At]);vt<pt&&(pt=vt,st=At)}const St=st,Dt=(St+1)%this.m_polygonB.count,It=J[0];It.v.Copy(this.m_polygonB.vertices[St]),It.id.cf.indexA=0,It.id.cf.indexB=St,It.id.cf.typeA=s.b2ContactFeatureType.e_face,It.id.cf.typeB=s.b2ContactFeatureType.e_vertex;const Mt=J[1];Mt.v.Copy(this.m_polygonB.vertices[Dt]),Mt.id.cf.indexA=0,Mt.id.cf.indexB=Dt,Mt.id.cf.typeA=s.b2ContactFeatureType.e_face,Mt.id.cf.typeB=s.b2ContactFeatureType.e_vertex,this.m_front?(W.i1=0,W.i2=1,W.v1.Copy(this.m_v1),W.v2.Copy(this.m_v2),W.normal.Copy(this.m_normal1)):(W.i1=1,W.i2=0,W.v1.Copy(this.m_v2),W.v2.Copy(this.m_v1),W.normal.Copy(this.m_normal1).SelfNeg())}else{i.type=s.b2ManifoldType.e_faceB;const st=J[0];st.v.Copy(this.m_v1),st.id.cf.indexA=0,st.id.cf.indexB=U.index,st.id.cf.typeA=s.b2ContactFeatureType.e_vertex,st.id.cf.typeB=s.b2ContactFeatureType.e_face;const pt=J[1];pt.v.Copy(this.m_v2),pt.id.cf.indexA=0,pt.id.cf.indexB=U.index,pt.id.cf.typeA=s.b2ContactFeatureType.e_vertex,pt.id.cf.typeB=s.b2ContactFeatureType.e_face,W.i1=U.index,W.i2=(W.i1+1)%this.m_polygonB.count,W.v1.Copy(this.m_polygonB.vertices[W.i1]),W.v2.Copy(this.m_polygonB.vertices[W.i2]),W.normal.Copy(this.m_polygonB.normals[W.i1])}W.sideNormal1.Set(W.normal.y,-W.normal.x),W.sideNormal2.Copy(W.sideNormal1).SelfNeg(),W.sideOffset1=l.DotVV(W.sideNormal1,W.v1),W.sideOffset2=l.DotVV(W.sideNormal2,W.v2);const K=pe.s_clipPoints1,it=pe.s_clipPoints2;if(Zr(K,J,W.sideNormal1,W.sideOffset1,W.i1)<y||Zr(it,K,W.sideNormal2,W.sideOffset2,W.i2)<y)return;U.type===1?(i.localNormal.Copy(W.normal),i.localPoint.Copy(W.v1)):(i.localNormal.Copy(h.m_normals[W.i1]),i.localPoint.Copy(h.m_vertices[W.i1]));let at=0;for(let st=0;st<y;++st)if(l.DotVV(W.normal,l.SubVV(it[st].v,W.v1,l.s_t0))<=this.m_radius){const pt=i.points[at];U.type===1?(ct.MulTXV(this.m_xf,it[st].v,pt.localPoint),pt.id=it[st].id):(pt.localPoint.Copy(it[st].v),pt.id.cf.typeA=it[st].id.cf.typeB,pt.id.cf.typeB=it[st].id.cf.typeA,pt.id.cf.indexA=it[st].id.cf.indexB,pt.id.cf.indexB=it[st].id.cf.indexA),++at}i.pointCount=at}ComputeEdgeSeparation(i){const r=i;r.type=1,r.index=this.m_front?0:1,r.separation=a;for(let u=0;u<this.m_polygonB.count;++u){const h=l.DotVV(this.m_normal,l.SubVV(this.m_polygonB.vertices[u],this.m_v1,l.s_t0));h<r.separation&&(r.separation=h)}return r}ComputePolygonSeparation(i){const r=i;r.type=0,r.index=-1,r.separation=-a;const u=pe.s_perp.Set(-this.m_normal.y,this.m_normal.x);for(let h=0;h<this.m_polygonB.count;++h){const m=l.NegV(this.m_polygonB.normals[h],pe.s_n),_=l.DotVV(m,l.SubVV(this.m_polygonB.vertices[h],this.m_v1,l.s_t0)),v=l.DotVV(m,l.SubVV(this.m_polygonB.vertices[h],this.m_v2,l.s_t0)),w=dt(_,v);if(w>this.m_radius)return r.type=2,r.index=h,r.separation=w,r;if(l.DotVV(m,u)>=0){if(l.DotVV(l.SubVV(m,this.m_upperLimit,l.s_t0),this.m_normal)<-C)continue}else if(l.DotVV(l.SubVV(m,this.m_lowerLimit,l.s_t0),this.m_normal)<-C)continue;w>r.separation&&(r.type=2,r.index=h,r.separation=w)}return r}}pe.s_edge1=new l,pe.s_edge0=new l,pe.s_edge2=new l,pe.s_ie=xn.MakeArray(2),pe.s_rf=new class{constructor(){this.i1=0,this.i2=0,this.v1=new l,this.v2=new l,this.normal=new l,this.sideNormal1=new l,this.sideOffset1=0,this.sideNormal2=new l,this.sideOffset2=0}},pe.s_clipPoints1=xn.MakeArray(2),pe.s_clipPoints2=xn.MakeArray(2),pe.s_edgeAxis=new Sd,pe.s_polygonAxis=new Sd,pe.s_n=new l,pe.s_perp=new l;const ux=new pe;function Du(j,i,r,u,h){ux.Collide(j,i,r,u,h)}class Aa{constructor(){this.mass=0,this.center=new l(0,0),this.I=0}}var Ni,Xn,$n,ae;(Ni=s.b2ShapeType||(s.b2ShapeType={}))[Ni.e_unknown=-1]="e_unknown",Ni[Ni.e_circleShape=0]="e_circleShape",Ni[Ni.e_edgeShape=1]="e_edgeShape",Ni[Ni.e_polygonShape=2]="e_polygonShape",Ni[Ni.e_chainShape=3]="e_chainShape",Ni[Ni.e_shapeTypeCount=4]="e_shapeTypeCount";class Ps{constructor(i,r){this.m_type=s.b2ShapeType.e_unknown,this.m_radius=0,this.m_type=i,this.m_radius=r}Copy(i){return this.m_radius=i.m_radius,this}GetType(){return this.m_type}}class He extends Ps{constructor(i=0){super(s.b2ShapeType.e_circleShape,i),this.m_p=new l}Set(i,r=this.m_radius){return this.m_p.Copy(i),this.m_radius=r,this}Clone(){return new He().Copy(this)}Copy(i){return super.Copy(i),this.m_p.Copy(i.m_p),this}GetChildCount(){return 1}TestPoint(i,r){const u=ct.MulXV(i,this.m_p,He.TestPoint_s_center),h=l.SubVV(r,u,He.TestPoint_s_d);return l.DotVV(h,h)<=bt(this.m_radius)}ComputeDistance(i,r,u,h){const m=ct.MulXV(i,this.m_p,He.ComputeDistance_s_center);return l.SubVV(r,m,u),u.Normalize()-this.m_radius}RayCast(i,r,u,h){const m=ct.MulXV(u,this.m_p,He.RayCast_s_position),_=l.SubVV(r.p1,m,He.RayCast_s_s),v=l.DotVV(_,_)-bt(this.m_radius),w=l.SubVV(r.p2,r.p1,He.RayCast_s_r),V=l.DotVV(_,w),b=l.DotVV(w,w),A=V*V-b*v;if(A<0||b<c)return!1;let P=-(V+Nt(A));return 0<=P&&P<=r.maxFraction*b&&(P/=b,i.fraction=P,l.AddVMulSV(_,P,w,i.normal).SelfNormalize(),!0)}ComputeAABB(i,r,u){const h=ct.MulXV(r,this.m_p,He.ComputeAABB_s_p);i.lowerBound.Set(h.x-this.m_radius,h.y-this.m_radius),i.upperBound.Set(h.x+this.m_radius,h.y+this.m_radius)}ComputeMass(i,r){const u=bt(this.m_radius);i.mass=r*f*u,i.center.Copy(this.m_p),i.I=i.mass*(.5*u+l.DotVV(this.m_p,this.m_p))}SetupDistanceProxy(i,r){i.m_vertices=i.m_buffer,i.m_vertices[0].Copy(this.m_p),i.m_count=1,i.m_radius=this.m_radius}ComputeSubmergedArea(i,r,u,h){const m=ct.MulXV(u,this.m_p,new l),_=-(l.DotVV(i,m)-r);if(_<-this.m_radius+c)return 0;if(_>this.m_radius)return h.Copy(m),f*this.m_radius*this.m_radius;const v=this.m_radius*this.m_radius,w=_*_,V=v*(Ye(_/this.m_radius)+f/2)+_*Nt(v-w),b=-2/3*Et(v-w,1.5)/V;return h.x=m.x+i.x*b,h.y=m.y+i.y*b,V}Dump(i){i(`    const shape: b2CircleShape = new b2CircleShape();
`),i(`    shape.m_radius = %.15f;
`,this.m_radius),i(`    shape.m_p.Set(%.15f, %.15f);
`,this.m_p.x,this.m_p.y)}}He.TestPoint_s_center=new l,He.TestPoint_s_d=new l,He.ComputeDistance_s_center=new l,He.RayCast_s_position=new l,He.RayCast_s_s=new l,He.RayCast_s_r=new l,He.ComputeAABB_s_p=new l;class Rt extends Ps{constructor(){super(s.b2ShapeType.e_polygonShape,B),this.m_centroid=new l(0,0),this.m_vertices=[],this.m_normals=[],this.m_count=0}Clone(){return new Rt().Copy(this)}Copy(i){super.Copy(i),this.m_centroid.Copy(i.m_centroid),this.m_count=i.m_count,this.m_vertices=l.MakeArray(this.m_count),this.m_normals=l.MakeArray(this.m_count);for(let r=0;r<this.m_count;++r)this.m_vertices[r].Copy(i.m_vertices[r]),this.m_normals[r].Copy(i.m_normals[r]);return this}GetChildCount(){return 1}Set(i,r=i.length,u=0){if(r<3)return this.SetAsBox(1,1);let h=r;const m=[];for(let A=0;A<h;++A){const P=i[u+A];let D=!0;for(let R=0;R<m.length;++R)if(l.DistanceSquaredVV(P,m[R])<.5*p*(.5*p)){D=!1;break}D&&m.push(P)}if((h=m.length)<3)return this.SetAsBox(1,1);let _=0,v=m[0].x;for(let A=1;A<h;++A){const P=m[A].x;(P>v||P===v&&m[A].y<m[_].y)&&(_=A,v=P)}const w=[];let V=0,b=_;for(;;){w[V]=b;let A=0;for(let P=1;P<h;++P){if(A===b){A=P;continue}const D=l.SubVV(m[A],m[w[V]],Rt.Set_s_r),R=l.SubVV(m[P],m[w[V]],Rt.Set_s_v),z=l.CrossVV(D,R);z<0&&(A=P),z===0&&R.LengthSquared()>D.LengthSquared()&&(A=P)}if(++V,b=A,A===_)break}this.m_count=V,this.m_vertices=l.MakeArray(this.m_count),this.m_normals=l.MakeArray(this.m_count);for(let A=0;A<V;++A)this.m_vertices[A].Copy(m[w[A]]);for(let A=0;A<V;++A){const P=this.m_vertices[A],D=this.m_vertices[(A+1)%V],R=l.SubVV(D,P,l.s_t0);l.CrossVOne(R,this.m_normals[A]).SelfNormalize()}return Rt.ComputeCentroid(this.m_vertices,V,this.m_centroid),this}SetAsArray(i,r=i.length){return this.Set(i,r)}SetAsBox(i,r,u,h=0){if(this.m_count=4,this.m_vertices=l.MakeArray(this.m_count),this.m_normals=l.MakeArray(this.m_count),this.m_vertices[0].Set(-i,-r),this.m_vertices[1].Set(i,-r),this.m_vertices[2].Set(i,r),this.m_vertices[3].Set(-i,r),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),u){this.m_centroid.Copy(u);const m=new ct;m.SetPosition(u),m.SetRotationAngle(h);for(let _=0;_<this.m_count;++_)ct.MulXV(m,this.m_vertices[_],this.m_vertices[_]),tt.MulRV(m.q,this.m_normals[_],this.m_normals[_])}return this}TestPoint(i,r){const u=ct.MulTXV(i,r,Rt.TestPoint_s_pLocal);for(let h=0;h<this.m_count;++h)if(l.DotVV(this.m_normals[h],l.SubVV(u,this.m_vertices[h],l.s_t0))>0)return!1;return!0}ComputeDistance(i,r,u,h){const m=ct.MulTXV(i,r,Rt.ComputeDistance_s_pLocal);let _=-a;const v=Rt.ComputeDistance_s_normalForMaxDistance.Copy(m);for(let w=0;w<this.m_count;++w){const V=l.DotVV(this.m_normals[w],l.SubVV(m,this.m_vertices[w],l.s_t0));V>_&&(_=V,v.Copy(this.m_normals[w]))}if(_>0){const w=Rt.ComputeDistance_s_minDistance.Copy(v);let V=_*_;for(let b=0;b<this.m_count;++b){const A=l.SubVV(m,this.m_vertices[b],Rt.ComputeDistance_s_distance),P=A.LengthSquared();V>P&&(w.Copy(A),V=P)}return tt.MulRV(i.q,w,u),u.Normalize(),Math.sqrt(V)}return tt.MulRV(i.q,v,u),_}RayCast(i,r,u,h){const m=ct.MulTXV(u,r.p1,Rt.RayCast_s_p1),_=ct.MulTXV(u,r.p2,Rt.RayCast_s_p2),v=l.SubVV(_,m,Rt.RayCast_s_d);let w=0,V=r.maxFraction,b=-1;for(let A=0;A<this.m_count;++A){const P=l.DotVV(this.m_normals[A],l.SubVV(this.m_vertices[A],m,l.s_t0)),D=l.DotVV(this.m_normals[A],v);if(D===0){if(P<0)return!1}else D<0&&P<w*D?(w=P/D,b=A):D>0&&P<V*D&&(V=P/D);if(V<w)return!1}return b>=0&&(i.fraction=w,tt.MulRV(u.q,this.m_normals[b],i.normal),!0)}ComputeAABB(i,r,u){const h=ct.MulXV(r,this.m_vertices[0],i.lowerBound),m=i.upperBound.Copy(h);for(let v=0;v<this.m_count;++v){const w=ct.MulXV(r,this.m_vertices[v],Rt.ComputeAABB_s_v);l.MinV(w,h,h),l.MaxV(w,m,m)}const _=this.m_radius;h.SelfSubXY(_,_),m.SelfAddXY(_,_)}ComputeMass(i,r){const u=Rt.ComputeMass_s_center.SetZero();let h=0,m=0;const _=Rt.ComputeMass_s_s.SetZero();for(let v=0;v<this.m_count;++v)_.SelfAdd(this.m_vertices[v]);_.SelfMul(1/this.m_count);for(let v=0;v<this.m_count;++v){const w=l.SubVV(this.m_vertices[v],_,Rt.ComputeMass_s_e1),V=l.SubVV(this.m_vertices[(v+1)%this.m_count],_,Rt.ComputeMass_s_e2),b=l.CrossVV(w,V),A=.5*b;h+=A,u.SelfAdd(l.MulSV(A*(1/3),l.AddVV(w,V,l.s_t0),l.s_t1));const P=w.x,D=w.y,R=V.x,z=V.y,U=P*P+R*P+R*R,J=D*D+z*D+z*z;m+=1/3*.25*b*(U+J)}i.mass=r*h,u.SelfMul(1/h),l.AddVV(u,_,i.center),i.I=r*m,i.I+=i.mass*(l.DotVV(i.center,i.center)-l.DotVV(u,u))}Validate(){for(let i=0;i<this.m_count;++i){const r=i,u=(i+1)%this.m_count,h=this.m_vertices[r],m=l.SubVV(this.m_vertices[u],h,Rt.Validate_s_e);for(let _=0;_<this.m_count;++_){if(_===r||_===u)continue;const v=l.SubVV(this.m_vertices[_],h,Rt.Validate_s_v);if(l.CrossVV(m,v)<0)return!1}}return!0}SetupDistanceProxy(i,r){i.m_vertices=this.m_vertices,i.m_count=this.m_count,i.m_radius=this.m_radius}ComputeSubmergedArea(i,r,u,h){const m=tt.MulTRV(u.q,i,Rt.ComputeSubmergedArea_s_normalL),_=r-l.DotVV(i,u.p),v=[];let w=0,V=-1,b=-1,A=!1;for(let pt=0;pt<this.m_count;++pt){v[pt]=l.DotVV(m,this.m_vertices[pt])-_;const St=v[pt]<-c;pt>0&&(St?A||(V=pt-1,w++):A&&(b=pt-1,w++)),A=St}switch(w){case 0:if(A){const pt=Rt.ComputeSubmergedArea_s_md;return this.ComputeMass(pt,1),ct.MulXV(u,pt.center,h),pt.mass}return 0;case 1:V===-1?V=this.m_count-1:b=this.m_count-1}const P=(V+1)%this.m_count,D=(b+1)%this.m_count,R=(0-v[V])/(v[P]-v[V]),z=(0-v[b])/(v[D]-v[b]),U=Rt.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[V].x*(1-R)+this.m_vertices[P].x*R,this.m_vertices[V].y*(1-R)+this.m_vertices[P].y*R),J=Rt.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[b].x*(1-z)+this.m_vertices[D].x*z,this.m_vertices[b].y*(1-z)+this.m_vertices[D].y*z);let W=0;const K=Rt.ComputeSubmergedArea_s_center.SetZero();let it,at=this.m_vertices[P],st=P;for(;st!==D;){st=(st+1)%this.m_count,it=st===D?J:this.m_vertices[st];const pt=.5*((at.x-U.x)*(it.y-U.y)-(at.y-U.y)*(it.x-U.x));W+=pt,K.x+=pt*(U.x+at.x+it.x)/3,K.y+=pt*(U.y+at.y+it.y)/3,at=it}return K.SelfMul(1/W),ct.MulXV(u,K,h),W}Dump(i){i(`    const shape: b2PolygonShape = new b2PolygonShape();
`),i(`    const vs: b2Vec2[] = [];
`);for(let r=0;r<this.m_count;++r)i(`    vs[%d] = new b2Vec2(%.15f, %.15f);
`,r,this.m_vertices[r].x,this.m_vertices[r].y);i(`    shape.Set(vs, %d);
`,this.m_count)}static ComputeCentroid(i,r,u){const h=u;h.SetZero();let m=0;const _=Rt.ComputeCentroid_s_pRef.SetZero();for(let v=0;v<r;++v){const w=_,V=i[v],b=i[(v+1)%r],A=l.SubVV(V,w,Rt.ComputeCentroid_s_e1),P=l.SubVV(b,w,Rt.ComputeCentroid_s_e2),D=l.CrossVV(A,P),R=.5*D;m+=R,h.x+=R*(1/3)*(w.x+V.x+b.x),h.y+=R*(1/3)*(w.y+V.y+b.y)}return h.SelfMul(1/m),h}}Rt.Set_s_r=new l,Rt.Set_s_v=new l,Rt.TestPoint_s_pLocal=new l,Rt.ComputeDistance_s_pLocal=new l,Rt.ComputeDistance_s_normalForMaxDistance=new l,Rt.ComputeDistance_s_minDistance=new l,Rt.ComputeDistance_s_distance=new l,Rt.RayCast_s_p1=new l,Rt.RayCast_s_p2=new l,Rt.RayCast_s_d=new l,Rt.ComputeAABB_s_v=new l,Rt.ComputeMass_s_center=new l,Rt.ComputeMass_s_s=new l,Rt.ComputeMass_s_e1=new l,Rt.ComputeMass_s_e2=new l,Rt.Validate_s_e=new l,Rt.Validate_s_v=new l,Rt.ComputeSubmergedArea_s_normalL=new l,Rt.ComputeSubmergedArea_s_md=new Aa,Rt.ComputeSubmergedArea_s_intoVec=new l,Rt.ComputeSubmergedArea_s_outoVec=new l,Rt.ComputeSubmergedArea_s_center=new l,Rt.ComputeCentroid_s_pRef=new l,Rt.ComputeCentroid_s_e1=new l,Rt.ComputeCentroid_s_e2=new l;class ee extends Ps{constructor(){super(s.b2ShapeType.e_edgeShape,B),this.m_vertex1=new l,this.m_vertex2=new l,this.m_vertex0=new l,this.m_vertex3=new l,this.m_hasVertex0=!1,this.m_hasVertex3=!1}Set(i,r){return this.m_vertex1.Copy(i),this.m_vertex2.Copy(r),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this}Clone(){return new ee().Copy(this)}Copy(i){return super.Copy(i),this.m_vertex1.Copy(i.m_vertex1),this.m_vertex2.Copy(i.m_vertex2),this.m_vertex0.Copy(i.m_vertex0),this.m_vertex3.Copy(i.m_vertex3),this.m_hasVertex0=i.m_hasVertex0,this.m_hasVertex3=i.m_hasVertex3,this}GetChildCount(){return 1}TestPoint(i,r){return!1}ComputeDistance(i,r,u,h){const m=ct.MulXV(i,this.m_vertex1,ee.ComputeDistance_s_v1),_=ct.MulXV(i,this.m_vertex2,ee.ComputeDistance_s_v2),v=l.SubVV(r,m,ee.ComputeDistance_s_d),w=l.SubVV(_,m,ee.ComputeDistance_s_s),V=l.DotVV(v,w);if(V>0){const b=l.DotVV(w,w);V>b?l.SubVV(r,_,v):v.SelfMulSub(V/b,w)}return u.Copy(v),u.Normalize()}RayCast(i,r,u,h){const m=ct.MulTXV(u,r.p1,ee.RayCast_s_p1),_=ct.MulTXV(u,r.p2,ee.RayCast_s_p2),v=l.SubVV(_,m,ee.RayCast_s_d),w=this.m_vertex1,V=this.m_vertex2,b=l.SubVV(V,w,ee.RayCast_s_e),A=i.normal.Set(b.y,-b.x).SelfNormalize(),P=l.DotVV(A,l.SubVV(w,m,l.s_t0)),D=l.DotVV(A,v);if(D===0)return!1;const R=P/D;if(R<0||r.maxFraction<R)return!1;const z=l.AddVMulSV(m,R,v,ee.RayCast_s_q),U=l.SubVV(V,w,ee.RayCast_s_r),J=l.DotVV(U,U);if(J===0)return!1;const W=l.DotVV(l.SubVV(z,w,l.s_t0),U)/J;return!(W<0||1<W||(i.fraction=R,tt.MulRV(u.q,i.normal,i.normal),P>0&&i.normal.SelfNeg(),0))}ComputeAABB(i,r,u){const h=ct.MulXV(r,this.m_vertex1,ee.ComputeAABB_s_v1),m=ct.MulXV(r,this.m_vertex2,ee.ComputeAABB_s_v2);l.MinV(h,m,i.lowerBound),l.MaxV(h,m,i.upperBound);const _=this.m_radius;i.lowerBound.SelfSubXY(_,_),i.upperBound.SelfAddXY(_,_)}ComputeMass(i,r){i.mass=0,l.MidVV(this.m_vertex1,this.m_vertex2,i.center),i.I=0}SetupDistanceProxy(i,r){i.m_vertices=i.m_buffer,i.m_vertices[0].Copy(this.m_vertex1),i.m_vertices[1].Copy(this.m_vertex2),i.m_count=2,i.m_radius=this.m_radius}ComputeSubmergedArea(i,r,u,h){return h.SetZero(),0}Dump(i){i(`    const shape: b2EdgeShape = new b2EdgeShape();
`),i(`    shape.m_radius = %.15f;
`,this.m_radius),i(`    shape.m_vertex0.Set(%.15f, %.15f);
`,this.m_vertex0.x,this.m_vertex0.y),i(`    shape.m_vertex1.Set(%.15f, %.15f);
`,this.m_vertex1.x,this.m_vertex1.y),i(`    shape.m_vertex2.Set(%.15f, %.15f);
`,this.m_vertex2.x,this.m_vertex2.y),i(`    shape.m_vertex3.Set(%.15f, %.15f);
`,this.m_vertex3.x,this.m_vertex3.y),i(`    shape.m_hasVertex0 = %s;
`,this.m_hasVertex0),i(`    shape.m_hasVertex3 = %s;
`,this.m_hasVertex3)}}ee.ComputeDistance_s_v1=new l,ee.ComputeDistance_s_v2=new l,ee.ComputeDistance_s_d=new l,ee.ComputeDistance_s_s=new l,ee.RayCast_s_p1=new l,ee.RayCast_s_p2=new l,ee.RayCast_s_d=new l,ee.RayCast_s_e=new l,ee.RayCast_s_q=new l,ee.RayCast_s_r=new l,ee.ComputeAABB_s_v1=new l,ee.ComputeAABB_s_v2=new l;class Ki extends Ps{constructor(){super(s.b2ShapeType.e_chainShape,B),this.m_vertices=[],this.m_count=0,this.m_prevVertex=new l,this.m_nextVertex=new l,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1}CreateLoop(i,r=i.length,u=0){if(r<3)return this;this.m_count=r+1,this.m_vertices=l.MakeArray(this.m_count);for(let h=0;h<r;++h)this.m_vertices[h].Copy(i[u+h]);return this.m_vertices[r].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this}CreateChain(i,r=i.length,u=0){this.m_count=r,this.m_vertices=l.MakeArray(r);for(let h=0;h<r;++h)this.m_vertices[h].Copy(i[u+h]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this}SetPrevVertex(i){return this.m_prevVertex.Copy(i),this.m_hasPrevVertex=!0,this}SetNextVertex(i){return this.m_nextVertex.Copy(i),this.m_hasNextVertex=!0,this}Clone(){return new Ki().Copy(this)}Copy(i){return super.Copy(i),this.CreateChain(i.m_vertices,i.m_count),this.m_prevVertex.Copy(i.m_prevVertex),this.m_nextVertex.Copy(i.m_nextVertex),this.m_hasPrevVertex=i.m_hasPrevVertex,this.m_hasNextVertex=i.m_hasNextVertex,this}GetChildCount(){return this.m_count-1}GetChildEdge(i,r){i.m_type=s.b2ShapeType.e_edgeShape,i.m_radius=this.m_radius,i.m_vertex1.Copy(this.m_vertices[r]),i.m_vertex2.Copy(this.m_vertices[r+1]),r>0?(i.m_vertex0.Copy(this.m_vertices[r-1]),i.m_hasVertex0=!0):(i.m_vertex0.Copy(this.m_prevVertex),i.m_hasVertex0=this.m_hasPrevVertex),r<this.m_count-2?(i.m_vertex3.Copy(this.m_vertices[r+2]),i.m_hasVertex3=!0):(i.m_vertex3.Copy(this.m_nextVertex),i.m_hasVertex3=this.m_hasNextVertex)}TestPoint(i,r){return!1}ComputeDistance(i,r,u,h){const m=Ki.ComputeDistance_s_edgeShape;return this.GetChildEdge(m,h),m.ComputeDistance(i,r,u,0)}RayCast(i,r,u,h){const m=Ki.RayCast_s_edgeShape;return m.m_vertex1.Copy(this.m_vertices[h]),m.m_vertex2.Copy(this.m_vertices[(h+1)%this.m_count]),m.RayCast(i,r,u,0)}ComputeAABB(i,r,u){const h=this.m_vertices[u],m=this.m_vertices[(u+1)%this.m_count],_=ct.MulXV(r,h,Ki.ComputeAABB_s_v1),v=ct.MulXV(r,m,Ki.ComputeAABB_s_v2);l.MinV(_,v,i.lowerBound),l.MaxV(_,v,i.upperBound)}ComputeMass(i,r){i.mass=0,i.center.SetZero(),i.I=0}SetupDistanceProxy(i,r){i.m_vertices=i.m_buffer,i.m_vertices[0].Copy(this.m_vertices[r]),r+1<this.m_count?i.m_vertices[1].Copy(this.m_vertices[r+1]):i.m_vertices[1].Copy(this.m_vertices[0]),i.m_count=2,i.m_radius=this.m_radius}ComputeSubmergedArea(i,r,u,h){return h.SetZero(),0}Dump(i){i(`    const shape: b2ChainShape = new b2ChainShape();
`),i(`    const vs: b2Vec2[] = [];
`);for(let r=0;r<this.m_count;++r)i(`    vs[%d] = new bVec2(%.15f, %.15f);
`,r,this.m_vertices[r].x,this.m_vertices[r].y);i(`    shape.CreateChain(vs, %d);
`,this.m_count),i(`    shape.m_prevVertex.Set(%.15f, %.15f);
`,this.m_prevVertex.x,this.m_prevVertex.y),i(`    shape.m_nextVertex.Set(%.15f, %.15f);
`,this.m_nextVertex.x,this.m_nextVertex.y),i(`    shape.m_hasPrevVertex = %s;
`,this.m_hasPrevVertex?"true":"false"),i(`    shape.m_hasNextVertex = %s;
`,this.m_hasNextVertex?"true":"false")}}Ki.ComputeDistance_s_edgeShape=new ee,Ki.RayCast_s_edgeShape=new ee,Ki.ComputeAABB_s_v1=new l,Ki.ComputeAABB_s_v2=new l;class Zn{constructor(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}Clone(){return new Zn().Copy(this)}Copy(i){return this.categoryBits=i.categoryBits,this.maskBits=i.maskBits,this.groupIndex=i.groupIndex||0,this}}Zn.DEFAULT=new Zn;class wd{constructor(){this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.isSensor=!1,this.filter=new Zn}}class ku{constructor(i){this.aabb=new je,this.childIndex=0,this.fixture=i}}class Cn{constructor(i,r){this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_proxies=[],this.m_proxyCount=0,this.m_filter=new Zn,this.m_isSensor=!1,this.m_userData=null,this.m_body=r,this.m_shape=i.shape.Clone()}GetType(){return this.m_shape.GetType()}GetShape(){return this.m_shape}SetSensor(i){i!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=i)}IsSensor(){return this.m_isSensor}SetFilterData(i){this.m_filter.Copy(i),this.Refilter()}GetFilterData(){return this.m_filter}Refilter(){let i=this.m_body.GetContactList();for(;i;){const h=i.contact,m=h.GetFixtureA(),_=h.GetFixtureB();m!==this&&_!==this||h.FlagForFiltering(),i=i.next}const r=this.m_body.GetWorld();if(r===null)return;const u=r.m_contactManager.m_broadPhase;for(let h=0;h<this.m_proxyCount;++h)u.TouchProxy(this.m_proxies[h].treeNode)}GetBody(){return this.m_body}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(i){this.m_userData=i}TestPoint(i){return this.m_shape.TestPoint(this.m_body.GetTransform(),i)}ComputeDistance(i,r,u){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),i,r,u)}RayCast(i,r,u){return this.m_shape.RayCast(i,r,this.m_body.GetTransform(),u)}GetMassData(i=new Aa){return this.m_shape.ComputeMass(i,this.m_density),i}SetDensity(i){this.m_density=i}GetDensity(){return this.m_density}GetFriction(){return this.m_friction}SetFriction(i){this.m_friction=i}GetRestitution(){return this.m_restitution}SetRestitution(i){this.m_restitution=i}GetAABB(i){return this.m_proxies[i].aabb}Dump(i,r){i(`    const fd: b2FixtureDef = new b2FixtureDef();
`),i(`    fd.friction = %.15f;
`,this.m_friction),i(`    fd.restitution = %.15f;
`,this.m_restitution),i(`    fd.density = %.15f;
`,this.m_density),i(`    fd.isSensor = %s;
`,this.m_isSensor?"true":"false"),i(`    fd.filter.categoryBits = %d;
`,this.m_filter.categoryBits),i(`    fd.filter.maskBits = %d;
`,this.m_filter.maskBits),i(`    fd.filter.groupIndex = %d;
`,this.m_filter.groupIndex),this.m_shape.Dump(i),i(`
`),i(`    fd.shape = shape;
`),i(`
`),i(`    bodies[%d].CreateFixture(fd);
`,r)}Create(i){this.m_userData=i.userData,this.m_friction=o(i.friction,.2),this.m_restitution=o(i.restitution,0),this.m_next=null,this.m_filter.Copy(o(i.filter,Zn.DEFAULT)),this.m_isSensor=o(i.isSensor,!1),this.m_proxies=Bt(this.m_shape.GetChildCount(),r=>new ku(this)),this.m_proxyCount=0,this.m_density=o(i.density,0)}Destroy(){}CreateProxies(i){const r=this.m_body.m_world.m_contactManager.m_broadPhase;this.m_proxyCount=this.m_shape.GetChildCount();for(let u=0;u<this.m_proxyCount;++u){const h=this.m_proxies[u]=new ku(this);this.m_shape.ComputeAABB(h.aabb,i,u),h.treeNode=r.CreateProxy(h.aabb,h),h.childIndex=u}}DestroyProxies(){const i=this.m_body.m_world.m_contactManager.m_broadPhase;for(let r=0;r<this.m_proxyCount;++r){const u=this.m_proxies[r];delete u.treeNode.userData,i.DestroyProxy(u.treeNode),delete u.treeNode}this.m_proxyCount=0}TouchProxies(){const i=this.m_body.m_world.m_contactManager.m_broadPhase,r=this.m_proxyCount;for(let u=0;u<r;++u)i.TouchProxy(this.m_proxies[u].treeNode)}Synchronize(i,r){if(this.m_proxyCount===0)return;const u=this.m_body.m_world.m_contactManager.m_broadPhase;for(let h=0;h<this.m_proxyCount;++h){const m=this.m_proxies[h],_=Cn.Synchronize_s_aabb1,v=Cn.Synchronize_s_aabb2;this.m_shape.ComputeAABB(_,i,h),this.m_shape.ComputeAABB(v,r,h),m.aabb.Combine2(_,v);const w=l.SubVV(r.p,i.p,Cn.Synchronize_s_displacement);u.MoveProxy(m.treeNode,m.aabb,w)}}}Cn.Synchronize_s_aabb1=new je,Cn.Synchronize_s_aabb2=new je,Cn.Synchronize_s_displacement=new l,(Xn=s.b2BodyType||(s.b2BodyType={}))[Xn.b2_unknown=-1]="b2_unknown",Xn[Xn.b2_staticBody=0]="b2_staticBody",Xn[Xn.b2_kinematicBody=1]="b2_kinematicBody",Xn[Xn.b2_dynamicBody=2]="b2_dynamicBody";class hi{constructor(i,r){this.m_type=s.b2BodyType.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_activeFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new ct,this.m_xf0=new ct,this.m_sweep=new Pe,this.m_linearVelocity=new l,this.m_angularVelocity=0,this.m_force=new l,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_controllerList=null,this.m_controllerCount=0,this.m_bulletFlag=o(i.bullet,!1),this.m_fixedRotationFlag=o(i.fixedRotation,!1),this.m_autoSleepFlag=o(i.allowSleep,!0),this.m_awakeFlag=o(i.awake,!0),this.m_activeFlag=o(i.active,!0),this.m_world=r,this.m_xf.p.Copy(o(i.position,l.ZERO)),this.m_xf.q.SetAngle(o(i.angle,0)),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(o(i.linearVelocity,l.ZERO)),this.m_angularVelocity=o(i.angularVelocity,0),this.m_linearDamping=o(i.linearDamping,0),this.m_angularDamping=o(i.angularDamping,0),this.m_gravityScale=o(i.gravityScale,1),this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=o(i.type,s.b2BodyType.b2_staticBody),i.type===s.b2BodyType.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=i.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0}CreateFixture(i,r=0){return i instanceof Ps?this.CreateFixtureShapeDensity(i,r):this.CreateFixtureDef(i)}CreateFixtureDef(i){if(this.m_world.IsLocked())throw new Error;const r=new Cn(i,this);return r.Create(i),this.m_activeFlag&&r.CreateProxies(this.m_xf),r.m_next=this.m_fixtureList,this.m_fixtureList=r,++this.m_fixtureCount,r.m_density>0&&this.ResetMassData(),this.m_world.m_newFixture=!0,r}CreateFixtureShapeDensity(i,r=0){const u=hi.CreateFixtureShapeDensity_s_def;return u.shape=i,u.density=r,this.CreateFixtureDef(u)}DestroyFixture(i){if(this.m_world.IsLocked())throw new Error;let r=this.m_fixtureList,u=null;for(;r!==null;){if(r===i){u?u.m_next=i.m_next:this.m_fixtureList=i.m_next;break}u=r,r=r.m_next}let h=this.m_contactList;for(;h;){const m=h.contact;h=h.next;const _=m.GetFixtureA(),v=m.GetFixtureB();i!==_&&i!==v||this.m_world.m_contactManager.Destroy(m)}this.m_activeFlag&&i.DestroyProxies(),i.m_next=null,i.Destroy(),--this.m_fixtureCount,this.ResetMassData()}SetTransformVec(i,r){this.SetTransformXY(i.x,i.y,r)}SetTransformXY(i,r,u){if(this.m_world.IsLocked())throw new Error;this.m_xf.q.SetAngle(u),this.m_xf.p.Set(i,r),this.m_xf0.Copy(this.m_xf),ct.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=u,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=u;for(let h=this.m_fixtureList;h;h=h.m_next)h.Synchronize(this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}SetTransform(i){this.SetTransformVec(i.p,i.GetAngle())}GetTransform(){return this.m_xf}GetPosition(){return this.m_xf.p}SetPosition(i){this.SetTransformVec(i,this.GetAngle())}SetPositionXY(i,r){this.SetTransformXY(i,r,this.GetAngle())}GetAngle(){return this.m_sweep.a}SetAngle(i){this.SetTransformVec(this.GetPosition(),i)}GetWorldCenter(){return this.m_sweep.c}GetLocalCenter(){return this.m_sweep.localCenter}SetLinearVelocity(i){this.m_type!==s.b2BodyType.b2_staticBody&&(l.DotVV(i,i)>0&&this.SetAwake(!0),this.m_linearVelocity.Copy(i))}GetLinearVelocity(){return this.m_linearVelocity}SetAngularVelocity(i){this.m_type!==s.b2BodyType.b2_staticBody&&(i*i>0&&this.SetAwake(!0),this.m_angularVelocity=i)}GetAngularVelocity(){return this.m_angularVelocity}GetDefinition(i){return i.type=this.GetType(),i.allowSleep=this.m_autoSleepFlag,i.angle=this.GetAngle(),i.angularDamping=this.m_angularDamping,i.gravityScale=this.m_gravityScale,i.angularVelocity=this.m_angularVelocity,i.fixedRotation=this.m_fixedRotationFlag,i.bullet=this.m_bulletFlag,i.awake=this.m_awakeFlag,i.linearDamping=this.m_linearDamping,i.linearVelocity.Copy(this.GetLinearVelocity()),i.position.Copy(this.GetPosition()),i.userData=this.GetUserData(),i}ApplyForce(i,r,u=!0){this.m_type===s.b2BodyType.b2_dynamicBody&&(u&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=i.x,this.m_force.y+=i.y,this.m_torque+=(r.x-this.m_sweep.c.x)*i.y-(r.y-this.m_sweep.c.y)*i.x))}ApplyForceToCenter(i,r=!0){this.m_type===s.b2BodyType.b2_dynamicBody&&(r&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=i.x,this.m_force.y+=i.y))}ApplyTorque(i,r=!0){this.m_type===s.b2BodyType.b2_dynamicBody&&(r&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=i))}ApplyLinearImpulse(i,r,u=!0){this.m_type===s.b2BodyType.b2_dynamicBody&&(u&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*i.x,this.m_linearVelocity.y+=this.m_invMass*i.y,this.m_angularVelocity+=this.m_invI*((r.x-this.m_sweep.c.x)*i.y-(r.y-this.m_sweep.c.y)*i.x)))}ApplyLinearImpulseToCenter(i,r=!0){this.m_type===s.b2BodyType.b2_dynamicBody&&(r&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*i.x,this.m_linearVelocity.y+=this.m_invMass*i.y))}ApplyAngularImpulse(i,r=!0){this.m_type===s.b2BodyType.b2_dynamicBody&&(r&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*i))}GetMass(){return this.m_mass}GetInertia(){return this.m_I+this.m_mass*l.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)}GetMassData(i){return i.mass=this.m_mass,i.I=this.m_I+this.m_mass*l.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),i.center.Copy(this.m_sweep.localCenter),i}SetMassData(i){if(this.m_world.IsLocked())throw new Error;if(this.m_type!==s.b2BodyType.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=i.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,i.I>0&&!this.m_fixedRotationFlag&&(this.m_I=i.I-this.m_mass*l.DotVV(i.center,i.center),this.m_invI=1/this.m_I);const r=hi.SetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(i.center),ct.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),l.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,l.SubVV(this.m_sweep.c,r,l.s_t0),this.m_linearVelocity)}ResetMassData(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===s.b2BodyType.b2_staticBody||this.m_type===s.b2BodyType.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);const i=hi.ResetMassData_s_localCenter.SetZero();for(let u=this.m_fixtureList;u;u=u.m_next){if(u.m_density===0)continue;const h=u.GetMassData(hi.ResetMassData_s_massData);this.m_mass+=h.mass,i.x+=h.center.x*h.mass,i.y+=h.center.y*h.mass,this.m_I+=h.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,i.x*=this.m_invMass,i.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*l.DotVV(i,i),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);const r=hi.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(i),ct.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),l.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,l.SubVV(this.m_sweep.c,r,l.s_t0),this.m_linearVelocity)}GetWorldPoint(i,r){return ct.MulXV(this.m_xf,i,r)}GetWorldVector(i,r){return tt.MulRV(this.m_xf.q,i,r)}GetLocalPoint(i,r){return ct.MulTXV(this.m_xf,i,r)}GetLocalVector(i,r){return tt.MulTRV(this.m_xf.q,i,r)}GetLinearVelocityFromWorldPoint(i,r){return l.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,l.SubVV(i,this.m_sweep.c,l.s_t0),r)}GetLinearVelocityFromLocalPoint(i,r){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(i,r),r)}GetLinearDamping(){return this.m_linearDamping}SetLinearDamping(i){this.m_linearDamping=i}GetAngularDamping(){return this.m_angularDamping}SetAngularDamping(i){this.m_angularDamping=i}GetGravityScale(){return this.m_gravityScale}SetGravityScale(i){this.m_gravityScale=i}SetType(i){if(this.m_world.IsLocked())throw new Error;if(this.m_type===i)return;this.m_type=i,this.ResetMassData(),this.m_type===s.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;let r=this.m_contactList;for(;r;){const u=r;r=r.next,this.m_world.m_contactManager.Destroy(u.contact)}this.m_contactList=null;for(let u=this.m_fixtureList;u;u=u.m_next)u.TouchProxies()}GetType(){return this.m_type}SetBullet(i){this.m_bulletFlag=i}IsBullet(){return this.m_bulletFlag}SetSleepingAllowed(i){this.m_autoSleepFlag=i,i||this.SetAwake(!0)}IsSleepingAllowed(){return this.m_autoSleepFlag}SetAwake(i){i?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)}IsAwake(){return this.m_awakeFlag}SetActive(i){if(this.m_world.IsLocked())throw new Error;if(i!==this.IsActive())if(this.m_activeFlag=i,i)for(let r=this.m_fixtureList;r;r=r.m_next)r.CreateProxies(this.m_xf);else{for(let u=this.m_fixtureList;u;u=u.m_next)u.DestroyProxies();let r=this.m_contactList;for(;r;){const u=r;r=r.next,this.m_world.m_contactManager.Destroy(u.contact)}this.m_contactList=null}}IsActive(){return this.m_activeFlag}SetFixedRotation(i){this.m_fixedRotationFlag!==i&&(this.m_fixedRotationFlag=i,this.m_angularVelocity=0,this.ResetMassData())}IsFixedRotation(){return this.m_fixedRotationFlag}GetFixtureList(){return this.m_fixtureList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactList}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(i){this.m_userData=i}GetWorld(){return this.m_world}Dump(i){const r=this.m_islandIndex;i(`{
`),i(`  const bd: b2BodyDef = new b2BodyDef();
`);let u="";switch(this.m_type){case s.b2BodyType.b2_staticBody:u="b2BodyType.b2_staticBody";break;case s.b2BodyType.b2_kinematicBody:u="b2BodyType.b2_kinematicBody";break;case s.b2BodyType.b2_dynamicBody:u="b2BodyType.b2_dynamicBody"}i(`  bd.type = %s;
`,u),i(`  bd.position.Set(%.15f, %.15f);
`,this.m_xf.p.x,this.m_xf.p.y),i(`  bd.angle = %.15f;
`,this.m_sweep.a),i(`  bd.linearVelocity.Set(%.15f, %.15f);
`,this.m_linearVelocity.x,this.m_linearVelocity.y),i(`  bd.angularVelocity = %.15f;
`,this.m_angularVelocity),i(`  bd.linearDamping = %.15f;
`,this.m_linearDamping),i(`  bd.angularDamping = %.15f;
`,this.m_angularDamping),i(`  bd.allowSleep = %s;
`,this.m_autoSleepFlag?"true":"false"),i(`  bd.awake = %s;
`,this.m_awakeFlag?"true":"false"),i(`  bd.fixedRotation = %s;
`,this.m_fixedRotationFlag?"true":"false"),i(`  bd.bullet = %s;
`,this.m_bulletFlag?"true":"false"),i(`  bd.active = %s;
`,this.m_activeFlag?"true":"false"),i(`  bd.gravityScale = %.15f;
`,this.m_gravityScale),i(`
`),i(`  bodies[%d] = this.m_world.CreateBody(bd);
`,this.m_islandIndex),i(`
`);for(let h=this.m_fixtureList;h;h=h.m_next)i(`  {
`),h.Dump(i,r),i(`  }
`);i(`}
`)}SynchronizeFixtures(){const i=hi.SynchronizeFixtures_s_xf1;i.q.SetAngle(this.m_sweep.a0),tt.MulRV(i.q,this.m_sweep.localCenter,i.p),l.SubVV(this.m_sweep.c0,i.p,i.p);for(let r=this.m_fixtureList;r;r=r.m_next)r.Synchronize(i,this.m_xf)}SynchronizeTransform(){this.m_xf.q.SetAngle(this.m_sweep.a),tt.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),l.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}ShouldCollide(i){return(this.m_type!==s.b2BodyType.b2_staticBody||i.m_type!==s.b2BodyType.b2_staticBody)&&this.ShouldCollideConnected(i)}ShouldCollideConnected(i){for(let r=this.m_jointList;r;r=r.next)if(r.other===i&&!r.joint.m_collideConnected)return!1;return!0}Advance(i){this.m_sweep.Advance(i),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),tt.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),l.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}GetControllerList(){return this.m_controllerList}GetControllerCount(){return this.m_controllerCount}}hi.CreateFixtureShapeDensity_s_def=new wd,hi.SetMassData_s_oldCenter=new l,hi.ResetMassData_s_localCenter=new l,hi.ResetMassData_s_oldCenter=new l,hi.ResetMassData_s_massData=new Aa,hi.SynchronizeFixtures_s_xf1=new ct,(ae=s.b2JointType||(s.b2JointType={}))[ae.e_unknownJoint=0]="e_unknownJoint",ae[ae.e_revoluteJoint=1]="e_revoluteJoint",ae[ae.e_prismaticJoint=2]="e_prismaticJoint",ae[ae.e_distanceJoint=3]="e_distanceJoint",ae[ae.e_pulleyJoint=4]="e_pulleyJoint",ae[ae.e_mouseJoint=5]="e_mouseJoint",ae[ae.e_gearJoint=6]="e_gearJoint",ae[ae.e_wheelJoint=7]="e_wheelJoint",ae[ae.e_weldJoint=8]="e_weldJoint",ae[ae.e_frictionJoint=9]="e_frictionJoint",ae[ae.e_ropeJoint=10]="e_ropeJoint",ae[ae.e_motorJoint=11]="e_motorJoint",ae[ae.e_areaJoint=12]="e_areaJoint",($n=s.b2LimitState||(s.b2LimitState={}))[$n.e_inactiveLimit=0]="e_inactiveLimit",$n[$n.e_atLowerLimit=1]="e_atLowerLimit",$n[$n.e_atUpperLimit=2]="e_atUpperLimit",$n[$n.e_equalLimits=3]="e_equalLimits";class Lu{constructor(i,r){this.prev=null,this.next=null,this.joint=i,this.other=r}}class bi{constructor(i){this.type=s.b2JointType.e_unknownJoint,this.userData=null,this.collideConnected=!1,this.type=i}}class Pi{constructor(i){this.m_type=s.b2JointType.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_index=0,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=i.type,this.m_edgeA=new Lu(this,i.bodyB),this.m_edgeB=new Lu(this,i.bodyA),this.m_bodyA=i.bodyA,this.m_bodyB=i.bodyB,this.m_collideConnected=o(i.collideConnected,!1),this.m_userData=i.userData}GetType(){return this.m_type}GetBodyA(){return this.m_bodyA}GetBodyB(){return this.m_bodyB}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(i){this.m_userData=i}IsActive(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()}GetCollideConnected(){return this.m_collideConnected}Dump(i){i(`// Dump is not supported for this joint type.
`)}ShiftOrigin(i){}}class Cd extends bi{constructor(){super(s.b2JointType.e_distanceJoint),this.localAnchorA=new l,this.localAnchorB=new l,this.length=1,this.frequencyHz=0,this.dampingRatio=0}Initialize(i,r,u,h){this.bodyA=i,this.bodyB=r,this.bodyA.GetLocalPoint(u,this.localAnchorA),this.bodyB.GetLocalPoint(h,this.localAnchorB),this.length=l.DistanceVV(u,h),this.frequencyHz=0,this.dampingRatio=0}}class Mi extends Pi{constructor(i){super(i),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_gamma=0,this.m_impulse=0,this.m_length=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new l,this.m_rA=new l,this.m_rB=new l,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new tt,this.m_qB=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_frequencyHz=o(i.frequencyHz,0),this.m_dampingRatio=o(i.dampingRatio,0),this.m_localAnchorA.Copy(i.localAnchorA),this.m_localAnchorB.Copy(i.localAnchorB),this.m_length=i.length}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return r.x=i*this.m_impulse*this.m_u.x,r.y=i*this.m_impulse*this.m_u.y,r}GetReactionTorque(i){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetLength(i){this.m_length=i}Length(){return this.m_length}SetFrequency(i){this.m_frequencyHz=i}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(i){this.m_dampingRatio=i}GetDampingRatio(){return this.m_dampingRatio}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2DistanceJointDef = new b2DistanceJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.localAnchorA.Set(%.15f, %.15f);
`,this.m_localAnchorA.x,this.m_localAnchorA.y),i(`  jd.localAnchorB.Set(%.15f, %.15f);
`,this.m_localAnchorB.x,this.m_localAnchorB.y),i(`  jd.length = %.15f;
`,this.m_length),i(`  jd.frequencyHz = %.15f;
`,this.m_frequencyHz),i(`  jd.dampingRatio = %.15f;
`,this.m_dampingRatio),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexA].c,u=i.positions[this.m_indexA].a,h=i.velocities[this.m_indexA].v;let m=i.velocities[this.m_indexA].w;const _=i.positions[this.m_indexB].c,v=i.positions[this.m_indexB].a,w=i.velocities[this.m_indexB].v;let V=i.velocities[this.m_indexB].w;const b=this.m_qA.SetAngle(u),A=this.m_qB.SetAngle(v);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),tt.MulRV(b,this.m_lalcA,this.m_rA),l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),tt.MulRV(A,this.m_lalcB,this.m_rB),this.m_u.x=_.x+this.m_rB.x-r.x-this.m_rA.x,this.m_u.y=_.y+this.m_rB.y-r.y-this.m_rA.y;const P=this.m_u.Length();P>p?this.m_u.SelfMul(1/P):this.m_u.SetZero();const D=l.CrossVV(this.m_rA,this.m_u),R=l.CrossVV(this.m_rB,this.m_u);let z=this.m_invMassA+this.m_invIA*D*D+this.m_invMassB+this.m_invIB*R*R;if(this.m_mass=z!==0?1/z:0,this.m_frequencyHz>0){const U=P-this.m_length,J=2*f*this.m_frequencyHz,W=2*this.m_mass*this.m_dampingRatio*J,K=this.m_mass*J*J,it=i.step.dt;this.m_gamma=it*(W+it*K),this.m_gamma=this.m_gamma!==0?1/this.m_gamma:0,this.m_bias=U*it*K*this.m_gamma,z+=this.m_gamma,this.m_mass=z!==0?1/z:0}else this.m_gamma=0,this.m_bias=0;if(i.step.warmStarting){this.m_impulse*=i.step.dtRatio;const U=l.MulSV(this.m_impulse,this.m_u,Mi.InitVelocityConstraints_s_P);h.SelfMulSub(this.m_invMassA,U),m-=this.m_invIA*l.CrossVV(this.m_rA,U),w.SelfMulAdd(this.m_invMassB,U),V+=this.m_invIB*l.CrossVV(this.m_rB,U)}else this.m_impulse=0;i.velocities[this.m_indexA].w=m,i.velocities[this.m_indexB].w=V}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=l.AddVCrossSV(r,u,this.m_rA,Mi.SolveVelocityConstraints_s_vpA),v=l.AddVCrossSV(h,m,this.m_rB,Mi.SolveVelocityConstraints_s_vpB),w=l.DotVV(this.m_u,l.SubVV(v,_,l.s_t0)),V=-this.m_mass*(w+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=V;const b=l.MulSV(V,this.m_u,Mi.SolveVelocityConstraints_s_P);r.SelfMulSub(this.m_invMassA,b),u-=this.m_invIA*l.CrossVV(this.m_rA,b),h.SelfMulAdd(this.m_invMassB,b),m+=this.m_invIB*l.CrossVV(this.m_rB,b),i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m}SolvePositionConstraints(i){if(this.m_frequencyHz>0)return!0;const r=i.positions[this.m_indexA].c;let u=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let m=i.positions[this.m_indexB].a;const _=this.m_qA.SetAngle(u),v=this.m_qB.SetAngle(m),w=tt.MulRV(_,this.m_lalcA,this.m_rA),V=tt.MulRV(v,this.m_lalcB,this.m_rB),b=this.m_u;b.x=h.x+V.x-r.x-w.x,b.y=h.y+V.y-r.y-w.y;let P=this.m_u.Normalize()-this.m_length;P=yt(P,-L,L);const D=-this.m_mass*P,R=l.MulSV(D,b,Mi.SolvePositionConstraints_s_P);return r.SelfMulSub(this.m_invMassA,R),u-=this.m_invIA*l.CrossVV(w,R),h.SelfMulAdd(this.m_invMassB,R),m+=this.m_invIB*l.CrossVV(V,R),i.positions[this.m_indexA].a=u,i.positions[this.m_indexB].a=m,rt(P)<p}}Mi.InitVelocityConstraints_s_P=new l,Mi.SolveVelocityConstraints_s_vpA=new l,Mi.SolveVelocityConstraints_s_vpB=new l,Mi.SolveVelocityConstraints_s_P=new l,Mi.SolvePositionConstraints_s_P=new l;class Bd extends Pi{constructor(i){super(i),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_impulse=0,this.m_targetArea=0,this.m_bodies=i.bodies,this.m_frequencyHz=o(i.frequencyHz,0),this.m_dampingRatio=o(i.dampingRatio,0),this.m_targetLengths=Ut(i.bodies.length),this.m_normals=l.MakeArray(i.bodies.length),this.m_joints=[],this.m_deltas=l.MakeArray(i.bodies.length),this.m_delta=new l;const r=new Cd;r.frequencyHz=this.m_frequencyHz,r.dampingRatio=this.m_dampingRatio,this.m_targetArea=0;for(let u=0;u<this.m_bodies.length;++u){const h=this.m_bodies[u],m=this.m_bodies[(u+1)%this.m_bodies.length],_=h.GetWorldCenter(),v=m.GetWorldCenter();this.m_targetLengths[u]=l.DistanceVV(_,v),this.m_targetArea+=l.CrossVV(_,v),r.Initialize(h,m,_,v),this.m_joints[u]=h.GetWorld().CreateJoint(r)}this.m_targetArea*=.5}GetAnchorA(i){return i}GetAnchorB(i){return i}GetReactionForce(i,r){return r}GetReactionTorque(i){return 0}SetFrequency(i){this.m_frequencyHz=i;for(let r=0;r<this.m_joints.length;++r)this.m_joints[r].SetFrequency(i)}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(i){this.m_dampingRatio=i;for(let r=0;r<this.m_joints.length;++r)this.m_joints[r].SetDampingRatio(i)}GetDampingRatio(){return this.m_dampingRatio}Dump(i){i(`Area joint dumping is not supported.
`)}InitVelocityConstraints(i){for(let r=0;r<this.m_bodies.length;++r){const u=this.m_bodies[(r+this.m_bodies.length-1)%this.m_bodies.length],h=this.m_bodies[(r+1)%this.m_bodies.length],m=i.positions[u.m_islandIndex].c,_=i.positions[h.m_islandIndex].c,v=this.m_deltas[r];l.SubVV(_,m,v)}if(i.step.warmStarting){this.m_impulse*=i.step.dtRatio;for(let r=0;r<this.m_bodies.length;++r){const u=this.m_bodies[r],h=i.velocities[u.m_islandIndex].v,m=this.m_deltas[r];h.x+=u.m_invMass*m.y*.5*this.m_impulse,h.y+=u.m_invMass*-m.x*.5*this.m_impulse}}else this.m_impulse=0}SolveVelocityConstraints(i){let r=0,u=0;for(let m=0;m<this.m_bodies.length;++m){const _=this.m_bodies[m],v=i.velocities[_.m_islandIndex].v,w=this.m_deltas[m];r+=w.LengthSquared()/_.GetMass(),u+=l.CrossVV(v,w)}const h=-2*u/r;this.m_impulse+=h;for(let m=0;m<this.m_bodies.length;++m){const _=this.m_bodies[m],v=i.velocities[_.m_islandIndex].v,w=this.m_deltas[m];v.x+=_.m_invMass*w.y*.5*h,v.y+=_.m_invMass*-w.x*.5*h}}SolvePositionConstraints(i){let r=0,u=0;for(let v=0;v<this.m_bodies.length;++v){const w=this.m_bodies[v],V=this.m_bodies[(v+1)%this.m_bodies.length],b=i.positions[w.m_islandIndex].c,A=i.positions[V.m_islandIndex].c,P=l.SubVV(A,b,this.m_delta);let D=P.Length();D<c&&(D=1),this.m_normals[v].x=P.y/D,this.m_normals[v].y=-P.x/D,r+=D,u+=l.CrossVV(b,A)}u*=.5;const h=this.m_targetArea-u,m=.5*h/r;let _=!0;for(let v=0;v<this.m_bodies.length;++v){const w=this.m_bodies[v],V=i.positions[w.m_islandIndex].c,b=(v+1)%this.m_bodies.length,A=l.AddVV(this.m_normals[v],this.m_normals[b],this.m_delta);A.SelfMul(m);const P=A.LengthSquared();P>bt(L)&&A.SelfMul(L/Nt(P)),P>bt(p)&&(_=!1),V.x+=A.x,V.y+=A.y}return _}}class Bn extends Pi{constructor(i){super(i),this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_linearImpulse=new l,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new l,this.m_rB=new l,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new qt,this.m_angularMass=0,this.m_qA=new tt,this.m_qB=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_K=new qt,this.m_localAnchorA.Copy(i.localAnchorA),this.m_localAnchorB.Copy(i.localAnchorB),this.m_linearImpulse.SetZero(),this.m_maxForce=o(i.maxForce,0),this.m_maxTorque=o(i.maxTorque,0),this.m_linearMass.SetZero()}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexA].a,u=i.velocities[this.m_indexA].v;let h=i.velocities[this.m_indexA].w;const m=i.positions[this.m_indexB].a,_=i.velocities[this.m_indexB].v;let v=i.velocities[this.m_indexB].w;const w=this.m_qA.SetAngle(r),V=this.m_qB.SetAngle(m);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const b=tt.MulRV(w,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const A=tt.MulRV(V,this.m_lalcB,this.m_rB),P=this.m_invMassA,D=this.m_invMassB,R=this.m_invIA,z=this.m_invIB,U=this.m_K;if(U.ex.x=P+D+R*b.y*b.y+z*A.y*A.y,U.ex.y=-R*b.x*b.y-z*A.x*A.y,U.ey.x=U.ex.y,U.ey.y=P+D+R*b.x*b.x+z*A.x*A.x,U.GetInverse(this.m_linearMass),this.m_angularMass=R+z,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),i.step.warmStarting){this.m_linearImpulse.SelfMul(i.step.dtRatio),this.m_angularImpulse*=i.step.dtRatio;const J=this.m_linearImpulse;u.SelfMulSub(P,J),h-=R*(l.CrossVV(this.m_rA,J)+this.m_angularImpulse),_.SelfMulAdd(D,J),v+=z*(l.CrossVV(this.m_rB,J)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;i.velocities[this.m_indexA].w=h,i.velocities[this.m_indexB].w=v}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=this.m_invMassA,v=this.m_invMassB,w=this.m_invIA,V=this.m_invIB,b=i.step.dt;{const A=m-u;let P=-this.m_angularMass*A;const D=this.m_angularImpulse,R=b*this.m_maxTorque;this.m_angularImpulse=yt(this.m_angularImpulse+P,-R,R),P=this.m_angularImpulse-D,u-=w*P,m+=V*P}{const A=l.SubVV(l.AddVCrossSV(h,m,this.m_rB,l.s_t0),l.AddVCrossSV(r,u,this.m_rA,l.s_t1),Bn.SolveVelocityConstraints_s_Cdot_v2),P=qt.MulMV(this.m_linearMass,A,Bn.SolveVelocityConstraints_s_impulseV).SelfNeg(),D=Bn.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(P);const R=b*this.m_maxForce;this.m_linearImpulse.LengthSquared()>R*R&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(R)),l.SubVV(this.m_linearImpulse,D,P),r.SelfMulSub(_,P),u-=w*l.CrossVV(this.m_rA,P),h.SelfMulAdd(v,P),m+=V*l.CrossVV(this.m_rB,P)}i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m}SolvePositionConstraints(i){return!0}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return r.x=i*this.m_linearImpulse.x,r.y=i*this.m_linearImpulse.y,r}GetReactionTorque(i){return i*this.m_angularImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxForce(i){this.m_maxForce=i}GetMaxForce(){return this.m_maxForce}SetMaxTorque(i){this.m_maxTorque=i}GetMaxTorque(){return this.m_maxTorque}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2FrictionJointDef = new b2FrictionJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.localAnchorA.Set(%.15f, %.15f);
`,this.m_localAnchorA.x,this.m_localAnchorA.y),i(`  jd.localAnchorB.Set(%.15f, %.15f);
`,this.m_localAnchorB.x,this.m_localAnchorB.y),i(`  jd.maxForce = %.15f;
`,this.m_maxForce),i(`  jd.maxTorque = %.15f;
`,this.m_maxTorque),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}}Bn.SolveVelocityConstraints_s_Cdot_v2=new l,Bn.SolveVelocityConstraints_s_impulseV=new l,Bn.SolveVelocityConstraints_s_oldImpulseV=new l;class ce extends Pi{constructor(i){let r,u;super(i),this.m_typeA=s.b2JointType.e_unknownJoint,this.m_typeB=s.b2JointType.e_unknownJoint,this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_localAnchorC=new l,this.m_localAnchorD=new l,this.m_localAxisC=new l,this.m_localAxisD=new l,this.m_referenceAngleA=0,this.m_referenceAngleB=0,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_indexC=0,this.m_indexD=0,this.m_lcA=new l,this.m_lcB=new l,this.m_lcC=new l,this.m_lcD=new l,this.m_mA=0,this.m_mB=0,this.m_mC=0,this.m_mD=0,this.m_iA=0,this.m_iB=0,this.m_iC=0,this.m_iD=0,this.m_JvAC=new l,this.m_JvBD=new l,this.m_JwA=0,this.m_JwB=0,this.m_JwC=0,this.m_JwD=0,this.m_mass=0,this.m_qA=new tt,this.m_qB=new tt,this.m_qC=new tt,this.m_qD=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_lalcC=new l,this.m_lalcD=new l,this.m_joint1=i.joint1,this.m_joint2=i.joint2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB();const h=this.m_bodyA.m_xf,m=this.m_bodyA.m_sweep.a,_=this.m_bodyC.m_xf,v=this.m_bodyC.m_sweep.a;if(this.m_typeA===s.b2JointType.e_revoluteJoint){const P=i.joint1;this.m_localAnchorC.Copy(P.m_localAnchorA),this.m_localAnchorA.Copy(P.m_localAnchorB),this.m_referenceAngleA=P.m_referenceAngle,this.m_localAxisC.SetZero(),r=m-v-this.m_referenceAngleA}else{const P=i.joint1;this.m_localAnchorC.Copy(P.m_localAnchorA),this.m_localAnchorA.Copy(P.m_localAnchorB),this.m_referenceAngleA=P.m_referenceAngle,this.m_localAxisC.Copy(P.m_localXAxisA);const D=this.m_localAnchorC,R=tt.MulTRV(_.q,l.AddVV(tt.MulRV(h.q,this.m_localAnchorA,l.s_t0),l.SubVV(h.p,_.p,l.s_t1),l.s_t0),l.s_t0);r=l.DotVV(l.SubVV(R,D,l.s_t0),this.m_localAxisC)}this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB();const w=this.m_bodyB.m_xf,V=this.m_bodyB.m_sweep.a,b=this.m_bodyD.m_xf,A=this.m_bodyD.m_sweep.a;if(this.m_typeB===s.b2JointType.e_revoluteJoint){const P=i.joint2;this.m_localAnchorD.Copy(P.m_localAnchorA),this.m_localAnchorB.Copy(P.m_localAnchorB),this.m_referenceAngleB=P.m_referenceAngle,this.m_localAxisD.SetZero(),u=V-A-this.m_referenceAngleB}else{const P=i.joint2;this.m_localAnchorD.Copy(P.m_localAnchorA),this.m_localAnchorB.Copy(P.m_localAnchorB),this.m_referenceAngleB=P.m_referenceAngle,this.m_localAxisD.Copy(P.m_localXAxisA);const D=this.m_localAnchorD,R=tt.MulTRV(b.q,l.AddVV(tt.MulRV(w.q,this.m_localAnchorB,l.s_t0),l.SubVV(w.p,b.p,l.s_t1),l.s_t0),l.s_t0);u=l.DotVV(l.SubVV(R,D,l.s_t0),this.m_localAxisD)}this.m_ratio=o(i.ratio,1),this.m_constant=r+this.m_ratio*u,this.m_impulse=0}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;const r=i.positions[this.m_indexA].a,u=i.velocities[this.m_indexA].v;let h=i.velocities[this.m_indexA].w;const m=i.positions[this.m_indexB].a,_=i.velocities[this.m_indexB].v;let v=i.velocities[this.m_indexB].w;const w=i.positions[this.m_indexC].a,V=i.velocities[this.m_indexC].v;let b=i.velocities[this.m_indexC].w;const A=i.positions[this.m_indexD].a,P=i.velocities[this.m_indexD].v;let D=i.velocities[this.m_indexD].w;const R=this.m_qA.SetAngle(r),z=this.m_qB.SetAngle(m),U=this.m_qC.SetAngle(w),J=this.m_qD.SetAngle(A);if(this.m_mass=0,this.m_typeA===s.b2JointType.e_revoluteJoint)this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{const W=tt.MulRV(U,this.m_localAxisC,ce.InitVelocityConstraints_s_u);l.SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC);const K=tt.MulRV(U,this.m_lalcC,ce.InitVelocityConstraints_s_rC);l.SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA);const it=tt.MulRV(R,this.m_lalcA,ce.InitVelocityConstraints_s_rA);this.m_JvAC.Copy(W),this.m_JwC=l.CrossVV(K,W),this.m_JwA=l.CrossVV(it,W),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_typeB===s.b2JointType.e_revoluteJoint)this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{const W=tt.MulRV(J,this.m_localAxisD,ce.InitVelocityConstraints_s_u);l.SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD);const K=tt.MulRV(J,this.m_lalcD,ce.InitVelocityConstraints_s_rD);l.SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB);const it=tt.MulRV(z,this.m_lalcB,ce.InitVelocityConstraints_s_rB);l.MulSV(this.m_ratio,W,this.m_JvBD),this.m_JwD=this.m_ratio*l.CrossVV(K,W),this.m_JwB=this.m_ratio*l.CrossVV(it,W),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,i.step.warmStarting?(u.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),h+=this.m_iA*this.m_impulse*this.m_JwA,_.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),v+=this.m_iB*this.m_impulse*this.m_JwB,V.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),b-=this.m_iC*this.m_impulse*this.m_JwC,P.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),D-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,i.velocities[this.m_indexA].w=h,i.velocities[this.m_indexB].w=v,i.velocities[this.m_indexC].w=b,i.velocities[this.m_indexD].w=D}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=i.velocities[this.m_indexC].v;let v=i.velocities[this.m_indexC].w;const w=i.velocities[this.m_indexD].v;let V=i.velocities[this.m_indexD].w,b=l.DotVV(this.m_JvAC,l.SubVV(r,_,l.s_t0))+l.DotVV(this.m_JvBD,l.SubVV(h,w,l.s_t0));b+=this.m_JwA*u-this.m_JwC*v+(this.m_JwB*m-this.m_JwD*V);const A=-this.m_mass*b;this.m_impulse+=A,r.SelfMulAdd(this.m_mA*A,this.m_JvAC),u+=this.m_iA*A*this.m_JwA,h.SelfMulAdd(this.m_mB*A,this.m_JvBD),m+=this.m_iB*A*this.m_JwB,_.SelfMulSub(this.m_mC*A,this.m_JvAC),v-=this.m_iC*A*this.m_JwC,w.SelfMulSub(this.m_mD*A,this.m_JvBD),V-=this.m_iD*A*this.m_JwD,i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m,i.velocities[this.m_indexC].w=v,i.velocities[this.m_indexD].w=V}SolvePositionConstraints(i){const r=i.positions[this.m_indexA].c;let u=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let m=i.positions[this.m_indexB].a;const _=i.positions[this.m_indexC].c;let v=i.positions[this.m_indexC].a;const w=i.positions[this.m_indexD].c;let V=i.positions[this.m_indexD].a;const b=this.m_qA.SetAngle(u),A=this.m_qB.SetAngle(m),P=this.m_qC.SetAngle(v),D=this.m_qD.SetAngle(V);let R,z;const U=this.m_JvAC,J=this.m_JvBD;let W,K,it,at,st=0;if(this.m_typeA===s.b2JointType.e_revoluteJoint)U.SetZero(),W=1,it=1,st+=this.m_iA+this.m_iC,R=u-v-this.m_referenceAngleA;else{const Dt=tt.MulRV(P,this.m_localAxisC,ce.SolvePositionConstraints_s_u),It=tt.MulRV(P,this.m_lalcC,ce.SolvePositionConstraints_s_rC),Mt=tt.MulRV(b,this.m_lalcA,ce.SolvePositionConstraints_s_rA);U.Copy(Dt),it=l.CrossVV(It,Dt),W=l.CrossVV(Mt,Dt),st+=this.m_mC+this.m_mA+this.m_iC*it*it+this.m_iA*W*W;const At=this.m_lalcC,vt=tt.MulTRV(P,l.AddVV(Mt,l.SubVV(r,_,l.s_t0),l.s_t0),l.s_t0);R=l.DotVV(l.SubVV(vt,At,l.s_t0),this.m_localAxisC)}if(this.m_typeB===s.b2JointType.e_revoluteJoint)J.SetZero(),K=this.m_ratio,at=this.m_ratio,st+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),z=m-V-this.m_referenceAngleB;else{const Dt=tt.MulRV(D,this.m_localAxisD,ce.SolvePositionConstraints_s_u),It=tt.MulRV(D,this.m_lalcD,ce.SolvePositionConstraints_s_rD),Mt=tt.MulRV(A,this.m_lalcB,ce.SolvePositionConstraints_s_rB);l.MulSV(this.m_ratio,Dt,J),at=this.m_ratio*l.CrossVV(It,Dt),K=this.m_ratio*l.CrossVV(Mt,Dt),st+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*at*at+this.m_iB*K*K;const At=this.m_lalcD,vt=tt.MulTRV(D,l.AddVV(Mt,l.SubVV(h,w,l.s_t0),l.s_t0),l.s_t0);z=l.DotVV(l.SubVV(vt,At,l.s_t0),this.m_localAxisD)}const pt=R+this.m_ratio*z-this.m_constant;let St=0;return st>0&&(St=-pt/st),r.SelfMulAdd(this.m_mA*St,U),u+=this.m_iA*St*W,h.SelfMulAdd(this.m_mB*St,J),m+=this.m_iB*St*K,_.SelfMulSub(this.m_mC*St,U),v-=this.m_iC*St*it,w.SelfMulSub(this.m_mD*St,J),V-=this.m_iD*St*at,i.positions[this.m_indexA].a=u,i.positions[this.m_indexB].a=m,i.positions[this.m_indexC].a=v,i.positions[this.m_indexD].a=V,0<p}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return l.MulSV(i*this.m_impulse,this.m_JvAC,r)}GetReactionTorque(i){return i*this.m_impulse*this.m_JwA}GetJoint1(){return this.m_joint1}GetJoint2(){return this.m_joint2}GetRatio(){return this.m_ratio}SetRatio(i){this.m_ratio=i}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex,h=this.m_joint1.m_index,m=this.m_joint2.m_index;i(`  const jd: b2GearJointDef = new b2GearJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.joint1 = joints[%d];
`,h),i(`  jd.joint2 = joints[%d];
`,m),i(`  jd.ratio = %.15f;
`,this.m_ratio),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}}ce.InitVelocityConstraints_s_u=new l,ce.InitVelocityConstraints_s_rA=new l,ce.InitVelocityConstraints_s_rB=new l,ce.InitVelocityConstraints_s_rC=new l,ce.InitVelocityConstraints_s_rD=new l,ce.SolvePositionConstraints_s_u=new l,ce.SolvePositionConstraints_s_rA=new l,ce.SolvePositionConstraints_s_rB=new l,ce.SolvePositionConstraints_s_rC=new l,ce.SolvePositionConstraints_s_rD=new l;class An extends Pi{constructor(i){super(i),this.m_linearOffset=new l,this.m_angularOffset=0,this.m_linearImpulse=new l,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_correctionFactor=.3,this.m_indexA=0,this.m_indexB=0,this.m_rA=new l,this.m_rB=new l,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_linearError=new l,this.m_angularError=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new qt,this.m_angularMass=0,this.m_qA=new tt,this.m_qB=new tt,this.m_K=new qt,this.m_linearOffset.Copy(o(i.linearOffset,l.ZERO)),this.m_linearImpulse.SetZero(),this.m_maxForce=o(i.maxForce,0),this.m_maxTorque=o(i.maxTorque,0),this.m_correctionFactor=o(i.correctionFactor,.3)}GetAnchorA(i){const r=this.m_bodyA.GetPosition();return i.x=r.x,i.y=r.y,i}GetAnchorB(i){const r=this.m_bodyB.GetPosition();return i.x=r.x,i.y=r.y,i}GetReactionForce(i,r){return l.MulSV(i,this.m_linearImpulse,r)}GetReactionTorque(i){return i*this.m_angularImpulse}SetLinearOffset(i){l.IsEqualToV(i,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(i))}GetLinearOffset(){return this.m_linearOffset}SetAngularOffset(i){i!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=i)}GetAngularOffset(){return this.m_angularOffset}SetMaxForce(i){this.m_maxForce=i}GetMaxForce(){return this.m_maxForce}SetMaxTorque(i){this.m_maxTorque=i}GetMaxTorque(){return this.m_maxTorque}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexA].c,u=i.positions[this.m_indexA].a,h=i.velocities[this.m_indexA].v;let m=i.velocities[this.m_indexA].w;const _=i.positions[this.m_indexB].c,v=i.positions[this.m_indexB].a,w=i.velocities[this.m_indexB].v;let V=i.velocities[this.m_indexB].w;const b=this.m_qA.SetAngle(u),A=this.m_qB.SetAngle(v),P=tt.MulRV(b,l.SubVV(this.m_linearOffset,this.m_localCenterA,l.s_t0),this.m_rA),D=tt.MulRV(A,l.NegV(this.m_localCenterB,l.s_t0),this.m_rB),R=this.m_invMassA,z=this.m_invMassB,U=this.m_invIA,J=this.m_invIB,W=this.m_K;if(W.ex.x=R+z+U*P.y*P.y+J*D.y*D.y,W.ex.y=-U*P.x*P.y-J*D.x*D.y,W.ey.x=W.ex.y,W.ey.y=R+z+U*P.x*P.x+J*D.x*D.x,W.GetInverse(this.m_linearMass),this.m_angularMass=U+J,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),l.SubVV(l.AddVV(_,D,l.s_t0),l.AddVV(r,P,l.s_t1),this.m_linearError),this.m_angularError=v-u-this.m_angularOffset,i.step.warmStarting){this.m_linearImpulse.SelfMul(i.step.dtRatio),this.m_angularImpulse*=i.step.dtRatio;const K=this.m_linearImpulse;h.SelfMulSub(R,K),m-=U*(l.CrossVV(P,K)+this.m_angularImpulse),w.SelfMulAdd(z,K),V+=J*(l.CrossVV(D,K)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;i.velocities[this.m_indexA].w=m,i.velocities[this.m_indexB].w=V}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=this.m_invMassA,v=this.m_invMassB,w=this.m_invIA,V=this.m_invIB,b=i.step.dt,A=i.step.inv_dt;{const P=m-u+A*this.m_correctionFactor*this.m_angularError;let D=-this.m_angularMass*P;const R=this.m_angularImpulse,z=b*this.m_maxTorque;this.m_angularImpulse=yt(this.m_angularImpulse+D,-z,z),D=this.m_angularImpulse-R,u-=w*D,m+=V*D}{const P=this.m_rA,D=this.m_rB,R=l.AddVV(l.SubVV(l.AddVV(h,l.CrossSV(m,D,l.s_t0),l.s_t0),l.AddVV(r,l.CrossSV(u,P,l.s_t1),l.s_t1),l.s_t2),l.MulSV(A*this.m_correctionFactor,this.m_linearError,l.s_t3),An.SolveVelocityConstraints_s_Cdot_v2),z=qt.MulMV(this.m_linearMass,R,An.SolveVelocityConstraints_s_impulse_v2).SelfNeg(),U=An.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(z);const J=b*this.m_maxForce;this.m_linearImpulse.LengthSquared()>J*J&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(J)),l.SubVV(this.m_linearImpulse,U,z),r.SelfMulSub(_,z),u-=w*l.CrossVV(P,z),h.SelfMulAdd(v,z),m+=V*l.CrossVV(D,z)}i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m}SolvePositionConstraints(i){return!0}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2MotorJointDef = new b2MotorJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.linearOffset.Set(%.15f, %.15f);
`,this.m_linearOffset.x,this.m_linearOffset.y),i(`  jd.angularOffset = %.15f;
`,this.m_angularOffset),i(`  jd.maxForce = %.15f;
`,this.m_maxForce),i(`  jd.maxTorque = %.15f;
`,this.m_maxTorque),i(`  jd.correctionFactor = %.15f;
`,this.m_correctionFactor),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}}An.SolveVelocityConstraints_s_Cdot_v2=new l,An.SolveVelocityConstraints_s_impulse_v2=new l,An.SolveVelocityConstraints_s_oldImpulse_v2=new l;class Vn extends Pi{constructor(i){super(i),this.m_localAnchorB=new l,this.m_targetA=new l,this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_beta=0,this.m_impulse=new l,this.m_maxForce=0,this.m_gamma=0,this.m_indexA=0,this.m_indexB=0,this.m_rB=new l,this.m_localCenterB=new l,this.m_invMassB=0,this.m_invIB=0,this.m_mass=new qt,this.m_C=new l,this.m_qB=new tt,this.m_lalcB=new l,this.m_K=new qt,this.m_targetA.Copy(o(i.target,l.ZERO)),ct.MulTXV(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=o(i.maxForce,0),this.m_impulse.SetZero(),this.m_frequencyHz=o(i.frequencyHz,0),this.m_dampingRatio=o(i.dampingRatio,0),this.m_beta=0,this.m_gamma=0}SetTarget(i){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(i)}GetTarget(){return this.m_targetA}SetMaxForce(i){this.m_maxForce=i}GetMaxForce(){return this.m_maxForce}SetFrequency(i){this.m_frequencyHz=i}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(i){this.m_dampingRatio=i}GetDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(i){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexB].c,u=i.positions[this.m_indexB].a,h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=this.m_qB.SetAngle(u),v=this.m_bodyB.GetMass(),w=2*f*this.m_frequencyHz,V=2*v*this.m_dampingRatio*w,b=v*(w*w),A=i.step.dt;this.m_gamma=A*(V+A*b),this.m_gamma!==0&&(this.m_gamma=1/this.m_gamma),this.m_beta=A*b*this.m_gamma,l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),tt.MulRV(_,this.m_lalcB,this.m_rB);const P=this.m_K;P.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,P.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,P.ey.x=P.ex.y,P.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,P.GetInverse(this.m_mass),this.m_C.x=r.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=r.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),m*=.98,i.step.warmStarting?(this.m_impulse.SelfMul(i.step.dtRatio),h.x+=this.m_invMassB*this.m_impulse.x,h.y+=this.m_invMassB*this.m_impulse.y,m+=this.m_invIB*l.CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),i.velocities[this.m_indexB].w=m}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexB].v;let u=i.velocities[this.m_indexB].w;const h=l.AddVCrossSV(r,u,this.m_rB,Vn.SolveVelocityConstraints_s_Cdot),m=qt.MulMV(this.m_mass,l.AddVV(h,l.AddVV(this.m_C,l.MulSV(this.m_gamma,this.m_impulse,l.s_t0),l.s_t0),l.s_t0).SelfNeg(),Vn.SolveVelocityConstraints_s_impulse),_=Vn.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse);this.m_impulse.SelfAdd(m);const v=i.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>v*v&&this.m_impulse.SelfMul(v/this.m_impulse.Length()),l.SubVV(this.m_impulse,_,m),r.SelfMulAdd(this.m_invMassB,m),u+=this.m_invIB*l.CrossVV(this.m_rB,m),i.velocities[this.m_indexB].w=u}SolvePositionConstraints(i){return!0}GetAnchorA(i){return i.x=this.m_targetA.x,i.y=this.m_targetA.y,i}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return l.MulSV(i,this.m_impulse,r)}GetReactionTorque(i){return 0}Dump(i){i(`Mouse joint dumping is not supported.
`)}ShiftOrigin(i){this.m_targetA.SelfSub(i)}}Vn.SolveVelocityConstraints_s_Cdot=new l,Vn.SolveVelocityConstraints_s_impulse=new l,Vn.SolveVelocityConstraints_s_oldImpulse=new l;class Zt extends Pi{constructor(i){super(i),this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_localXAxisA=new l,this.m_localYAxisA=new l,this.m_referenceAngle=0,this.m_impulse=new $t(0,0,0),this.m_motorImpulse=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorForce=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_limitState=s.b2LimitState.e_inactiveLimit,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_axis=new l(0,0),this.m_perp=new l(0,0),this.m_s1=0,this.m_s2=0,this.m_a1=0,this.m_a2=0,this.m_K=new de,this.m_K3=new de,this.m_K2=new qt,this.m_motorMass=0,this.m_qA=new tt,this.m_qB=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_rA=new l,this.m_rB=new l,this.m_localAnchorA.Copy(o(i.localAnchorA,l.ZERO)),this.m_localAnchorB.Copy(o(i.localAnchorB,l.ZERO)),this.m_localXAxisA.Copy(o(i.localAxisA,new l(1,0))).SelfNormalize(),l.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_referenceAngle=o(i.referenceAngle,0),this.m_lowerTranslation=o(i.lowerTranslation,0),this.m_upperTranslation=o(i.upperTranslation,0),this.m_maxMotorForce=o(i.maxMotorForce,0),this.m_motorSpeed=o(i.motorSpeed,0),this.m_enableLimit=o(i.enableLimit,!1),this.m_enableMotor=o(i.enableMotor,!1)}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexA].c,u=i.positions[this.m_indexA].a,h=i.velocities[this.m_indexA].v;let m=i.velocities[this.m_indexA].w;const _=i.positions[this.m_indexB].c,v=i.positions[this.m_indexB].a,w=i.velocities[this.m_indexB].v;let V=i.velocities[this.m_indexB].w;const b=this.m_qA.SetAngle(u),A=this.m_qB.SetAngle(v);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const P=tt.MulRV(b,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const D=tt.MulRV(A,this.m_lalcB,this.m_rB),R=l.AddVV(l.SubVV(_,r,l.s_t0),l.SubVV(D,P,l.s_t1),Zt.InitVelocityConstraints_s_d),z=this.m_invMassA,U=this.m_invMassB,J=this.m_invIA,W=this.m_invIB;if(tt.MulRV(b,this.m_localXAxisA,this.m_axis),this.m_a1=l.CrossVV(l.AddVV(R,P,l.s_t0),this.m_axis),this.m_a2=l.CrossVV(D,this.m_axis),this.m_motorMass=z+U+J*this.m_a1*this.m_a1+W*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),tt.MulRV(b,this.m_localYAxisA,this.m_perp),this.m_s1=l.CrossVV(l.AddVV(R,P,l.s_t0),this.m_perp),this.m_s2=l.CrossVV(D,this.m_perp),this.m_K.ex.x=z+U+J*this.m_s1*this.m_s1+W*this.m_s2*this.m_s2,this.m_K.ex.y=J*this.m_s1+W*this.m_s2,this.m_K.ex.z=J*this.m_s1*this.m_a1+W*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=J+W,this.m_K.ey.y===0&&(this.m_K.ey.y=1),this.m_K.ey.z=J*this.m_a1+W*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=z+U+J*this.m_a1*this.m_a1+W*this.m_a2*this.m_a2,this.m_enableLimit){const K=l.DotVV(this.m_axis,R);rt(this.m_upperTranslation-this.m_lowerTranslation)<2*p?this.m_limitState=s.b2LimitState.e_equalLimits:K<=this.m_lowerTranslation?this.m_limitState!==s.b2LimitState.e_atLowerLimit&&(this.m_limitState=s.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):K>=this.m_upperTranslation?this.m_limitState!==s.b2LimitState.e_atUpperLimit&&(this.m_limitState=s.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=s.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=s.b2LimitState.e_inactiveLimit,this.m_impulse.z=0;if(this.m_enableMotor||(this.m_motorImpulse=0),i.step.warmStarting){this.m_impulse.SelfMul(i.step.dtRatio),this.m_motorImpulse*=i.step.dtRatio;const K=l.AddVV(l.MulSV(this.m_impulse.x,this.m_perp,l.s_t0),l.MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,l.s_t1),Zt.InitVelocityConstraints_s_P),it=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,at=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;h.SelfMulSub(z,K),m-=J*it,w.SelfMulAdd(U,K),V+=W*at}else this.m_impulse.SetZero(),this.m_motorImpulse=0;i.velocities[this.m_indexA].w=m,i.velocities[this.m_indexB].w=V}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=this.m_invMassA,v=this.m_invMassB,w=this.m_invIA,V=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!==s.b2LimitState.e_equalLimits){const P=l.DotVV(this.m_axis,l.SubVV(h,r,l.s_t0))+this.m_a2*m-this.m_a1*u;let D=this.m_motorMass*(this.m_motorSpeed-P);const R=this.m_motorImpulse,z=i.step.dt*this.m_maxMotorForce;this.m_motorImpulse=yt(this.m_motorImpulse+D,-z,z),D=this.m_motorImpulse-R;const U=l.MulSV(D,this.m_axis,Zt.SolveVelocityConstraints_s_P),J=D*this.m_a1,W=D*this.m_a2;r.SelfMulSub(_,U),u-=w*J,h.SelfMulAdd(v,U),m+=V*W}const b=l.DotVV(this.m_perp,l.SubVV(h,r,l.s_t0))+this.m_s2*m-this.m_s1*u,A=m-u;if(this.m_enableLimit&&this.m_limitState!==s.b2LimitState.e_inactiveLimit){const P=l.DotVV(this.m_axis,l.SubVV(h,r,l.s_t0))+this.m_a2*m-this.m_a1*u,D=Zt.SolveVelocityConstraints_s_f1.Copy(this.m_impulse),R=this.m_K.Solve33(-b,-A,-P,Zt.SolveVelocityConstraints_s_df3);this.m_impulse.SelfAdd(R),this.m_limitState===s.b2LimitState.e_atLowerLimit?this.m_impulse.z=ut(this.m_impulse.z,0):this.m_limitState===s.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=dt(this.m_impulse.z,0));const z=-b-(this.m_impulse.z-D.z)*this.m_K.ez.x,U=-A-(this.m_impulse.z-D.z)*this.m_K.ez.y,J=this.m_K.Solve22(z,U,Zt.SolveVelocityConstraints_s_f2r);J.x+=D.x,J.y+=D.y,this.m_impulse.x=J.x,this.m_impulse.y=J.y,R.x=this.m_impulse.x-D.x,R.y=this.m_impulse.y-D.y,R.z=this.m_impulse.z-D.z;const W=l.AddVV(l.MulSV(R.x,this.m_perp,l.s_t0),l.MulSV(R.z,this.m_axis,l.s_t1),Zt.SolveVelocityConstraints_s_P),K=R.x*this.m_s1+R.y+R.z*this.m_a1,it=R.x*this.m_s2+R.y+R.z*this.m_a2;r.SelfMulSub(_,W),u-=w*K,h.SelfMulAdd(v,W),m+=V*it}else{const P=this.m_K.Solve22(-b,-A,Zt.SolveVelocityConstraints_s_df2);this.m_impulse.x+=P.x,this.m_impulse.y+=P.y;const D=l.MulSV(P.x,this.m_perp,Zt.SolveVelocityConstraints_s_P),R=P.x*this.m_s1+P.y,z=P.x*this.m_s2+P.y;r.SelfMulSub(_,D),u-=w*R,h.SelfMulAdd(v,D),m+=V*z}i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m}SolvePositionConstraints(i){const r=i.positions[this.m_indexA].c;let u=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let m=i.positions[this.m_indexB].a;const _=this.m_qA.SetAngle(u),v=this.m_qB.SetAngle(m),w=this.m_invMassA,V=this.m_invMassB,b=this.m_invIA,A=this.m_invIB,P=tt.MulRV(_,this.m_lalcA,this.m_rA),D=tt.MulRV(v,this.m_lalcB,this.m_rB),R=l.SubVV(l.AddVV(h,D,l.s_t0),l.AddVV(r,P,l.s_t1),Zt.SolvePositionConstraints_s_d),z=tt.MulRV(_,this.m_localXAxisA,this.m_axis),U=l.CrossVV(l.AddVV(R,P,l.s_t0),z),J=l.CrossVV(D,z),W=tt.MulRV(_,this.m_localYAxisA,this.m_perp),K=l.CrossVV(l.AddVV(R,P,l.s_t0),W),it=l.CrossVV(D,W);let at=Zt.SolvePositionConstraints_s_impulse;const st=l.DotVV(W,R),pt=m-u-this.m_referenceAngle;let St=rt(st);const Dt=rt(pt);let It=!1,Mt=0;if(this.m_enableLimit){const Ft=l.DotVV(z,R);rt(this.m_upperTranslation-this.m_lowerTranslation)<2*p?(Mt=yt(Ft,-L,L),St=ut(St,rt(Ft)),It=!0):Ft<=this.m_lowerTranslation?(Mt=yt(Ft-this.m_lowerTranslation+p,-L,0),St=ut(St,this.m_lowerTranslation-Ft),It=!0):Ft>=this.m_upperTranslation&&(Mt=yt(Ft-this.m_upperTranslation-p,0,L),St=ut(St,Ft-this.m_upperTranslation),It=!0)}if(It){const Ft=w+V+b*K*K+A*it*it,Qt=b*K+A*it,le=b*K*U+A*it*J;let oe=b+A;oe===0&&(oe=1);const Re=b*U+A*J,vi=w+V+b*U*U+A*J*J,Je=this.m_K3;Je.ex.SetXYZ(Ft,Qt,le),Je.ey.SetXYZ(Qt,oe,Re),Je.ez.SetXYZ(le,Re,vi),at=Je.Solve33(-st,-pt,-Mt,at)}else{const Ft=w+V+b*K*K+A*it*it,Qt=b*K+A*it;let le=b+A;le===0&&(le=1);const oe=this.m_K2;oe.ex.Set(Ft,Qt),oe.ey.Set(Qt,le);const Re=oe.Solve(-st,-pt,Zt.SolvePositionConstraints_s_impulse1);at.x=Re.x,at.y=Re.y,at.z=0}const At=l.AddVV(l.MulSV(at.x,W,l.s_t0),l.MulSV(at.z,z,l.s_t1),Zt.SolvePositionConstraints_s_P),vt=at.x*K+at.y+at.z*U,Wt=at.x*it+at.y+at.z*J;return r.SelfMulSub(w,At),u-=b*vt,h.SelfMulAdd(V,At),m+=A*Wt,i.positions[this.m_indexA].a=u,i.positions[this.m_indexB].a=m,St<=p&&Dt<=C}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return r.x=i*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),r.y=i*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y),r}GetReactionTorque(i){return i*this.m_impulse.y}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetReferenceAngle(){return this.m_referenceAngle}GetJointTranslation(){const i=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,Zt.GetJointTranslation_s_pA),r=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,Zt.GetJointTranslation_s_pB),u=l.SubVV(r,i,Zt.GetJointTranslation_s_d),h=this.m_bodyA.GetWorldVector(this.m_localXAxisA,Zt.GetJointTranslation_s_axis);return l.DotVV(u,h)}GetJointSpeed(){const i=this.m_bodyA,r=this.m_bodyB;l.SubVV(this.m_localAnchorA,i.m_sweep.localCenter,this.m_lalcA);const u=tt.MulRV(i.m_xf.q,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,r.m_sweep.localCenter,this.m_lalcB);const h=tt.MulRV(r.m_xf.q,this.m_lalcB,this.m_rB),m=l.AddVV(i.m_sweep.c,u,l.s_t0),_=l.AddVV(r.m_sweep.c,h,l.s_t1),v=l.SubVV(_,m,l.s_t2),w=i.GetWorldVector(this.m_localXAxisA,this.m_axis),V=i.m_linearVelocity,b=r.m_linearVelocity,A=i.m_angularVelocity,P=r.m_angularVelocity;return l.DotVV(v,l.CrossSV(A,w,l.s_t0))+l.DotVV(w,l.SubVV(l.AddVCrossSV(b,P,h,l.s_t0),l.AddVCrossSV(V,A,u,l.s_t1),l.s_t0))}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(i){i!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=i,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(i,r){i===this.m_lowerTranslation&&r===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=i,this.m_upperTranslation=r,this.m_impulse.z=0)}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(i){i!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=i)}SetMotorSpeed(i){i!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=i)}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorForce(i){i!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=i)}GetMaxMotorForce(){return this.m_maxMotorForce}GetMotorForce(i){return i*this.m_motorImpulse}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.localAnchorA.Set(%.15f, %.15f);
`,this.m_localAnchorA.x,this.m_localAnchorA.y),i(`  jd.localAnchorB.Set(%.15f, %.15f);
`,this.m_localAnchorB.x,this.m_localAnchorB.y),i(`  jd.localAxisA.Set(%.15f, %.15f);
`,this.m_localXAxisA.x,this.m_localXAxisA.y),i(`  jd.referenceAngle = %.15f;
`,this.m_referenceAngle),i(`  jd.enableLimit = %s;
`,this.m_enableLimit?"true":"false"),i(`  jd.lowerTranslation = %.15f;
`,this.m_lowerTranslation),i(`  jd.upperTranslation = %.15f;
`,this.m_upperTranslation),i(`  jd.enableMotor = %s;
`,this.m_enableMotor?"true":"false"),i(`  jd.motorSpeed = %.15f;
`,this.m_motorSpeed),i(`  jd.maxMotorForce = %.15f;
`,this.m_maxMotorForce),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}}Zt.InitVelocityConstraints_s_d=new l,Zt.InitVelocityConstraints_s_P=new l,Zt.SolveVelocityConstraints_s_P=new l,Zt.SolveVelocityConstraints_s_f2r=new l,Zt.SolveVelocityConstraints_s_f1=new $t,Zt.SolveVelocityConstraints_s_df3=new $t,Zt.SolveVelocityConstraints_s_df2=new l,Zt.SolvePositionConstraints_s_d=new l,Zt.SolvePositionConstraints_s_impulse=new $t,Zt.SolvePositionConstraints_s_impulse1=new l,Zt.SolvePositionConstraints_s_P=new l,Zt.GetJointTranslation_s_pA=new l,Zt.GetJointTranslation_s_pB=new l,Zt.GetJointTranslation_s_d=new l,Zt.GetJointTranslation_s_axis=new l;class ge extends Pi{constructor(i){super(i),this.m_groundAnchorA=new l,this.m_groundAnchorB=new l,this.m_lengthA=0,this.m_lengthB=0,this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_uA=new l,this.m_uB=new l,this.m_rA=new l,this.m_rB=new l,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new tt,this.m_qB=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_groundAnchorA.Copy(o(i.groundAnchorA,new l(-1,1))),this.m_groundAnchorB.Copy(o(i.groundAnchorB,new l(1,0))),this.m_localAnchorA.Copy(o(i.localAnchorA,new l(-1,0))),this.m_localAnchorB.Copy(o(i.localAnchorB,new l(1,0))),this.m_lengthA=o(i.lengthA,0),this.m_lengthB=o(i.lengthB,0),this.m_ratio=o(i.ratio,1),this.m_constant=o(i.lengthA,0)+this.m_ratio*o(i.lengthB,0),this.m_impulse=0}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexA].c,u=i.positions[this.m_indexA].a,h=i.velocities[this.m_indexA].v;let m=i.velocities[this.m_indexA].w;const _=i.positions[this.m_indexB].c,v=i.positions[this.m_indexB].a,w=i.velocities[this.m_indexB].v;let V=i.velocities[this.m_indexB].w;const b=this.m_qA.SetAngle(u),A=this.m_qB.SetAngle(v);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),tt.MulRV(b,this.m_lalcA,this.m_rA),l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),tt.MulRV(A,this.m_lalcB,this.m_rB),this.m_uA.Copy(r).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(_).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);const P=this.m_uA.Length(),D=this.m_uB.Length();P>10*p?this.m_uA.SelfMul(1/P):this.m_uA.SetZero(),D>10*p?this.m_uB.SelfMul(1/D):this.m_uB.SetZero();const R=l.CrossVV(this.m_rA,this.m_uA),z=l.CrossVV(this.m_rB,this.m_uB),U=this.m_invMassA+this.m_invIA*R*R,J=this.m_invMassB+this.m_invIB*z*z;if(this.m_mass=U+this.m_ratio*this.m_ratio*J,this.m_mass>0&&(this.m_mass=1/this.m_mass),i.step.warmStarting){this.m_impulse*=i.step.dtRatio;const W=l.MulSV(-this.m_impulse,this.m_uA,ge.InitVelocityConstraints_s_PA),K=l.MulSV(-this.m_ratio*this.m_impulse,this.m_uB,ge.InitVelocityConstraints_s_PB);h.SelfMulAdd(this.m_invMassA,W),m+=this.m_invIA*l.CrossVV(this.m_rA,W),w.SelfMulAdd(this.m_invMassB,K),V+=this.m_invIB*l.CrossVV(this.m_rB,K)}else this.m_impulse=0;i.velocities[this.m_indexA].w=m,i.velocities[this.m_indexB].w=V}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=l.AddVCrossSV(r,u,this.m_rA,ge.SolveVelocityConstraints_s_vpA),v=l.AddVCrossSV(h,m,this.m_rB,ge.SolveVelocityConstraints_s_vpB),w=-l.DotVV(this.m_uA,_)-this.m_ratio*l.DotVV(this.m_uB,v),V=-this.m_mass*w;this.m_impulse+=V;const b=l.MulSV(-V,this.m_uA,ge.SolveVelocityConstraints_s_PA),A=l.MulSV(-this.m_ratio*V,this.m_uB,ge.SolveVelocityConstraints_s_PB);r.SelfMulAdd(this.m_invMassA,b),u+=this.m_invIA*l.CrossVV(this.m_rA,b),h.SelfMulAdd(this.m_invMassB,A),m+=this.m_invIB*l.CrossVV(this.m_rB,A),i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m}SolvePositionConstraints(i){const r=i.positions[this.m_indexA].c;let u=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let m=i.positions[this.m_indexB].a;const _=this.m_qA.SetAngle(u),v=this.m_qB.SetAngle(m);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const w=tt.MulRV(_,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const V=tt.MulRV(v,this.m_lalcB,this.m_rB),b=this.m_uA.Copy(r).SelfAdd(w).SelfSub(this.m_groundAnchorA),A=this.m_uB.Copy(h).SelfAdd(V).SelfSub(this.m_groundAnchorB),P=b.Length(),D=A.Length();P>10*p?b.SelfMul(1/P):b.SetZero(),D>10*p?A.SelfMul(1/D):A.SetZero();const R=l.CrossVV(w,b),z=l.CrossVV(V,A),U=this.m_invMassA+this.m_invIA*R*R,J=this.m_invMassB+this.m_invIB*z*z;let W=U+this.m_ratio*this.m_ratio*J;W>0&&(W=1/W);const K=this.m_constant-P-this.m_ratio*D,it=rt(K),at=-W*K,st=l.MulSV(-at,b,ge.SolvePositionConstraints_s_PA),pt=l.MulSV(-this.m_ratio*at,A,ge.SolvePositionConstraints_s_PB);return r.SelfMulAdd(this.m_invMassA,st),u+=this.m_invIA*l.CrossVV(w,st),h.SelfMulAdd(this.m_invMassB,pt),m+=this.m_invIB*l.CrossVV(V,pt),i.positions[this.m_indexA].a=u,i.positions[this.m_indexB].a=m,it<p}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return r.x=i*this.m_impulse*this.m_uB.x,r.y=i*this.m_impulse*this.m_uB.y,r}GetReactionTorque(i){return 0}GetGroundAnchorA(){return this.m_groundAnchorA}GetGroundAnchorB(){return this.m_groundAnchorB}GetLengthA(){return this.m_lengthA}GetLengthB(){return this.m_lengthB}GetRatio(){return this.m_ratio}GetCurrentLengthA(){const i=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,ge.GetCurrentLengthA_s_p),r=this.m_groundAnchorA;return l.DistanceVV(i,r)}GetCurrentLengthB(){const i=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,ge.GetCurrentLengthB_s_p),r=this.m_groundAnchorB;return l.DistanceVV(i,r)}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2PulleyJointDef = new b2PulleyJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.groundAnchorA.Set(%.15f, %.15f);
`,this.m_groundAnchorA.x,this.m_groundAnchorA.y),i(`  jd.groundAnchorB.Set(%.15f, %.15f);
`,this.m_groundAnchorB.x,this.m_groundAnchorB.y),i(`  jd.localAnchorA.Set(%.15f, %.15f);
`,this.m_localAnchorA.x,this.m_localAnchorA.y),i(`  jd.localAnchorB.Set(%.15f, %.15f);
`,this.m_localAnchorB.x,this.m_localAnchorB.y),i(`  jd.lengthA = %.15f;
`,this.m_lengthA),i(`  jd.lengthB = %.15f;
`,this.m_lengthB),i(`  jd.ratio = %.15f;
`,this.m_ratio),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}ShiftOrigin(i){this.m_groundAnchorA.SelfSub(i),this.m_groundAnchorB.SelfSub(i)}}ge.InitVelocityConstraints_s_PA=new l,ge.InitVelocityConstraints_s_PB=new l,ge.SolveVelocityConstraints_s_vpA=new l,ge.SolveVelocityConstraints_s_vpB=new l,ge.SolveVelocityConstraints_s_PA=new l,ge.SolveVelocityConstraints_s_PB=new l,ge.SolvePositionConstraints_s_PA=new l,ge.SolvePositionConstraints_s_PB=new l,ge.GetCurrentLengthA_s_p=new l,ge.GetCurrentLengthB_s_p=new l;class Ae extends Pi{constructor(i){super(i),this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_impulse=new $t,this.m_motorImpulse=0,this.m_enableMotor=!1,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_referenceAngle=0,this.m_lowerAngle=0,this.m_upperAngle=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new l,this.m_rB=new l,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new de,this.m_motorMass=0,this.m_limitState=s.b2LimitState.e_inactiveLimit,this.m_qA=new tt,this.m_qB=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_K=new qt,this.m_localAnchorA.Copy(o(i.localAnchorA,l.ZERO)),this.m_localAnchorB.Copy(o(i.localAnchorB,l.ZERO)),this.m_referenceAngle=o(i.referenceAngle,0),this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=o(i.lowerAngle,0),this.m_upperAngle=o(i.upperAngle,0),this.m_maxMotorTorque=o(i.maxMotorTorque,0),this.m_motorSpeed=o(i.motorSpeed,0),this.m_enableLimit=o(i.enableLimit,!1),this.m_enableMotor=o(i.enableMotor,!1),this.m_limitState=s.b2LimitState.e_inactiveLimit}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexA].a,u=i.velocities[this.m_indexA].v;let h=i.velocities[this.m_indexA].w;const m=i.positions[this.m_indexB].a,_=i.velocities[this.m_indexB].v;let v=i.velocities[this.m_indexB].w;const w=this.m_qA.SetAngle(r),V=this.m_qB.SetAngle(m);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),tt.MulRV(w,this.m_lalcA,this.m_rA),l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),tt.MulRV(V,this.m_lalcB,this.m_rB);const b=this.m_invMassA,A=this.m_invMassB,P=this.m_invIA,D=this.m_invIB,R=P+D===0;if(this.m_mass.ex.x=b+A+this.m_rA.y*this.m_rA.y*P+this.m_rB.y*this.m_rB.y*D,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*P-this.m_rB.y*this.m_rB.x*D,this.m_mass.ez.x=-this.m_rA.y*P-this.m_rB.y*D,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=b+A+this.m_rA.x*this.m_rA.x*P+this.m_rB.x*this.m_rB.x*D,this.m_mass.ez.y=this.m_rA.x*P+this.m_rB.x*D,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=P+D,this.m_motorMass=P+D,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!R||(this.m_motorImpulse=0),this.m_enableLimit&&!R){const z=m-r-this.m_referenceAngle;rt(this.m_upperAngle-this.m_lowerAngle)<2*C?this.m_limitState=s.b2LimitState.e_equalLimits:z<=this.m_lowerAngle?(this.m_limitState!==s.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=s.b2LimitState.e_atLowerLimit):z>=this.m_upperAngle?(this.m_limitState!==s.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=s.b2LimitState.e_atUpperLimit):(this.m_limitState=s.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=s.b2LimitState.e_inactiveLimit;if(i.step.warmStarting){this.m_impulse.SelfMul(i.step.dtRatio),this.m_motorImpulse*=i.step.dtRatio;const z=Ae.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);u.SelfMulSub(b,z),h-=P*(l.CrossVV(this.m_rA,z)+this.m_motorImpulse+this.m_impulse.z),_.SelfMulAdd(A,z),v+=D*(l.CrossVV(this.m_rB,z)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0;i.velocities[this.m_indexA].w=h,i.velocities[this.m_indexB].w=v}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=this.m_invMassA,v=this.m_invMassB,w=this.m_invIA,V=this.m_invIB,b=w+V===0;if(this.m_enableMotor&&this.m_limitState!==s.b2LimitState.e_equalLimits&&!b){const A=m-u-this.m_motorSpeed;let P=-this.m_motorMass*A;const D=this.m_motorImpulse,R=i.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=yt(this.m_motorImpulse+P,-R,R),P=this.m_motorImpulse-D,u-=w*P,m+=V*P}if(this.m_enableLimit&&this.m_limitState!==s.b2LimitState.e_inactiveLimit&&!b){const A=l.SubVV(l.AddVCrossSV(h,m,this.m_rB,l.s_t0),l.AddVCrossSV(r,u,this.m_rA,l.s_t1),Ae.SolveVelocityConstraints_s_Cdot1),P=m-u,D=this.m_mass.Solve33(A.x,A.y,P,Ae.SolveVelocityConstraints_s_impulse_v3).SelfNeg();if(this.m_limitState===s.b2LimitState.e_equalLimits)this.m_impulse.SelfAdd(D);else if(this.m_limitState===s.b2LimitState.e_atLowerLimit)if(this.m_impulse.z+D.z<0){const U=-A.x+this.m_impulse.z*this.m_mass.ez.x,J=-A.y+this.m_impulse.z*this.m_mass.ez.y,W=this.m_mass.Solve22(U,J,Ae.SolveVelocityConstraints_s_reduced_v2);D.x=W.x,D.y=W.y,D.z=-this.m_impulse.z,this.m_impulse.x+=W.x,this.m_impulse.y+=W.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(D);else if(this.m_limitState===s.b2LimitState.e_atUpperLimit)if(this.m_impulse.z+D.z>0){const U=-A.x+this.m_impulse.z*this.m_mass.ez.x,J=-A.y+this.m_impulse.z*this.m_mass.ez.y,W=this.m_mass.Solve22(U,J,Ae.SolveVelocityConstraints_s_reduced_v2);D.x=W.x,D.y=W.y,D.z=-this.m_impulse.z,this.m_impulse.x+=W.x,this.m_impulse.y+=W.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(D);const R=Ae.SolveVelocityConstraints_s_P.Set(D.x,D.y);r.SelfMulSub(_,R),u-=w*(l.CrossVV(this.m_rA,R)+D.z),h.SelfMulAdd(v,R),m+=V*(l.CrossVV(this.m_rB,R)+D.z)}else{const A=l.SubVV(l.AddVCrossSV(h,m,this.m_rB,l.s_t0),l.AddVCrossSV(r,u,this.m_rA,l.s_t1),Ae.SolveVelocityConstraints_s_Cdot_v2),P=this.m_mass.Solve22(-A.x,-A.y,Ae.SolveVelocityConstraints_s_impulse_v2);this.m_impulse.x+=P.x,this.m_impulse.y+=P.y,r.SelfMulSub(_,P),u-=w*l.CrossVV(this.m_rA,P),h.SelfMulAdd(v,P),m+=V*l.CrossVV(this.m_rB,P)}i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m}SolvePositionConstraints(i){const r=i.positions[this.m_indexA].c;let u=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let m=i.positions[this.m_indexB].a;const _=this.m_qA.SetAngle(u),v=this.m_qB.SetAngle(m);let w=0,V=0;const b=this.m_invIA+this.m_invIB===0;if(this.m_enableLimit&&this.m_limitState!==s.b2LimitState.e_inactiveLimit&&!b){const A=m-u-this.m_referenceAngle;let P=0;if(this.m_limitState===s.b2LimitState.e_equalLimits){const D=yt(A-this.m_lowerAngle,-F,F);P=-this.m_motorMass*D,w=rt(D)}else if(this.m_limitState===s.b2LimitState.e_atLowerLimit){let D=A-this.m_lowerAngle;w=-D,D=yt(D+C,-F,0),P=-this.m_motorMass*D}else if(this.m_limitState===s.b2LimitState.e_atUpperLimit){let D=A-this.m_upperAngle;w=D,D=yt(D-C,0,F),P=-this.m_motorMass*D}u-=this.m_invIA*P,m+=this.m_invIB*P}{_.SetAngle(u),v.SetAngle(m),l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const A=tt.MulRV(_,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const P=tt.MulRV(v,this.m_lalcB,this.m_rB),D=l.SubVV(l.AddVV(h,P,l.s_t0),l.AddVV(r,A,l.s_t1),Ae.SolvePositionConstraints_s_C_v2);V=D.Length();const R=this.m_invMassA,z=this.m_invMassB,U=this.m_invIA,J=this.m_invIB,W=this.m_K;W.ex.x=R+z+U*A.y*A.y+J*P.y*P.y,W.ex.y=-U*A.x*A.y-J*P.x*P.y,W.ey.x=W.ex.y,W.ey.y=R+z+U*A.x*A.x+J*P.x*P.x;const K=W.Solve(D.x,D.y,Ae.SolvePositionConstraints_s_impulse).SelfNeg();r.SelfMulSub(R,K),u-=U*l.CrossVV(A,K),h.SelfMulAdd(z,K),m+=J*l.CrossVV(P,K)}return i.positions[this.m_indexA].a=u,i.positions[this.m_indexB].a=m,V<=p&&w<=C}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return r.x=i*this.m_impulse.x,r.y=i*this.m_impulse.y,r}GetReactionTorque(i){return i*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle}GetJointSpeed(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(i){i!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=i)}GetMotorTorque(i){return i*this.m_motorImpulse}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorTorque(i){i!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=i)}GetMaxMotorTorque(){return this.m_maxMotorTorque}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(i){i!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=i,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerAngle}GetUpperLimit(){return this.m_upperAngle}SetLimits(i,r){i===this.m_lowerAngle&&r===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=i,this.m_upperAngle=r)}SetMotorSpeed(i){i!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=i)}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.localAnchorA.Set(%.15f, %.15f);
`,this.m_localAnchorA.x,this.m_localAnchorA.y),i(`  jd.localAnchorB.Set(%.15f, %.15f);
`,this.m_localAnchorB.x,this.m_localAnchorB.y),i(`  jd.referenceAngle = %.15f;
`,this.m_referenceAngle),i(`  jd.enableLimit = %s;
`,this.m_enableLimit?"true":"false"),i(`  jd.lowerAngle = %.15f;
`,this.m_lowerAngle),i(`  jd.upperAngle = %.15f;
`,this.m_upperAngle),i(`  jd.enableMotor = %s;
`,this.m_enableMotor?"true":"false"),i(`  jd.motorSpeed = %.15f;
`,this.m_motorSpeed),i(`  jd.maxMotorTorque = %.15f;
`,this.m_maxMotorTorque),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}}Ae.InitVelocityConstraints_s_P=new l,Ae.SolveVelocityConstraints_s_P=new l,Ae.SolveVelocityConstraints_s_Cdot_v2=new l,Ae.SolveVelocityConstraints_s_Cdot1=new l,Ae.SolveVelocityConstraints_s_impulse_v3=new $t,Ae.SolveVelocityConstraints_s_reduced_v2=new l,Ae.SolveVelocityConstraints_s_impulse_v2=new l,Ae.SolvePositionConstraints_s_C_v2=new l,Ae.SolvePositionConstraints_s_impulse=new l;class Ti extends Pi{constructor(i){super(i),this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_maxLength=0,this.m_length=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new l,this.m_rA=new l,this.m_rB=new l,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_state=s.b2LimitState.e_inactiveLimit,this.m_qA=new tt,this.m_qB=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_localAnchorA.Copy(o(i.localAnchorA,new l(-1,0))),this.m_localAnchorB.Copy(o(i.localAnchorB,new l(1,0))),this.m_maxLength=o(i.maxLength,0)}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexA].c,u=i.positions[this.m_indexA].a,h=i.velocities[this.m_indexA].v;let m=i.velocities[this.m_indexA].w;const _=i.positions[this.m_indexB].c,v=i.positions[this.m_indexB].a,w=i.velocities[this.m_indexB].v;let V=i.velocities[this.m_indexB].w;const b=this.m_qA.SetAngle(u),A=this.m_qB.SetAngle(v);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),tt.MulRV(b,this.m_lalcA,this.m_rA),l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),tt.MulRV(A,this.m_lalcB,this.m_rB),this.m_u.Copy(_).SelfAdd(this.m_rB).SelfSub(r).SelfSub(this.m_rA),this.m_length=this.m_u.Length();const P=this.m_length-this.m_maxLength;if(this.m_state=P>0?s.b2LimitState.e_atUpperLimit:s.b2LimitState.e_inactiveLimit,!(this.m_length>p))return this.m_u.SetZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.SelfMul(1/this.m_length);const D=l.CrossVV(this.m_rA,this.m_u),R=l.CrossVV(this.m_rB,this.m_u),z=this.m_invMassA+this.m_invIA*D*D+this.m_invMassB+this.m_invIB*R*R;if(this.m_mass=z!==0?1/z:0,i.step.warmStarting){this.m_impulse*=i.step.dtRatio;const U=l.MulSV(this.m_impulse,this.m_u,Ti.InitVelocityConstraints_s_P);h.SelfMulSub(this.m_invMassA,U),m-=this.m_invIA*l.CrossVV(this.m_rA,U),w.SelfMulAdd(this.m_invMassB,U),V+=this.m_invIB*l.CrossVV(this.m_rB,U)}else this.m_impulse=0;i.velocities[this.m_indexA].w=m,i.velocities[this.m_indexB].w=V}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=l.AddVCrossSV(r,u,this.m_rA,Ti.SolveVelocityConstraints_s_vpA),v=l.AddVCrossSV(h,m,this.m_rB,Ti.SolveVelocityConstraints_s_vpB),w=this.m_length-this.m_maxLength;let V=l.DotVV(this.m_u,l.SubVV(v,_,l.s_t0));w<0&&(V+=i.step.inv_dt*w);let b=-this.m_mass*V;const A=this.m_impulse;this.m_impulse=dt(0,this.m_impulse+b),b=this.m_impulse-A;const P=l.MulSV(b,this.m_u,Ti.SolveVelocityConstraints_s_P);r.SelfMulSub(this.m_invMassA,P),u-=this.m_invIA*l.CrossVV(this.m_rA,P),h.SelfMulAdd(this.m_invMassB,P),m+=this.m_invIB*l.CrossVV(this.m_rB,P),i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m}SolvePositionConstraints(i){const r=i.positions[this.m_indexA].c;let u=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let m=i.positions[this.m_indexB].a;const _=this.m_qA.SetAngle(u),v=this.m_qB.SetAngle(m);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const w=tt.MulRV(_,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const V=tt.MulRV(v,this.m_lalcB,this.m_rB),b=this.m_u.Copy(h).SelfAdd(V).SelfSub(r).SelfSub(w),A=b.Normalize();let P=A-this.m_maxLength;P=yt(P,0,L);const D=-this.m_mass*P,R=l.MulSV(D,b,Ti.SolvePositionConstraints_s_P);return r.SelfMulSub(this.m_invMassA,R),u-=this.m_invIA*l.CrossVV(w,R),h.SelfMulAdd(this.m_invMassB,R),m+=this.m_invIB*l.CrossVV(V,R),i.positions[this.m_indexA].a=u,i.positions[this.m_indexB].a=m,A-this.m_maxLength<p}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return l.MulSV(i*this.m_impulse,this.m_u,r)}GetReactionTorque(i){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxLength(i){this.m_maxLength=i}GetMaxLength(){return this.m_maxLength}GetLimitState(){return this.m_state}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2RopeJointDef = new b2RopeJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.localAnchorA.Set(%.15f, %.15f);
`,this.m_localAnchorA.x,this.m_localAnchorA.y),i(`  jd.localAnchorB.Set(%.15f, %.15f);
`,this.m_localAnchorB.x,this.m_localAnchorB.y),i(`  jd.maxLength = %.15f;
`,this.m_maxLength),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}}Ti.InitVelocityConstraints_s_P=new l,Ti.SolveVelocityConstraints_s_vpA=new l,Ti.SolveVelocityConstraints_s_vpB=new l,Ti.SolveVelocityConstraints_s_P=new l,Ti.SolvePositionConstraints_s_P=new l;class Ve extends Pi{constructor(i){super(i),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_referenceAngle=0,this.m_gamma=0,this.m_impulse=new $t(0,0,0),this.m_indexA=0,this.m_indexB=0,this.m_rA=new l,this.m_rB=new l,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new de,this.m_qA=new tt,this.m_qB=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_K=new de,this.m_frequencyHz=o(i.frequencyHz,0),this.m_dampingRatio=o(i.dampingRatio,0),this.m_localAnchorA.Copy(o(i.localAnchorA,l.ZERO)),this.m_localAnchorB.Copy(o(i.localAnchorB,l.ZERO)),this.m_referenceAngle=o(i.referenceAngle,0),this.m_impulse.SetZero()}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=i.positions[this.m_indexA].a,u=i.velocities[this.m_indexA].v;let h=i.velocities[this.m_indexA].w;const m=i.positions[this.m_indexB].a,_=i.velocities[this.m_indexB].v;let v=i.velocities[this.m_indexB].w;const w=this.m_qA.SetAngle(r),V=this.m_qB.SetAngle(m);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),tt.MulRV(w,this.m_lalcA,this.m_rA),l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),tt.MulRV(V,this.m_lalcB,this.m_rB);const b=this.m_invMassA,A=this.m_invMassB,P=this.m_invIA,D=this.m_invIB,R=this.m_K;if(R.ex.x=b+A+this.m_rA.y*this.m_rA.y*P+this.m_rB.y*this.m_rB.y*D,R.ey.x=-this.m_rA.y*this.m_rA.x*P-this.m_rB.y*this.m_rB.x*D,R.ez.x=-this.m_rA.y*P-this.m_rB.y*D,R.ex.y=R.ey.x,R.ey.y=b+A+this.m_rA.x*this.m_rA.x*P+this.m_rB.x*this.m_rB.x*D,R.ez.y=this.m_rA.x*P+this.m_rB.x*D,R.ex.z=R.ez.x,R.ey.z=R.ez.y,R.ez.z=P+D,this.m_frequencyHz>0){R.GetInverse22(this.m_mass);let z=P+D;const U=z>0?1/z:0,J=m-r-this.m_referenceAngle,W=2*f*this.m_frequencyHz,K=2*U*this.m_dampingRatio*W,it=U*W*W,at=i.step.dt;this.m_gamma=at*(K+at*it),this.m_gamma=this.m_gamma!==0?1/this.m_gamma:0,this.m_bias=J*at*it*this.m_gamma,z+=this.m_gamma,this.m_mass.ez.z=z!==0?1/z:0}else R.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0;if(i.step.warmStarting){this.m_impulse.SelfMul(i.step.dtRatio);const z=Ve.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);u.SelfMulSub(b,z),h-=P*(l.CrossVV(this.m_rA,z)+this.m_impulse.z),_.SelfMulAdd(A,z),v+=D*(l.CrossVV(this.m_rB,z)+this.m_impulse.z)}else this.m_impulse.SetZero();i.velocities[this.m_indexA].w=h,i.velocities[this.m_indexB].w=v}SolveVelocityConstraints(i){const r=i.velocities[this.m_indexA].v;let u=i.velocities[this.m_indexA].w;const h=i.velocities[this.m_indexB].v;let m=i.velocities[this.m_indexB].w;const _=this.m_invMassA,v=this.m_invMassB,w=this.m_invIA,V=this.m_invIB;if(this.m_frequencyHz>0){const b=m-u,A=-this.m_mass.ez.z*(b+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=A,u-=w*A,m+=V*A;const P=l.SubVV(l.AddVCrossSV(h,m,this.m_rB,l.s_t0),l.AddVCrossSV(r,u,this.m_rA,l.s_t1),Ve.SolveVelocityConstraints_s_Cdot1),D=de.MulM33XY(this.m_mass,P.x,P.y,Ve.SolveVelocityConstraints_s_impulse1).SelfNeg();this.m_impulse.x+=D.x,this.m_impulse.y+=D.y;const R=D;r.SelfMulSub(_,R),u-=w*l.CrossVV(this.m_rA,R),h.SelfMulAdd(v,R),m+=V*l.CrossVV(this.m_rB,R)}else{const b=l.SubVV(l.AddVCrossSV(h,m,this.m_rB,l.s_t0),l.AddVCrossSV(r,u,this.m_rA,l.s_t1),Ve.SolveVelocityConstraints_s_Cdot1),A=m-u,P=de.MulM33XYZ(this.m_mass,b.x,b.y,A,Ve.SolveVelocityConstraints_s_impulse).SelfNeg();this.m_impulse.SelfAdd(P);const D=Ve.SolveVelocityConstraints_s_P.Set(P.x,P.y);r.SelfMulSub(_,D),u-=w*(l.CrossVV(this.m_rA,D)+P.z),h.SelfMulAdd(v,D),m+=V*(l.CrossVV(this.m_rB,D)+P.z)}i.velocities[this.m_indexA].w=u,i.velocities[this.m_indexB].w=m}SolvePositionConstraints(i){const r=i.positions[this.m_indexA].c;let u=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let m=i.positions[this.m_indexB].a;const _=this.m_qA.SetAngle(u),v=this.m_qB.SetAngle(m),w=this.m_invMassA,V=this.m_invMassB,b=this.m_invIA,A=this.m_invIB;l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const P=tt.MulRV(_,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const D=tt.MulRV(v,this.m_lalcB,this.m_rB);let R,z;const U=this.m_K;if(U.ex.x=w+V+P.y*P.y*b+D.y*D.y*A,U.ey.x=-P.y*P.x*b-D.y*D.x*A,U.ez.x=-P.y*b-D.y*A,U.ex.y=U.ey.x,U.ey.y=w+V+P.x*P.x*b+D.x*D.x*A,U.ez.y=P.x*b+D.x*A,U.ex.z=U.ez.x,U.ey.z=U.ez.y,U.ez.z=b+A,this.m_frequencyHz>0){const J=l.SubVV(l.AddVV(h,D,l.s_t0),l.AddVV(r,P,l.s_t1),Ve.SolvePositionConstraints_s_C1);R=J.Length(),z=0;const W=U.Solve22(J.x,J.y,Ve.SolvePositionConstraints_s_P).SelfNeg();r.SelfMulSub(w,W),u-=b*l.CrossVV(P,W),h.SelfMulAdd(V,W),m+=A*l.CrossVV(D,W)}else{const J=l.SubVV(l.AddVV(h,D,l.s_t0),l.AddVV(r,P,l.s_t1),Ve.SolvePositionConstraints_s_C1),W=m-u-this.m_referenceAngle;R=J.Length(),z=rt(W);const K=U.Solve33(J.x,J.y,W,Ve.SolvePositionConstraints_s_impulse).SelfNeg(),it=Ve.SolvePositionConstraints_s_P.Set(K.x,K.y);r.SelfMulSub(w,it),u-=b*(l.CrossVV(this.m_rA,it)+K.z),h.SelfMulAdd(V,it),m+=A*(l.CrossVV(this.m_rB,it)+K.z)}return i.positions[this.m_indexA].a=u,i.positions[this.m_indexB].a=m,R<=p&&z<=C}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return r.x=i*this.m_impulse.x,r.y=i*this.m_impulse.y,r}GetReactionTorque(i){return i*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}SetFrequency(i){this.m_frequencyHz=i}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(i){this.m_dampingRatio=i}GetDampingRatio(){return this.m_dampingRatio}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2WeldJointDef = new b2WeldJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.localAnchorA.Set(%.15f, %.15f);
`,this.m_localAnchorA.x,this.m_localAnchorA.y),i(`  jd.localAnchorB.Set(%.15f, %.15f);
`,this.m_localAnchorB.x,this.m_localAnchorB.y),i(`  jd.referenceAngle = %.15f;
`,this.m_referenceAngle),i(`  jd.frequencyHz = %.15f;
`,this.m_frequencyHz),i(`  jd.dampingRatio = %.15f;
`,this.m_dampingRatio),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}}Ve.InitVelocityConstraints_s_P=new l,Ve.SolveVelocityConstraints_s_Cdot1=new l,Ve.SolveVelocityConstraints_s_impulse1=new l,Ve.SolveVelocityConstraints_s_impulse=new $t,Ve.SolveVelocityConstraints_s_P=new l,Ve.SolvePositionConstraints_s_C1=new l,Ve.SolvePositionConstraints_s_P=new l,Ve.SolvePositionConstraints_s_impulse=new $t;class yi extends Pi{constructor(i){super(i),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_localXAxisA=new l,this.m_localYAxisA=new l,this.m_impulse=0,this.m_motorImpulse=0,this.m_springImpulse=0,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableMotor=!1,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new l,this.m_localCenterB=new l,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_ax=new l,this.m_ay=new l,this.m_sAx=0,this.m_sBx=0,this.m_sAy=0,this.m_sBy=0,this.m_mass=0,this.m_motorMass=0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_qA=new tt,this.m_qB=new tt,this.m_lalcA=new l,this.m_lalcB=new l,this.m_rA=new l,this.m_rB=new l,this.m_frequencyHz=o(i.frequencyHz,2),this.m_dampingRatio=o(i.dampingRatio,.7),this.m_localAnchorA.Copy(o(i.localAnchorA,l.ZERO)),this.m_localAnchorB.Copy(o(i.localAnchorB,l.ZERO)),this.m_localXAxisA.Copy(o(i.localAxisA,l.UNITX)),l.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_maxMotorTorque=o(i.maxMotorTorque,0),this.m_motorSpeed=o(i.motorSpeed,0),this.m_enableMotor=o(i.enableMotor,!1),this.m_ax.SetZero(),this.m_ay.SetZero()}GetMotorSpeed(){return this.m_motorSpeed}GetMaxMotorTorque(){return this.m_maxMotorTorque}SetSpringFrequencyHz(i){this.m_frequencyHz=i}GetSpringFrequencyHz(){return this.m_frequencyHz}SetSpringDampingRatio(i){this.m_dampingRatio=i}GetSpringDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(i){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const r=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,_=i.positions[this.m_indexA].c,v=i.positions[this.m_indexA].a,w=i.velocities[this.m_indexA].v;let V=i.velocities[this.m_indexA].w;const b=i.positions[this.m_indexB].c,A=i.positions[this.m_indexB].a,P=i.velocities[this.m_indexB].v;let D=i.velocities[this.m_indexB].w;const R=this.m_qA.SetAngle(v),z=this.m_qB.SetAngle(A);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const U=tt.MulRV(R,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const J=tt.MulRV(z,this.m_lalcB,this.m_rB),W=l.SubVV(l.AddVV(b,J,l.s_t0),l.AddVV(_,U,l.s_t1),yi.InitVelocityConstraints_s_d);if(tt.MulRV(R,this.m_localYAxisA,this.m_ay),this.m_sAy=l.CrossVV(l.AddVV(W,U,l.s_t0),this.m_ay),this.m_sBy=l.CrossVV(J,this.m_ay),this.m_mass=r+u+h*this.m_sAy*this.m_sAy+m*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){tt.MulRV(R,this.m_localXAxisA,this.m_ax),this.m_sAx=l.CrossVV(l.AddVV(W,U,l.s_t0),this.m_ax),this.m_sBx=l.CrossVV(J,this.m_ax);const K=r+u+h*this.m_sAx*this.m_sAx+m*this.m_sBx*this.m_sBx;if(K>0){this.m_springMass=1/K;const it=l.DotVV(W,this.m_ax),at=2*f*this.m_frequencyHz,st=2*this.m_springMass*this.m_dampingRatio*at,pt=this.m_springMass*at*at,St=i.step.dt;this.m_gamma=St*(st+St*pt),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=it*St*pt*this.m_gamma,this.m_springMass=K+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=h+m,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),i.step.warmStarting){this.m_impulse*=i.step.dtRatio,this.m_springImpulse*=i.step.dtRatio,this.m_motorImpulse*=i.step.dtRatio;const K=l.AddVV(l.MulSV(this.m_impulse,this.m_ay,l.s_t0),l.MulSV(this.m_springImpulse,this.m_ax,l.s_t1),yi.InitVelocityConstraints_s_P),it=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,at=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;w.SelfMulSub(this.m_invMassA,K),V-=this.m_invIA*it,P.SelfMulAdd(this.m_invMassB,K),D+=this.m_invIB*at}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;i.velocities[this.m_indexA].w=V,i.velocities[this.m_indexB].w=D}SolveVelocityConstraints(i){const r=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,_=i.velocities[this.m_indexA].v;let v=i.velocities[this.m_indexA].w;const w=i.velocities[this.m_indexB].v;let V=i.velocities[this.m_indexB].w;{const b=l.DotVV(this.m_ax,l.SubVV(w,_,l.s_t0))+this.m_sBx*V-this.m_sAx*v,A=-this.m_springMass*(b+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=A;const P=l.MulSV(A,this.m_ax,yi.SolveVelocityConstraints_s_P),D=A*this.m_sAx,R=A*this.m_sBx;_.SelfMulSub(r,P),v-=h*D,w.SelfMulAdd(u,P),V+=m*R}{const b=V-v-this.m_motorSpeed;let A=-this.m_motorMass*b;const P=this.m_motorImpulse,D=i.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=yt(this.m_motorImpulse+A,-D,D),A=this.m_motorImpulse-P,v-=h*A,V+=m*A}{const b=l.DotVV(this.m_ay,l.SubVV(w,_,l.s_t0))+this.m_sBy*V-this.m_sAy*v,A=-this.m_mass*b;this.m_impulse+=A;const P=l.MulSV(A,this.m_ay,yi.SolveVelocityConstraints_s_P),D=A*this.m_sAy,R=A*this.m_sBy;_.SelfMulSub(r,P),v-=h*D,w.SelfMulAdd(u,P),V+=m*R}i.velocities[this.m_indexA].w=v,i.velocities[this.m_indexB].w=V}SolvePositionConstraints(i){const r=i.positions[this.m_indexA].c;let u=i.positions[this.m_indexA].a;const h=i.positions[this.m_indexB].c;let m=i.positions[this.m_indexB].a;const _=this.m_qA.SetAngle(u),v=this.m_qB.SetAngle(m);l.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const w=tt.MulRV(_,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const V=tt.MulRV(v,this.m_lalcB,this.m_rB),b=l.AddVV(l.SubVV(h,r,l.s_t0),l.SubVV(V,w,l.s_t1),yi.SolvePositionConstraints_s_d),A=tt.MulRV(_,this.m_localYAxisA,this.m_ay),P=l.CrossVV(l.AddVV(b,w,l.s_t0),A),D=l.CrossVV(V,A),R=l.DotVV(b,this.m_ay),z=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;let U;U=z!==0?-R/z:0;const J=l.MulSV(U,A,yi.SolvePositionConstraints_s_P),W=U*P,K=U*D;return r.SelfMulSub(this.m_invMassA,J),u-=this.m_invIA*W,h.SelfMulAdd(this.m_invMassB,J),m+=this.m_invIB*K,i.positions[this.m_indexA].a=u,i.positions[this.m_indexB].a=m,rt(R)<=p}GetDefinition(i){return i}GetAnchorA(i){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,i)}GetAnchorB(i){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,i)}GetReactionForce(i,r){return r.x=i*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),r.y=i*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),r}GetReactionTorque(i){return i*this.m_motorImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetJointTranslation(){return this.GetPrismaticJointTranslation()}GetJointLinearSpeed(){return this.GetPrismaticJointSpeed()}GetJointAngle(){return this.GetRevoluteJointAngle()}GetJointAngularSpeed(){return this.GetRevoluteJointSpeed()}GetPrismaticJointTranslation(){const i=this.m_bodyA,r=this.m_bodyB,u=i.GetWorldPoint(this.m_localAnchorA,new l),h=r.GetWorldPoint(this.m_localAnchorB,new l),m=l.SubVV(h,u,new l),_=i.GetWorldVector(this.m_localXAxisA,new l);return l.DotVV(m,_)}GetPrismaticJointSpeed(){const i=this.m_bodyA,r=this.m_bodyB;l.SubVV(this.m_localAnchorA,i.m_sweep.localCenter,this.m_lalcA);const u=tt.MulRV(i.m_xf.q,this.m_lalcA,this.m_rA);l.SubVV(this.m_localAnchorB,r.m_sweep.localCenter,this.m_lalcB);const h=tt.MulRV(r.m_xf.q,this.m_lalcB,this.m_rB),m=l.AddVV(i.m_sweep.c,u,l.s_t0),_=l.AddVV(r.m_sweep.c,h,l.s_t1),v=l.SubVV(_,m,l.s_t2),w=i.GetWorldVector(this.m_localXAxisA,new l),V=i.m_linearVelocity,b=r.m_linearVelocity,A=i.m_angularVelocity,P=r.m_angularVelocity;return l.DotVV(v,l.CrossSV(A,w,l.s_t0))+l.DotVV(w,l.SubVV(l.AddVCrossSV(b,P,h,l.s_t0),l.AddVCrossSV(V,A,u,l.s_t1),l.s_t0))}GetRevoluteJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a}GetRevoluteJointSpeed(){const i=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-i}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(i){i!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=i)}SetMotorSpeed(i){i!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=i)}SetMaxMotorTorque(i){i!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=i)}GetMotorTorque(i){return i*this.m_motorImpulse}Dump(i){const r=this.m_bodyA.m_islandIndex,u=this.m_bodyB.m_islandIndex;i(`  const jd: b2WheelJointDef = new b2WheelJointDef();
`),i(`  jd.bodyA = bodies[%d];
`,r),i(`  jd.bodyB = bodies[%d];
`,u),i(`  jd.collideConnected = %s;
`,this.m_collideConnected?"true":"false"),i(`  jd.localAnchorA.Set(%.15f, %.15f);
`,this.m_localAnchorA.x,this.m_localAnchorA.y),i(`  jd.localAnchorB.Set(%.15f, %.15f);
`,this.m_localAnchorB.x,this.m_localAnchorB.y),i(`  jd.localAxisA.Set(%.15f, %.15f);
`,this.m_localXAxisA.x,this.m_localXAxisA.y),i(`  jd.enableMotor = %s;
`,this.m_enableMotor?"true":"false"),i(`  jd.motorSpeed = %.15f;
`,this.m_motorSpeed),i(`  jd.maxMotorTorque = %.15f;
`,this.m_maxMotorTorque),i(`  jd.frequencyHz = %.15f;
`,this.m_frequencyHz),i(`  jd.dampingRatio = %.15f;
`,this.m_dampingRatio),i(`  joints[%d] = this.m_world.CreateJoint(jd);
`,this.m_index)}}function Ru(j,i){return Nt(j*i)}function Fu(j,i){return j>i?j:i}yi.InitVelocityConstraints_s_d=new l,yi.InitVelocityConstraints_s_P=new l,yi.SolveVelocityConstraints_s_P=new l,yi.SolvePositionConstraints_s_d=new l,yi.SolvePositionConstraints_s_P=new l;class Eu{constructor(i){this.prev=null,this.next=null,this.contact=i}}class Ii{constructor(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_indexA=0,this.m_indexB=0,this.m_manifold=new $r,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_oldManifold=new $r,this.m_nodeA=new Eu(this),this.m_nodeB=new Eu(this)}GetManifold(){return this.m_manifold}GetWorldManifold(i){const r=this.m_fixtureA.GetBody(),u=this.m_fixtureB.GetBody(),h=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape();i.Initialize(this.m_manifold,r.GetTransform(),h.m_radius,u.GetTransform(),m.m_radius)}IsTouching(){return this.m_touchingFlag}SetEnabled(i){this.m_enabledFlag=i}IsEnabled(){return this.m_enabledFlag}GetNext(){return this.m_next}GetFixtureA(){return this.m_fixtureA}GetChildIndexA(){return this.m_indexA}GetFixtureB(){return this.m_fixtureB}GetChildIndexB(){return this.m_indexB}FlagForFiltering(){this.m_filterFlag=!0}SetFriction(i){this.m_friction=i}GetFriction(){return this.m_friction}ResetFriction(){this.m_friction=Ru(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)}SetRestitution(i){this.m_restitution=i}GetRestitution(){return this.m_restitution}ResetRestitution(){this.m_restitution=Fu(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}SetTangentSpeed(i){this.m_tangentSpeed=i}GetTangentSpeed(){return this.m_tangentSpeed}Reset(i,r,u,h){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=i,this.m_fixtureB=u,this.m_indexA=r,this.m_indexB=h,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,delete this.m_nodeA.contact,this.m_nodeA.prev=null,this.m_nodeA.next=null,delete this.m_nodeA.other,delete this.m_nodeB.contact,this.m_nodeB.prev=null,this.m_nodeB.next=null,delete this.m_nodeB.other,this.m_toiCount=0,this.m_friction=Ru(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=Fu(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}Update(i){const r=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=r,this.m_enabledFlag=!0;let u=!1;const h=this.m_touchingFlag,m=this.m_fixtureA.IsSensor(),_=this.m_fixtureB.IsSensor(),v=m||_,w=this.m_fixtureA.GetBody(),V=this.m_fixtureB.GetBody(),b=w.GetTransform(),A=V.GetTransform();if(v){const P=this.m_fixtureA.GetShape(),D=this.m_fixtureB.GetShape();u=Vu(P,this.m_indexA,D,this.m_indexB,b,A),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,b,A),u=this.m_manifold.pointCount>0;for(let P=0;P<this.m_manifold.pointCount;++P){const D=this.m_manifold.points[P];D.normalImpulse=0,D.tangentImpulse=0;const R=D.id;for(let z=0;z<this.m_oldManifold.pointCount;++z){const U=this.m_oldManifold.points[z];if(U.id.key===R.key){D.normalImpulse=U.normalImpulse,D.tangentImpulse=U.tangentImpulse;break}}}u!==h&&(w.SetAwake(!0),V.SetAwake(!0))}this.m_touchingFlag=u,!h&&u&&i&&i.BeginContact(this),h&&!u&&i&&i.EndContact(this),!v&&u&&i&&i.PreSolve(this,this.m_oldManifold)}ComputeTOI(i,r){const u=Ii.ComputeTOI_s_input;u.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA),u.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB),u.sweepA.Copy(i),u.sweepB.Copy(r),u.tMax=p;const h=Ii.ComputeTOI_s_output;return Mu(h,u),h.t}}Ii.ComputeTOI_s_input=new bu,Ii.ComputeTOI_s_output=new Pu;class Qr extends Ii{constructor(){super()}static Create(i){return new Qr}static Destroy(i,r){}Reset(i,r,u,h){super.Reset(i,r,u,h)}Evaluate(i,r,u){const h=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape();yd(i,h,r,m,u)}}class Kr extends Ii{constructor(){super()}static Create(i){return new Kr}static Destroy(i,r){}Reset(i,r,u,h){super.Reset(i,r,u,h)}Evaluate(i,r,u){const h=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape();xd(i,h,r,m,u)}}class Yr extends Ii{constructor(){super()}static Create(i){return new Yr}static Destroy(i,r){}Reset(i,r,u,h){super.Reset(i,r,u,h)}Evaluate(i,r,u){const h=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape();gd(i,h,r,m,u)}}class to extends Ii{constructor(){super()}static Create(i){return new to}static Destroy(i,r){}Reset(i,r,u,h){super.Reset(i,r,u,h)}Evaluate(i,r,u){const h=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape();Iu(i,h,r,m,u)}}class eo extends Ii{constructor(){super()}static Create(i){return new eo}static Destroy(i,r){}Reset(i,r,u,h){super.Reset(i,r,u,h)}Evaluate(i,r,u){const h=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape();Du(i,h,r,m,u)}}class Ms extends Ii{constructor(){super()}static Create(i){return new Ms}static Destroy(i,r){}Reset(i,r,u,h){super.Reset(i,r,u,h)}Evaluate(i,r,u){const h=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape(),_=h,v=Ms.Evaluate_s_edge;_.GetChildEdge(v,this.m_indexA),Iu(i,v,r,m,u)}}Ms.Evaluate_s_edge=new ee;class Ts extends Ii{constructor(){super()}static Create(i){return new Ts}static Destroy(i,r){}Reset(i,r,u,h){super.Reset(i,r,u,h)}Evaluate(i,r,u){const h=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape(),_=h,v=Ts.Evaluate_s_edge;_.GetChildEdge(v,this.m_indexA),Du(i,v,r,m,u)}}Ts.Evaluate_s_edge=new ee;class Ad{constructor(){this.createFcn=null,this.destroyFcn=null,this.primary=!1}}class Vd{constructor(i){this.m_allocator=null,this.m_allocator=i,this.InitializeRegisters()}AddType(i,r,u,h){const m=Bt(256,w=>i(this.m_allocator));function _(w){return m.pop()||i(w)}function v(w,V){m.push(w)}this.m_registers[u][h].createFcn=_,this.m_registers[u][h].destroyFcn=v,this.m_registers[u][h].primary=!0,u!==h&&(this.m_registers[h][u].createFcn=_,this.m_registers[h][u].destroyFcn=v,this.m_registers[h][u].primary=!1)}InitializeRegisters(){this.m_registers=[];for(let i=0;i<s.b2ShapeType.e_shapeTypeCount;i++){this.m_registers[i]=[];for(let r=0;r<s.b2ShapeType.e_shapeTypeCount;r++)this.m_registers[i][r]=new Ad}this.AddType(Qr.Create,Qr.Destroy,s.b2ShapeType.e_circleShape,s.b2ShapeType.e_circleShape),this.AddType(Yr.Create,Yr.Destroy,s.b2ShapeType.e_polygonShape,s.b2ShapeType.e_circleShape),this.AddType(Kr.Create,Kr.Destroy,s.b2ShapeType.e_polygonShape,s.b2ShapeType.e_polygonShape),this.AddType(to.Create,to.Destroy,s.b2ShapeType.e_edgeShape,s.b2ShapeType.e_circleShape),this.AddType(eo.Create,eo.Destroy,s.b2ShapeType.e_edgeShape,s.b2ShapeType.e_polygonShape),this.AddType(Ms.Create,Ms.Destroy,s.b2ShapeType.e_chainShape,s.b2ShapeType.e_circleShape),this.AddType(Ts.Create,Ts.Destroy,s.b2ShapeType.e_chainShape,s.b2ShapeType.e_polygonShape)}Create(i,r,u,h){const m=i.GetType(),_=u.GetType(),v=this.m_registers[m][_];if(v.createFcn){const w=v.createFcn(this.m_allocator);return v.primary?w.Reset(i,r,u,h):w.Reset(u,h,i,r),w}return null}Destroy(i){const r=i.m_fixtureA,u=i.m_fixtureB;i.m_manifold.pointCount>0&&!r.IsSensor()&&!u.IsSensor()&&(r.GetBody().SetAwake(!0),u.GetBody().SetAwake(!0));const h=r.GetType(),m=u.GetType(),_=this.m_registers[h][m];_.destroyFcn&&_.destroyFcn(i,this.m_allocator)}}class Va{ShouldCollide(i,r){const u=i.GetBody(),h=r.GetBody();if(h.GetType()===s.b2BodyType.b2_staticBody&&u.GetType()===s.b2BodyType.b2_staticBody||!h.ShouldCollideConnected(u))return!1;const m=i.GetFilterData(),_=r.GetFilterData();return m.groupIndex===_.groupIndex&&m.groupIndex!==0?m.groupIndex>0:(m.maskBits&_.categoryBits)!=0&&(m.categoryBits&_.maskBits)!=0}ShouldCollideFixtureParticle(i,r,u){return!0}ShouldCollideParticleParticle(i,r,u){return!0}}Va.b2_defaultFilter=new Va;class bd{constructor(){this.normalImpulses=Ut(y),this.tangentImpulses=Ut(y),this.count=0}}class ba{BeginContact(i){}EndContact(i){}BeginContactFixtureParticle(i,r){}EndContactFixtureParticle(i,r){}BeginContactParticleParticle(i,r){}EndContactParticleParticle(i,r){}PreSolve(i,r){}PostSolve(i,r){}}ba.b2_defaultListener=new ba;class or{ReportFixture(i){return!0}ReportParticle(i,r){return!1}ShouldQueryParticleSystem(i){return!0}}class Pd{constructor(){this.m_broadPhase=new md,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=Va.b2_defaultFilter,this.m_contactListener=ba.b2_defaultListener,this.m_allocator=null,this.m_contactFactory=new Vd(this.m_allocator)}AddPair(i,r){let u=i.fixture,h=r.fixture,m=i.childIndex,_=r.childIndex,v=u.GetBody(),w=h.GetBody();if(v===w)return;let V=w.GetContactList();for(;V;){if(V.other===v){const A=V.contact.GetFixtureA(),P=V.contact.GetFixtureB(),D=V.contact.GetChildIndexA(),R=V.contact.GetChildIndexB();if(A===u&&P===h&&D===m&&R===_||A===h&&P===u&&D===_&&R===m)return}V=V.next}if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(u,h))return;const b=this.m_contactFactory.Create(u,m,h,_);b!==null&&(u=b.GetFixtureA(),h=b.GetFixtureB(),m=b.GetChildIndexA(),_=b.GetChildIndexB(),v=u.m_body,w=h.m_body,b.m_prev=null,b.m_next=this.m_contactList,this.m_contactList!==null&&(this.m_contactList.m_prev=b),this.m_contactList=b,b.m_nodeA.contact=b,b.m_nodeA.other=w,b.m_nodeA.prev=null,b.m_nodeA.next=v.m_contactList,v.m_contactList!==null&&(v.m_contactList.prev=b.m_nodeA),v.m_contactList=b.m_nodeA,b.m_nodeB.contact=b,b.m_nodeB.other=v,b.m_nodeB.prev=null,b.m_nodeB.next=w.m_contactList,w.m_contactList!==null&&(w.m_contactList.prev=b.m_nodeB),w.m_contactList=b.m_nodeB,u.IsSensor()||h.IsSensor()||(v.SetAwake(!0),w.SetAwake(!0)),++this.m_contactCount)}FindNewContacts(){this.m_broadPhase.UpdatePairs((i,r)=>{this.AddPair(i,r)})}Destroy(i){const r=i.GetFixtureA(),u=i.GetFixtureB(),h=r.GetBody(),m=u.GetBody();this.m_contactListener&&i.IsTouching()&&this.m_contactListener.EndContact(i),i.m_prev&&(i.m_prev.m_next=i.m_next),i.m_next&&(i.m_next.m_prev=i.m_prev),i===this.m_contactList&&(this.m_contactList=i.m_next),i.m_nodeA.prev&&(i.m_nodeA.prev.next=i.m_nodeA.next),i.m_nodeA.next&&(i.m_nodeA.next.prev=i.m_nodeA.prev),i.m_nodeA===h.m_contactList&&(h.m_contactList=i.m_nodeA.next),i.m_nodeB.prev&&(i.m_nodeB.prev.next=i.m_nodeB.next),i.m_nodeB.next&&(i.m_nodeB.next.prev=i.m_nodeB.prev),i.m_nodeB===m.m_contactList&&(m.m_contactList=i.m_nodeB.next),this.m_contactFactory.Destroy(i),--this.m_contactCount}Collide(){let i=this.m_contactList;for(;i;){const r=i.GetFixtureA(),u=i.GetFixtureB(),h=i.GetChildIndexA(),m=i.GetChildIndexB(),_=r.GetBody(),v=u.GetBody();if(i.m_filterFlag){if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(r,u)){const D=i;i=D.m_next,this.Destroy(D);continue}i.m_filterFlag=!1}const w=_.IsAwake()&&_.m_type!==s.b2BodyType.b2_staticBody,V=v.IsAwake()&&v.m_type!==s.b2BodyType.b2_staticBody;if(!w&&!V){i=i.m_next;continue}const b=r.m_proxies[h].treeNode,A=u.m_proxies[m].treeNode;if(Au(b.aabb,A.aabb))i.Update(this.m_contactListener),i=i.m_next;else{const D=i;i=D.m_next,this.Destroy(D)}}}}class Gu{constructor(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}Reset(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this}}class Is{constructor(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.velocityIterations=0,this.positionIterations=0,this.particleIterations=0,this.warmStarting=!1}Copy(i){return this.dt=i.dt,this.inv_dt=i.inv_dt,this.dtRatio=i.dtRatio,this.positionIterations=i.positionIterations,this.velocityIterations=i.velocityIterations,this.particleIterations=i.particleIterations,this.warmStarting=i.warmStarting,this}}class io{constructor(){this.c=new l,this.a=0}static MakeArray(i){return Bt(i,r=>new io)}}class no{constructor(){this.v=new l,this.w=0}static MakeArray(i){return Bt(i,r=>new no)}}class Md{constructor(){this.step=new Is}}let ju=!1;class Pa{constructor(){this.rA=new l,this.rB=new l,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}static MakeArray(i){return Bt(i,r=>new Pa)}}class so{constructor(){this.points=Pa.MakeArray(y),this.normal=new l,this.tangent=new l,this.normalMass=new qt,this.K=new qt,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}static MakeArray(i){return Bt(i,r=>new so)}}class ro{constructor(){this.localPoints=l.MakeArray(y),this.localNormal=new l,this.localPoint=new l,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new l,this.localCenterB=new l,this.invIA=0,this.invIB=0,this.type=s.b2ManifoldType.e_unknown,this.radiusA=0,this.radiusB=0,this.pointCount=0}static MakeArray(i){return Bt(i,r=>new ro)}}class Td{constructor(){this.step=new Is,this.count=0,this.allocator=null}}class zi{constructor(){this.normal=new l,this.point=new l,this.separation=0}Initialize(i,r,u,h){const m=zi.Initialize_s_pointA,_=zi.Initialize_s_pointB,v=zi.Initialize_s_planePoint,w=zi.Initialize_s_clipPoint;switch(i.type){case s.b2ManifoldType.e_circles:ct.MulXV(r,i.localPoint,m),ct.MulXV(u,i.localPoints[0],_),l.SubVV(_,m,this.normal).SelfNormalize(),l.MidVV(m,_,this.point),this.separation=l.DotVV(l.SubVV(_,m,l.s_t0),this.normal)-i.radiusA-i.radiusB;break;case s.b2ManifoldType.e_faceA:tt.MulRV(r.q,i.localNormal,this.normal),ct.MulXV(r,i.localPoint,v),ct.MulXV(u,i.localPoints[h],w),this.separation=l.DotVV(l.SubVV(w,v,l.s_t0),this.normal)-i.radiusA-i.radiusB,this.point.Copy(w);break;case s.b2ManifoldType.e_faceB:tt.MulRV(u.q,i.localNormal,this.normal),ct.MulXV(u,i.localPoint,v),ct.MulXV(r,i.localPoints[h],w),this.separation=l.DotVV(l.SubVV(w,v,l.s_t0),this.normal)-i.radiusA-i.radiusB,this.point.Copy(w),this.normal.SelfNeg()}}}zi.Initialize_s_pointA=new l,zi.Initialize_s_pointB=new l,zi.Initialize_s_planePoint=new l,zi.Initialize_s_clipPoint=new l;class Lt{constructor(){this.m_step=new Is,this.m_allocator=null,this.m_positionConstraints=ro.MakeArray(1024),this.m_velocityConstraints=so.MakeArray(1024),this.m_count=0}Initialize(i){if(this.m_step.Copy(i.step),this.m_allocator=i.allocator,this.m_count=i.count,this.m_positionConstraints.length<this.m_count){const r=ut(2*this.m_positionConstraints.length,this.m_count);for(;this.m_positionConstraints.length<r;)this.m_positionConstraints[this.m_positionConstraints.length]=new ro}if(this.m_velocityConstraints.length<this.m_count){const r=ut(2*this.m_velocityConstraints.length,this.m_count);for(;this.m_velocityConstraints.length<r;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new so}this.m_positions=i.positions,this.m_velocities=i.velocities,this.m_contacts=i.contacts;for(let r=0;r<this.m_count;++r){const u=this.m_contacts[r],h=u.m_fixtureA,m=u.m_fixtureB,_=h.GetShape(),v=m.GetShape(),w=_.m_radius,V=v.m_radius,b=h.GetBody(),A=m.GetBody(),P=u.GetManifold(),D=P.pointCount,R=this.m_velocityConstraints[r];R.friction=u.m_friction,R.restitution=u.m_restitution,R.tangentSpeed=u.m_tangentSpeed,R.indexA=b.m_islandIndex,R.indexB=A.m_islandIndex,R.invMassA=b.m_invMass,R.invMassB=A.m_invMass,R.invIA=b.m_invI,R.invIB=A.m_invI,R.contactIndex=r,R.pointCount=D,R.K.SetZero(),R.normalMass.SetZero();const z=this.m_positionConstraints[r];z.indexA=b.m_islandIndex,z.indexB=A.m_islandIndex,z.invMassA=b.m_invMass,z.invMassB=A.m_invMass,z.localCenterA.Copy(b.m_sweep.localCenter),z.localCenterB.Copy(A.m_sweep.localCenter),z.invIA=b.m_invI,z.invIB=A.m_invI,z.localNormal.Copy(P.localNormal),z.localPoint.Copy(P.localPoint),z.pointCount=D,z.radiusA=w,z.radiusB=V,z.type=P.type;for(let U=0;U<D;++U){const J=P.points[U],W=R.points[U];this.m_step.warmStarting?(W.normalImpulse=this.m_step.dtRatio*J.normalImpulse,W.tangentImpulse=this.m_step.dtRatio*J.tangentImpulse):(W.normalImpulse=0,W.tangentImpulse=0),W.rA.SetZero(),W.rB.SetZero(),W.normalMass=0,W.tangentMass=0,W.velocityBias=0,z.localPoints[U].Copy(J.localPoint)}}return this}InitializeVelocityConstraints(){const i=Lt.InitializeVelocityConstraints_s_xfA,r=Lt.InitializeVelocityConstraints_s_xfB,u=Lt.InitializeVelocityConstraints_s_worldManifold;for(let h=0;h<this.m_count;++h){const m=this.m_velocityConstraints[h],_=this.m_positionConstraints[h],v=_.radiusA,w=_.radiusB,V=this.m_contacts[m.contactIndex].GetManifold(),b=m.indexA,A=m.indexB,P=m.invMassA,D=m.invMassB,R=m.invIA,z=m.invIB,U=_.localCenterA,J=_.localCenterB,W=this.m_positions[b].c,K=this.m_positions[b].a,it=this.m_velocities[b].v,at=this.m_velocities[b].w,st=this.m_positions[A].c,pt=this.m_positions[A].a,St=this.m_velocities[A].v,Dt=this.m_velocities[A].w;i.q.SetAngle(K),r.q.SetAngle(pt),l.SubVV(W,tt.MulRV(i.q,U,l.s_t0),i.p),l.SubVV(st,tt.MulRV(r.q,J,l.s_t0),r.p),u.Initialize(V,i,v,r,w),m.normal.Copy(u.normal),l.CrossVOne(m.normal,m.tangent);const It=m.pointCount;for(let Mt=0;Mt<It;++Mt){const At=m.points[Mt];l.SubVV(u.points[Mt],W,At.rA),l.SubVV(u.points[Mt],st,At.rB);const vt=l.CrossVV(At.rA,m.normal),Wt=l.CrossVV(At.rB,m.normal),Ft=P+D+R*vt*vt+z*Wt*Wt;At.normalMass=Ft>0?1/Ft:0;const Qt=m.tangent,le=l.CrossVV(At.rA,Qt),oe=l.CrossVV(At.rB,Qt),Re=P+D+R*le*le+z*oe*oe;At.tangentMass=Re>0?1/Re:0,At.velocityBias=0;const vi=l.DotVV(m.normal,l.SubVV(l.AddVCrossSV(St,Dt,At.rB,l.s_t0),l.AddVCrossSV(it,at,At.rA,l.s_t1),l.s_t0));vi<-I&&(At.velocityBias+=-m.restitution*vi)}if(m.pointCount===2&&ju){const Mt=m.points[0],At=m.points[1],vt=l.CrossVV(Mt.rA,m.normal),Wt=l.CrossVV(Mt.rB,m.normal),Ft=l.CrossVV(At.rA,m.normal),Qt=l.CrossVV(At.rB,m.normal),le=P+D+R*vt*vt+z*Wt*Wt,oe=P+D+R*Ft*Ft+z*Qt*Qt,Re=P+D+R*vt*Ft+z*Wt*Qt;le*le<1e3*(le*oe-Re*Re)?(m.K.ex.Set(le,Re),m.K.ey.Set(Re,oe),m.K.GetInverse(m.normalMass)):m.pointCount=1}}}WarmStart(){const i=Lt.WarmStart_s_P;for(let r=0;r<this.m_count;++r){const u=this.m_velocityConstraints[r],h=u.indexA,m=u.indexB,_=u.invMassA,v=u.invIA,w=u.invMassB,V=u.invIB,b=u.pointCount,A=this.m_velocities[h].v;let P=this.m_velocities[h].w;const D=this.m_velocities[m].v;let R=this.m_velocities[m].w;const z=u.normal,U=u.tangent;for(let J=0;J<b;++J){const W=u.points[J];l.AddVV(l.MulSV(W.normalImpulse,z,l.s_t0),l.MulSV(W.tangentImpulse,U,l.s_t1),i),P-=v*l.CrossVV(W.rA,i),A.SelfMulSub(_,i),R+=V*l.CrossVV(W.rB,i),D.SelfMulAdd(w,i)}this.m_velocities[h].w=P,this.m_velocities[m].w=R}}SolveVelocityConstraints(){const i=Lt.SolveVelocityConstraints_s_dv,r=Lt.SolveVelocityConstraints_s_dv1,u=Lt.SolveVelocityConstraints_s_dv2,h=Lt.SolveVelocityConstraints_s_P,m=Lt.SolveVelocityConstraints_s_a,_=Lt.SolveVelocityConstraints_s_b,v=Lt.SolveVelocityConstraints_s_x,w=Lt.SolveVelocityConstraints_s_d,V=Lt.SolveVelocityConstraints_s_P1,b=Lt.SolveVelocityConstraints_s_P2,A=Lt.SolveVelocityConstraints_s_P1P2;for(let P=0;P<this.m_count;++P){const D=this.m_velocityConstraints[P],R=D.indexA,z=D.indexB,U=D.invMassA,J=D.invIA,W=D.invMassB,K=D.invIB,it=D.pointCount,at=this.m_velocities[R].v;let st=this.m_velocities[R].w;const pt=this.m_velocities[z].v;let St=this.m_velocities[z].w;const Dt=D.normal,It=D.tangent,Mt=D.friction;for(let At=0;At<it;++At){const vt=D.points[At];l.SubVV(l.AddVCrossSV(pt,St,vt.rB,l.s_t0),l.AddVCrossSV(at,st,vt.rA,l.s_t1),i);const Wt=l.DotVV(i,It)-D.tangentSpeed;let Ft=vt.tangentMass*-Wt;const Qt=Mt*vt.normalImpulse,le=yt(vt.tangentImpulse+Ft,-Qt,Qt);Ft=le-vt.tangentImpulse,vt.tangentImpulse=le,l.MulSV(Ft,It,h),at.SelfMulSub(U,h),st-=J*l.CrossVV(vt.rA,h),pt.SelfMulAdd(W,h),St+=K*l.CrossVV(vt.rB,h)}if(D.pointCount===1||ju===!1)for(let At=0;At<it;++At){const vt=D.points[At];l.SubVV(l.AddVCrossSV(pt,St,vt.rB,l.s_t0),l.AddVCrossSV(at,st,vt.rA,l.s_t1),i);const Wt=l.DotVV(i,Dt);let Ft=-vt.normalMass*(Wt-vt.velocityBias);const Qt=ut(vt.normalImpulse+Ft,0);Ft=Qt-vt.normalImpulse,vt.normalImpulse=Qt,l.MulSV(Ft,Dt,h),at.SelfMulSub(U,h),st-=J*l.CrossVV(vt.rA,h),pt.SelfMulAdd(W,h),St+=K*l.CrossVV(vt.rB,h)}else{const At=D.points[0],vt=D.points[1];m.Set(At.normalImpulse,vt.normalImpulse),l.SubVV(l.AddVCrossSV(pt,St,At.rB,l.s_t0),l.AddVCrossSV(at,st,At.rA,l.s_t1),r),l.SubVV(l.AddVCrossSV(pt,St,vt.rB,l.s_t0),l.AddVCrossSV(at,st,vt.rA,l.s_t1),u);let Wt=l.DotVV(r,Dt),Ft=l.DotVV(u,Dt);for(_.x=Wt-At.velocityBias,_.y=Ft-vt.velocityBias,_.SelfSub(qt.MulMV(D.K,m,l.s_t0));;){if(qt.MulMV(D.normalMass,_,v).SelfNeg(),v.x>=0&&v.y>=0){l.SubVV(v,m,w),l.MulSV(w.x,Dt,V),l.MulSV(w.y,Dt,b),l.AddVV(V,b,A),at.SelfMulSub(U,A),st-=J*(l.CrossVV(At.rA,V)+l.CrossVV(vt.rA,b)),pt.SelfMulAdd(W,A),St+=K*(l.CrossVV(At.rB,V)+l.CrossVV(vt.rB,b)),At.normalImpulse=v.x,vt.normalImpulse=v.y;break}if(v.x=-At.normalMass*_.x,v.y=0,Wt=0,Ft=D.K.ex.y*v.x+_.y,v.x>=0&&Ft>=0){l.SubVV(v,m,w),l.MulSV(w.x,Dt,V),l.MulSV(w.y,Dt,b),l.AddVV(V,b,A),at.SelfMulSub(U,A),st-=J*(l.CrossVV(At.rA,V)+l.CrossVV(vt.rA,b)),pt.SelfMulAdd(W,A),St+=K*(l.CrossVV(At.rB,V)+l.CrossVV(vt.rB,b)),At.normalImpulse=v.x,vt.normalImpulse=v.y;break}if(v.x=0,v.y=-vt.normalMass*_.y,Wt=D.K.ey.x*v.y+_.x,Ft=0,v.y>=0&&Wt>=0){l.SubVV(v,m,w),l.MulSV(w.x,Dt,V),l.MulSV(w.y,Dt,b),l.AddVV(V,b,A),at.SelfMulSub(U,A),st-=J*(l.CrossVV(At.rA,V)+l.CrossVV(vt.rA,b)),pt.SelfMulAdd(W,A),St+=K*(l.CrossVV(At.rB,V)+l.CrossVV(vt.rB,b)),At.normalImpulse=v.x,vt.normalImpulse=v.y;break}if(v.x=0,v.y=0,Wt=_.x,Ft=_.y,Wt>=0&&Ft>=0){l.SubVV(v,m,w),l.MulSV(w.x,Dt,V),l.MulSV(w.y,Dt,b),l.AddVV(V,b,A),at.SelfMulSub(U,A),st-=J*(l.CrossVV(At.rA,V)+l.CrossVV(vt.rA,b)),pt.SelfMulAdd(W,A),St+=K*(l.CrossVV(At.rB,V)+l.CrossVV(vt.rB,b)),At.normalImpulse=v.x,vt.normalImpulse=v.y;break}break}}this.m_velocities[R].w=st,this.m_velocities[z].w=St}}StoreImpulses(){for(let i=0;i<this.m_count;++i){const r=this.m_velocityConstraints[i],u=this.m_contacts[r.contactIndex].GetManifold();for(let h=0;h<r.pointCount;++h)u.points[h].normalImpulse=r.points[h].normalImpulse,u.points[h].tangentImpulse=r.points[h].tangentImpulse}}SolvePositionConstraints(){const i=Lt.SolvePositionConstraints_s_xfA,r=Lt.SolvePositionConstraints_s_xfB,u=Lt.SolvePositionConstraints_s_psm,h=Lt.SolvePositionConstraints_s_rA,m=Lt.SolvePositionConstraints_s_rB,_=Lt.SolvePositionConstraints_s_P;let v=0;for(let w=0;w<this.m_count;++w){const V=this.m_positionConstraints[w],b=V.indexA,A=V.indexB,P=V.localCenterA,D=V.invMassA,R=V.invIA,z=V.localCenterB,U=V.invMassB,J=V.invIB,W=V.pointCount,K=this.m_positions[b].c;let it=this.m_positions[b].a;const at=this.m_positions[A].c;let st=this.m_positions[A].a;for(let pt=0;pt<W;++pt){i.q.SetAngle(it),r.q.SetAngle(st),l.SubVV(K,tt.MulRV(i.q,P,l.s_t0),i.p),l.SubVV(at,tt.MulRV(r.q,z,l.s_t0),r.p),u.Initialize(V,i,r,pt);const St=u.normal,Dt=u.point,It=u.separation;l.SubVV(Dt,K,h),l.SubVV(Dt,at,m),v=dt(v,It);const Mt=yt(H*(It+p),-L,0),At=l.CrossVV(h,St),vt=l.CrossVV(m,St),Wt=D+U+R*At*At+J*vt*vt,Ft=Wt>0?-Mt/Wt:0;l.MulSV(Ft,St,_),K.SelfMulSub(D,_),it-=R*l.CrossVV(h,_),at.SelfMulAdd(U,_),st+=J*l.CrossVV(m,_)}this.m_positions[b].a=it,this.m_positions[A].a=st}return v>-3*p}SolveTOIPositionConstraints(i,r){const u=Lt.SolveTOIPositionConstraints_s_xfA,h=Lt.SolveTOIPositionConstraints_s_xfB,m=Lt.SolveTOIPositionConstraints_s_psm,_=Lt.SolveTOIPositionConstraints_s_rA,v=Lt.SolveTOIPositionConstraints_s_rB,w=Lt.SolveTOIPositionConstraints_s_P;let V=0;for(let b=0;b<this.m_count;++b){const A=this.m_positionConstraints[b],P=A.indexA,D=A.indexB,R=A.localCenterA,z=A.localCenterB,U=A.pointCount;let J=0,W=0;P!==i&&P!==r||(J=A.invMassA,W=A.invIA);let K=0,it=0;D!==i&&D!==r||(K=A.invMassB,it=A.invIB);const at=this.m_positions[P].c;let st=this.m_positions[P].a;const pt=this.m_positions[D].c;let St=this.m_positions[D].a;for(let Dt=0;Dt<U;++Dt){u.q.SetAngle(st),h.q.SetAngle(St),l.SubVV(at,tt.MulRV(u.q,R,l.s_t0),u.p),l.SubVV(pt,tt.MulRV(h.q,z,l.s_t0),h.p),m.Initialize(A,u,h,Dt);const It=m.normal,Mt=m.point,At=m.separation;l.SubVV(Mt,at,_),l.SubVV(Mt,pt,v),V=dt(V,At);const vt=yt(q*(At+p),-L,0),Wt=l.CrossVV(_,It),Ft=l.CrossVV(v,It),Qt=J+K+W*Wt*Wt+it*Ft*Ft,le=Qt>0?-vt/Qt:0;l.MulSV(le,It,w),at.SelfMulSub(J,w),st-=W*l.CrossVV(_,w),pt.SelfMulAdd(K,w),St+=it*l.CrossVV(v,w)}this.m_positions[P].a=st,this.m_positions[D].a=St}return V>=-1.5*p}}Lt.InitializeVelocityConstraints_s_xfA=new ct,Lt.InitializeVelocityConstraints_s_xfB=new ct,Lt.InitializeVelocityConstraints_s_worldManifold=new Me,Lt.WarmStart_s_P=new l,Lt.SolveVelocityConstraints_s_dv=new l,Lt.SolveVelocityConstraints_s_dv1=new l,Lt.SolveVelocityConstraints_s_dv2=new l,Lt.SolveVelocityConstraints_s_P=new l,Lt.SolveVelocityConstraints_s_a=new l,Lt.SolveVelocityConstraints_s_b=new l,Lt.SolveVelocityConstraints_s_x=new l,Lt.SolveVelocityConstraints_s_d=new l,Lt.SolveVelocityConstraints_s_P1=new l,Lt.SolveVelocityConstraints_s_P2=new l,Lt.SolveVelocityConstraints_s_P1P2=new l,Lt.SolvePositionConstraints_s_xfA=new ct,Lt.SolvePositionConstraints_s_xfB=new ct,Lt.SolvePositionConstraints_s_psm=new zi,Lt.SolvePositionConstraints_s_rA=new l,Lt.SolvePositionConstraints_s_rB=new l,Lt.SolvePositionConstraints_s_P=new l,Lt.SolveTOIPositionConstraints_s_xfA=new ct,Lt.SolveTOIPositionConstraints_s_xfB=new ct,Lt.SolveTOIPositionConstraints_s_psm=new zi,Lt.SolveTOIPositionConstraints_s_rA=new l,Lt.SolveTOIPositionConstraints_s_rB=new l,Lt.SolveTOIPositionConstraints_s_P=new l;class Ne{constructor(){this.m_allocator=null,this.m_bodies=[],this.m_contacts=[],this.m_joints=[],this.m_positions=io.MakeArray(1024),this.m_velocities=no.MakeArray(1024),this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=0,this.m_contactCapacity=0,this.m_jointCapacity=0}Initialize(i,r,u,h,m){if(this.m_bodyCapacity=i,this.m_contactCapacity=r,this.m_jointCapacity=u,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=h,this.m_listener=m,this.m_positions.length<i){const _=ut(2*this.m_positions.length,i);for(;this.m_positions.length<_;)this.m_positions[this.m_positions.length]=new io}if(this.m_velocities.length<i){const _=ut(2*this.m_velocities.length,i);for(;this.m_velocities.length<_;)this.m_velocities[this.m_velocities.length]=new no}}Clear(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0}AddBody(i){i.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=i}AddContact(i){this.m_contacts[this.m_contactCount++]=i}AddJoint(i){this.m_joints[this.m_jointCount++]=i}Solve(i,r,u,h){const m=Ne.s_timer.Reset(),_=r.dt;for(let A=0;A<this.m_bodyCount;++A){const P=this.m_bodies[A];this.m_positions[A].c.Copy(P.m_sweep.c);const D=P.m_sweep.a,R=this.m_velocities[A].v.Copy(P.m_linearVelocity);let z=P.m_angularVelocity;P.m_sweep.c0.Copy(P.m_sweep.c),P.m_sweep.a0=P.m_sweep.a,P.m_type===s.b2BodyType.b2_dynamicBody&&(R.x+=_*(P.m_gravityScale*u.x+P.m_invMass*P.m_force.x),R.y+=_*(P.m_gravityScale*u.y+P.m_invMass*P.m_force.y),z+=_*P.m_invI*P.m_torque,R.SelfMul(1/(1+_*P.m_linearDamping)),z*=1/(1+_*P.m_angularDamping)),this.m_positions[A].a=D,this.m_velocities[A].w=z}m.Reset();const v=Ne.s_solverData;v.step.Copy(r),v.positions=this.m_positions,v.velocities=this.m_velocities;const w=Ne.s_contactSolverDef;w.step.Copy(r),w.contacts=this.m_contacts,w.count=this.m_contactCount,w.positions=this.m_positions,w.velocities=this.m_velocities,w.allocator=this.m_allocator;const V=Ne.s_contactSolver.Initialize(w);V.InitializeVelocityConstraints(),r.warmStarting&&V.WarmStart();for(let A=0;A<this.m_jointCount;++A)this.m_joints[A].InitVelocityConstraints(v);i.solveInit=m.GetMilliseconds(),m.Reset();for(let A=0;A<r.velocityIterations;++A){for(let P=0;P<this.m_jointCount;++P)this.m_joints[P].SolveVelocityConstraints(v);V.SolveVelocityConstraints()}V.StoreImpulses(),i.solveVelocity=m.GetMilliseconds();for(let A=0;A<this.m_bodyCount;++A){const P=this.m_positions[A].c;let D=this.m_positions[A].a;const R=this.m_velocities[A].v;let z=this.m_velocities[A].w;const U=l.MulSV(_,R,Ne.s_translation);if(l.DotVV(U,U)>G){const W=k/U.Length();R.SelfMul(W)}const J=_*z;if(J*J>E){const W=O/rt(J);z*=W}P.x+=_*R.x,P.y+=_*R.y,D+=_*z,this.m_positions[A].a=D,this.m_velocities[A].w=z}m.Reset();let b=!1;for(let A=0;A<r.positionIterations;++A){const P=V.SolvePositionConstraints();let D=!0;for(let R=0;R<this.m_jointCount;++R){const z=this.m_joints[R].SolvePositionConstraints(v);D=D&&z}if(P&&D){b=!0;break}}for(let A=0;A<this.m_bodyCount;++A){const P=this.m_bodies[A];P.m_sweep.c.Copy(this.m_positions[A].c),P.m_sweep.a=this.m_positions[A].a,P.m_linearVelocity.Copy(this.m_velocities[A].v),P.m_angularVelocity=this.m_velocities[A].w,P.SynchronizeTransform()}if(i.solvePosition=m.GetMilliseconds(),this.Report(V.m_velocityConstraints),h){let A=a;const P=Q*Q,D=lt*lt;for(let R=0;R<this.m_bodyCount;++R){const z=this.m_bodies[R];z.GetType()!==s.b2BodyType.b2_staticBody&&(!z.m_autoSleepFlag||z.m_angularVelocity*z.m_angularVelocity>D||l.DotVV(z.m_linearVelocity,z.m_linearVelocity)>P?(z.m_sleepTime=0,A=0):(z.m_sleepTime+=_,A=dt(A,z.m_sleepTime)))}if(A>=Y&&b)for(let R=0;R<this.m_bodyCount;++R)this.m_bodies[R].SetAwake(!1)}}SolveTOI(i,r,u){for(let v=0;v<this.m_bodyCount;++v){const w=this.m_bodies[v];this.m_positions[v].c.Copy(w.m_sweep.c),this.m_positions[v].a=w.m_sweep.a,this.m_velocities[v].v.Copy(w.m_linearVelocity),this.m_velocities[v].w=w.m_angularVelocity}const h=Ne.s_contactSolverDef;h.contacts=this.m_contacts,h.count=this.m_contactCount,h.allocator=this.m_allocator,h.step.Copy(i),h.positions=this.m_positions,h.velocities=this.m_velocities;const m=Ne.s_contactSolver.Initialize(h);for(let v=0;v<i.positionIterations&&!m.SolveTOIPositionConstraints(r,u);++v);this.m_bodies[r].m_sweep.c0.Copy(this.m_positions[r].c),this.m_bodies[r].m_sweep.a0=this.m_positions[r].a,this.m_bodies[u].m_sweep.c0.Copy(this.m_positions[u].c),this.m_bodies[u].m_sweep.a0=this.m_positions[u].a,m.InitializeVelocityConstraints();for(let v=0;v<i.velocityIterations;++v)m.SolveVelocityConstraints();const _=i.dt;for(let v=0;v<this.m_bodyCount;++v){const w=this.m_positions[v].c;let V=this.m_positions[v].a;const b=this.m_velocities[v].v;let A=this.m_velocities[v].w;const P=l.MulSV(_,b,Ne.s_translation);if(l.DotVV(P,P)>G){const z=k/P.Length();b.SelfMul(z)}const D=_*A;if(D*D>E){const z=O/rt(D);A*=z}w.SelfMulAdd(_,b),V+=_*A,this.m_positions[v].a=V,this.m_velocities[v].w=A;const R=this.m_bodies[v];R.m_sweep.c.Copy(w),R.m_sweep.a=V,R.m_linearVelocity.Copy(b),R.m_angularVelocity=A,R.SynchronizeTransform()}this.Report(m.m_velocityConstraints)}Report(i){if(this.m_listener!==null)for(let r=0;r<this.m_contactCount;++r){const u=this.m_contacts[r];if(!u)continue;const h=i[r],m=Ne.s_impulse;m.count=h.pointCount;for(let _=0;_<h.pointCount;++_)m.normalImpulses[_]=h.points[_].normalImpulse,m.tangentImpulses[_]=h.points[_].tangentImpulse;this.m_listener.PostSolve(u,m)}}}var Ht,Oi;Ne.s_timer=new Yt,Ne.s_solverData=new Md,Ne.s_contactSolverDef=new Td,Ne.s_contactSolver=new Lt,Ne.s_translation=new l,Ne.s_impulse=new bd,(Ht=s.b2ParticleFlag||(s.b2ParticleFlag={}))[Ht.b2_waterParticle=0]="b2_waterParticle",Ht[Ht.b2_zombieParticle=2]="b2_zombieParticle",Ht[Ht.b2_wallParticle=4]="b2_wallParticle",Ht[Ht.b2_springParticle=8]="b2_springParticle",Ht[Ht.b2_elasticParticle=16]="b2_elasticParticle",Ht[Ht.b2_viscousParticle=32]="b2_viscousParticle",Ht[Ht.b2_powderParticle=64]="b2_powderParticle",Ht[Ht.b2_tensileParticle=128]="b2_tensileParticle",Ht[Ht.b2_colorMixingParticle=256]="b2_colorMixingParticle",Ht[Ht.b2_destructionListenerParticle=512]="b2_destructionListenerParticle",Ht[Ht.b2_barrierParticle=1024]="b2_barrierParticle",Ht[Ht.b2_staticPressureParticle=2048]="b2_staticPressureParticle",Ht[Ht.b2_reactiveParticle=4096]="b2_reactiveParticle",Ht[Ht.b2_repulsiveParticle=8192]="b2_repulsiveParticle",Ht[Ht.b2_fixtureContactListenerParticle=16384]="b2_fixtureContactListenerParticle",Ht[Ht.b2_particleContactListenerParticle=32768]="b2_particleContactListenerParticle",Ht[Ht.b2_fixtureContactFilterParticle=65536]="b2_fixtureContactFilterParticle",Ht[Ht.b2_particleContactFilterParticle=131072]="b2_particleContactFilterParticle";class Nu{constructor(){this.flags=0,this.position=new l,this.velocity=new l,this.color=new Kt(0,0,0,0),this.lifetime=0,this.userData=null,this.group=null}}function Id(j,i,r){const u=Math.ceil(Math.sqrt(j/(.01*i))*r);return yt(u,1,8)}class Dd{constructor(){this.m_index=$}GetIndex(){return this.m_index}SetIndex(i){this.m_index=i}}(Oi=s.b2ParticleGroupFlag||(s.b2ParticleGroupFlag={}))[Oi.b2_solidParticleGroup=1]="b2_solidParticleGroup",Oi[Oi.b2_rigidParticleGroup=2]="b2_rigidParticleGroup",Oi[Oi.b2_particleGroupCanBeEmpty=4]="b2_particleGroupCanBeEmpty",Oi[Oi.b2_particleGroupWillBeDestroyed=8]="b2_particleGroupWillBeDestroyed",Oi[Oi.b2_particleGroupNeedsUpdateDepth=16]="b2_particleGroupNeedsUpdateDepth",Oi[Oi.b2_particleGroupInternalMask=24]="b2_particleGroupInternalMask";class kd{constructor(){this.flags=0,this.groupFlags=0,this.position=new l,this.angle=0,this.linearVelocity=new l,this.angularVelocity=0,this.color=new Kt,this.strength=1,this.shapeCount=0,this.stride=0,this.particleCount=0,this.lifetime=0,this.userData=null,this.group=null}}class oo{constructor(i){this.m_firstIndex=0,this.m_lastIndex=0,this.m_groupFlags=0,this.m_strength=1,this.m_prev=null,this.m_next=null,this.m_timestamp=-1,this.m_mass=0,this.m_inertia=0,this.m_center=new l,this.m_linearVelocity=new l,this.m_angularVelocity=0,this.m_transform=new ct,this.m_userData=null,this.m_system=i}GetNext(){return this.m_next}GetParticleSystem(){return this.m_system}GetParticleCount(){return this.m_lastIndex-this.m_firstIndex}GetBufferIndex(){return this.m_firstIndex}ContainsParticle(i){return this.m_firstIndex<=i&&i<this.m_lastIndex}GetAllParticleFlags(){if(!this.m_system.m_flagsBuffer.data)throw new Error;let i=0;for(let r=this.m_firstIndex;r<this.m_lastIndex;r++)i|=this.m_system.m_flagsBuffer.data[r];return i}GetGroupFlags(){return this.m_groupFlags}SetGroupFlags(i){i|=this.m_groupFlags&s.b2ParticleGroupFlag.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,i)}GetMass(){return this.UpdateStatistics(),this.m_mass}GetInertia(){return this.UpdateStatistics(),this.m_inertia}GetCenter(){return this.UpdateStatistics(),this.m_center}GetLinearVelocity(){return this.UpdateStatistics(),this.m_linearVelocity}GetAngularVelocity(){return this.UpdateStatistics(),this.m_angularVelocity}GetTransform(){return this.m_transform}GetPosition(){return this.m_transform.p}GetAngle(){return this.m_transform.q.GetAngle()}GetLinearVelocityFromWorldPoint(i,r){const u=oo.GetLinearVelocityFromWorldPoint_s_t0;return this.UpdateStatistics(),l.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,l.SubVV(i,this.m_center,u),r)}GetUserData(){return this.m_userData}SetUserData(i){this.m_userData=i}ApplyForce(i){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,i)}ApplyLinearImpulse(i){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,i)}DestroyParticles(i){if(this.m_system.m_world.IsLocked())throw new Error;for(let r=this.m_firstIndex;r<this.m_lastIndex;r++)this.m_system.DestroyParticle(r,i)}UpdateStatistics(){if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;const i=new l,r=new l;if(this.m_timestamp!==this.m_system.m_timestamp){const u=this.m_system.GetParticleMass();this.m_mass=u*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(let h=this.m_firstIndex;h<this.m_lastIndex;h++)this.m_center.SelfMulAdd(u,this.m_system.m_positionBuffer.data[h]),this.m_linearVelocity.SelfMulAdd(u,this.m_system.m_velocityBuffer.data[h]);if(this.m_mass>0){const h=1/this.m_mass;this.m_center.SelfMul(h),this.m_linearVelocity.SelfMul(h)}this.m_inertia=0,this.m_angularVelocity=0;for(let h=this.m_firstIndex;h<this.m_lastIndex;h++)l.SubVV(this.m_system.m_positionBuffer.data[h],this.m_center,i),l.SubVV(this.m_system.m_velocityBuffer.data[h],this.m_linearVelocity,r),this.m_inertia+=u*l.DotVV(i,i),this.m_angularVelocity+=u*l.CrossVV(i,r);this.m_inertia>0&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}}}oo.GetLinearVelocityFromWorldPoint_s_t0=new l;class cx{constructor(i){this.m_front=0,this.m_back=0,this.m_capacity=0,this.m_buffer=Bt(i,r=>null),this.m_capacity=i}Push(i){if(this.m_back>=this.m_capacity){for(let r=this.m_front;r<this.m_back;r++)this.m_buffer[r-this.m_front]=this.m_buffer[r];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(this.m_capacity>0?(this.m_buffer.concat(Bt(this.m_capacity,r=>null)),this.m_capacity*=2):(this.m_buffer.concat(Bt(1,r=>null)),this.m_capacity=1))}this.m_buffer[this.m_back]=i,this.m_back++}Pop(){this.m_buffer[this.m_front]=null,this.m_front++}Empty(){return this.m_front===this.m_back}Front(){const i=this.m_buffer[this.m_front];if(!i)throw new Error;return i}}class ze{constructor(i){this.m_generatorCapacity=0,this.m_generatorCount=0,this.m_countX=0,this.m_countY=0,this.m_diagram=[],this.m_generatorBuffer=Bt(i,r=>new ze.Generator),this.m_generatorCapacity=i}AddGenerator(i,r,u){const h=this.m_generatorBuffer[this.m_generatorCount++];h.center.Copy(i),h.tag=r,h.necessary=u}Generate(i,r){const u=1/i,h=new l(+a,+a),m=new l(-a,-a);let _=0;for(let w=0;w<this.m_generatorCount;w++){const V=this.m_generatorBuffer[w];V.necessary&&(l.MinV(h,V.center,h),l.MaxV(m,V.center,m),++_)}if(_===0)return this.m_countX=0,void(this.m_countY=0);h.x-=r,h.y-=r,m.x+=r,m.y+=r,this.m_countX=1+Math.floor(u*(m.x-h.x)),this.m_countY=1+Math.floor(u*(m.y-h.y)),this.m_diagram=[];const v=new cx(4*this.m_countX*this.m_countY);for(let w=0;w<this.m_generatorCount;w++){const V=this.m_generatorBuffer[w];V.center.SelfSub(h).SelfMul(u);const b=Math.floor(V.center.x),A=Math.floor(V.center.y);b>=0&&A>=0&&b<this.m_countX&&A<this.m_countY&&v.Push(new ze.Task(b,A,b+A*this.m_countX,V))}for(;!v.Empty();){const w=v.Front(),V=w.m_x,b=w.m_y,A=w.m_i,P=w.m_generator;v.Pop(),this.m_diagram[A]||(this.m_diagram[A]=P,V>0&&v.Push(new ze.Task(V-1,b,A-1,P)),b>0&&v.Push(new ze.Task(V,b-1,A-this.m_countX,P)),V<this.m_countX-1&&v.Push(new ze.Task(V+1,b,A+1,P)),b<this.m_countY-1&&v.Push(new ze.Task(V,b+1,A+this.m_countX,P)))}for(let w=0;w<this.m_countY;w++)for(let V=0;V<this.m_countX-1;V++){const b=V+w*this.m_countX,A=this.m_diagram[b],P=this.m_diagram[b+1];A!==P&&(v.Push(new ze.Task(V,w,b,P)),v.Push(new ze.Task(V+1,w,b+1,A)))}for(let w=0;w<this.m_countY-1;w++)for(let V=0;V<this.m_countX;V++){const b=V+w*this.m_countX,A=this.m_diagram[b],P=this.m_diagram[b+this.m_countX];A!==P&&(v.Push(new ze.Task(V,w,b,P)),v.Push(new ze.Task(V,w+1,b+this.m_countX,A)))}for(;!v.Empty();){const w=v.Front(),V=w.m_x,b=w.m_y,A=w.m_i,P=w.m_generator;v.Pop();const D=this.m_diagram[A],R=P;if(D!==R){const z=D.center.x-V,U=D.center.y-b,J=R.center.x-V,W=R.center.y-b,K=z*z+U*U,it=J*J+W*W;K>it&&(this.m_diagram[A]=R,V>0&&v.Push(new ze.Task(V-1,b,A-1,R)),b>0&&v.Push(new ze.Task(V,b-1,A-this.m_countX,R)),V<this.m_countX-1&&v.Push(new ze.Task(V+1,b,A+1,R)),b<this.m_countY-1&&v.Push(new ze.Task(V,b+1,A+this.m_countX,R)))}}}GetNodes(i){for(let r=0;r<this.m_countY-1;r++)for(let u=0;u<this.m_countX-1;u++){const h=u+r*this.m_countX,m=this.m_diagram[h],_=this.m_diagram[h+1],v=this.m_diagram[h+this.m_countX],w=this.m_diagram[h+1+this.m_countX];_!==v&&(m!==_&&m!==v&&(m.necessary||_.necessary||v.necessary)&&i(m.tag,_.tag,v.tag),w!==_&&w!==v&&(m.necessary||_.necessary||v.necessary)&&i(_.tag,w.tag,v.tag))}}}function Ma(j,i,r){const u=j[i];j[i]=j[r],j[r]=u}function Ld(j,i){return j<i}function Ta(j,i=0,r=j.length-i,u=Ld){let h=i;const m=[];let _=0;for(;;){for(;h+1<r;r++){const v=j[h+Math.floor(Math.random()*(r-h))];m[_++]=r;for(let w=h-1;;){for(;u(j[++w],v););for(;u(v,j[--r]););if(w>=r)break;Ma(j,w,r)}}if(_===0)break;h=r,r=m[--_]}return j}function Rd(j,i=0,r=j.length-i,u=Ld){return Ta(j,i,r,u)}function Fd(j,i,r=j.length){let u=0;for(let h=0;h<r;++h)i(j[h])||(h!==u?Ma(j,u++,h):++u);return u}function Ed(j,i,r,u,h){let m=r-i;for(;m>0;){const _=Math.floor(m/2);let v=i+_;h(j[v],u)?(i=++v,m-=_+1):m=_}return i}function Gd(j,i,r,u,h){let m=r-i;for(;m>0;){const _=Math.floor(m/2);let v=i+_;h(u,j[v])?m=_:(i=++v,m-=_+1)}return i}function gi(j,i,r,u){let h=r;for(;i!==h;)Ma(j,i++,h++),h===u?h=r:i===r&&(r=h)}(function(j){j.Generator=class{constructor(){this.center=new l,this.tag=0,this.necessary=!1}},j.Task=class{constructor(i,r,u,h){this.m_x=i,this.m_y=r,this.m_i=u,this.m_generator=h}}})(ze||(ze={}));class Ds{constructor(i){this.data=[],this.count=0,this.capacity=0,this.allocator=i}Append(){return this.count>=this.capacity&&this.Grow(),this.count++}Reserve(i){if(!(this.capacity>=i)){for(let r=this.capacity;r<i;++r)this.data[r]=this.allocator();this.capacity=i}}Grow(){const i=this.capacity?2*this.capacity:Ct;this.Reserve(i)}Free(){this.data.length!==0&&(this.data=[],this.capacity=0,this.count=0)}Shorten(i){}Data(){return this.data}GetCount(){return this.count}SetCount(i){this.count=i}GetCapacity(){return this.capacity}RemoveIf(i){this.count=Fd(this.data,i,this.count)}Unique(i){this.count=function(r,u,h,m){if(u===h)return h;let _=u;for(;++u!==h;)m(r[_],r[u])||Ma(r,++_,u);return++_}(this.data,0,this.count,i)}}class zu extends or{constructor(i){super(),this.m_system=i}ShouldQueryParticleSystem(i){return!1}ReportFixture(i){if(i.IsSensor())return!0;const r=i.GetShape(),u=r.GetChildCount();for(let h=0;h<u;h++){const m=i.GetAABB(h),_=this.m_system.GetInsideBoundsEnumerator(m);let v;for(;(v=_.GetNext())>=0;)this.ReportFixtureAndParticle(i,h,v)}return!0}ReportParticle(i,r){return!1}ReportFixtureAndParticle(i,r,u){}}class jd{constructor(){this.indexA=0,this.indexB=0,this.weight=0,this.normal=new l,this.flags=0}SetIndices(i,r){this.indexA=i,this.indexB=r}SetWeight(i){this.weight=i}SetNormal(i){this.normal.Copy(i)}SetFlags(i){this.flags=i}GetIndexA(){return this.indexA}GetIndexB(){return this.indexB}GetWeight(){return this.weight}GetNormal(){return this.normal}GetFlags(){return this.flags}IsEqual(i){return this.indexA===i.indexA&&this.indexB===i.indexB&&this.flags===i.flags&&this.weight===i.weight&&this.normal.x===i.normal.x&&this.normal.y===i.normal.y}IsNotEqual(i){return!this.IsEqual(i)}ApproximatelyEqual(i){return this.indexA===i.indexA&&this.indexB===i.indexB&&this.flags===i.flags&&rt(this.weight-i.weight)<.01&&l.DistanceSquaredVV(this.normal,i.normal)<1e-4}}class Nd{constructor(){this.index=0,this.weight=0,this.normal=new l,this.mass=0}}class zd{constructor(){this.indexA=0,this.indexB=0,this.flags=0,this.strength=0,this.distance=0}}class Od{constructor(){this.indexA=0,this.indexB=0,this.indexC=0,this.flags=0,this.strength=0,this.pa=new l(0,0),this.pb=new l(0,0),this.pc=new l(0,0),this.ka=0,this.kb=0,this.kc=0,this.s=0}}class Ia{constructor(){this.strictContactCheck=!1,this.density=1,this.gravityScale=1,this.radius=1,this.maxCount=0,this.pressureStrength=.005,this.dampingStrength=1,this.elasticStrength=.25,this.springStrength=.25,this.viscousStrength=.25,this.surfaceTensionPressureStrength=.2,this.surfaceTensionNormalStrength=.2,this.repulsiveStrength=1,this.powderStrength=.5,this.ejectionStrength=.5,this.staticPressureStrength=.2,this.staticPressureRelaxation=.2,this.staticPressureIterations=8,this.colorMixingStrength=.5,this.destroyByAge=!0,this.lifetimeGranularity=1/60}Copy(i){return this.strictContactCheck=i.strictContactCheck,this.density=i.density,this.gravityScale=i.gravityScale,this.radius=i.radius,this.maxCount=i.maxCount,this.pressureStrength=i.pressureStrength,this.dampingStrength=i.dampingStrength,this.elasticStrength=i.elasticStrength,this.springStrength=i.springStrength,this.viscousStrength=i.viscousStrength,this.surfaceTensionPressureStrength=i.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=i.surfaceTensionNormalStrength,this.repulsiveStrength=i.repulsiveStrength,this.powderStrength=i.powderStrength,this.ejectionStrength=i.ejectionStrength,this.staticPressureStrength=i.staticPressureStrength,this.staticPressureRelaxation=i.staticPressureRelaxation,this.staticPressureIterations=i.staticPressureIterations,this.colorMixingStrength=i.colorMixingStrength,this.destroyByAge=i.destroyByAge,this.lifetimeGranularity=i.lifetimeGranularity,this}Clone(){return new Ia().Copy(this)}}class X{constructor(i,r){this.m_paused=!1,this.m_timestamp=0,this.m_allParticleFlags=0,this.m_needsUpdateAllParticleFlags=!1,this.m_allGroupFlags=0,this.m_needsUpdateAllGroupFlags=!1,this.m_hasForce=!1,this.m_iterationIndex=0,this.m_inverseDensity=0,this.m_particleDiameter=0,this.m_inverseDiameter=0,this.m_squaredDiameter=0,this.m_count=0,this.m_internalAllocatedCapacity=0,this.m_handleIndexBuffer=new X.UserOverridableBuffer,this.m_flagsBuffer=new X.UserOverridableBuffer,this.m_positionBuffer=new X.UserOverridableBuffer,this.m_velocityBuffer=new X.UserOverridableBuffer,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new X.UserOverridableBuffer,this.m_groupBuffer=[],this.m_userDataBuffer=new X.UserOverridableBuffer,this.m_stuckThreshold=0,this.m_lastBodyContactStepBuffer=new X.UserOverridableBuffer,this.m_bodyContactCountBuffer=new X.UserOverridableBuffer,this.m_consecutiveContactStepsBuffer=new X.UserOverridableBuffer,this.m_stuckParticleBuffer=new Ds(()=>0),this.m_proxyBuffer=new Ds(()=>new X.Proxy),this.m_contactBuffer=new Ds(()=>new jd),this.m_bodyContactBuffer=new Ds(()=>new Nd),this.m_pairBuffer=new Ds(()=>new zd),this.m_triadBuffer=new Ds(()=>new Od),this.m_expirationTimeBuffer=new X.UserOverridableBuffer,this.m_indexByExpirationTimeBuffer=new X.UserOverridableBuffer,this.m_timeElapsed=0,this.m_expirationTimeBufferRequiresSorting=!1,this.m_groupCount=0,this.m_groupList=null,this.m_def=new Ia,this.m_prev=null,this.m_next=null,this.SetStrictContactCheck(i.strictContactCheck),this.SetDensity(i.density),this.SetGravityScale(i.gravityScale),this.SetRadius(i.radius),this.SetMaxParticleCount(i.maxCount),this.m_def=i.Clone(),this.m_world=r,this.SetDestructionByAge(this.m_def.destroyByAge)}static computeTag(i,r){return(r+X.yOffset>>>0<<X.yShift)+(X.xScale*i+X.xOffset>>>0)>>>0}static computeRelativeTag(i,r,u){return i+(u<<X.yShift)+(r<<X.xShift)>>>0}Drop(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)}CreateParticle(i){if(this.m_world.IsLocked())throw new Error;if(this.m_count>=this.m_internalAllocatedCapacity){const w=this.m_count?2*this.m_count:Ct;this.ReallocateInternalAllocatedBuffers(w)}if(this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return $;this.DestroyOldestParticle(0,!1),this.SolveZombie()}const r=this.m_count++;if(!this.m_flagsBuffer.data)throw new Error;if(this.m_flagsBuffer.data[r]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[r]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[r]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[r]=0),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;this.m_positionBuffer.data[r]=(this.m_positionBuffer.data[r]||new l).Copy(o(i.position,l.ZERO)),this.m_velocityBuffer.data[r]=(this.m_velocityBuffer.data[r]||new l).Copy(o(i.velocity,l.ZERO)),this.m_weightBuffer[r]=0,this.m_forceBuffer[r]=(this.m_forceBuffer[r]||new l).SetZero(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[r]=0),this.m_depthBuffer&&(this.m_depthBuffer[r]=0);const u=new Kt().Copy(o(i.color,Kt.ZERO));!this.m_colorBuffer.data&&u.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[r]=(this.m_colorBuffer.data[r]||new Kt).Copy(u)),(this.m_userDataBuffer.data||i.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[r]=i.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[r]=null);const h=this.m_proxyBuffer.data[this.m_proxyBuffer.Append()],m=o(i.lifetime,0),_=m>0;if(this.m_expirationTimeBuffer.data||_){if(this.SetParticleLifetime(r,_?m:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_indexByExpirationTimeBuffer.data[r]=r}h.index=r;const v=o(i.group,null);return this.m_groupBuffer[r]=v,v&&(v.m_firstIndex<v.m_lastIndex?(this.RotateBuffer(v.m_firstIndex,v.m_lastIndex,r),v.m_lastIndex=r+1):(v.m_firstIndex=r,v.m_lastIndex=r+1)),this.SetParticleFlags(r,o(i.flags,0)),r}GetParticleHandleFromIndex(i){this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);let r=this.m_handleIndexBuffer.data[i];return r||((r=new Dd).SetIndex(i),this.m_handleIndexBuffer.data[i]=r,r)}DestroyParticle(i,r=!1){if(!this.m_flagsBuffer.data)throw new Error;let u=s.b2ParticleFlag.b2_zombieParticle;r&&(u|=s.b2ParticleFlag.b2_destructionListenerParticle),this.SetParticleFlags(i,this.m_flagsBuffer.data[i]|u)}DestroyOldestParticle(i,r=!1){const u=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;if(!this.m_expirationTimeBuffer.data)throw new Error;const h=this.m_indexByExpirationTimeBuffer.data[u-(i+1)],m=this.m_indexByExpirationTimeBuffer.data[i];this.DestroyParticle(this.m_expirationTimeBuffer.data[h]>0?h:m,r)}DestroyParticlesInShape(i,r,u=!1){const h=X.DestroyParticlesInShape_s_aabb;if(this.m_world.IsLocked())throw new Error;const m=new X.DestroyParticlesInShapeCallback(this,i,r,u),_=h;return i.ComputeAABB(_,r,0),this.m_world.QueryAABB(m,_),m.Destroyed()}CreateParticleGroup(i){const r=X.CreateParticleGroup_s_transform;if(this.m_world.IsLocked())throw new Error;const u=r;u.SetPositionAngle(o(i.position,l.ZERO),o(i.angle,0));const h=this.m_count;if(i.shape&&this.CreateParticlesWithShapeForGroup(i.shape,i,u),i.shapes&&this.CreateParticlesWithShapesForGroup(i.shapes,o(i.shapeCount,i.shapes.length),i,u),i.positionData){const w=o(i.particleCount,i.positionData.length);for(let V=0;V<w;V++){const b=i.positionData[V];this.CreateParticleForGroup(i,u,b)}}const m=this.m_count;let _=new oo(this);_.m_firstIndex=h,_.m_lastIndex=m,_.m_strength=o(i.strength,1),_.m_userData=i.userData,_.m_transform.Copy(u),_.m_prev=null,_.m_next=this.m_groupList,this.m_groupList&&(this.m_groupList.m_prev=_),this.m_groupList=_,++this.m_groupCount;for(let w=h;w<m;w++)this.m_groupBuffer[w]=_;this.SetGroupFlags(_,o(i.groupFlags,0));const v=new X.ConnectionFilter;return this.UpdateContacts(!0),this.UpdatePairsAndTriads(h,m,v),i.group&&(this.JoinParticleGroups(i.group,_),_=i.group),_}JoinParticleGroups(i,r){if(this.m_world.IsLocked())throw new Error;this.RotateBuffer(r.m_firstIndex,r.m_lastIndex,this.m_count),this.RotateBuffer(i.m_firstIndex,i.m_lastIndex,r.m_firstIndex);const u=new X.JoinParticleGroupsFilter(r.m_firstIndex);this.UpdateContacts(!0),this.UpdatePairsAndTriads(i.m_firstIndex,r.m_lastIndex,u);for(let m=r.m_firstIndex;m<r.m_lastIndex;m++)this.m_groupBuffer[m]=i;const h=i.m_groupFlags|r.m_groupFlags;this.SetGroupFlags(i,h),i.m_lastIndex=r.m_lastIndex,r.m_firstIndex=r.m_lastIndex,this.DestroyParticleGroup(r)}SplitParticleGroup(i){this.UpdateContacts(!0);const r=i.GetParticleCount(),u=Bt(r,m=>new X.ParticleListNode);X.InitializeParticleLists(i,u),this.MergeParticleListsInContact(i,u);const h=X.FindLongestParticleList(i,u);this.MergeZombieParticleListNodes(i,u,h),this.CreateParticleGroupsFromParticleList(i,u,h),this.UpdatePairsAndTriadsWithParticleList(i,u)}GetParticleGroupList(){return this.m_groupList}GetParticleGroupCount(){return this.m_groupCount}GetParticleCount(){return this.m_count}GetMaxParticleCount(){return this.m_def.maxCount}SetMaxParticleCount(i){this.m_def.maxCount=i}GetAllParticleFlags(){return this.m_allParticleFlags}GetAllGroupFlags(){return this.m_allGroupFlags}SetPaused(i){this.m_paused=i}GetPaused(){return this.m_paused}SetDensity(i){this.m_def.density=i,this.m_inverseDensity=1/this.m_def.density}GetDensity(){return this.m_def.density}SetGravityScale(i){this.m_def.gravityScale=i}GetGravityScale(){return this.m_def.gravityScale}SetDamping(i){this.m_def.dampingStrength=i}GetDamping(){return this.m_def.dampingStrength}SetStaticPressureIterations(i){this.m_def.staticPressureIterations=i}GetStaticPressureIterations(){return this.m_def.staticPressureIterations}SetRadius(i){this.m_particleDiameter=2*i,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter}GetRadius(){return this.m_particleDiameter/2}GetPositionBuffer(){if(!this.m_positionBuffer.data)throw new Error;return this.m_positionBuffer.data}GetVelocityBuffer(){if(!this.m_velocityBuffer.data)throw new Error;return this.m_velocityBuffer.data}GetColorBuffer(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data}GetGroupBuffer(){return this.m_groupBuffer}GetWeightBuffer(){return this.m_weightBuffer}GetUserDataBuffer(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data}GetFlagsBuffer(){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data}SetParticleFlags(i,r){if(!this.m_flagsBuffer.data)throw new Error;this.m_flagsBuffer.data[i]&~r&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&r&&(r&s.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),r&s.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=r),this.m_flagsBuffer.data[i]=r}GetParticleFlags(i){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data[i]}SetFlagsBuffer(i,r){this.SetUserOverridableBuffer(this.m_flagsBuffer,i,r)}SetPositionBuffer(i,r){this.SetUserOverridableBuffer(this.m_positionBuffer,i,r)}SetVelocityBuffer(i,r){this.SetUserOverridableBuffer(this.m_velocityBuffer,i,r)}SetColorBuffer(i,r){this.SetUserOverridableBuffer(this.m_colorBuffer,i,r)}SetUserDataBuffer(i,r){this.SetUserOverridableBuffer(this.m_userDataBuffer,i,r)}GetContacts(){return this.m_contactBuffer.data}GetContactCount(){return this.m_contactBuffer.count}GetBodyContacts(){return this.m_bodyContactBuffer.data}GetBodyContactCount(){return this.m_bodyContactBuffer.count}GetPairs(){return this.m_pairBuffer.data}GetPairCount(){return this.m_pairBuffer.count}GetTriads(){return this.m_triadBuffer.data}GetTriadCount(){return this.m_triadBuffer.count}SetStuckThreshold(i){this.m_stuckThreshold=i,i>0&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))}GetStuckCandidates(){return this.m_stuckParticleBuffer.Data()}GetStuckCandidateCount(){return this.m_stuckParticleBuffer.GetCount()}ComputeCollisionEnergy(){if(!this.m_velocityBuffer.data)throw new Error;const i=X.ComputeCollisionEnergy_s_v,r=this.m_velocityBuffer.data;let u=0;for(let h=0;h<this.m_contactBuffer.count;h++){const m=this.m_contactBuffer.data[h],_=m.indexA,v=m.indexB,w=m.normal,V=l.SubVV(r[v],r[_],i),b=l.DotVV(V,w);b<0&&(u+=b*b)}return .5*this.GetParticleMass()*u}SetStrictContactCheck(i){this.m_def.strictContactCheck=i}GetStrictContactCheck(){return this.m_def.strictContactCheck}SetParticleLifetime(i,r){const u=this.m_indexByExpirationTimeBuffer.data===null;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),u){const _=this.GetParticleCount();for(let v=0;v<_;++v)this.m_indexByExpirationTimeBuffer.data[v]=v}const h=r/this.m_def.lifetimeGranularity,m=h>0?this.GetQuantizedTimeElapsed()+h:h;m!==this.m_expirationTimeBuffer.data[i]&&(this.m_expirationTimeBuffer.data[i]=m,this.m_expirationTimeBufferRequiresSorting=!0)}GetParticleLifetime(i){return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[i])}SetDestructionByAge(i){i&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=i}GetDestructionByAge(){return this.m_def.destroyByAge}GetExpirationTimeBuffer(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data}ExpirationTimeToLifetime(i){return(i>0?i-this.GetQuantizedTimeElapsed():i)*this.m_def.lifetimeGranularity}GetIndexByExpirationTimeBuffer(){if(this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),!this.m_indexByExpirationTimeBuffer.data)throw new Error;return this.m_indexByExpirationTimeBuffer.data}ParticleApplyLinearImpulse(i,r){this.ApplyLinearImpulse(i,i+1,r)}ApplyLinearImpulse(i,r,u){if(!this.m_velocityBuffer.data)throw new Error;const h=this.m_velocityBuffer.data,m=r-i,_=m*this.GetParticleMass(),v=new l().Copy(u).SelfMul(1/_);for(let w=i;w<r;w++)h[w].SelfAdd(v)}static IsSignificantForce(i){return i.x!==0||i.y!==0}ParticleApplyForce(i,r){if(!this.m_flagsBuffer.data)throw new Error;X.IsSignificantForce(r)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[i])&&(this.PrepareForceBuffer(),this.m_forceBuffer[i].SelfAdd(r))}ApplyForce(i,r,u){const h=new l().Copy(u).SelfMul(1/(r-i));if(X.IsSignificantForce(h)){this.PrepareForceBuffer();for(let m=i;m<r;m++)this.m_forceBuffer[m].SelfAdd(h)}}GetNext(){return this.m_next}QueryAABB(i,r){if(this.m_proxyBuffer.count===0)return;const u=this.m_proxyBuffer.count,h=Ed(this.m_proxyBuffer.data,0,u,X.computeTag(this.m_inverseDiameter*r.lowerBound.x,this.m_inverseDiameter*r.lowerBound.y),X.Proxy.CompareProxyTag),m=Gd(this.m_proxyBuffer.data,h,u,X.computeTag(this.m_inverseDiameter*r.upperBound.x,this.m_inverseDiameter*r.upperBound.y),X.Proxy.CompareTagProxy);if(!this.m_positionBuffer.data)throw new Error;const _=this.m_positionBuffer.data;for(let v=h;v<m;++v){const w=this.m_proxyBuffer.data[v],V=w.index,b=_[V];if(r.lowerBound.x<b.x&&b.x<r.upperBound.x&&r.lowerBound.y<b.y&&b.y<r.upperBound.y&&!i.ReportParticle(this,V))break}}QueryShapeAABB(i,r,u,h=0){const m=X.QueryShapeAABB_s_aabb,_=m;r.ComputeAABB(_,u,h),this.QueryAABB(i,_)}QueryPointAABB(i,r,u=p){const h=X.QueryPointAABB_s_aabb,m=h;m.lowerBound.Set(r.x-u,r.y-u),m.upperBound.Set(r.x+u,r.y+u),this.QueryAABB(i,m)}RayCast(i,r,u){const h=X.RayCast_s_aabb,m=X.RayCast_s_p,_=X.RayCast_s_v,v=X.RayCast_s_n,w=X.RayCast_s_point;if(this.m_proxyBuffer.count===0)return;if(!this.m_positionBuffer.data)throw new Error;const V=this.m_positionBuffer.data,b=h;l.MinV(r,u,b.lowerBound),l.MaxV(r,u,b.upperBound);let A=1;const P=l.SubVV(u,r,_),D=l.DotVV(P,P),R=this.GetInsideBoundsEnumerator(b);let z;for(;(z=R.GetNext())>=0;){const U=l.SubVV(r,V[z],m),J=l.DotVV(U,P),W=l.DotVV(U,U),K=J*J-D*(W-this.m_squaredDiameter);if(K>=0){const it=Nt(K);let at=(-J-it)/D;if(at>A||at<0&&((at=(-J+it)/D)<0||at>A))continue;const st=l.AddVMulSV(U,at,P,v);st.Normalize();const pt=i.ReportParticle(this,z,l.AddVMulSV(r,at,P,w),st,at);if((A=dt(A,pt))<=0)break}}}ComputeAABB(i){const r=this.GetParticleCount();if(i.lowerBound.x=+a,i.lowerBound.y=+a,i.upperBound.x=-a,i.upperBound.y=-a,!this.m_positionBuffer.data)throw new Error;const u=this.m_positionBuffer.data;for(let h=0;h<r;h++){const m=u[h];l.MinV(i.lowerBound,m,i.lowerBound),l.MaxV(i.upperBound,m,i.upperBound)}i.lowerBound.x-=this.m_particleDiameter,i.lowerBound.y-=this.m_particleDiameter,i.upperBound.x+=this.m_particleDiameter,i.upperBound.y+=this.m_particleDiameter}FreeBuffer(i,r){i!==null&&(i.length=0)}FreeUserOverridableBuffer(i){i.userSuppliedCapacity===0&&this.FreeBuffer(i.data,this.m_internalAllocatedCapacity)}ReallocateBuffer3(i,r,u){if(u<=r)throw new Error;const h=i?i.slice():[];return h.length=u,h}ReallocateBuffer5(i,r,u,h,m){if(h<=u)throw new Error;if(r&&!(h<=r))throw new Error;return m&&!i||r||(i=this.ReallocateBuffer3(i,u,h)),i}ReallocateBuffer4(i,r,u,h){return this.ReallocateBuffer5(i.data,i.userSuppliedCapacity,r,u,h)}RequestBuffer(i){return i||(this.m_internalAllocatedCapacity===0&&this.ReallocateInternalAllocatedBuffers(Ct),(i=[]).length=this.m_internalAllocatedCapacity),i}ReallocateHandleBuffers(i){this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,i,!0)}ReallocateInternalAllocatedBuffers(i){function r(u,h){return h&&u>h?h:u}if(i=r(i,this.m_def.maxCount),i=r(i,this.m_flagsBuffer.userSuppliedCapacity),i=r(i,this.m_positionBuffer.userSuppliedCapacity),i=r(i,this.m_velocityBuffer.userSuppliedCapacity),i=r(i,this.m_colorBuffer.userSuppliedCapacity),i=r(i,this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<i){this.ReallocateHandleBuffers(i),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,i,!1);const u=this.m_stuckThreshold>0;this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,i,u),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,i,u),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,i,u),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,i,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,i,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,i,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,i,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,i,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,i,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,i,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,i,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,i,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,i,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,i,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,i,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,i,!1),this.m_internalAllocatedCapacity=i}}CreateParticleForGroup(i,r,u){const h=new Nu;h.flags=o(i.flags,0),ct.MulXV(r,u,h.position),l.AddVV(o(i.linearVelocity,l.ZERO),l.CrossSV(o(i.angularVelocity,0),l.SubVV(h.position,o(i.position,l.ZERO),l.s_t0),l.s_t0),h.velocity),h.color.Copy(o(i.color,Kt.ZERO)),h.lifetime=o(i.lifetime,0),h.userData=i.userData,this.CreateParticle(h)}CreateParticlesStrokeShapeForGroup(i,r,u){const h=X.CreateParticlesStrokeShapeForGroup_s_edge,m=X.CreateParticlesStrokeShapeForGroup_s_d,_=X.CreateParticlesStrokeShapeForGroup_s_p;let v=o(r.stride,0);v===0&&(v=this.GetParticleStride());let w=0;const V=i.GetChildCount();for(let b=0;b<V;b++){let A=null;i.GetType()===s.b2ShapeType.e_edgeShape?A=i:(A=h,i.GetChildEdge(A,b));const P=l.SubVV(A.m_vertex2,A.m_vertex1,m),D=P.Length();for(;w<D;){const R=l.AddVMulSV(A.m_vertex1,w/D,P,_);this.CreateParticleForGroup(r,u,R),w+=v}w-=D}}CreateParticlesFillShapeForGroup(i,r,u){const h=X.CreateParticlesFillShapeForGroup_s_aabb,m=X.CreateParticlesFillShapeForGroup_s_p;let _=o(r.stride,0);_===0&&(_=this.GetParticleStride());const v=ct.IDENTITY,w=h;i.ComputeAABB(w,v,0);for(let V=Math.floor(w.lowerBound.y/_)*_;V<w.upperBound.y;V+=_)for(let b=Math.floor(w.lowerBound.x/_)*_;b<w.upperBound.x;b+=_){const A=m.Set(b,V);i.TestPoint(v,A)&&this.CreateParticleForGroup(r,u,A)}}CreateParticlesWithShapeForGroup(i,r,u){switch(i.GetType()){case s.b2ShapeType.e_edgeShape:case s.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(i,r,u);break;case s.b2ShapeType.e_polygonShape:case s.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(i,r,u)}}CreateParticlesWithShapesForGroup(i,r,u,h){const m=new X.CompositeShape(i,r);this.CreateParticlesFillShapeForGroup(m,u,h)}CloneParticle(i,r){const u=new Nu;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;u.flags=this.m_flagsBuffer.data[i],u.position.Copy(this.m_positionBuffer.data[i]),u.velocity.Copy(this.m_velocityBuffer.data[i]),this.m_colorBuffer.data&&u.color.Copy(this.m_colorBuffer.data[i]),this.m_userDataBuffer.data&&(u.userData=this.m_userDataBuffer.data[i]),u.group=r;const h=this.CreateParticle(u);if(this.m_handleIndexBuffer.data){const m=this.m_handleIndexBuffer.data[i];m&&m.SetIndex(h),this.m_handleIndexBuffer.data[h]=m,this.m_handleIndexBuffer.data[i]=null}return this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[h]=this.m_lastBodyContactStepBuffer.data[i]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[h]=this.m_bodyContactCountBuffer.data[i]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[h]=this.m_consecutiveContactStepsBuffer.data[i]),this.m_hasForce&&this.m_forceBuffer[h].Copy(this.m_forceBuffer[i]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[h]=this.m_staticPressureBuffer[i]),this.m_depthBuffer&&(this.m_depthBuffer[h]=this.m_depthBuffer[i]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[h]=this.m_expirationTimeBuffer.data[i]),h}DestroyParticlesInGroup(i,r=!1){for(let u=i.m_firstIndex;u<i.m_lastIndex;u++)this.DestroyParticle(u,r)}DestroyParticleGroup(i){this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(i),this.SetGroupFlags(i,0);for(let r=i.m_firstIndex;r<i.m_lastIndex;r++)this.m_groupBuffer[r]=null;i.m_prev&&(i.m_prev.m_next=i.m_next),i.m_next&&(i.m_next.m_prev=i.m_prev),i===this.m_groupList&&(this.m_groupList=i.m_next),--this.m_groupCount}static ParticleCanBeConnected(i,r){return(i&(s.b2ParticleFlag.b2_wallParticle|s.b2ParticleFlag.b2_springParticle|s.b2ParticleFlag.b2_elasticParticle))!=0||r!==null&&(r.GetGroupFlags()&s.b2ParticleGroupFlag.b2_rigidParticleGroup)!=0}UpdatePairsAndTriads(i,r,u){const h=X.UpdatePairsAndTriads_s_dab,m=X.UpdatePairsAndTriads_s_dbc,_=X.UpdatePairsAndTriads_s_dca;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const v=this.m_positionBuffer.data;let w=0;for(let V=i;V<r;V++)w|=this.m_flagsBuffer.data[V];if(w&X.k_pairFlags)for(let V=0;V<this.m_contactBuffer.count;V++){const b=this.m_contactBuffer.data[V],A=b.indexA,P=b.indexB,D=this.m_flagsBuffer.data[A],R=this.m_flagsBuffer.data[P],z=this.m_groupBuffer[A],U=this.m_groupBuffer[P];if(A>=i&&A<r&&P>=i&&P<r&&!((D|R)&s.b2ParticleFlag.b2_zombieParticle)&&(D|R)&X.k_pairFlags&&(u.IsNecessary(A)||u.IsNecessary(P))&&X.ParticleCanBeConnected(D,z)&&X.ParticleCanBeConnected(R,U)&&u.ShouldCreatePair(A,P)){const J=this.m_pairBuffer.data[this.m_pairBuffer.Append()];J.indexA=A,J.indexB=P,J.flags=b.flags,J.strength=dt(z?z.m_strength:1,U?U.m_strength:1),J.distance=l.DistanceVV(v[A],v[P])}Rd(this.m_pairBuffer.data,0,this.m_pairBuffer.count,X.ComparePairIndices),this.m_pairBuffer.Unique(X.MatchPairIndices)}if(w&X.k_triadFlags){const V=new ze(r-i);for(let D=i;D<r;D++){const R=this.m_flagsBuffer.data[D],z=this.m_groupBuffer[D];R&s.b2ParticleFlag.b2_zombieParticle||!X.ParticleCanBeConnected(R,z)||V.AddGenerator(v[D],D,u.IsNecessary(D))}const b=this.GetParticleStride();V.Generate(b/2,2*b);const A=this,P=(D,R,z)=>{if(!A.m_flagsBuffer.data)throw new Error;const U=A.m_flagsBuffer.data[D],J=A.m_flagsBuffer.data[R],W=A.m_flagsBuffer.data[z];if((U|J|W)&X.k_triadFlags&&u.ShouldCreateTriad(D,R,z)){const K=v[D],it=v[R],at=v[z],st=l.SubVV(K,it,h),pt=l.SubVV(it,at,m),St=l.SubVV(at,K,_),Dt=wt*A.m_squaredDiameter;if(l.DotVV(st,st)>Dt||l.DotVV(pt,pt)>Dt||l.DotVV(St,St)>Dt)return;const It=A.m_groupBuffer[D],Mt=A.m_groupBuffer[R],At=A.m_groupBuffer[z],vt=A.m_triadBuffer.data[A.m_triadBuffer.Append()];vt.indexA=D,vt.indexB=R,vt.indexC=z,vt.flags=U|J|W,vt.strength=dt(dt(It?It.m_strength:1,Mt?Mt.m_strength:1),At?At.m_strength:1);const Wt=(K.x+it.x+at.x)/3,Ft=(K.y+it.y+at.y)/3;vt.pa.x=K.x-Wt,vt.pa.y=K.y-Ft,vt.pb.x=it.x-Wt,vt.pb.y=it.y-Ft,vt.pc.x=at.x-Wt,vt.pc.y=at.y-Ft,vt.ka=-l.DotVV(St,st),vt.kb=-l.DotVV(st,pt),vt.kc=-l.DotVV(pt,St),vt.s=l.CrossVV(K,it)+l.CrossVV(it,at)+l.CrossVV(at,K)}};V.GetNodes(P),Rd(this.m_triadBuffer.data,0,this.m_triadBuffer.count,X.CompareTriadIndices),this.m_triadBuffer.Unique(X.MatchTriadIndices)}}UpdatePairsAndTriadsWithReactiveParticles(){const i=new X.ReactiveFilter(this.m_flagsBuffer);if(this.UpdatePairsAndTriads(0,this.m_count,i),!this.m_flagsBuffer.data)throw new Error;for(let r=0;r<this.m_count;r++)this.m_flagsBuffer.data[r]&=~s.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~s.b2ParticleFlag.b2_reactiveParticle}static ComparePairIndices(i,r){const u=i.indexA-r.indexA;return u!==0?u<0:i.indexB<r.indexB}static MatchPairIndices(i,r){return i.indexA===r.indexA&&i.indexB===r.indexB}static CompareTriadIndices(i,r){const u=i.indexA-r.indexA;if(u!==0)return u<0;const h=i.indexB-r.indexB;return h!==0?h<0:i.indexC<r.indexC}static MatchTriadIndices(i,r){return i.indexA===r.indexA&&i.indexB===r.indexB&&i.indexC===r.indexC}static InitializeParticleLists(i,r){const u=i.GetBufferIndex(),h=i.GetParticleCount();for(let m=0;m<h;m++){const _=r[m];_.list=_,_.next=null,_.count=1,_.index=m+u}}MergeParticleListsInContact(i,r){const u=i.GetBufferIndex();for(let h=0;h<this.m_contactBuffer.count;h++){const m=this.m_contactBuffer.data[h],_=m.indexA,v=m.indexB;if(!i.ContainsParticle(_)||!i.ContainsParticle(v))continue;let w=r[_-u].list,V=r[v-u].list;if(w!==V){if(w.count<V.count){const b=w;w=V,V=b}X.MergeParticleLists(w,V)}}}static MergeParticleLists(i,r){for(let u=r;;){u.list=i;const h=u.next;if(!h){u.next=i.next;break}u=h}i.next=r,i.count+=r.count,r.count=0}static FindLongestParticleList(i,r){const u=i.GetParticleCount();let h=r[0];for(let m=0;m<u;m++){const _=r[m];h.count<_.count&&(h=_)}return h}MergeZombieParticleListNodes(i,r,u){if(!this.m_flagsBuffer.data)throw new Error;const h=i.GetParticleCount();for(let m=0;m<h;m++){const _=r[m];_!==u&&this.m_flagsBuffer.data[_.index]&s.b2ParticleFlag.b2_zombieParticle&&X.MergeParticleListAndNode(u,_)}}static MergeParticleListAndNode(i,r){r.list=i,r.next=i.next,i.next=r,i.count++,r.count=0}CreateParticleGroupsFromParticleList(i,r,u){if(!this.m_flagsBuffer.data)throw new Error;const h=i.GetParticleCount(),m=new kd;m.groupFlags=i.GetGroupFlags(),m.userData=i.GetUserData();for(let _=0;_<h;_++){const v=r[_];if(!v.count||v===u)continue;const w=this.CreateParticleGroup(m);for(let V=v;V;V=V.next){const b=V.index,A=this.CloneParticle(b,w);this.m_flagsBuffer.data[b]|=s.b2ParticleFlag.b2_zombieParticle,V.index=A}}}UpdatePairsAndTriadsWithParticleList(i,r){const u=i.GetBufferIndex();for(let h=0;h<this.m_pairBuffer.count;h++){const m=this.m_pairBuffer.data[h],_=m.indexA,v=m.indexB;i.ContainsParticle(_)&&(m.indexA=r[_-u].index),i.ContainsParticle(v)&&(m.indexB=r[v-u].index)}for(let h=0;h<this.m_triadBuffer.count;h++){const m=this.m_triadBuffer.data[h],_=m.indexA,v=m.indexB,w=m.indexC;i.ContainsParticle(_)&&(m.indexA=r[_-u].index),i.ContainsParticle(v)&&(m.indexB=r[v-u].index),i.ContainsParticle(w)&&(m.indexC=r[w-u].index)}}ComputeDepth(){const i=[];let r=0;for(let _=0;_<this.m_contactBuffer.count;_++){const v=this.m_contactBuffer.data[_],w=v.indexA,V=v.indexB,b=this.m_groupBuffer[w],A=this.m_groupBuffer[V];b&&b===A&&b.m_groupFlags&s.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(i[r++]=v)}const u=[];let h=0;for(let _=this.m_groupList;_;_=_.GetNext())if(_.m_groupFlags&s.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth){u[h++]=_,this.SetGroupFlags(_,_.m_groupFlags&~s.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);for(let v=_.m_firstIndex;v<_.m_lastIndex;v++)this.m_accumulationBuffer[v]=0}for(let _=0;_<r;_++){const v=i[_],w=v.indexA,V=v.indexB,b=v.weight;this.m_accumulationBuffer[w]+=b,this.m_accumulationBuffer[V]+=b}for(let _=0;_<h;_++){const v=u[_];for(let w=v.m_firstIndex;w<v.m_lastIndex;w++){const V=this.m_accumulationBuffer[w];this.m_depthBuffer[w]=V<.8?0:a}}const m=Nt(this.m_count)>>0;for(let _=0;_<m;_++){let v=!1;for(let w=0;w<r;w++){const V=i[w],b=V.indexA,A=V.indexB,P=1-V.weight,D=this.m_depthBuffer[b],R=this.m_depthBuffer[A],z=R+P,U=D+P;D>z&&(this.m_depthBuffer[b]=z,v=!0),R>U&&(this.m_depthBuffer[A]=U,v=!0)}if(!v)break}for(let _=0;_<h;_++){const v=u[_];for(let w=v.m_firstIndex;w<v.m_lastIndex;w++)this.m_depthBuffer[w]<a?this.m_depthBuffer[w]*=this.m_particleDiameter:this.m_depthBuffer[w]=0}}GetInsideBoundsEnumerator(i){const r=X.computeTag(this.m_inverseDiameter*i.lowerBound.x-1,this.m_inverseDiameter*i.lowerBound.y-1),u=X.computeTag(this.m_inverseDiameter*i.upperBound.x+1,this.m_inverseDiameter*i.upperBound.y+1),h=this.m_proxyBuffer.count,m=Ed(this.m_proxyBuffer.data,0,h,r,X.Proxy.CompareProxyTag),_=Gd(this.m_proxyBuffer.data,0,h,u,X.Proxy.CompareTagProxy);return new X.InsideBoundsEnumerator(this,r,u,m,_)}UpdateAllParticleFlags(){if(!this.m_flagsBuffer.data)throw new Error;this.m_allParticleFlags=0;for(let i=0;i<this.m_count;i++)this.m_allParticleFlags|=this.m_flagsBuffer.data[i];this.m_needsUpdateAllParticleFlags=!1}UpdateAllGroupFlags(){this.m_allGroupFlags=0;for(let i=this.m_groupList;i;i=i.GetNext())this.m_allGroupFlags|=i.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1}AddContact(i,r,u){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;const h=X.AddContact_s_d,m=this.m_positionBuffer.data,_=l.SubVV(m[r],m[i],h),v=l.DotVV(_,_);if(v<this.m_squaredDiameter){let w=kt(v);isFinite(w)||(w=198177537e11);const V=this.m_contactBuffer.data[this.m_contactBuffer.Append()];V.indexA=i,V.indexB=r,V.flags=this.m_flagsBuffer.data[i]|this.m_flagsBuffer.data[r],V.weight=1-v*w*this.m_inverseDiameter,l.MulSV(w,_,V.normal)}}FindContacts_Reference(i){const r=this.m_proxyBuffer.count;this.m_contactBuffer.count=0;for(let u=0,h=0;u<r;u++){const m=X.computeRelativeTag(this.m_proxyBuffer.data[u].tag,1,0);for(let w=u+1;w<r&&!(m<this.m_proxyBuffer.data[w].tag);w++)this.AddContact(this.m_proxyBuffer.data[u].index,this.m_proxyBuffer.data[w].index,this.m_contactBuffer);const _=X.computeRelativeTag(this.m_proxyBuffer.data[u].tag,-1,1);for(;h<r&&!(_<=this.m_proxyBuffer.data[h].tag);h++);const v=X.computeRelativeTag(this.m_proxyBuffer.data[u].tag,1,1);for(let w=h;w<r&&!(v<this.m_proxyBuffer.data[w].tag);w++)this.AddContact(this.m_proxyBuffer.data[u].index,this.m_proxyBuffer.data[w].index,this.m_contactBuffer)}}FindContacts(i){this.FindContacts_Reference(i)}UpdateProxies_Reference(i){if(!this.m_positionBuffer.data)throw new Error;const r=this.m_positionBuffer.data,u=this.m_inverseDiameter;for(let h=0;h<this.m_proxyBuffer.count;++h){const m=this.m_proxyBuffer.data[h],_=m.index,v=r[_];m.tag=X.computeTag(u*v.x,u*v.y)}}UpdateProxies(i){this.UpdateProxies_Reference(i)}SortProxies(i){Ta(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,X.Proxy.CompareProxyProxy)}FilterContacts(i){const r=this.GetParticleContactFilter();if(r===null)return;const u=this;this.m_contactBuffer.RemoveIf(h=>(h.flags&s.b2ParticleFlag.b2_particleContactFilterParticle)!=0&&!r.ShouldCollideParticleParticle(u,h.indexA,h.indexB))}NotifyContactListenerPreContact(i){if(this.GetParticleContactListener()!==null)throw i.Initialize(this.m_contactBuffer,this.m_flagsBuffer),new Error}NotifyContactListenerPostContact(i){const r=this.GetParticleContactListener();if(r!==null){for(let u=0;u<this.m_contactBuffer.count;++u){const h=this.m_contactBuffer.data[u];r.BeginContactParticleParticle(this,h)}throw new Error}}static b2ParticleContactIsZombie(i){return(i.flags&s.b2ParticleFlag.b2_zombieParticle)===s.b2ParticleFlag.b2_zombieParticle}UpdateContacts(i){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);const r=new X.b2ParticlePairSet;this.NotifyContactListenerPreContact(r),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(r),i&&this.m_contactBuffer.RemoveIf(X.b2ParticleContactIsZombie)}NotifyBodyContactListenerPreContact(i){if(this.GetFixtureContactListener()!==null)throw i.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer),new Error}NotifyBodyContactListenerPostContact(i){const r=this.GetFixtureContactListener();if(r!==null){for(let u=0;u<this.m_bodyContactBuffer.count;u++){const h=this.m_bodyContactBuffer.data[u];r.BeginContactFixtureParticle(this,h)}throw new Error}}UpdateBodyContacts(){const i=X.UpdateBodyContacts_s_aabb,r=new X.FixtureParticleSet;if(this.NotifyBodyContactListenerPreContact(r),this.m_stuckThreshold>0){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;const m=this.GetParticleCount();for(let _=0;_<m;_++)this.m_bodyContactCountBuffer.data[_]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[_]+1&&(this.m_consecutiveContactStepsBuffer.data[_]=0)}this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0);const u=i;this.ComputeAABB(u);const h=new X.UpdateBodyContactsCallback(this,this.GetFixtureContactFilter());this.m_world.QueryAABB(h,u),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(r)}Solve(i){const r=X.Solve_s_subStep;if(this.m_count!==0&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(i),this.m_allParticleFlags&s.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<i.particleIterations;this.m_iterationIndex++){++this.m_timestamp;const u=r.Copy(i);if(u.dt/=i.particleIterations,u.inv_dt*=i.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&s.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&s.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(u),this.m_allParticleFlags&s.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&s.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(u),this.m_allParticleFlags&s.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(u),this.m_allParticleFlags&s.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(u),this.m_allGroupFlags&s.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(u),this.m_allParticleFlags&s.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(u),this.m_allParticleFlags&s.b2ParticleFlag.b2_staticPressureParticle&&this.SolveStaticPressure(u),this.SolvePressure(u),this.SolveDamping(u),this.m_allParticleFlags&X.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&s.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(u),this.m_allParticleFlags&s.b2ParticleFlag.b2_springParticle&&this.SolveSpring(u),this.LimitVelocity(u),this.m_allGroupFlags&s.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&s.b2ParticleFlag.b2_barrierParticle&&this.SolveBarrier(u),this.SolveCollision(u),this.m_allGroupFlags&s.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(u),this.m_allParticleFlags&s.b2ParticleFlag.b2_wallParticle&&this.SolveWall(),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(let h=0;h<this.m_count;h++)this.m_positionBuffer.data[h].SelfMulAdd(u.dt,this.m_velocityBuffer.data[h])}}SolveCollision(i){const r=X.SolveCollision_s_aabb;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const u=this.m_positionBuffer.data,h=this.m_velocityBuffer.data,m=r;m.lowerBound.x=+a,m.lowerBound.y=+a,m.upperBound.x=-a,m.upperBound.y=-a;for(let v=0;v<this.m_count;v++){const w=h[v],V=u[v],b=V.x+i.dt*w.x,A=V.y+i.dt*w.y;m.lowerBound.x=dt(m.lowerBound.x,dt(V.x,b)),m.lowerBound.y=dt(m.lowerBound.y,dt(V.y,A)),m.upperBound.x=ut(m.upperBound.x,ut(V.x,b)),m.upperBound.y=ut(m.upperBound.y,ut(V.y,A))}const _=new X.SolveCollisionCallback(this,i);this.m_world.QueryAABB(_,m)}LimitVelocity(i){if(!this.m_velocityBuffer.data)throw new Error;const r=this.m_velocityBuffer.data,u=this.GetCriticalVelocitySquared(i);for(let h=0;h<this.m_count;h++){const m=r[h],_=l.DotVV(m,m);_>u&&m.SelfMul(Nt(u/_))}}SolveGravity(i){if(!this.m_velocityBuffer.data)throw new Error;const r=X.SolveGravity_s_gravity,u=this.m_velocityBuffer.data,h=l.MulSV(i.dt*this.m_def.gravityScale,this.m_world.GetGravity(),r);for(let m=0;m<this.m_count;m++)u[m].SelfAdd(h)}SolveBarrier(i){const r=X.SolveBarrier_s_aabb,u=X.SolveBarrier_s_va,h=X.SolveBarrier_s_vb,m=X.SolveBarrier_s_pba,_=X.SolveBarrier_s_vba,v=X.SolveBarrier_s_vc,w=X.SolveBarrier_s_pca,V=X.SolveBarrier_s_vca,b=X.SolveBarrier_s_qba,A=X.SolveBarrier_s_qca,P=X.SolveBarrier_s_dv,D=X.SolveBarrier_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const R=this.m_positionBuffer.data,z=this.m_velocityBuffer.data;for(let W=0;W<this.m_count;W++)this.m_flagsBuffer.data[W]&X.k_barrierWallFlags&&z[W].SetZero();const U=mt*i.dt,J=this.GetParticleMass();for(let W=0;W<this.m_pairBuffer.count;W++){const K=this.m_pairBuffer.data[W];if(K.flags&s.b2ParticleFlag.b2_barrierParticle){const it=K.indexA,at=K.indexB,st=R[it],pt=R[at],St=r;l.MinV(st,pt,St.lowerBound),l.MaxV(st,pt,St.upperBound);const Dt=this.m_groupBuffer[it],It=this.m_groupBuffer[at],Mt=this.GetLinearVelocity(Dt,it,st,u),At=this.GetLinearVelocity(It,at,pt,h),vt=l.SubVV(pt,st,m),Wt=l.SubVV(At,Mt,_),Ft=this.GetInsideBoundsEnumerator(St);let Qt;for(;(Qt=Ft.GetNext())>=0;){const le=R[Qt],oe=this.m_groupBuffer[Qt];if(Dt!==oe&&It!==oe){const Re=this.GetLinearVelocity(oe,Qt,le,v),vi=l.SubVV(le,st,w),Je=l.SubVV(Re,Mt,V),hn=l.CrossVV(Wt,Je),bn=l.CrossVV(vt,Je)-l.CrossVV(vi,Wt),xi=l.CrossVV(vt,vi);let Oe,Xe;const Si=b,Pn=A;if(hn===0){if(bn===0||!((Xe=-xi/bn)>=0&&Xe<U)||(l.AddVMulSV(vt,Xe,Wt,Si),l.AddVMulSV(vi,Xe,Je,Pn),!((Oe=l.DotVV(Si,Pn)/l.DotVV(Si,Si))>=0&&Oe<=1)))continue}else{const Ls=bn*bn-4*xi*hn;if(Ls<0)continue;const Qn=Nt(Ls);let Rs=(-bn-Qn)/(2*hn),Kn=(-bn+Qn)/(2*hn);if(Rs>Kn){const La=Rs;Rs=Kn,Kn=La}if(Xe=Rs,l.AddVMulSV(vt,Xe,Wt,Si),l.AddVMulSV(vi,Xe,Je,Pn),Oe=l.DotVV(Si,Pn)/l.DotVV(Si,Si),!(Xe>=0&&Xe<U&&Oe>=0&&Oe<=1)&&(!((Xe=Kn)>=0&&Xe<U)||(l.AddVMulSV(vt,Xe,Wt,Si),l.AddVMulSV(vi,Xe,Je,Pn),!((Oe=l.DotVV(Si,Pn)/l.DotVV(Si,Si))>=0&&Oe<=1))))continue}const ks=P;ks.x=Mt.x+Oe*Wt.x-Re.x,ks.y=Mt.y+Oe*Wt.y-Re.y;const lo=l.MulSV(J,ks,D);if(oe&&this.IsRigidGroup(oe)){const Ls=oe.GetMass(),Qn=oe.GetInertia();Ls>0&&oe.m_linearVelocity.SelfMulAdd(1/Ls,lo),Qn>0&&(oe.m_angularVelocity+=l.CrossVV(l.SubVV(le,oe.GetCenter(),l.s_t0),lo)/Qn)}else z[Qt].SelfAdd(ks);this.ParticleApplyForce(Qt,lo.SelfMul(-i.inv_dt))}}}}}SolveStaticPressure(i){if(!this.m_flagsBuffer.data)throw new Error;this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);const r=this.GetCriticalPressure(i),u=this.m_def.staticPressureStrength*r,h=gt*r,m=this.m_def.staticPressureRelaxation;for(let _=0;_<this.m_def.staticPressureIterations;_++){for(let v=0;v<this.m_count;v++)this.m_accumulationBuffer[v]=0;for(let v=0;v<this.m_contactBuffer.count;v++){const w=this.m_contactBuffer.data[v];if(w.flags&s.b2ParticleFlag.b2_staticPressureParticle){const V=w.indexA,b=w.indexB,A=w.weight;this.m_accumulationBuffer[V]+=A*this.m_staticPressureBuffer[b],this.m_accumulationBuffer[b]+=A*this.m_staticPressureBuffer[V]}}for(let v=0;v<this.m_count;v++){const w=this.m_weightBuffer[v];if(this.m_flagsBuffer.data[v]&s.b2ParticleFlag.b2_staticPressureParticle){const V=this.m_accumulationBuffer[v],b=(V+u*(w-ot))/(w+m);this.m_staticPressureBuffer[v]=yt(b,0,h)}else this.m_staticPressureBuffer[v]=0}}}ComputeWeight(){for(let i=0;i<this.m_count;i++)this.m_weightBuffer[i]=0;for(let i=0;i<this.m_bodyContactBuffer.count;i++){const r=this.m_bodyContactBuffer.data[i],u=r.index,h=r.weight;this.m_weightBuffer[u]+=h}for(let i=0;i<this.m_contactBuffer.count;i++){const r=this.m_contactBuffer.data[i],u=r.indexA,h=r.indexB,m=r.weight;this.m_weightBuffer[u]+=m,this.m_weightBuffer[h]+=m}}SolvePressure(i){const r=X.SolvePressure_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const u=this.m_positionBuffer.data,h=this.m_velocityBuffer.data,m=this.GetCriticalPressure(i),_=this.m_def.pressureStrength*m,v=gt*m;for(let b=0;b<this.m_count;b++){const A=this.m_weightBuffer[b],P=_*ut(0,A-ot);this.m_accumulationBuffer[b]=dt(P,v)}if(this.m_allParticleFlags&X.k_noPressureFlags)for(let b=0;b<this.m_count;b++)this.m_flagsBuffer.data[b]&X.k_noPressureFlags&&(this.m_accumulationBuffer[b]=0);if(this.m_allParticleFlags&s.b2ParticleFlag.b2_staticPressureParticle)for(let b=0;b<this.m_count;b++)this.m_flagsBuffer.data[b]&s.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[b]+=this.m_staticPressureBuffer[b]);const w=i.dt/(this.m_def.density*this.m_particleDiameter),V=this.GetParticleInvMass();for(let b=0;b<this.m_bodyContactBuffer.count;b++){const A=this.m_bodyContactBuffer.data[b],P=A.index,D=A.body,R=A.weight,z=A.mass,U=A.normal,J=u[P],W=this.m_accumulationBuffer[P]+_*R,K=l.MulSV(w*R*z*W,U,r);h[P].SelfMulSub(V,K),D.ApplyLinearImpulse(K,J,!0)}for(let b=0;b<this.m_contactBuffer.count;b++){const A=this.m_contactBuffer.data[b],P=A.indexA,D=A.indexB,R=A.weight,z=A.normal,U=this.m_accumulationBuffer[P]+this.m_accumulationBuffer[D],J=l.MulSV(w*R*U,z,r);h[P].SelfSub(J),h[D].SelfAdd(J)}}SolveDamping(i){const r=X.SolveDamping_s_v,u=X.SolveDamping_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const h=this.m_positionBuffer.data,m=this.m_velocityBuffer.data,_=this.m_def.dampingStrength,v=1/this.GetCriticalVelocity(i),w=this.GetParticleInvMass();for(let V=0;V<this.m_bodyContactBuffer.count;V++){const b=this.m_bodyContactBuffer.data[V],A=b.index,P=b.body,D=b.weight,R=b.mass,z=b.normal,U=h[A],J=l.SubVV(P.GetLinearVelocityFromWorldPoint(U,l.s_t0),m[A],r),W=l.DotVV(J,z);if(W<0){const K=ut(_*D,dt(-v*W,.5)),it=l.MulSV(K*R*W,z,u);m[A].SelfMulAdd(w,it),P.ApplyLinearImpulse(it.SelfNeg(),U,!0)}}for(let V=0;V<this.m_contactBuffer.count;V++){const b=this.m_contactBuffer.data[V],A=b.indexA,P=b.indexB,D=b.weight,R=b.normal,z=l.SubVV(m[P],m[A],r),U=l.DotVV(z,R);if(U<0){const J=ut(_*D,dt(-v*U,.5)),W=l.MulSV(J*U,R,u);m[A].SelfAdd(W),m[P].SelfSub(W)}}}SolveRigidDamping(){const i=X.SolveRigidDamping_s_t0,r=X.SolveRigidDamping_s_t1,u=X.SolveRigidDamping_s_p,h=X.SolveRigidDamping_s_v,m=[0],_=[0],v=[0],w=[0],V=[0],b=[0];if(!this.m_positionBuffer.data)throw new Error;const A=this.m_positionBuffer.data,P=this.m_def.dampingStrength;for(let D=0;D<this.m_bodyContactBuffer.count;D++){const R=this.m_bodyContactBuffer.data[D],z=R.index,U=this.m_groupBuffer[z];if(U&&this.IsRigidGroup(U)){const J=R.body,W=R.normal,K=R.weight,it=A[z],at=l.SubVV(J.GetLinearVelocityFromWorldPoint(it,i),U.GetLinearVelocityFromWorldPoint(it,r),h),st=l.DotVV(at,W);if(st<0){this.InitDampingParameterWithRigidGroupOrParticle(m,_,v,!0,U,z,it,W),this.InitDampingParameter(w,V,b,J.GetMass(),J.GetInertia()-J.GetMass()*J.GetLocalCenter().LengthSquared(),J.GetWorldCenter(),it,W);const pt=P*dt(K,1)*this.ComputeDampingImpulse(m[0],_[0],v[0],w[0],V[0],b[0],st);this.ApplyDamping(m[0],_[0],v[0],!0,U,z,pt,W),J.ApplyLinearImpulse(l.MulSV(-pt,W,l.s_t0),it,!0)}}}for(let D=0;D<this.m_contactBuffer.count;D++){const R=this.m_contactBuffer.data[D],z=R.indexA,U=R.indexB,J=R.normal,W=R.weight,K=this.m_groupBuffer[z],it=this.m_groupBuffer[U],at=this.IsRigidGroup(K),st=this.IsRigidGroup(it);if(K!==it&&(at||st)){const pt=l.MidVV(A[z],A[U],u),St=l.SubVV(this.GetLinearVelocity(it,U,pt,i),this.GetLinearVelocity(K,z,pt,r),h),Dt=l.DotVV(St,J);if(Dt<0){this.InitDampingParameterWithRigidGroupOrParticle(m,_,v,at,K,z,pt,J),this.InitDampingParameterWithRigidGroupOrParticle(w,V,b,st,it,U,pt,J);const It=P*W*this.ComputeDampingImpulse(m[0],_[0],v[0],w[0],V[0],b[0],Dt);this.ApplyDamping(m[0],_[0],v[0],at,K,z,It,J),this.ApplyDamping(w[0],V[0],b[0],st,it,U,-It,J)}}}}SolveExtraDamping(){const i=X.SolveExtraDamping_s_v,r=X.SolveExtraDamping_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const u=this.m_velocityBuffer.data,h=this.m_positionBuffer.data,m=this.GetParticleInvMass();for(let _=0;_<this.m_bodyContactBuffer.count;_++){const v=this.m_bodyContactBuffer.data[_],w=v.index;if(this.m_flagsBuffer.data[w]&X.k_extraDampingFlags){const V=v.body,b=v.mass,A=v.normal,P=h[w],D=l.SubVV(V.GetLinearVelocityFromWorldPoint(P,l.s_t0),u[w],i),R=l.DotVV(D,A);if(R<0){const z=l.MulSV(.5*b*R,A,r);u[w].SelfMulAdd(m,z),V.ApplyLinearImpulse(z.SelfNeg(),P,!0)}}}}SolveWall(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const i=this.m_velocityBuffer.data;for(let r=0;r<this.m_count;r++)this.m_flagsBuffer.data[r]&s.b2ParticleFlag.b2_wallParticle&&i[r].SetZero()}SolveRigid(i){const r=X.SolveRigid_s_position,u=X.SolveRigid_s_rotation,h=X.SolveRigid_s_transform,m=X.SolveRigid_s_velocityTransform;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const _=this.m_positionBuffer.data,v=this.m_velocityBuffer.data;for(let w=this.m_groupList;w;w=w.GetNext())if(w.m_groupFlags&s.b2ParticleGroupFlag.b2_rigidParticleGroup){w.UpdateStatistics();const V=u;V.SetAngle(i.dt*w.m_angularVelocity);const b=l.AddVV(w.m_center,l.SubVV(l.MulSV(i.dt,w.m_linearVelocity,l.s_t0),tt.MulRV(V,w.m_center,l.s_t1),l.s_t0),r),A=h;A.SetPositionRotation(b,V),ct.MulXX(A,w.m_transform,w.m_transform);const P=m;P.p.x=i.inv_dt*A.p.x,P.p.y=i.inv_dt*A.p.y,P.q.s=i.inv_dt*A.q.s,P.q.c=i.inv_dt*(A.q.c-1);for(let D=w.m_firstIndex;D<w.m_lastIndex;D++)ct.MulXV(P,_[D],v[D])}}SolveElastic(i){const r=X.SolveElastic_s_pa,u=X.SolveElastic_s_pb,h=X.SolveElastic_s_pc,m=X.SolveElastic_s_r,_=X.SolveElastic_s_t0;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const v=this.m_positionBuffer.data,w=this.m_velocityBuffer.data,V=i.inv_dt*this.m_def.elasticStrength;for(let b=0;b<this.m_triadBuffer.count;b++){const A=this.m_triadBuffer.data[b];if(A.flags&s.b2ParticleFlag.b2_elasticParticle){const P=A.indexA,D=A.indexB,R=A.indexC,z=A.pa,U=A.pb,J=A.pc,W=r.Copy(v[P]),K=u.Copy(v[D]),it=h.Copy(v[R]),at=w[P],st=w[D],pt=w[R];W.SelfMulAdd(i.dt,at),K.SelfMulAdd(i.dt,st),it.SelfMulAdd(i.dt,pt);const St=(W.x+K.x+it.x)/3,Dt=(W.y+K.y+it.y)/3;W.x-=St,W.y-=Dt,K.x-=St,K.y-=Dt,it.x-=St,it.y-=Dt;const It=m;It.s=l.CrossVV(z,W)+l.CrossVV(U,K)+l.CrossVV(J,it),It.c=l.DotVV(z,W)+l.DotVV(U,K)+l.DotVV(J,it);const Mt=It.s*It.s+It.c*It.c;let At=kt(Mt);isFinite(At)||(At=198177537e11),It.s*=At,It.c*=At;const vt=V*A.strength;tt.MulRV(It,z,_),l.SubVV(_,W,_),l.MulSV(vt,_,_),at.SelfAdd(_),tt.MulRV(It,U,_),l.SubVV(_,K,_),l.MulSV(vt,_,_),st.SelfAdd(_),tt.MulRV(It,J,_),l.SubVV(_,it,_),l.MulSV(vt,_,_),pt.SelfAdd(_)}}}SolveSpring(i){const r=X.SolveSpring_s_pa,u=X.SolveSpring_s_pb,h=X.SolveSpring_s_d,m=X.SolveSpring_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const _=this.m_positionBuffer.data,v=this.m_velocityBuffer.data,w=i.inv_dt*this.m_def.springStrength;for(let V=0;V<this.m_pairBuffer.count;V++){const b=this.m_pairBuffer.data[V];if(b.flags&s.b2ParticleFlag.b2_springParticle){const A=b.indexA,P=b.indexB,D=r.Copy(_[A]),R=u.Copy(_[P]),z=v[A],U=v[P];D.SelfMulAdd(i.dt,z),R.SelfMulAdd(i.dt,U);const J=l.SubVV(R,D,h),W=b.distance,K=J.Length(),it=w*b.strength,at=l.MulSV(it*(W-K)/K,J,m);z.SelfSub(at),U.SelfAdd(at)}}}SolveTensile(i){const r=X.SolveTensile_s_weightedNormal,u=X.SolveTensile_s_s,h=X.SolveTensile_s_f;if(!this.m_velocityBuffer.data)throw new Error;const m=this.m_velocityBuffer.data;for(let b=0;b<this.m_count;b++)this.m_accumulation2Buffer[b]=new l,this.m_accumulation2Buffer[b].SetZero();for(let b=0;b<this.m_contactBuffer.count;b++){const A=this.m_contactBuffer.data[b];if(A.flags&s.b2ParticleFlag.b2_tensileParticle){const P=A.indexA,D=A.indexB,R=A.weight,z=A.normal,U=l.MulSV((1-R)*R,z,r);this.m_accumulation2Buffer[P].SelfSub(U),this.m_accumulation2Buffer[D].SelfAdd(U)}}const _=this.GetCriticalVelocity(i),v=this.m_def.surfaceTensionPressureStrength*_,w=this.m_def.surfaceTensionNormalStrength*_,V=ht*_;for(let b=0;b<this.m_contactBuffer.count;b++){const A=this.m_contactBuffer.data[b];if(A.flags&s.b2ParticleFlag.b2_tensileParticle){const P=A.indexA,D=A.indexB,R=A.weight,z=A.normal,U=this.m_weightBuffer[P]+this.m_weightBuffer[D],J=l.SubVV(this.m_accumulation2Buffer[D],this.m_accumulation2Buffer[P],u),W=dt(v*(U-2)+w*l.DotVV(J,z),V)*R,K=l.MulSV(W,z,h);m[P].SelfSub(K),m[D].SelfAdd(K)}}}SolveViscous(){const i=X.SolveViscous_s_v,r=X.SolveViscous_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const u=this.m_positionBuffer.data,h=this.m_velocityBuffer.data,m=this.m_def.viscousStrength,_=this.GetParticleInvMass();for(let v=0;v<this.m_bodyContactBuffer.count;v++){const w=this.m_bodyContactBuffer.data[v],V=w.index;if(this.m_flagsBuffer.data[V]&s.b2ParticleFlag.b2_viscousParticle){const b=w.body,A=w.weight,P=w.mass,D=u[V],R=l.SubVV(b.GetLinearVelocityFromWorldPoint(D,l.s_t0),h[V],i),z=l.MulSV(m*P*A,R,r);h[V].SelfMulAdd(_,z),b.ApplyLinearImpulse(z.SelfNeg(),D,!0)}}for(let v=0;v<this.m_contactBuffer.count;v++){const w=this.m_contactBuffer.data[v];if(w.flags&s.b2ParticleFlag.b2_viscousParticle){const V=w.indexA,b=w.indexB,A=w.weight,P=l.SubVV(h[b],h[V],i),D=l.MulSV(m*A,P,r);h[V].SelfAdd(D),h[b].SelfSub(D)}}}SolveRepulsive(i){const r=X.SolveRepulsive_s_f;if(!this.m_velocityBuffer.data)throw new Error;const u=this.m_velocityBuffer.data,h=this.m_def.repulsiveStrength*this.GetCriticalVelocity(i);for(let m=0;m<this.m_contactBuffer.count;m++){const _=this.m_contactBuffer.data[m];if(_.flags&s.b2ParticleFlag.b2_repulsiveParticle){const v=_.indexA,w=_.indexB;if(this.m_groupBuffer[v]!==this.m_groupBuffer[w]){const V=_.weight,b=_.normal,A=l.MulSV(h*V,b,r);u[v].SelfSub(A),u[w].SelfAdd(A)}}}}SolvePowder(i){const r=X.SolvePowder_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const u=this.m_positionBuffer.data,h=this.m_velocityBuffer.data,m=this.m_def.powderStrength*this.GetCriticalVelocity(i),_=1-Z,v=this.GetParticleInvMass();for(let w=0;w<this.m_bodyContactBuffer.count;w++){const V=this.m_bodyContactBuffer.data[w],b=V.index;if(this.m_flagsBuffer.data[b]&s.b2ParticleFlag.b2_powderParticle){const A=V.weight;if(A>_){const P=V.body,D=V.mass,R=u[b],z=V.normal,U=l.MulSV(m*D*(A-_),z,r);h[b].SelfMulSub(v,U),P.ApplyLinearImpulse(U,R,!0)}}}for(let w=0;w<this.m_contactBuffer.count;w++){const V=this.m_contactBuffer.data[w];if(V.flags&s.b2ParticleFlag.b2_powderParticle){const b=V.weight;if(b>_){const A=V.indexA,P=V.indexB,D=V.normal,R=l.MulSV(m*(b-_),D,r);h[A].SelfSub(R),h[P].SelfAdd(R)}}}}SolveSolid(i){const r=X.SolveSolid_s_f;if(!this.m_velocityBuffer.data)throw new Error;const u=this.m_velocityBuffer.data;this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer);const h=i.inv_dt*this.m_def.ejectionStrength;for(let m=0;m<this.m_contactBuffer.count;m++){const _=this.m_contactBuffer.data[m],v=_.indexA,w=_.indexB;if(this.m_groupBuffer[v]!==this.m_groupBuffer[w]){const V=_.weight,b=_.normal,A=this.m_depthBuffer[v]+this.m_depthBuffer[w],P=l.MulSV(h*A*V,b,r);u[v].SelfSub(P),u[w].SelfAdd(P)}}}SolveForce(i){if(!this.m_velocityBuffer.data)throw new Error;const r=this.m_velocityBuffer.data,u=i.dt*this.GetParticleInvMass();for(let h=0;h<this.m_count;h++)r[h].SelfMulAdd(u,this.m_forceBuffer[h]);this.m_hasForce=!1}SolveColorMixing(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_colorBuffer.data)throw new Error;const i=.5*this.m_def.colorMixingStrength;if(i)for(let r=0;r<this.m_contactBuffer.count;r++){const u=this.m_contactBuffer.data[r],h=u.indexA,m=u.indexB;if(this.m_flagsBuffer.data[h]&this.m_flagsBuffer.data[m]&s.b2ParticleFlag.b2_colorMixingParticle){const _=this.m_colorBuffer.data[h],v=this.m_colorBuffer.data[m];Kt.MixColors(_,v,i)}}}SolveZombie(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;let i=0;const r=[];for(let m=0;m<this.m_count;m++)r[m]=$;let u=0;for(let m=0;m<this.m_count;m++){const _=this.m_flagsBuffer.data[m];if(_&s.b2ParticleFlag.b2_zombieParticle){const v=this.m_world.m_destructionListener;if(_&s.b2ParticleFlag.b2_destructionListenerParticle&&v&&v.SayGoodbyeParticle(this,m),this.m_handleIndexBuffer.data){const w=this.m_handleIndexBuffer.data[m];w&&(w.SetIndex($),this.m_handleIndexBuffer.data[m]=null)}r[m]=$}else{if(r[m]=i,m!==i){if(this.m_handleIndexBuffer.data){const v=this.m_handleIndexBuffer.data[m];v&&v.SetIndex(i),this.m_handleIndexBuffer.data[i]=v}this.m_flagsBuffer.data[i]=this.m_flagsBuffer.data[m],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[i]=this.m_lastBodyContactStepBuffer.data[m]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[i]=this.m_bodyContactCountBuffer.data[m]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[i]=this.m_consecutiveContactStepsBuffer.data[m]),this.m_positionBuffer.data[i].Copy(this.m_positionBuffer.data[m]),this.m_velocityBuffer.data[i].Copy(this.m_velocityBuffer.data[m]),this.m_groupBuffer[i]=this.m_groupBuffer[m],this.m_hasForce&&this.m_forceBuffer[i].Copy(this.m_forceBuffer[m]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[i]=this.m_staticPressureBuffer[m]),this.m_depthBuffer&&(this.m_depthBuffer[i]=this.m_depthBuffer[m]),this.m_colorBuffer.data&&this.m_colorBuffer.data[i].Copy(this.m_colorBuffer.data[m]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[i]=this.m_userDataBuffer.data[m]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[i]=this.m_expirationTimeBuffer.data[m])}i++,u|=_}}const h={IsProxyInvalid:m=>m.index<0,IsContactInvalid:m=>m.indexA<0||m.indexB<0,IsBodyContactInvalid:m=>m.index<0,IsPairInvalid:m=>m.indexA<0||m.indexB<0,IsTriadInvalid:m=>m.indexA<0||m.indexB<0||m.indexC<0};for(let m=0;m<this.m_proxyBuffer.count;m++){const _=this.m_proxyBuffer.data[m];_.index=r[_.index]}this.m_proxyBuffer.RemoveIf(h.IsProxyInvalid);for(let m=0;m<this.m_contactBuffer.count;m++){const _=this.m_contactBuffer.data[m];_.indexA=r[_.indexA],_.indexB=r[_.indexB]}this.m_contactBuffer.RemoveIf(h.IsContactInvalid);for(let m=0;m<this.m_bodyContactBuffer.count;m++){const _=this.m_bodyContactBuffer.data[m];_.index=r[_.index]}this.m_bodyContactBuffer.RemoveIf(h.IsBodyContactInvalid);for(let m=0;m<this.m_pairBuffer.count;m++){const _=this.m_pairBuffer.data[m];_.indexA=r[_.indexA],_.indexB=r[_.indexB]}this.m_pairBuffer.RemoveIf(h.IsPairInvalid);for(let m=0;m<this.m_triadBuffer.count;m++){const _=this.m_triadBuffer.data[m];_.indexA=r[_.indexA],_.indexB=r[_.indexB],_.indexC=r[_.indexC]}if(this.m_triadBuffer.RemoveIf(h.IsTriadInvalid),this.m_indexByExpirationTimeBuffer.data){let m=0;for(let _=0;_<this.m_count;_++){const v=r[this.m_indexByExpirationTimeBuffer.data[_]];v!==$&&(this.m_indexByExpirationTimeBuffer.data[m++]=v)}}for(let m=this.m_groupList;m;m=m.GetNext()){let _=i,v=0,w=!1;for(let V=m.m_firstIndex;V<m.m_lastIndex;V++){const b=r[V];b>=0?(_=dt(_,b),v=ut(v,b+1)):w=!0}_<v?(m.m_firstIndex=_,m.m_lastIndex=v,w&&m.m_groupFlags&s.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(m,m.m_groupFlags|s.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(m.m_firstIndex=0,m.m_lastIndex=0,m.m_groupFlags&s.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(m,m.m_groupFlags|s.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}this.m_count=i,this.m_allParticleFlags=u,this.m_needsUpdateAllParticleFlags=!1;for(let m=this.m_groupList;m;){const _=m.GetNext();m.m_groupFlags&s.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(m),m=_}}SolveLifetimes(i){if(!this.m_expirationTimeBuffer.data)throw new Error;if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_timeElapsed=this.LifetimeToExpirationTime(i.dt);const r=this.GetQuantizedTimeElapsed(),u=this.m_expirationTimeBuffer.data,h=this.m_indexByExpirationTimeBuffer.data,m=this.GetParticleCount();this.m_expirationTimeBufferRequiresSorting&&(Ta(h,0,m,(v,w)=>{const V=u[v],b=u[w],A=V<=0,P=b<=0;return A===P?V>b:A}),this.m_expirationTimeBufferRequiresSorting=!1);for(let _=m-1;_>=0;--_){const v=h[_],w=u[v];if(r<w||w<=0)break;this.DestroyParticle(v)}}RotateBuffer(i,r,u){if(i!==r&&r!==u){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;if(gi(this.m_flagsBuffer.data,i,r,u),this.m_lastBodyContactStepBuffer.data&&gi(this.m_lastBodyContactStepBuffer.data,i,r,u),this.m_bodyContactCountBuffer.data&&gi(this.m_bodyContactCountBuffer.data,i,r,u),this.m_consecutiveContactStepsBuffer.data&&gi(this.m_consecutiveContactStepsBuffer.data,i,r,u),gi(this.m_positionBuffer.data,i,r,u),gi(this.m_velocityBuffer.data,i,r,u),gi(this.m_groupBuffer,i,r,u),this.m_hasForce&&gi(this.m_forceBuffer,i,r,u),this.m_staticPressureBuffer&&gi(this.m_staticPressureBuffer,i,r,u),this.m_depthBuffer&&gi(this.m_depthBuffer,i,r,u),this.m_colorBuffer.data&&gi(this.m_colorBuffer.data,i,r,u),this.m_userDataBuffer.data&&gi(this.m_userDataBuffer.data,i,r,u),this.m_handleIndexBuffer.data){gi(this.m_handleIndexBuffer.data,i,r,u);for(let m=i;m<u;++m){const _=this.m_handleIndexBuffer.data[m];_&&_.SetIndex(h(_.GetIndex()))}}if(this.m_expirationTimeBuffer.data){gi(this.m_expirationTimeBuffer.data,i,r,u);const m=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;const _=this.m_indexByExpirationTimeBuffer.data;for(let v=0;v<m;++v)_[v]=h(_[v])}for(let m=0;m<this.m_proxyBuffer.count;m++){const _=this.m_proxyBuffer.data[m];_.index=h(_.index)}for(let m=0;m<this.m_contactBuffer.count;m++){const _=this.m_contactBuffer.data[m];_.indexA=h(_.indexA),_.indexB=h(_.indexB)}for(let m=0;m<this.m_bodyContactBuffer.count;m++){const _=this.m_bodyContactBuffer.data[m];_.index=h(_.index)}for(let m=0;m<this.m_pairBuffer.count;m++){const _=this.m_pairBuffer.data[m];_.indexA=h(_.indexA),_.indexB=h(_.indexB)}for(let m=0;m<this.m_triadBuffer.count;m++){const _=this.m_triadBuffer.data[m];_.indexA=h(_.indexA),_.indexB=h(_.indexB),_.indexC=h(_.indexC)}for(let m=this.m_groupList;m;m=m.GetNext())m.m_firstIndex=h(m.m_firstIndex),m.m_lastIndex=h(m.m_lastIndex-1)+1}function h(m){return m<i?m:m<r?m+u-r:m<u?m+i-r:m}}GetCriticalVelocity(i){return this.m_particleDiameter*i.inv_dt}GetCriticalVelocitySquared(i){const r=this.GetCriticalVelocity(i);return r*r}GetCriticalPressure(i){return this.m_def.density*this.GetCriticalVelocitySquared(i)}GetParticleStride(){return Z*this.m_particleDiameter}GetParticleMass(){const i=this.GetParticleStride();return this.m_def.density*i*i}GetParticleInvMass(){const i=this.m_inverseDiameter*(1/Z);return this.m_inverseDensity*i*i}GetFixtureContactFilter(){return this.m_allParticleFlags&s.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetParticleContactFilter(){return this.m_allParticleFlags&s.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetFixtureContactListener(){return this.m_allParticleFlags&s.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}GetParticleContactListener(){return this.m_allParticleFlags&s.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}SetUserOverridableBuffer(i,r,u){i.data=r,i.userSuppliedCapacity=u}SetGroupFlags(i,r){const u=i.m_groupFlags;(u^r)&s.b2ParticleGroupFlag.b2_solidParticleGroup&&(r|=s.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),u&~r&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&r&&(r&s.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=r),i.m_groupFlags=r}static BodyContactCompare(i,r){return i.index===r.index?i.weight>r.weight:i.index<r.index}RemoveSpuriousBodyContacts(){Ta(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,X.BodyContactCompare);const i=X.RemoveSpuriousBodyContacts_s_n,r=X.RemoveSpuriousBodyContacts_s_pos,u=X.RemoveSpuriousBodyContacts_s_normal,h=this;let m=-1,_=0;this.m_bodyContactBuffer.count=Fd(this.m_bodyContactBuffer.data,v=>{if(v.index!==m&&(_=0,m=v.index),_++>3)return!0;const w=i.Copy(v.normal);if(w.SelfMul(h.m_particleDiameter*(1-v.weight)),!h.m_positionBuffer.data)throw new Error;const V=l.AddVV(h.m_positionBuffer.data[v.index],w,r);if(!v.fixture.TestPoint(V)){const b=v.fixture.GetShape().GetChildCount();for(let A=0;A<b;A++){const P=u;if(v.fixture.ComputeDistance(V,P,A)<p)return!1}return!0}return!1},this.m_bodyContactBuffer.count)}DetectStuckParticle(i){if(!(this.m_stuckThreshold<=0)){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;++this.m_bodyContactCountBuffer.data[i],this.m_bodyContactCountBuffer.data[i]===2&&(++this.m_consecutiveContactStepsBuffer.data[i],this.m_consecutiveContactStepsBuffer.data[i]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=i)),this.m_lastBodyContactStepBuffer.data[i]=this.m_timestamp}}ValidateParticleIndex(i){return i>=0&&i<this.GetParticleCount()&&i!==$}GetQuantizedTimeElapsed(){return Math.floor(this.m_timeElapsed/4294967296)}LifetimeToExpirationTime(i){return this.m_timeElapsed+Math.floor(i/this.m_def.lifetimeGranularity*4294967296)}ForceCanBeApplied(i){return!(i&s.b2ParticleFlag.b2_wallParticle)}PrepareForceBuffer(){if(!this.m_hasForce){for(let i=0;i<this.m_count;i++)this.m_forceBuffer[i].SetZero();this.m_hasForce=!0}}IsRigidGroup(i){return i!==null&&(i.m_groupFlags&s.b2ParticleGroupFlag.b2_rigidParticleGroup)!=0}GetLinearVelocity(i,r,u,h){if(i&&this.IsRigidGroup(i))return i.GetLinearVelocityFromWorldPoint(u,h);if(!this.m_velocityBuffer.data)throw new Error;return h.Copy(this.m_velocityBuffer.data[r])}InitDampingParameter(i,r,u,h,m,_,v,w){i[0]=h>0?1/h:0,r[0]=m>0?1/m:0,u[0]=l.CrossVV(l.SubVV(v,_,l.s_t0),w)}InitDampingParameterWithRigidGroupOrParticle(i,r,u,h,m,_,v,w){if(m&&h)this.InitDampingParameter(i,r,u,m.GetMass(),m.GetInertia(),m.GetCenter(),v,w);else{if(!this.m_flagsBuffer.data)throw new Error;const V=this.m_flagsBuffer.data[_];this.InitDampingParameter(i,r,u,V&s.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,v,v,w)}}ComputeDampingImpulse(i,r,u,h,m,_,v){const w=i+r*u*u+h+m*_*_;return w>0?v/w:0}ApplyDamping(i,r,u,h,m,_,v,w){if(m&&h)m.m_linearVelocity.SelfMulAdd(v*i,w),m.m_angularVelocity+=v*u*r;else{if(!this.m_velocityBuffer.data)throw new Error;this.m_velocityBuffer.data[_].SelfMulAdd(v*i,w)}}}X.xTruncBits=12,X.yTruncBits=12,X.tagBits=32,X.yOffset=1<<X.yTruncBits-1,X.yShift=X.tagBits-X.yTruncBits,X.xShift=X.tagBits-X.yTruncBits-X.xTruncBits,X.xScale=1<<X.xShift,X.xOffset=X.xScale*(1<<X.xTruncBits-1),X.yMask=(1<<X.yTruncBits)-1<<X.yShift,X.xMask=~X.yMask,X.DestroyParticlesInShape_s_aabb=new je,X.CreateParticleGroup_s_transform=new ct,X.ComputeCollisionEnergy_s_v=new l,X.QueryShapeAABB_s_aabb=new je,X.QueryPointAABB_s_aabb=new je,X.RayCast_s_aabb=new je,X.RayCast_s_p=new l,X.RayCast_s_v=new l,X.RayCast_s_n=new l,X.RayCast_s_point=new l,X.k_pairFlags=s.b2ParticleFlag.b2_springParticle,X.k_triadFlags=s.b2ParticleFlag.b2_elasticParticle,X.k_noPressureFlags=s.b2ParticleFlag.b2_powderParticle|s.b2ParticleFlag.b2_tensileParticle,X.k_extraDampingFlags=s.b2ParticleFlag.b2_staticPressureParticle,X.k_barrierWallFlags=s.b2ParticleFlag.b2_barrierParticle|s.b2ParticleFlag.b2_wallParticle,X.CreateParticlesStrokeShapeForGroup_s_edge=new ee,X.CreateParticlesStrokeShapeForGroup_s_d=new l,X.CreateParticlesStrokeShapeForGroup_s_p=new l,X.CreateParticlesFillShapeForGroup_s_aabb=new je,X.CreateParticlesFillShapeForGroup_s_p=new l,X.UpdatePairsAndTriads_s_dab=new l,X.UpdatePairsAndTriads_s_dbc=new l,X.UpdatePairsAndTriads_s_dca=new l,X.AddContact_s_d=new l,X.UpdateBodyContacts_s_aabb=new je,X.Solve_s_subStep=new Is,X.SolveCollision_s_aabb=new je,X.SolveGravity_s_gravity=new l,X.SolveBarrier_s_aabb=new je,X.SolveBarrier_s_va=new l,X.SolveBarrier_s_vb=new l,X.SolveBarrier_s_pba=new l,X.SolveBarrier_s_vba=new l,X.SolveBarrier_s_vc=new l,X.SolveBarrier_s_pca=new l,X.SolveBarrier_s_vca=new l,X.SolveBarrier_s_qba=new l,X.SolveBarrier_s_qca=new l,X.SolveBarrier_s_dv=new l,X.SolveBarrier_s_f=new l,X.SolvePressure_s_f=new l,X.SolveDamping_s_v=new l,X.SolveDamping_s_f=new l,X.SolveRigidDamping_s_t0=new l,X.SolveRigidDamping_s_t1=new l,X.SolveRigidDamping_s_p=new l,X.SolveRigidDamping_s_v=new l,X.SolveExtraDamping_s_v=new l,X.SolveExtraDamping_s_f=new l,X.SolveRigid_s_position=new l,X.SolveRigid_s_rotation=new tt,X.SolveRigid_s_transform=new ct,X.SolveRigid_s_velocityTransform=new ct,X.SolveElastic_s_pa=new l,X.SolveElastic_s_pb=new l,X.SolveElastic_s_pc=new l,X.SolveElastic_s_r=new tt,X.SolveElastic_s_t0=new l,X.SolveSpring_s_pa=new l,X.SolveSpring_s_pb=new l,X.SolveSpring_s_d=new l,X.SolveSpring_s_f=new l,X.SolveTensile_s_weightedNormal=new l,X.SolveTensile_s_s=new l,X.SolveTensile_s_f=new l,X.SolveViscous_s_v=new l,X.SolveViscous_s_f=new l,X.SolveRepulsive_s_f=new l,X.SolvePowder_s_f=new l,X.SolveSolid_s_f=new l,X.RemoveSpuriousBodyContacts_s_n=new l,X.RemoveSpuriousBodyContacts_s_pos=new l,X.RemoveSpuriousBodyContacts_s_normal=new l,function(j){j.UserOverridableBuffer=class{constructor(){this.data=null,this.userSuppliedCapacity=0}},j.Proxy=class{constructor(){this.index=$,this.tag=0}static CompareProxyProxy(u,h){return u.tag<h.tag}static CompareTagProxy(u,h){return u<h.tag}static CompareProxyTag(u,h){return u.tag<h}},j.InsideBoundsEnumerator=class{constructor(u,h,m,_,v){this.m_system=u,this.m_xLower=(h&j.xMask)>>>0,this.m_xUpper=(m&j.xMask)>>>0,this.m_yLower=(h&j.yMask)>>>0,this.m_yUpper=(m&j.yMask)>>>0,this.m_first=_,this.m_last=v}GetNext(){for(;this.m_first<this.m_last;){const u=(this.m_system.m_proxyBuffer.data[this.m_first].tag&j.xMask)>>>0;if(u>=this.m_xLower&&u<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return $}},j.ParticleListNode=class{constructor(){this.next=null,this.count=0,this.index=0}},j.FixedSetAllocator=class{Allocate(u,h){return h}Clear(){}GetCount(){return 0}Invalidate(u){}GetValidBuffer(){return[]}GetBuffer(){return[]}SetCount(u){}},j.FixtureParticle=class{constructor(u,h){this.second=$,this.first=u,this.second=h}},j.FixtureParticleSet=class extends j.FixedSetAllocator{Initialize(u,h){}Find(u){return $}},j.ParticlePair=class{constructor(u,h){this.first=$,this.second=$,this.first=u,this.second=h}},j.b2ParticlePairSet=class extends j.FixedSetAllocator{Initialize(u,h){}Find(u){return $}},j.ConnectionFilter=class{IsNecessary(u){return!0}ShouldCreatePair(u,h){return!0}ShouldCreateTriad(u,h,m){return!0}},j.DestroyParticlesInShapeCallback=class extends or{constructor(u,h,m,_){super(),this.m_callDestructionListener=!1,this.m_destroyed=0,this.m_system=u,this.m_shape=h,this.m_xf=m,this.m_callDestructionListener=_,this.m_destroyed=0}ReportFixture(u){return!1}ReportParticle(u,h){if(u!==this.m_system)return!1;if(!this.m_system.m_positionBuffer.data)throw new Error;return this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[h])&&(this.m_system.DestroyParticle(h,this.m_callDestructionListener),this.m_destroyed++),!0}Destroyed(){return this.m_destroyed}},j.JoinParticleGroupsFilter=class extends j.ConnectionFilter{constructor(u){super(),this.m_threshold=0,this.m_threshold=u}ShouldCreatePair(u,h){return u<this.m_threshold&&this.m_threshold<=h||h<this.m_threshold&&this.m_threshold<=u}ShouldCreateTriad(u,h,m){return(u<this.m_threshold||h<this.m_threshold||m<this.m_threshold)&&(this.m_threshold<=u||this.m_threshold<=h||this.m_threshold<=m)}},j.CompositeShape=class extends Ps{constructor(u,h=u.length){super(s.b2ShapeType.e_unknown,0),this.m_shapeCount=0,this.m_shapes=u,this.m_shapeCount=h}Clone(){throw new Error}GetChildCount(){return 1}TestPoint(u,h){for(let m=0;m<this.m_shapeCount;m++)if(this.m_shapes[m].TestPoint(u,h))return!0;return!1}ComputeDistance(u,h,m,_){return 0}RayCast(u,h,m,_){return!1}ComputeAABB(u,h,m){const _=new je;u.lowerBound.x=+a,u.lowerBound.y=+a,u.upperBound.x=-a,u.upperBound.y=-a;for(let v=0;v<this.m_shapeCount;v++){const w=this.m_shapes[v].GetChildCount();for(let V=0;V<w;V++){const b=_;this.m_shapes[v].ComputeAABB(b,h,V),u.Combine1(b)}}}ComputeMass(u,h){}SetupDistanceProxy(u,h){}ComputeSubmergedArea(u,h,m,_){return 0}Dump(u){}},j.ReactiveFilter=class extends j.ConnectionFilter{constructor(u){super(),this.m_flagsBuffer=u}IsNecessary(u){if(!this.m_flagsBuffer.data)throw new Error;return(this.m_flagsBuffer.data[u]&s.b2ParticleFlag.b2_reactiveParticle)!=0}};class i extends zu{constructor(h,m){super(h),this.m_contactFilter=m}ShouldCollideFixtureParticle(h,m,_){return this.m_contactFilter&&this.m_system.GetFlagsBuffer()[_]&s.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_contactFilter.ShouldCollideFixtureParticle(h,this.m_system,_):!0}ReportFixtureAndParticle(h,m,_){const v=j.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n,w=j.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp;if(!this.m_system.m_flagsBuffer.data)throw new Error;if(!this.m_system.m_positionBuffer.data)throw new Error;const V=this.m_system.m_positionBuffer.data[_],b=v,A=h.ComputeDistance(V,b,m);if(A<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(h,this.m_system,_)){const P=h.GetBody(),D=P.GetWorldCenter(),R=P.GetMass(),z=P.GetInertia()-R*P.GetLocalCenter().LengthSquared(),U=R>0?1/R:0,J=z>0?1/z:0,W=this.m_system.m_flagsBuffer.data[_]&s.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass(),K=l.SubVV(V,D,w),it=l.CrossVV(K,b),at=W+U+J*it*it,st=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()];st.index=_,st.body=P,st.fixture=h,st.weight=1-A*this.m_system.m_inverseDiameter,st.normal.Copy(b.SelfNeg()),st.mass=at>0?1/at:0,this.m_system.DetectStuckParticle(_)}}}i.ReportFixtureAndParticle_s_n=new l,i.ReportFixtureAndParticle_s_rp=new l,j.UpdateBodyContactsCallback=i;class r extends zu{constructor(h,m){super(h),this.m_step=m}ReportFixtureAndParticle(h,m,_){const v=j.SolveCollisionCallback.ReportFixtureAndParticle_s_p1,w=j.SolveCollisionCallback.ReportFixtureAndParticle_s_output,V=j.SolveCollisionCallback.ReportFixtureAndParticle_s_input,b=j.SolveCollisionCallback.ReportFixtureAndParticle_s_p,A=j.SolveCollisionCallback.ReportFixtureAndParticle_s_v,P=j.SolveCollisionCallback.ReportFixtureAndParticle_s_f,D=h.GetBody();if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;const R=this.m_system.m_positionBuffer.data[_],z=this.m_system.m_velocityBuffer.data[_],U=w,J=V;if(this.m_system.m_iterationIndex===0){const W=ct.MulTXV(D.m_xf0,R,v);h.GetShape().GetType()===s.b2ShapeType.e_circleShape&&(W.SelfSub(D.GetLocalCenter()),tt.MulRV(D.m_xf0.q,W,W),tt.MulTRV(D.m_xf.q,W,W),W.SelfAdd(D.GetLocalCenter())),ct.MulXV(D.m_xf,W,J.p1)}else J.p1.Copy(R);if(l.AddVMulSV(R,this.m_step.dt,z,J.p2),J.maxFraction=1,h.RayCast(U,J,m)){const W=U.normal,K=b;K.x=(1-U.fraction)*J.p1.x+U.fraction*J.p2.x+p*W.x,K.y=(1-U.fraction)*J.p1.y+U.fraction*J.p2.y+p*W.y;const it=A;it.x=this.m_step.inv_dt*(K.x-R.x),it.y=this.m_step.inv_dt*(K.y-R.y),this.m_system.m_velocityBuffer.data[_].Copy(it);const at=P;at.x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(z.x-it.x),at.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(z.y-it.y),this.m_system.ParticleApplyForce(_,at)}}ReportParticle(h,m){return!1}}r.ReportFixtureAndParticle_s_p1=new l,r.ReportFixtureAndParticle_s_output=new Bu,r.ReportFixtureAndParticle_s_input=new Sa,r.ReportFixtureAndParticle_s_p=new l,r.ReportFixtureAndParticle_s_v=new l,r.ReportFixtureAndParticle_s_f=new l,j.SolveCollisionCallback=r}(X||(X={}));class zt{constructor(i){this.m_newFixture=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_contactManager=new Pd,this.m_bodyList=null,this.m_jointList=null,this.m_particleSystemList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new l,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_inv_dt0=0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new Gu,this.m_island=new Ne,this.s_stack=[],this.m_controllerList=null,this.m_controllerCount=0,this.m_gravity.Copy(i)}SetDestructionListener(i){this.m_destructionListener=i}SetContactFilter(i){this.m_contactManager.m_contactFilter=i}SetContactListener(i){this.m_contactManager.m_contactListener=i}SetDebugDraw(i){this.m_debugDraw=i}CreateBody(i={}){if(this.IsLocked())throw new Error;const r=new hi(i,this);return r.m_prev=null,r.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=r),this.m_bodyList=r,++this.m_bodyCount,r}DestroyBody(i){if(this.IsLocked())throw new Error;let r=i.m_jointList;for(;r;){const _=r;r=r.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(_.joint),this.DestroyJoint(_.joint),i.m_jointList=r}i.m_jointList=null;let u=i.m_controllerList;for(;u;){const _=u;u=u.nextController,_.controller.RemoveBody(i)}let h=i.m_contactList;for(;h;){const _=h;h=h.next,this.m_contactManager.Destroy(_.contact)}i.m_contactList=null;let m=i.m_fixtureList;for(;m;){const _=m;m=m.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(_),_.DestroyProxies(),_.Destroy(),i.m_fixtureList=m,i.m_fixtureCount-=1}i.m_fixtureList=null,i.m_fixtureCount=0,i.m_prev&&(i.m_prev.m_next=i.m_next),i.m_next&&(i.m_next.m_prev=i.m_prev),i===this.m_bodyList&&(this.m_bodyList=i.m_next),--this.m_bodyCount}static _Joint_Create(i,r){switch(i.type){case s.b2JointType.e_distanceJoint:return new Mi(i);case s.b2JointType.e_mouseJoint:return new Vn(i);case s.b2JointType.e_prismaticJoint:return new Zt(i);case s.b2JointType.e_revoluteJoint:return new Ae(i);case s.b2JointType.e_pulleyJoint:return new ge(i);case s.b2JointType.e_gearJoint:return new ce(i);case s.b2JointType.e_wheelJoint:return new yi(i);case s.b2JointType.e_weldJoint:return new Ve(i);case s.b2JointType.e_frictionJoint:return new Bn(i);case s.b2JointType.e_ropeJoint:return new Ti(i);case s.b2JointType.e_motorJoint:return new An(i);case s.b2JointType.e_areaJoint:return new Bd(i)}throw new Error}static _Joint_Destroy(i,r){}CreateJoint(i){if(this.IsLocked())throw new Error;const r=zt._Joint_Create(i,null);r.m_prev=null,r.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=r),this.m_jointList=r,++this.m_jointCount,r.m_edgeA.prev=null,r.m_edgeA.next=r.m_bodyA.m_jointList,r.m_bodyA.m_jointList&&(r.m_bodyA.m_jointList.prev=r.m_edgeA),r.m_bodyA.m_jointList=r.m_edgeA,r.m_edgeB.prev=null,r.m_edgeB.next=r.m_bodyB.m_jointList,r.m_bodyB.m_jointList&&(r.m_bodyB.m_jointList.prev=r.m_edgeB),r.m_bodyB.m_jointList=r.m_edgeB;const u=i.bodyA,h=i.bodyB;if(!i.collideConnected){let m=h.GetContactList();for(;m;)m.other===u&&m.contact.FlagForFiltering(),m=m.next}return r}DestroyJoint(i){if(this.IsLocked())throw new Error;const r=i.m_collideConnected;i.m_prev&&(i.m_prev.m_next=i.m_next),i.m_next&&(i.m_next.m_prev=i.m_prev),i===this.m_jointList&&(this.m_jointList=i.m_next);const u=i.m_bodyA,h=i.m_bodyB;if(u.SetAwake(!0),h.SetAwake(!0),i.m_edgeA.prev&&(i.m_edgeA.prev.next=i.m_edgeA.next),i.m_edgeA.next&&(i.m_edgeA.next.prev=i.m_edgeA.prev),i.m_edgeA===u.m_jointList&&(u.m_jointList=i.m_edgeA.next),i.m_edgeA.prev=null,i.m_edgeA.next=null,i.m_edgeB.prev&&(i.m_edgeB.prev.next=i.m_edgeB.next),i.m_edgeB.next&&(i.m_edgeB.next.prev=i.m_edgeB.prev),i.m_edgeB===h.m_jointList&&(h.m_jointList=i.m_edgeB.next),i.m_edgeB.prev=null,i.m_edgeB.next=null,zt._Joint_Destroy(i,null),--this.m_jointCount,!r){let m=h.GetContactList();for(;m;)m.other===u&&m.contact.FlagForFiltering(),m=m.next}}CreateParticleSystem(i){if(this.IsLocked())throw new Error;const r=new X(i,this);return r.m_prev=null,r.m_next=this.m_particleSystemList,this.m_particleSystemList&&(this.m_particleSystemList.m_prev=r),this.m_particleSystemList=r,r}DestroyParticleSystem(i){if(this.IsLocked())throw new Error;i.m_prev&&(i.m_prev.m_next=i.m_next),i.m_next&&(i.m_next.m_prev=i.m_prev),i===this.m_particleSystemList&&(this.m_particleSystemList=i.m_next)}CalculateReasonableParticleIterations(i){return this.m_particleSystemList===null?1:Id(this.m_gravity.Length(),function(r){let u=a;for(let h=r.GetParticleSystemList();h!==null;h=h.m_next)u=dt(u,h.GetRadius());return u}(this),i)}Step(i,r,u,h=this.CalculateReasonableParticleIterations(i)){const m=zt.Step_s_stepTimer.Reset();this.m_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_newFixture=!1),this.m_locked=!0;const _=zt.Step_s_step;_.dt=i,_.velocityIterations=r,_.positionIterations=u,_.particleIterations=h,_.inv_dt=i>0?1/i:0,_.dtRatio=this.m_inv_dt0*i,_.warmStarting=this.m_warmStarting;const v=zt.Step_s_timer.Reset();if(this.m_contactManager.Collide(),this.m_profile.collide=v.GetMilliseconds(),this.m_stepComplete&&_.dt>0){const w=zt.Step_s_timer.Reset();for(let V=this.m_particleSystemList;V;V=V.m_next)V.Solve(_);this.Solve(_),this.m_profile.solve=w.GetMilliseconds()}if(this.m_continuousPhysics&&_.dt>0){const w=zt.Step_s_timer.Reset();this.SolveTOI(_),this.m_profile.solveTOI=w.GetMilliseconds()}_.dt>0&&(this.m_inv_dt0=_.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=m.GetMilliseconds()}ClearForces(){for(let i=this.m_bodyList;i;i=i.m_next)i.m_force.SetZero(),i.m_torque=0}DrawParticleSystem(i){if(this.m_debugDraw===null)return;const r=i.GetParticleCount();if(r){const u=i.GetRadius(),h=i.GetPositionBuffer();if(i.m_colorBuffer.data){const m=i.GetColorBuffer();this.m_debugDraw.DrawParticles(h,u,m,r)}else this.m_debugDraw.DrawParticles(h,u,null,r)}}DrawDebugData(){if(this.m_debugDraw===null)return;const i=this.m_debugDraw.GetFlags(),r=zt.DrawDebugData_s_color.SetRGB(0,0,0);if(i&s.b2DrawFlags.e_shapeBit)for(let u=this.m_bodyList;u;u=u.m_next){const h=u.m_xf;this.m_debugDraw.PushTransform(h);for(let m=u.GetFixtureList();m;m=m.m_next)u.IsActive()?u.GetType()===s.b2BodyType.b2_staticBody?(r.SetRGB(.5,.9,.5),this.DrawShape(m,r)):u.GetType()===s.b2BodyType.b2_kinematicBody?(r.SetRGB(.5,.5,.9),this.DrawShape(m,r)):u.IsAwake()?(r.SetRGB(.9,.7,.7),this.DrawShape(m,r)):(r.SetRGB(.6,.6,.6),this.DrawShape(m,r)):(r.SetRGB(.5,.5,.3),this.DrawShape(m,r));this.m_debugDraw.PopTransform(h)}if(i&s.b2DrawFlags.e_particleBit)for(let u=this.m_particleSystemList;u;u=u.m_next)this.DrawParticleSystem(u);if(i&s.b2DrawFlags.e_jointBit)for(let u=this.m_jointList;u;u=u.m_next)this.DrawJoint(u);if(i&s.b2DrawFlags.e_aabbBit){r.SetRGB(.9,.3,.9);const u=zt.DrawDebugData_s_vs;for(let h=this.m_bodyList;h;h=h.m_next)if(h.IsActive())for(let m=h.GetFixtureList();m;m=m.m_next)for(let _=0;_<m.m_proxyCount;++_){const v=m.m_proxies[_],w=v.treeNode.aabb;u[0].Set(w.lowerBound.x,w.lowerBound.y),u[1].Set(w.upperBound.x,w.lowerBound.y),u[2].Set(w.upperBound.x,w.upperBound.y),u[3].Set(w.lowerBound.x,w.upperBound.y),this.m_debugDraw.DrawPolygon(u,4,r)}}if(i&s.b2DrawFlags.e_centerOfMassBit)for(let u=this.m_bodyList;u;u=u.m_next){const h=zt.DrawDebugData_s_xf;h.q.Copy(u.m_xf.q),h.p.Copy(u.GetWorldCenter()),this.m_debugDraw.DrawTransform(h)}if(i&s.b2DrawFlags.e_controllerBit)for(let u=this.m_controllerList;u;u=u.m_next)u.Draw(this.m_debugDraw)}QueryAABB(i,r,u){if(this.m_contactManager.m_broadPhase.Query(r,h=>{const m=h.userData,_=m.fixture;return i?i.ReportFixture(_):!u||u(_)}),i instanceof or)for(let h=this.m_particleSystemList;h;h=h.m_next)i.ShouldQueryParticleSystem(h)&&h.QueryAABB(i,r)}QueryAllAABB(i,r=[]){return this.QueryAABB(null,i,u=>(r.push(u),!0)),r}QueryPointAABB(i,r,u){if(this.m_contactManager.m_broadPhase.QueryPoint(r,h=>{const m=h.userData,_=m.fixture;return i?i.ReportFixture(_):!u||u(_)}),i instanceof or)for(let h=this.m_particleSystemList;h;h=h.m_next)i.ShouldQueryParticleSystem(h)&&h.QueryPointAABB(i,r)}QueryAllPointAABB(i,r=[]){return this.QueryPointAABB(null,i,u=>(r.push(u),!0)),r}QueryFixtureShape(i,r,u,h,m){const _=zt.QueryFixtureShape_s_aabb;if(r.ComputeAABB(_,h,u),this.m_contactManager.m_broadPhase.Query(_,v=>{const w=v.userData,V=w.fixture;if(Vu(r,u,V.GetShape(),w.childIndex,h,V.GetBody().GetTransform())){if(i)return i.ReportFixture(V);if(m)return m(V)}return!0}),i instanceof or)for(let v=this.m_particleSystemList;v;v=v.m_next)i.ShouldQueryParticleSystem(v)&&v.QueryAABB(i,_)}QueryAllFixtureShape(i,r,u,h=[]){return this.QueryFixtureShape(null,i,r,u,m=>(h.push(m),!0)),h}QueryFixturePoint(i,r,u){if(this.m_contactManager.m_broadPhase.QueryPoint(r,h=>{const m=h.userData,_=m.fixture;if(_.TestPoint(r)){if(i)return i.ReportFixture(_);if(u)return u(_)}return!0}),i)for(let h=this.m_particleSystemList;h;h=h.m_next)i.ShouldQueryParticleSystem(h)&&h.QueryPointAABB(i,r)}QueryAllFixturePoint(i,r=[]){return this.QueryFixturePoint(null,i,u=>(r.push(u),!0)),r}RayCast(i,r,u,h){const m=zt.RayCast_s_input;if(m.maxFraction=1,m.p1.Copy(r),m.p2.Copy(u),this.m_contactManager.m_broadPhase.RayCast(m,(_,v)=>{const w=v.userData,V=w.fixture,b=w.childIndex,A=zt.RayCast_s_output;if(V.RayCast(A,_,b)){const D=A.fraction,R=zt.RayCast_s_point;if(R.Set((1-D)*r.x+D*u.x,(1-D)*r.y+D*u.y),i)return i.ReportFixture(V,R,A.normal,D);if(h)return h(V,R,A.normal,D)}return _.maxFraction}),i)for(let _=this.m_particleSystemList;_;_=_.m_next)i.ShouldQueryParticleSystem(_)&&_.RayCast(i,r,u)}RayCastOne(i,r){let u=null,h=1;return this.RayCast(null,i,r,(m,_,v,w)=>(w<h&&(h=w,u=m),h)),u}RayCastAll(i,r,u=[]){return this.RayCast(null,i,r,(h,m,_,v)=>(u.push(h),1)),u}GetBodyList(){return this.m_bodyList}GetJointList(){return this.m_jointList}GetParticleSystemList(){return this.m_particleSystemList}GetContactList(){return this.m_contactManager.m_contactList}SetAllowSleeping(i){if(i!==this.m_allowSleep&&(this.m_allowSleep=i,!this.m_allowSleep))for(let r=this.m_bodyList;r;r=r.m_next)r.SetAwake(!0)}GetAllowSleeping(){return this.m_allowSleep}SetWarmStarting(i){this.m_warmStarting=i}GetWarmStarting(){return this.m_warmStarting}SetContinuousPhysics(i){this.m_continuousPhysics=i}GetContinuousPhysics(){return this.m_continuousPhysics}SetSubStepping(i){this.m_subStepping=i}GetSubStepping(){return this.m_subStepping}GetProxyCount(){return this.m_contactManager.m_broadPhase.GetProxyCount()}GetBodyCount(){return this.m_bodyCount}GetJointCount(){return this.m_jointCount}GetContactCount(){return this.m_contactManager.m_contactCount}GetTreeHeight(){return this.m_contactManager.m_broadPhase.GetTreeHeight()}GetTreeBalance(){return this.m_contactManager.m_broadPhase.GetTreeBalance()}GetTreeQuality(){return this.m_contactManager.m_broadPhase.GetTreeQuality()}SetGravity(i,r=!0){if(!l.IsEqualToV(this.m_gravity,i)&&(this.m_gravity.Copy(i),r))for(let u=this.m_bodyList;u;u=u.m_next)u.SetAwake(!0)}GetGravity(){return this.m_gravity}IsLocked(){return this.m_locked}SetAutoClearForces(i){this.m_clearForces=i}GetAutoClearForces(){return this.m_clearForces}ShiftOrigin(i){if(this.IsLocked())throw new Error;for(let r=this.m_bodyList;r;r=r.m_next)r.m_xf.p.SelfSub(i),r.m_sweep.c0.SelfSub(i),r.m_sweep.c.SelfSub(i);for(let r=this.m_jointList;r;r=r.m_next)r.ShiftOrigin(i);this.m_contactManager.m_broadPhase.ShiftOrigin(i)}GetContactManager(){return this.m_contactManager}GetProfile(){return this.m_profile}Dump(i){if(this.m_locked)return;i(`const g: b2Vec2 = new b2Vec2(%.15f, %.15f);
`,this.m_gravity.x,this.m_gravity.y),i(`this.m_world.SetGravity(g);
`),i(`const bodies: b2Body[] = [];
`),i(`const joints: b2Joint[] = [];
`);let r=0;for(let u=this.m_bodyList;u;u=u.m_next)u.m_islandIndex=r,u.Dump(i),++r;r=0;for(let u=this.m_jointList;u;u=u.m_next)u.m_index=r,++r;for(let u=this.m_jointList;u;u=u.m_next)u.m_type!==s.b2JointType.e_gearJoint&&(i(`{
`),u.Dump(i),i(`}
`));for(let u=this.m_jointList;u;u=u.m_next)u.m_type===s.b2JointType.e_gearJoint&&(i(`{
`),u.Dump(i),i(`}
`))}DrawJoint(i){if(this.m_debugDraw===null)return;const r=i.GetBodyA(),u=i.GetBodyB(),h=r.m_xf,m=u.m_xf,_=h.p,v=m.p,w=i.GetAnchorA(zt.DrawJoint_s_p1),V=i.GetAnchorB(zt.DrawJoint_s_p2),b=zt.DrawJoint_s_color.SetRGB(.5,.8,.8);switch(i.m_type){case s.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(w,V,b);break;case s.b2JointType.e_pulleyJoint:{const A=i,P=A.GetGroundAnchorA(),D=A.GetGroundAnchorB();this.m_debugDraw.DrawSegment(P,w,b),this.m_debugDraw.DrawSegment(D,V,b),this.m_debugDraw.DrawSegment(P,D,b);break}case s.b2JointType.e_mouseJoint:{const A=zt.DrawJoint_s_c;A.Set(0,1,0),this.m_debugDraw.DrawPoint(w,4,A),this.m_debugDraw.DrawPoint(V,4,A),A.Set(.8,.8,.8),this.m_debugDraw.DrawSegment(w,V,A);break}default:this.m_debugDraw.DrawSegment(_,w,b),this.m_debugDraw.DrawSegment(w,V,b),this.m_debugDraw.DrawSegment(v,V,b)}}DrawShape(i,r){if(this.m_debugDraw===null)return;const u=i.GetShape();switch(u.m_type){case s.b2ShapeType.e_circleShape:{const h=u,m=h.m_p,_=h.m_radius,v=l.UNITX;this.m_debugDraw.DrawSolidCircle(m,_,v,r);break}case s.b2ShapeType.e_edgeShape:{const h=u,m=h.m_vertex1,_=h.m_vertex2;this.m_debugDraw.DrawSegment(m,_,r);break}case s.b2ShapeType.e_chainShape:{const h=u,m=h.m_count,_=h.m_vertices,v=zt.DrawShape_s_ghostColor.SetRGBA(.75*r.r,.75*r.g,.75*r.b,r.a);let w=_[0];if(this.m_debugDraw.DrawPoint(w,4,r),h.m_hasPrevVertex){const V=h.m_prevVertex;this.m_debugDraw.DrawSegment(V,w,v),this.m_debugDraw.DrawCircle(V,.1,v)}for(let V=1;V<m;++V){const b=_[V];this.m_debugDraw.DrawSegment(w,b,r),this.m_debugDraw.DrawPoint(b,4,r),w=b}if(h.m_hasNextVertex){const V=h.m_nextVertex;this.m_debugDraw.DrawSegment(V,w,v),this.m_debugDraw.DrawCircle(V,.1,v)}break}case s.b2ShapeType.e_polygonShape:{const h=u,m=h.m_count,_=h.m_vertices;this.m_debugDraw.DrawSolidPolygon(_,m,r);break}}}Solve(i){for(let m=this.m_bodyList;m;m=m.m_next)m.m_xf0.Copy(m.m_xf);for(let m=this.m_controllerList;m;m=m.m_next)m.Step(i);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;const r=this.m_island;r.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(let m=this.m_bodyList;m;m=m.m_next)m.m_islandFlag=!1;for(let m=this.m_contactManager.m_contactList;m;m=m.m_next)m.m_islandFlag=!1;for(let m=this.m_jointList;m;m=m.m_next)m.m_islandFlag=!1;const u=this.s_stack;for(let m=this.m_bodyList;m;m=m.m_next){if(m.m_islandFlag||!m.IsAwake()||!m.IsActive()||m.GetType()===s.b2BodyType.b2_staticBody)continue;r.Clear();let _=0;for(u[_++]=m,m.m_islandFlag=!0;_>0;){const w=u[--_];if(!w)throw new Error;if(r.AddBody(w),w.m_awakeFlag=!0,w.GetType()!==s.b2BodyType.b2_staticBody){for(let V=w.m_contactList;V;V=V.next){const b=V.contact;if(b.m_islandFlag||!b.IsEnabled()||!b.IsTouching())continue;const A=b.m_fixtureA.m_isSensor,P=b.m_fixtureB.m_isSensor;if(A||P)continue;r.AddContact(b),b.m_islandFlag=!0;const D=V.other;if(!D)throw new Error;D.m_islandFlag||(u[_++]=D,D.m_islandFlag=!0)}for(let V=w.m_jointList;V;V=V.next){if(V.joint.m_islandFlag)continue;const b=V.other;b.IsActive()&&(r.AddJoint(V.joint),V.joint.m_islandFlag=!0,b.m_islandFlag||(u[_++]=b,b.m_islandFlag=!0))}}}const v=new Gu;r.Solve(v,i,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=v.solveInit,this.m_profile.solveVelocity+=v.solveVelocity,this.m_profile.solvePosition+=v.solvePosition;for(let w=0;w<r.m_bodyCount;++w){const V=r.m_bodies[w];V.GetType()===s.b2BodyType.b2_staticBody&&(V.m_islandFlag=!1)}}for(let m=0;m<u.length&&u[m];++m)u[m]=null;const h=new Yt;for(let m=this.m_bodyList;m;m=m.m_next)m.m_islandFlag&&m.GetType()!==s.b2BodyType.b2_staticBody&&m.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=h.GetMilliseconds()}SolveTOI(i){const r=this.m_island;if(r.Initialize(2*M,M,0,null,this.m_contactManager.m_contactListener),this.m_stepComplete){for(let u=this.m_bodyList;u;u=u.m_next)u.m_islandFlag=!1,u.m_sweep.alpha0=0;for(let u=this.m_contactManager.m_contactList;u;u=u.m_next)u.m_toiFlag=!1,u.m_islandFlag=!1,u.m_toiCount=0,u.m_toi=1}for(;;){let u=null,h=1;for(let P=this.m_contactManager.m_contactList;P;P=P.m_next){if(!P.IsEnabled()||P.m_toiCount>T)continue;let D=1;if(P.m_toiFlag)D=P.m_toi;else{const R=P.GetFixtureA(),z=P.GetFixtureB();if(R.IsSensor()||z.IsSensor())continue;const U=R.GetBody(),J=z.GetBody(),W=U.m_type,K=J.m_type,it=U.IsAwake()&&W!==s.b2BodyType.b2_staticBody,at=J.IsAwake()&&K!==s.b2BodyType.b2_staticBody;if(!it&&!at)continue;const st=U.IsBullet()||W!==s.b2BodyType.b2_dynamicBody,pt=J.IsBullet()||K!==s.b2BodyType.b2_dynamicBody;if(!st&&!pt)continue;let St=U.m_sweep.alpha0;U.m_sweep.alpha0<J.m_sweep.alpha0?(St=J.m_sweep.alpha0,U.m_sweep.Advance(St)):J.m_sweep.alpha0<U.m_sweep.alpha0&&(St=U.m_sweep.alpha0,J.m_sweep.Advance(St));const Dt=P.GetChildIndexA(),It=P.GetChildIndexB(),Mt=zt.SolveTOI_s_toi_input;Mt.proxyA.SetShape(R.GetShape(),Dt),Mt.proxyB.SetShape(z.GetShape(),It),Mt.sweepA.Copy(U.m_sweep),Mt.sweepB.Copy(J.m_sweep),Mt.tMax=1;const At=zt.SolveTOI_s_toi_output;Mu(At,Mt);const vt=At.t;D=At.state===s.b2TOIOutputState.e_touching?dt(St+(1-St)*vt,1):1,P.m_toi=D,P.m_toiFlag=!0}D<h&&(u=P,h=D)}if(u===null||1-10*c<h){this.m_stepComplete=!0;break}const m=u.GetFixtureA(),_=u.GetFixtureB(),v=m.GetBody(),w=_.GetBody(),V=zt.SolveTOI_s_backup1.Copy(v.m_sweep),b=zt.SolveTOI_s_backup2.Copy(w.m_sweep);if(v.Advance(h),w.Advance(h),u.Update(this.m_contactManager.m_contactListener),u.m_toiFlag=!1,++u.m_toiCount,!u.IsEnabled()||!u.IsTouching()){u.SetEnabled(!1),v.m_sweep.Copy(V),w.m_sweep.Copy(b),v.SynchronizeTransform(),w.SynchronizeTransform();continue}v.SetAwake(!0),w.SetAwake(!0),r.Clear(),r.AddBody(v),r.AddBody(w),r.AddContact(u),v.m_islandFlag=!0,w.m_islandFlag=!0,u.m_islandFlag=!0;for(let P=0;P<2;++P){const D=P===0?v:w;if(D.m_type===s.b2BodyType.b2_dynamicBody)for(let R=D.m_contactList;R&&r.m_bodyCount!==r.m_bodyCapacity&&r.m_contactCount!==r.m_contactCapacity;R=R.next){const z=R.contact;if(z.m_islandFlag)continue;const U=R.other;if(U.m_type===s.b2BodyType.b2_dynamicBody&&!D.IsBullet()&&!U.IsBullet())continue;const J=z.m_fixtureA.m_isSensor,W=z.m_fixtureB.m_isSensor;if(J||W)continue;const K=zt.SolveTOI_s_backup.Copy(U.m_sweep);U.m_islandFlag||U.Advance(h),z.Update(this.m_contactManager.m_contactListener),z.IsEnabled()&&z.IsTouching()?(z.m_islandFlag=!0,r.AddContact(z),U.m_islandFlag||(U.m_islandFlag=!0,U.m_type!==s.b2BodyType.b2_staticBody&&U.SetAwake(!0),r.AddBody(U))):(U.m_sweep.Copy(K),U.SynchronizeTransform())}}const A=zt.SolveTOI_s_subStep;A.dt=(1-h)*i.dt,A.inv_dt=1/A.dt,A.dtRatio=1,A.positionIterations=20,A.velocityIterations=i.velocityIterations,A.particleIterations=i.particleIterations,A.warmStarting=!1,r.SolveTOI(A,v.m_islandIndex,w.m_islandIndex);for(let P=0;P<r.m_bodyCount;++P){const D=r.m_bodies[P];if(D.m_islandFlag=!1,D.m_type===s.b2BodyType.b2_dynamicBody){D.SynchronizeFixtures();for(let R=D.m_contactList;R;R=R.next)R.contact.m_toiFlag=!1,R.contact.m_islandFlag=!1}}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}}AddController(i){return i.m_next=this.m_controllerList,i.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=i),this.m_controllerList=i,++this.m_controllerCount,i}RemoveController(i){return i.m_prev&&(i.m_prev.m_next=i.m_next),i.m_next&&(i.m_next.m_prev=i.m_prev),this.m_controllerList===i&&(this.m_controllerList=i.m_next),--this.m_controllerCount,i.m_prev=null,i.m_next=null,i}}zt.Step_s_step=new Is,zt.Step_s_stepTimer=new Yt,zt.Step_s_timer=new Yt,zt.DrawDebugData_s_color=new Kt(0,0,0),zt.DrawDebugData_s_vs=l.MakeArray(4),zt.DrawDebugData_s_xf=new ct,zt.QueryFixtureShape_s_aabb=new je,zt.RayCast_s_input=new Sa,zt.RayCast_s_output=new Bu,zt.RayCast_s_point=new l,zt.DrawJoint_s_p1=new l,zt.DrawJoint_s_p2=new l,zt.DrawJoint_s_color=new Kt(.5,.8,.8),zt.DrawJoint_s_c=new Kt,zt.DrawShape_s_ghostColor=new Kt,zt.SolveTOI_s_subStep=new Is,zt.SolveTOI_s_backup=new Pe,zt.SolveTOI_s_backup1=new Pe,zt.SolveTOI_s_backup2=new Pe,zt.SolveTOI_s_toi_input=new bu,zt.SolveTOI_s_toi_output=new Pu;class Ud{constructor(i,r){this.prevBody=null,this.nextBody=null,this.prevController=null,this.nextController=null,this.controller=i,this.body=r}}class ar{constructor(){this.m_bodyList=null,this.m_bodyCount=0,this.m_prev=null,this.m_next=null}GetNext(){return this.m_next}GetPrev(){return this.m_prev}GetBodyList(){return this.m_bodyList}AddBody(i){const r=new Ud(this,i);r.nextBody=this.m_bodyList,r.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=r),this.m_bodyList=r,++this.m_bodyCount,r.nextController=i.m_controllerList,r.prevController=null,i.m_controllerList&&(i.m_controllerList.prevController=r),i.m_controllerList=r,++i.m_controllerCount}RemoveBody(i){if(this.m_bodyCount<=0)throw new Error;let r=this.m_bodyList;for(;r&&r.body!==i;)r=r.nextBody;if(r===null)throw new Error;r.prevBody&&(r.prevBody.nextBody=r.nextBody),r.nextBody&&(r.nextBody.prevBody=r.prevBody),this.m_bodyList===r&&(this.m_bodyList=r.nextBody),--this.m_bodyCount,r.nextController&&(r.nextController.prevController=r.prevController),r.prevController&&(r.prevController.nextController=r.nextController),i.m_controllerList===r&&(i.m_controllerList=r.nextController),--i.m_controllerCount}Clear(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0}}class Da extends ar{constructor(){super(...arguments),this.A=new l(0,0)}Step(i){const r=l.MulSV(i.dt,this.A,Da.Step_s_dtA);for(let u=this.m_bodyList;u;u=u.nextBody){const h=u.body;h.IsAwake()&&h.SetLinearVelocity(l.AddVV(h.GetLinearVelocity(),r,l.s_t0))}}Draw(i){}}Da.Step_s_dtA=new l;class ao extends ar{constructor(){super(...arguments),this.G=1,this.invSqr=!0}Step(i){if(this.invSqr)for(let r=this.m_bodyList;r;r=r.nextBody){const u=r.body,h=u.GetWorldCenter(),m=u.GetMass();for(let _=this.m_bodyList;_&&_!==r;_=_.nextBody){const v=_.body,w=v.GetWorldCenter(),V=v.GetMass(),b=w.x-h.x,A=w.y-h.y,P=b*b+A*A;if(P<c)continue;const D=ao.Step_s_f.Set(b,A);D.SelfMul(this.G/P/Nt(P)*m*V),u.IsAwake()&&u.ApplyForce(D,h),v.IsAwake()&&v.ApplyForce(D.SelfMul(-1),w)}}else for(let r=this.m_bodyList;r;r=r.nextBody){const u=r.body,h=u.GetWorldCenter(),m=u.GetMass();for(let _=this.m_bodyList;_&&_!==r;_=_.nextBody){const v=_.body,w=v.GetWorldCenter(),V=v.GetMass(),b=w.x-h.x,A=w.y-h.y,P=b*b+A*A;if(P<c)continue;const D=ao.Step_s_f.Set(b,A);D.SelfMul(this.G/P*m*V),u.IsAwake()&&u.ApplyForce(D,h),v.IsAwake()&&v.ApplyForce(D.SelfMul(-1),w)}}}Draw(i){}}ao.Step_s_f=new l;class ka extends ar{constructor(){super(...arguments),this.T=new qt,this.maxTimestep=0}Step(i){let r=i.dt;if(!(r<=c)){r>this.maxTimestep&&this.maxTimestep>0&&(r=this.maxTimestep);for(let u=this.m_bodyList;u;u=u.nextBody){const h=u.body;if(!h.IsAwake())continue;const m=h.GetWorldVector(qt.MulMV(this.T,h.GetLocalVector(h.GetLinearVelocity(),l.s_t0),l.s_t1),ka.Step_s_damping);h.SetLinearVelocity(l.AddVV(h.GetLinearVelocity(),l.MulSV(r,m,l.s_t0),l.s_t1))}}}Draw(i){}SetAxisAligned(i,r){this.T.ex.x=-i,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-r,this.maxTimestep=i>0||r>0?1/ut(i,r):0}}ka.Step_s_damping=new l;class ei{constructor(){this.m_count=0,this.m_ps=[],this.m_p0s=[],this.m_vs=[],this.m_ims=[],this.m_Ls=[],this.m_as=[],this.m_gravity=new l,this.m_damping=0,this.m_k2=1,this.m_k3=.1}GetVertexCount(){return this.m_count}GetVertices(){return this.m_ps}Initialize(i){this.m_count=i.count,this.m_ps=l.MakeArray(this.m_count),this.m_p0s=l.MakeArray(this.m_count),this.m_vs=l.MakeArray(this.m_count),this.m_ims=Ut(this.m_count);for(let h=0;h<this.m_count;++h){this.m_ps[h].Copy(i.vertices[h]),this.m_p0s[h].Copy(i.vertices[h]),this.m_vs[h].SetZero();const m=i.masses[h];this.m_ims[h]=m>0?1/m:0}const r=this.m_count-1,u=this.m_count-2;this.m_Ls=Ut(r),this.m_as=Ut(u);for(let h=0;h<r;++h){const m=this.m_ps[h],_=this.m_ps[h+1];this.m_Ls[h]=l.DistanceVV(m,_)}for(let h=0;h<u;++h){const m=this.m_ps[h],_=this.m_ps[h+1],v=this.m_ps[h+2],w=l.SubVV(_,m,l.s_t0),V=l.SubVV(v,_,l.s_t1),b=l.CrossVV(w,V),A=l.DotVV(w,V);this.m_as[h]=Ce(b,A)}this.m_gravity.Copy(i.gravity),this.m_damping=i.damping,this.m_k2=i.k2,this.m_k3=i.k3}Step(i,r){if(i===0)return;const u=Math.exp(-i*this.m_damping);for(let m=0;m<this.m_count;++m)this.m_p0s[m].Copy(this.m_ps[m]),this.m_ims[m]>0&&this.m_vs[m].SelfMulAdd(i,this.m_gravity),this.m_vs[m].SelfMul(u),this.m_ps[m].SelfMulAdd(i,this.m_vs[m]);for(let m=0;m<r;++m)this.SolveC2(),this.SolveC3(),this.SolveC2();const h=1/i;for(let m=0;m<this.m_count;++m)l.MulSV(h,l.SubVV(this.m_ps[m],this.m_p0s[m],l.s_t0),this.m_vs[m])}SolveC2(){const i=this.m_count-1;for(let r=0;r<i;++r){const u=this.m_ps[r],h=this.m_ps[r+1],m=l.SubVV(h,u,ei.s_d),_=m.Normalize(),v=this.m_ims[r],w=this.m_ims[r+1];if(v+w===0)continue;const V=v/(v+w),b=w/(v+w);u.SelfMulSub(this.m_k2*V*(this.m_Ls[r]-_),m),h.SelfMulAdd(this.m_k2*b*(this.m_Ls[r]-_),m)}}SetAngle(i){const r=this.m_count-2;for(let u=0;u<r;++u)this.m_as[u]=i}SolveC3(){const i=this.m_count-2;for(let r=0;r<i;++r){const u=this.m_ps[r],h=this.m_ps[r+1],m=this.m_ps[r+2],_=this.m_ims[r],v=this.m_ims[r+1],w=this.m_ims[r+2],V=l.SubVV(h,u,ei.s_d1),b=l.SubVV(m,h,ei.s_d2),A=V.LengthSquared(),P=b.LengthSquared();if(A*P==0)continue;const D=l.CrossVV(V,b),R=l.DotVV(V,b);let z=Ce(D,R);const U=l.MulSV(-1/A,V.SelfSkew(),ei.s_Jd1),J=l.MulSV(1/P,b.SelfSkew(),ei.s_Jd2),W=l.NegV(U,ei.s_J1),K=l.SubVV(U,J,ei.s_J2),it=J;let at=_*l.DotVV(W,W)+v*l.DotVV(K,K)+w*l.DotVV(it,it);if(at===0)continue;at=1/at;let st=z-this.m_as[r];for(;st>f;)st=(z-=2*f)-this.m_as[r];for(;st<-f;)st=(z+=2*f)-this.m_as[r];const pt=-this.m_k3*at*st;u.SelfMulAdd(_*pt,W),h.SelfMulAdd(v*pt,K),m.SelfMulAdd(w*pt,it)}}Draw(i){const r=new Kt(.4,.5,.7);for(let u=0;u<this.m_count-1;++u)i.DrawSegment(this.m_ps[u],this.m_ps[u+1],r)}}ei.s_d=new l,ei.s_d1=new l,ei.s_d2=new l,ei.s_Jd1=new l,ei.s_Jd2=new l,ei.s_J1=new l,ei.s_J2=new l,s.b2Assert=function(j,...i){if(!j)throw new Error(...i)},s.b2Maybe=o,s.b2_maxFloat=a,s.b2_epsilon=c,s.b2_epsilon_sq=d,s.b2_pi=f,s.b2_maxManifoldPoints=y,s.b2_maxPolygonVertices=g,s.b2_aabbExtension=S,s.b2_aabbMultiplier=x,s.b2_linearSlop=p,s.b2_angularSlop=C,s.b2_polygonRadius=B,s.b2_maxSubSteps=T,s.b2_maxTOIContacts=M,s.b2_velocityThreshold=I,s.b2_maxLinearCorrection=L,s.b2_maxAngularCorrection=F,s.b2_maxTranslation=k,s.b2_maxTranslationSquared=G,s.b2_maxRotation=O,s.b2_maxRotationSquared=E,s.b2_baumgarte=H,s.b2_toiBaumgarte=q,s.b2_invalidParticleIndex=$,s.b2_maxParticleIndex=2147483647,s.b2_particleStride=Z,s.b2_minParticleWeight=ot,s.b2_maxParticlePressure=gt,s.b2_maxParticleForce=ht,s.b2_maxTriadDistance=2,s.b2_maxTriadDistanceSquared=wt,s.b2_minParticleSystemBufferCapacity=Ct,s.b2_barrierCollisionTime=mt,s.b2_timeToSleep=Y,s.b2_linearSleepTolerance=Q,s.b2_angularSleepTolerance=lt,s.b2Alloc=function(j){return null},s.b2Free=function(j){},s.b2Log=function(j,...i){},s.b2Version=_t,s.b2_version=Vt,s.b2_branch="master",s.b2_commit="fbf51801d80fc389d43dc46524520e89043b6faf",s.b2ParseInt=function(j){return parseInt(j,10)},s.b2ParseUInt=function(j){return Math.abs(parseInt(j,10))},s.b2MakeArray=Bt,s.b2MakeNullArray=function(j){const i=[];for(let r=0;r<j;++r)i.push(null);return i},s.b2MakeNumberArray=Ut,s.b2_pi_over_180=Gt,s.b2_180_over_pi=Xt,s.b2_two_pi=ft,s.b2Abs=rt,s.b2Min=dt,s.b2Max=ut,s.b2Clamp=yt,s.b2Swap=function(j,i){const r=j[0];j[0]=i[0],i[0]=r},s.b2IsValid=et,s.b2Sq=bt,s.b2InvSqrt=kt,s.b2Sqrt=Nt,s.b2Pow=Et,s.b2DegToRad=function(j){return j*Gt},s.b2RadToDeg=function(j){return j*Xt},s.b2Cos=ne,s.b2Sin=ye,s.b2Acos=De,s.b2Asin=Ye,s.b2Atan2=Ce,s.b2NextPowerOfTwo=function(j){return j|=j>>1&2147483647,j|=j>>2&1073741823,j|=j>>4&268435455,j|=j>>8&16777215,1+(j|=j>>16&65535)},s.b2IsPowerOfTwo=function(j){return j>0&&(j&j-1)==0},s.b2Random=function(){return 2*Math.random()-1},s.b2RandomRange=function(j,i){return(i-j)*Math.random()+j},s.b2Vec2=l,s.b2Vec2_zero=_i,s.b2Vec3=$t,s.b2Mat22=qt,s.b2Mat33=de,s.b2Rot=tt,s.b2Transform=ct,s.b2Sweep=Pe,s.b2Color=Kt,s.b2Draw=class{constructor(){this.m_drawFlags=0}SetFlags(j){this.m_drawFlags=j}GetFlags(){return this.m_drawFlags}AppendFlags(j){this.m_drawFlags|=j}ClearFlags(j){this.m_drawFlags&=~j}},s.b2Timer=Yt,s.b2Counter=class{constructor(){this.m_count=0,this.m_min_count=0,this.m_max_count=0}GetCount(){return this.m_count}GetMinCount(){return this.m_min_count}GetMaxCount(){return this.m_max_count}ResetCount(){const j=this.m_count;return this.m_count=0,j}ResetMinCount(){this.m_min_count=0}ResetMaxCount(){this.m_max_count=0}Increment(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)}Decrement(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)}},s.b2GrowableStack=ci,s.b2BlockAllocator=class{},s.b2StackAllocator=class{},s.b2ContactFeature=ud,s.b2ContactID=sr,s.b2ManifoldPoint=xa,s.b2Manifold=$r,s.b2WorldManifold=Me,s.b2GetPointStates=function(j,i,r,u){let h;for(h=0;h<r.pointCount;++h){const m=r.points[h].id,_=m.key;j[h]=s.b2PointState.b2_removeState;for(let v=0,w=u.pointCount;v<w;++v)if(u.points[v].id.key===_){j[h]=s.b2PointState.b2_persistState;break}}for(;h<y;++h)j[h]=s.b2PointState.b2_nullState;for(h=0;h<u.pointCount;++h){const m=u.points[h].id,_=m.key;i[h]=s.b2PointState.b2_addState;for(let v=0,w=r.pointCount;v<w;++v)if(r.points[v].id.key===_){i[h]=s.b2PointState.b2_persistState;break}}for(;h<y;++h)i[h]=s.b2PointState.b2_nullState},s.b2ClipVertex=xn,s.b2RayCastInput=Sa,s.b2RayCastOutput=Bu,s.b2AABB=je,s.b2TestOverlapAABB=Au,s.b2ClipSegmentToLine=Zr,s.b2TestOverlapShape=Vu,s.b2DistanceProxy=fe,s.b2SimplexCache=Le,s.b2DistanceInput=ti,s.b2DistanceOutput=gn,s.b2ShapeCastInput=class{constructor(){this.proxyA=new fe,this.proxyB=new fe,this.transformA=new ct,this.transformB=new ct,this.translationB=new l}},s.b2ShapeCastOutput=class{constructor(){this.point=new l,this.normal=new l,this.lambda=0,this.iterations=0}},s.b2_gjk_reset=function(){s.b2_gjkCalls=0,s.b2_gjkIters=0,s.b2_gjkMaxIters=0},s.b2SimplexVertex=vn,s.b2Simplex=Be,s.b2Distance=un,s.b2ShapeCast=function(j,i){j.iterations=0,j.lambda=1,j.normal.SetZero(),j.point.SetZero();const r=i.proxyA,u=i.proxyB,h=ut(r.m_radius,B),m=ut(u.m_radius,B),_=h+m,v=i.transformA,w=i.transformB,V=i.translationB,b=Jr.Set(0,0);let A=0;const P=Xr;P.m_count=0;const D=P.m_vertices;let R=r.GetSupport(tt.MulTRV(v.q,l.NegV(V,l.s_t1),l.s_t0)),z=ct.MulXV(v,r.GetVertex(R),Qi),U=u.GetSupport(tt.MulTRV(w.q,V,l.s_t0)),J=ct.MulXV(w,u.GetVertex(U),ld);const W=l.SubVV(z,J,f0),K=ut(B,_-B),it=.5*p;let at=0;for(;at<20&&rt(W.Length()-K)>it;){j.iterations+=1,R=r.GetSupport(tt.MulTRV(v.q,l.NegV(W,l.s_t1),l.s_t0)),z=ct.MulXV(v,r.GetVertex(R),Qi),U=u.GetSupport(tt.MulTRV(w.q,W,l.s_t0)),J=ct.MulXV(w,u.GetVertex(U),ld);const St=l.SubVV(z,J,p0);W.Normalize();const Dt=l.DotVV(W,St),It=l.DotVV(W,V);if(Dt-K>A*It){if(It<=0||(A=(Dt-K)/It)>1)return!1;b.Copy(W).SelfNeg(),P.m_count=0}const Mt=D[P.m_count];switch(Mt.indexA=U,Mt.wA.Copy(J).SelfMulAdd(A,V),Mt.indexB=R,Mt.wB.Copy(z),Mt.w.Copy(Mt.wB).SelfSub(Mt.wA),Mt.a=1,P.m_count+=1,P.m_count){case 1:break;case 2:P.Solve2();break;case 3:P.Solve3()}if(P.m_count===3)return!1;P.GetClosestPoint(W),++at}const st=_0,pt=y0;return P.GetWitnessPoints(st,pt),W.LengthSquared()>0&&(b.Copy(W).SelfNeg(),b.Normalize()),j.normal.Copy(b),j.lambda=A,j.iterations=at,!0},s.b2Pair=hd,s.b2BroadPhase=md,s.b2PairLessThan=dd,s.b2TreeNode=cd,s.b2DynamicTree=re,s.b2_toi_reset=function(){s.b2_toiTime=0,s.b2_toiMaxTime=0,s.b2_toiCalls=0,s.b2_toiIters=0,s.b2_toiMaxIters=0,s.b2_toiRootIters=0,s.b2_toiMaxRootIters=0},s.b2TOIInput=bu,s.b2TOIOutput=Pu,s.b2SeparationFunction=_d,s.b2TimeOfImpact=Mu,s.b2CollideCircles=yd,s.b2CollidePolygonAndCircle=gd,s.b2CollidePolygons=xd,s.b2CollideEdgeAndCircle=Iu,s.b2CollideEdgeAndPolygon=Du,s.b2MassData=Aa,s.b2Shape=Ps,s.b2CircleShape=He,s.b2PolygonShape=Rt,s.b2EdgeShape=ee,s.b2ChainShape=Ki,s.b2Filter=Zn,s.b2FixtureDef=wd,s.b2FixtureProxy=ku,s.b2Fixture=Cn,s.b2BodyDef=class{constructor(){this.type=s.b2BodyType.b2_staticBody,this.position=new l(0,0),this.angle=0,this.linearVelocity=new l(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.active=!0,this.userData=null,this.gravityScale=1}},s.b2Body=hi,s.b2World=zt,s.b2DestructionListener=class{SayGoodbyeJoint(j){}SayGoodbyeFixture(j){}SayGoodbyeParticleGroup(j){}SayGoodbyeParticle(j,i){}},s.b2ContactFilter=Va,s.b2ContactImpulse=bd,s.b2ContactListener=ba,s.b2QueryCallback=or,s.b2RayCastCallback=class{ReportFixture(j,i,r,u){return u}ReportParticle(j,i,r,u,h){return 0}ShouldQueryParticleSystem(j){return!0}},s.b2Island=Ne,s.b2Profile=Gu,s.b2TimeStep=Is,s.b2Position=io,s.b2Velocity=no,s.b2SolverData=Md,s.b2ContactManager=Pd,s.b2MixFriction=Ru,s.b2MixRestitution=Fu,s.b2ContactEdge=Eu,s.b2Contact=Ii,s.b2ContactRegister=Ad,s.b2ContactFactory=Vd,s.g_blockSolve=ju,s.b2VelocityConstraintPoint=Pa,s.b2ContactVelocityConstraint=so,s.b2ContactPositionConstraint=ro,s.b2ContactSolverDef=Td,s.b2PositionSolverManifold=zi,s.b2ContactSolver=Lt,s.b2CircleContact=Qr,s.b2PolygonContact=Kr,s.b2PolygonAndCircleContact=Yr,s.b2EdgeAndCircleContact=to,s.b2EdgeAndPolygonContact=eo,s.b2ChainAndCircleContact=Ms,s.b2ChainAndPolygonContact=Ts,s.b2Jacobian=class{constructor(){this.linear=new l,this.angularA=0,this.angularB=0}SetZero(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this}Set(j,i,r){return this.linear.Copy(j),this.angularA=i,this.angularB=r,this}},s.b2JointEdge=Lu,s.b2JointDef=bi,s.b2Joint=Pi,s.b2AreaJointDef=class extends bi{constructor(){super(s.b2JointType.e_areaJoint),this.bodies=[],this.frequencyHz=0,this.dampingRatio=0}AddBody(j){this.bodies.push(j),this.bodies.length===1?this.bodyA=j:this.bodies.length===2&&(this.bodyB=j)}},s.b2AreaJoint=Bd,s.b2DistanceJointDef=Cd,s.b2DistanceJoint=Mi,s.b2FrictionJointDef=class extends bi{constructor(){super(s.b2JointType.e_frictionJoint),this.localAnchorA=new l,this.localAnchorB=new l,this.maxForce=0,this.maxTorque=0}Initialize(j,i,r){this.bodyA=j,this.bodyB=i,this.bodyA.GetLocalPoint(r,this.localAnchorA),this.bodyB.GetLocalPoint(r,this.localAnchorB)}},s.b2FrictionJoint=Bn,s.b2GearJointDef=class extends bi{constructor(){super(s.b2JointType.e_gearJoint),this.ratio=1}},s.b2GearJoint=ce,s.b2MotorJointDef=class extends bi{constructor(){super(s.b2JointType.e_motorJoint),this.linearOffset=new l(0,0),this.angularOffset=0,this.maxForce=1,this.maxTorque=1,this.correctionFactor=.3}Initialize(j,i){this.bodyA=j,this.bodyB=i,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);const r=this.bodyA.GetAngle(),u=this.bodyB.GetAngle();this.angularOffset=u-r}},s.b2MotorJoint=An,s.b2MouseJointDef=class extends bi{constructor(){super(s.b2JointType.e_mouseJoint),this.target=new l,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7}},s.b2MouseJoint=Vn,s.b2PrismaticJointDef=class extends bi{constructor(){super(s.b2JointType.e_prismaticJoint),this.localAnchorA=new l,this.localAnchorB=new l,this.localAxisA=new l(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0}Initialize(j,i,r,u){this.bodyA=j,this.bodyB=i,this.bodyA.GetLocalPoint(r,this.localAnchorA),this.bodyB.GetLocalPoint(r,this.localAnchorB),this.bodyA.GetLocalVector(u,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},s.b2PrismaticJoint=Zt,s.b2_minPulleyLength=2,s.b2PulleyJointDef=class extends bi{constructor(){super(s.b2JointType.e_pulleyJoint),this.groundAnchorA=new l(-1,1),this.groundAnchorB=new l(1,1),this.localAnchorA=new l(-1,0),this.localAnchorB=new l(1,0),this.lengthA=0,this.lengthB=0,this.ratio=1,this.collideConnected=!0}Initialize(j,i,r,u,h,m,_){this.bodyA=j,this.bodyB=i,this.groundAnchorA.Copy(r),this.groundAnchorB.Copy(u),this.bodyA.GetLocalPoint(h,this.localAnchorA),this.bodyB.GetLocalPoint(m,this.localAnchorB),this.lengthA=l.DistanceVV(h,r),this.lengthB=l.DistanceVV(m,u),this.ratio=_}},s.b2PulleyJoint=ge,s.b2RevoluteJointDef=class extends bi{constructor(){super(s.b2JointType.e_revoluteJoint),this.localAnchorA=new l(0,0),this.localAnchorB=new l(0,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerAngle=0,this.upperAngle=0,this.enableMotor=!1,this.motorSpeed=0,this.maxMotorTorque=0}Initialize(j,i,r){this.bodyA=j,this.bodyB=i,this.bodyA.GetLocalPoint(r,this.localAnchorA),this.bodyB.GetLocalPoint(r,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},s.b2RevoluteJoint=Ae,s.b2RopeJointDef=class extends bi{constructor(){super(s.b2JointType.e_ropeJoint),this.localAnchorA=new l(-1,0),this.localAnchorB=new l(1,0),this.maxLength=0}},s.b2RopeJoint=Ti,s.b2WeldJointDef=class extends bi{constructor(){super(s.b2JointType.e_weldJoint),this.localAnchorA=new l,this.localAnchorB=new l,this.referenceAngle=0,this.frequencyHz=0,this.dampingRatio=0}Initialize(j,i,r){this.bodyA=j,this.bodyB=i,this.bodyA.GetLocalPoint(r,this.localAnchorA),this.bodyB.GetLocalPoint(r,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},s.b2WeldJoint=Ve,s.b2WheelJointDef=class extends bi{constructor(){super(s.b2JointType.e_wheelJoint),this.localAnchorA=new l(0,0),this.localAnchorB=new l(0,0),this.localAxisA=new l(1,0),this.enableMotor=!1,this.maxMotorTorque=0,this.motorSpeed=0,this.frequencyHz=2,this.dampingRatio=.7}Initialize(j,i,r,u){this.bodyA=j,this.bodyB=i,this.bodyA.GetLocalPoint(r,this.localAnchorA),this.bodyB.GetLocalPoint(r,this.localAnchorB),this.bodyA.GetLocalVector(u,this.localAxisA)}},s.b2WheelJoint=yi,s.b2ControllerEdge=Ud,s.b2Controller=ar,s.b2BuoyancyController=class extends ar{constructor(){super(...arguments),this.normal=new l(0,1),this.offset=0,this.density=0,this.velocity=new l(0,0),this.linearDrag=0,this.angularDrag=0,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=new l(0,0)}Step(j){if(this.m_bodyList){this.useWorldGravity&&this.gravity.Copy(this.m_bodyList.body.GetWorld().GetGravity());for(let i=this.m_bodyList;i;i=i.nextBody){const r=i.body;if(!r.IsAwake())continue;const u=new l,h=new l;let m=0,_=0;for(let V=r.GetFixtureList();V;V=V.m_next){const b=new l,A=V.GetShape().ComputeSubmergedArea(this.normal,this.offset,r.GetTransform(),b);m+=A,u.x+=A*b.x,u.y+=A*b.y;let P=0;P=this.useDensity?V.GetDensity():1,_+=A*P,h.x+=A*b.x*P,h.y+=A*b.y*P}if(u.x/=m,u.y/=m,h.x/=_,h.y/=_,m<c)continue;const v=this.gravity.Clone().SelfNeg();v.SelfMul(this.density*m),r.ApplyForce(v,h);const w=r.GetLinearVelocityFromWorldPoint(u,new l);w.SelfSub(this.velocity),w.SelfMul(-this.linearDrag*m),r.ApplyForce(w,u),r.ApplyTorque(-r.GetInertia()/r.GetMass()*m*r.GetAngularVelocity()*this.angularDrag)}}}Draw(j){const r=new l,u=new l;r.x=this.normal.x*this.offset+this.normal.y*100,r.y=this.normal.y*this.offset-this.normal.x*100,u.x=this.normal.x*this.offset-this.normal.y*100,u.y=this.normal.y*this.offset+this.normal.x*100;const h=new Kt(0,0,.8);j.DrawSegment(r,u,h)}},s.b2ConstantAccelController=Da,s.b2ConstantForceController=class extends ar{constructor(){super(...arguments),this.F=new l(0,0)}Step(j){for(let i=this.m_bodyList;i;i=i.nextBody){const r=i.body;r.IsAwake()&&r.ApplyForce(this.F,r.GetWorldCenter())}}Draw(j){}},s.b2GravityController=ao,s.b2TensorDampingController=ka,s.b2ParticleDef=Nu,s.b2CalculateParticleIterations=Id,s.b2ParticleHandle=Dd,s.b2ParticleGroupDef=kd,s.b2ParticleGroup=oo,s.b2GrowableBuffer=Ds,s.b2FixtureParticleQueryCallback=zu,s.b2ParticleContact=jd,s.b2ParticleBodyContact=Nd,s.b2ParticlePair=zd,s.b2ParticleTriad=Od,s.b2ParticleSystemDef=Ia,s.b2ParticleSystem=X,s.b2RopeDef=class{constructor(){this.vertices=[],this.count=0,this.masses=[],this.gravity=new l(0,0),this.damping=.1,this.k2=.9,this.k3=.1}},s.b2Rope=ei,Object.defineProperty(s,"__esModule",{value:!0})})(e)},function(t,e){t.exports=nt},function(t,e,n){var s=n(4);function o(){}function a(){}a.resetWarningCache=o,t.exports=function(){function c(y,g,S,x,p,C){if(C!==s){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}function d(){return c}c.isRequired=c;var f={array:c,bool:c,func:c,number:c,object:c,string:c,symbol:c,any:c,arrayOf:d,element:c,elementType:c,instanceOf:d,node:c,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d,checkPropTypes:a,resetWarningCache:o};return f.PropTypes=f,f}},function(t,e,n){t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){n.r(e);var s=n(2),o=n.n(s),a=n(0),c=n.n(a),d=n(1),f=function(ft,rt){return ft*rt},y=function(ft,rt){return ft/rt},g=function(ft,rt,dt,ut){return{x:ft+dt/2,y:rt+ut/2}},S=function(ft,rt,dt,ut,yt,et,bt){var kt,Nt=function(De,Ye,Ce,l){return{left:De-Ce/2,top:Ye-l/2}}(f(ut,bt),f(yt,bt),rt,dt),Et=Nt.left,ne=Nt.top,ye="translate(".concat(Et,"px,").concat(ne,"px) rotate(").concat(et,"rad)");kt=ye,ft.style.transform=kt},x=function(ft,rt,dt,ut,yt){var et=new d.b2BodyDef;et.type=d.b2BodyType.b2_staticBody;var bt=new d.b2FixtureDef;bt.shape=new d.b2PolygonShape,bt.density=1,bt.friction=.5,bt.restitution=0,bt.shape.SetAsBox(y(dt/2,yt),y(rt/2,yt)),et.position.x=y(dt/2,yt),et.position.y=y(rt/2,yt);var kt=ut.CreateBody(et).CreateFixture(bt);kt.m_body.SetUserData({category:"_LEFT_WALL_"}),bt.shape.SetAsBox(y(ft/2,yt),y(dt/2,yt)),et.position.x=y(ft/2,yt),et.position.y=y(rt,yt),(kt=ut.CreateBody(et).CreateFixture(bt)).m_body.SetUserData({category:"_BOTTOM_WALL_"}),bt.shape.SetAsBox(y(ft/2,yt),y(dt/2,yt)),et.position.x=y(ft/2,yt),et.position.y=y(dt/2,yt),(kt=ut.CreateBody(et).CreateFixture(bt)).m_body.SetUserData({category:"_TOP_WALL_"}),bt.shape.SetAsBox(y(dt/2,yt),y(rt/2,yt)),et.position.x=y(ft,yt),et.position.y=y(rt/2,yt),(kt=ut.CreateBody(et).CreateFixture(bt)).m_body.SetUserData({category:"_RIGHT_WALL_"})},p=function(ft,rt,dt){return ft.TWO_NUMBERS_OPTIONAL?Array.isArray(ft[rt])&&ft[rt].length==2&&ft[rt].every(Number.isFinite)?null:new Error("".concat(rt," needs to be an array of two numbers")):null};function C(){return this.contact.GetFixtureA().m_body.GetUserData().category}function B(){return this.contact.GetFixtureB().m_body.GetUserData().category}function T(ft){return(T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt})(ft)}function M(){return(M=Object.assign||function(ft){for(var rt=1;rt<arguments.length;rt++){var dt=arguments[rt];for(var ut in dt)Object.prototype.hasOwnProperty.call(dt,ut)&&(ft[ut]=dt[ut])}return ft}).apply(this,arguments)}function I(ft,rt){if(ft==null)return{};var dt,ut,yt=function(bt,kt){if(bt==null)return{};var Nt,Et,ne={},ye=Object.keys(bt);for(Et=0;Et<ye.length;Et++)Nt=ye[Et],kt.indexOf(Nt)>=0||(ne[Nt]=bt[Nt]);return ne}(ft,rt);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(ft);for(ut=0;ut<et.length;ut++)dt=et[ut],rt.indexOf(dt)>=0||Object.prototype.propertyIsEnumerable.call(ft,dt)&&(yt[dt]=ft[dt])}return yt}function L(ft,rt){for(var dt=0;dt<rt.length;dt++){var ut=rt[dt];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(ft,ut.key,ut)}}function F(ft){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)})(ft)}function k(ft){if(ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ft}function G(ft,rt){return(G=Object.setPrototypeOf||function(dt,ut){return dt.__proto__=ut,dt})(ft,rt)}function O(ft,rt,dt){return rt in ft?Object.defineProperty(ft,rt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[rt]=dt,ft}var E=o.a.createContext(),H=E.Provider,q=(E.Consumer,function(ft){function rt(yt){var et,bt,kt;(function(Ot,Yt){if(!(Ot instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,rt),bt=this,kt=F(rt).call(this,yt),et=!kt||T(kt)!=="object"&&typeof kt!="function"?k(bt):kt,O(k(et),"renderPhysics",function(){for(var Ot=et.world.m_bodyList;Ot;Ot=Ot.m_next)if(Ot.IsAwake()){var Yt=Ot.GetUserData();if(Yt&&Yt.dom)if(Yt.removed)et.world.DestroyBody(Ot);else{var ci=Ot.GetPosition(),fe=ci.x,Le=ci.y,ti=Ot.GetAngle();Yt.rc&&S(Yt.dom,Yt.rc.width,Yt.rc.height,fe,Le,ti,et.SCALE)}}}),O(k(et),"physLoop",function(){et.rafId=void 0,et.world.Step(1/60,10,10),et.world.ClearForces(),et.renderPhysics(),et.physLoopStart()}),O(k(et),"physLoopStart",function(){et.rafId||(et.rafId=window.requestAnimationFrame(et.physLoop))});var Nt=yt.width,Et=yt.height,ne=yt.gravity,ye=ne===void 0?[0,10]:ne,De=yt.allowSleep,Ye=De===void 0||De,Ce=yt.scaleFactor,l=Ce===void 0?60:Ce,_i=yt.enclosed,$t=_i===void 0||_i,qt=yt.enclosureThickness,de=qt===void 0?3:qt,tt=(yt.children,yt.style),ct=tt===void 0?{}:tt,Pe=I(yt,["width","height","gravity","allowSleep","scaleFactor","enclosed","enclosureThickness","children","style"]);et.restProps=Pe,et.SCALE=l,et.world=new d.b2World(new d.b2Vec2(ye[0],ye[1]),Ye),window.world=et.world,$t&&x(Nt,Et,de,et.world,et.SCALE),et.worldChangeStatus=0,et._contactCbProcess=function(Ot,Yt){var ci=et.SCALE,fe=Ot.GetFixtureA().m_body.GetUserData();fe&&(fe[Yt]=!0);var Le={SCALE:ci,contact:Ot};fe&&fe.rc&&fe.rc.props[Yt]&&(Le.getOthersCategory=B,fe.rc.props[Yt](Le));var ti=Ot.GetFixtureB().m_body.GetUserData();ti&&(ti[Yt]=!0),ti&&ti.rc&&ti.rc.props[Yt]&&(Le.getOthersCategory=C,ti.rc.props[Yt](Le))},et._contactListener={BeginContact:function(Ot){et._contactCbProcess(Ot,"onBeginContact")},EndContact:function(Ot){et._contactCbProcess(Ot,"onEndContact")},PreSolve:function(Ot,Yt){},PostSolve:function(Ot,Yt){}},et.world.SetContactListener(et._contactListener);var Kt={width:Nt,height:Et,position:"relative",overlow:"hidden",boxSizing:"border-box",padding:de};return et.worldStyle=function(Ot){for(var Yt=1;Yt<arguments.length;Yt++){var ci=arguments[Yt]!=null?arguments[Yt]:{},fe=Object.keys(ci);typeof Object.getOwnPropertySymbols=="function"&&(fe=fe.concat(Object.getOwnPropertySymbols(ci).filter(function(Le){return Object.getOwnPropertyDescriptor(ci,Le).enumerable}))),fe.forEach(function(Le){O(Ot,Le,ci[Le])})}return Ot}({},Kt,ct),et}var dt,ut;return function(yt,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(et&&et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),et&&G(yt,et)}(rt,s.Component),dt=rt,(ut=[{key:"componentDidMount",value:function(){this.physLoopStart()}},{key:"componentWillUnmount",value:function(){this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0)}},{key:"render",value:function(){var yt=this.props,et=yt.className,bt=et===void 0?"Box2dWorld":et,kt=yt.children;return o.a.createElement("div",M({className:bt},this.restProps,{style:this.worldStyle}),o.a.createElement(H,{value:this},kt))}}])&&L(dt.prototype,ut),rt}());q.propTypes={width:c.a.number.isRequired,height:c.a.number.isRequired,gravity:p,enclosed:c.a.bool,allowSleep:c.a.bool,scaleFactor:c.a.number,enclosureThickness:c.a.number};var $=q;function Z(ft){return(Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt})(ft)}function ot(ft){for(var rt=1;rt<arguments.length;rt++){var dt=arguments[rt]!=null?arguments[rt]:{},ut=Object.keys(dt);typeof Object.getOwnPropertySymbols=="function"&&(ut=ut.concat(Object.getOwnPropertySymbols(dt).filter(function(yt){return Object.getOwnPropertyDescriptor(dt,yt).enumerable}))),ut.forEach(function(yt){_t(ft,yt,dt[yt])})}return ft}function gt(){return(gt=Object.assign||function(ft){for(var rt=1;rt<arguments.length;rt++){var dt=arguments[rt];for(var ut in dt)Object.prototype.hasOwnProperty.call(dt,ut)&&(ft[ut]=dt[ut])}return ft}).apply(this,arguments)}function ht(ft,rt){return function(dt){if(Array.isArray(dt))return dt}(ft)||function(dt,ut){var yt=[],et=!0,bt=!1,kt=void 0;try{for(var Nt,Et=dt[Symbol.iterator]();!(et=(Nt=Et.next()).done)&&(yt.push(Nt.value),!ut||yt.length!==ut);et=!0);}catch(ne){bt=!0,kt=ne}finally{try{et||Et.return==null||Et.return()}finally{if(bt)throw kt}}return yt}(ft,rt)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function wt(ft,rt,dt,ut,yt,et,bt){try{var kt=ft[et](bt),Nt=kt.value}catch(Et){return void dt(Et)}kt.done?rt(Nt):Promise.resolve(Nt).then(ut,yt)}function Ct(ft){return function(){var rt=this,dt=arguments;return new Promise(function(ut,yt){var et=ft.apply(rt,dt);function bt(Nt){wt(et,ut,yt,bt,kt,"next",Nt)}function kt(Nt){wt(et,ut,yt,bt,kt,"throw",Nt)}bt(void 0)})}}function mt(ft,rt){for(var dt=0;dt<rt.length;dt++){var ut=rt[dt];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(ft,ut.key,ut)}}function Y(ft){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)})(ft)}function Q(ft){if(ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ft}function lt(ft,rt){return(lt=Object.setPrototypeOf||function(dt,ut){return dt.__proto__=ut,dt})(ft,rt)}function _t(ft,rt,dt){return rt in ft?Object.defineProperty(ft,rt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[rt]=dt,ft}var Vt=function(ft){var rt=ft.body,dt=ft.gravityScale,ut=dt===void 0?1:dt,yt=ft.sleep,et=yt===void 0||yt;return Object(s.useEffect)(function(){rt&&(rt.SetGravityScale(ut),rt.SetLinearDamping(.8))},[rt,ut]),Object(s.useEffect)(function(){rt&&rt.SetSleepingAllowed(et)},[rt,et]),null},Bt=function(ft){function rt(yt){var et,bt,kt;return function(Nt,Et){if(!(Nt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,rt),bt=this,kt=Y(rt).call(this,yt),et=!kt||Z(kt)!=="object"&&typeof kt!="function"?Q(bt):kt,_t(Q(et),"createFixturesForInline",function(Nt,Et,ne){for(var ye=et.context,De=et.el.getBoundingClientRect(),Ye=et.el.offsetWidth/2,Ce=De.height/2,l=ye.SCALE,_i=Array.from(ne).filter(function(Kt){return Kt.width>0&&Kt.height>0}),$t=De.left,qt=(De.top,_i[0]),de=0;de<_i.length;de++){var tt=_i[de],ct=(tt.left-$t+(tt.right-$t))/2-Ye,Pe=tt.top-qt.top+tt.height/2-Ce;Nt.shape=new d.b2PolygonShape,Nt.shape.SetAsBox(y(tt.width/2,l),y(tt.height/2,l),new d.b2Vec2(y(ct,l),y(Pe,l))),Et.CreateFixture(Nt)}}),_t(Q(et),"physicsInit",Ct(regeneratorRuntime.mark(function Nt(){var Et,ne,ye,De,Ye,Ce,l,_i,$t,qt,de,tt,ct,Pe,Kt,Ot,Yt,ci,fe,Le,ti,gn,vn,Be,nr,Wn,ln,pa,_a,Hr,ya,ga,un,Jr,Xr;return regeneratorRuntime.wrap(function(Qi){for(;;)switch(Qi.prev=Qi.next){case 0:if(Et=et.props,ne=Et.fixed,ye=ne!==void 0&&ne,De=Et.restitution,Ye=De===void 0?.1:De,Ce=Et.friction,l=Ce===void 0?.5:Ce,_i=Et.density,$t=_i===void 0?1:_i,qt=Et.shape,de=qt===void 0?"box":qt,tt=Et.category,ct=tt===void 0?null:tt,Pe=Et.data,Kt=Et.width,Ot=Et.height,Yt=Et.left,ci=Et.top,fe=Et.initialForce,Le=Et.initialImpulse,ti=Et.bullet,gn=et.context,(vn=new d.b2BodyDef).type=ye?d.b2BodyType.b2_staticBody:d.b2BodyType.b2_dynamicBody,(Be=new d.b2FixtureDef).shape=new d.b2PolygonShape,Be.density=$t,Be.friction=l,Be.restitution=Ye,nr=gn.SCALE,et.el.style.overflow="visible",Wn=Kt||et.el.offsetWidth,ln=Ot||et.el.offsetHeight,pa="left"in et.props?Yt:et.el.offsetLeft,_a="top"in et.props?ci:et.el.offsetTop,et.width=Wn,et.height=ln,Hr=g(pa,_a,Wn,ln),ya=Hr.x,ga=Hr.y,vn.position.x=y(ya,gn.SCALE),vn.position.y=y(ga,gn.SCALE),un=gn.world.CreateBody(vn),de!=="box"){Qi.next=23;break}(Jr=et.el.getClientRects()).length>1?(console.log("inline element detected",Jr),et.createFixturesForInline(Be,un,Jr)):(Be.shape=new d.b2PolygonShape,Be.shape.SetAsBox(y(Wn/2,nr),y(ln/2,nr)),un.CreateFixture(Be)),Qi.next=32;break;case 23:if(de!=="circle"){Qi.next=31;break}if(ln==Wn){Qi.next=26;break}throw new Error("For shape circle, height and width should be same");case 26:Be.shape=new d.b2CircleShape(y(ln/2,nr)),un.CreateFixture(Be),et.setState({circleRadius:ln/2}),Qi.next=32;break;case 31:throw new Error("Unknown shape ".concat(de,", only box and circle supported for now"));case 32:Xr={category:ct,dom:et.el,rc:Q(et)},Pe&&(Xr.data=Pe),un.SetUserData(Xr),et.body=un,ti&&et.body.SetBullet(ti),fe&&et.applyForce(fe),Le&&et.applyImpulse(Le),et.setState({domHeight:ln,domWidth:Wn,physicsInited:!0});case 40:case"end":return Qi.stop()}},Nt)}))),_t(Q(et),"applyForce",function(Nt){var Et=ht(Nt,2),ne=Et[0],ye=Et[1];et.body&&et.body.ApplyForce(new d.b2Vec2(ne,ye),et.body.GetWorldCenter())}),_t(Q(et),"applyImpulse",function(Nt){var Et=ht(Nt,2),ne=Et[0],ye=Et[1];et.body&&et.body.ApplyLinearImpulse(new d.b2Vec2(ne,ye),et.body.GetWorldCenter())}),et.state={physicsInited:!1,domWidth:null,domHeight:null,circleRadius:null},et.width=null,et.height=null,et}var dt,ut;return function(yt,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");yt.prototype=Object.create(et&&et.prototype,{constructor:{value:yt,writable:!0,configurable:!0}}),et&&lt(yt,et)}(rt,s.Component),dt=rt,(ut=[{key:"componentWillUnmount",value:function(){if(this.body){var yt=this.body.GetUserData();yt.removed=!0,this.body.SetUserData(yt),this.body.SetAwake(!0)}}},{key:"componentDidMount",value:function(){"waitFor"in this.props?this.props.waitFor&&this.physicsInit():this.physicsInit()}},{key:"componentDidUpdate",value:function(yt,et){"waitFor"in this.props&&(this.state.physicsInited||this.props.waitFor&&this.physicsInit())}},{key:"render",value:function(){var yt=this,et=this.state,bt=et.physicsInited,kt=et.domHeight,Nt=et.domWidth,Et=et.circleRadius,ne=this.props.hideUntil,ye=ne===void 0||ne,De=this.props.children.props.style,Ye=De===void 0?{}:De,Ce=bt?{position:"absolute",display:"block",left:0,top:0,height:kt,width:Nt,willChange:"transform"}:ye?{visibility:"hidden"}:{};return bt&&Et&&(Ce.borderRadius=Et),o.a.createElement(s.Fragment,null,o.a.createElement(Vt,gt({body:this.body},this.props)),o.a.cloneElement(this.props.children,{ref:function(l){yt.el=l},style:ot({},Ye,Ce)}))}}])&&mt(dt.prototype,ut),rt}();_t(Bt,"_internalType","Box2dObject"),Bt.propTypes={children:c.a.element.isRequired,height:c.a.number,width:c.a.number,left:c.a.number,top:c.a.number,density:c.a.number,friction:c.a.number,restitution:c.a.number,bullet:c.a.bool,onBeginContact:c.a.func,onEndContact:c.a.func,shape:c.a.oneOf(["circle","box"]),initialForce:p,initialImpulse:p,category:c.a.string},Bt.contextType=E;var Ut=Bt;n.d(e,"World",function(){return Gt}),n.d(e,"Item",function(){return Xt});var Gt=$,Xt=Ut;e.default={World:Gt,Item:Xt}}]);const lb=({count:t})=>{const e={backgroundColor:"white",border:"2px solid blue",display:"flex",justifyContent:"center",alignItems:"center",padding:"1rem",boxSizing:"border-box",height:"100%",width:"100%"},n=window.innerWidth;return N.jsx(N.Fragment,{children:N.jsxs(si.World,{width:window.innerWidth,height:window.innerHeight,gravity:[0,10],className:"world",style:{position:"absolute",zIndex:"100",pointerEvents:"none"},children:[t>=1&&t<16&&N.jsx(si.Item,{left:100,top:0,restitution:.8,children:N.jsx("div",{style:{...e,width:"300px",height:"100px"},children:N.jsx(ad,{text:"a mirror of the fragmentations of the human mind",delay:30})})}),t>=2&&t<17&&N.jsx(si.Item,{left:300,top:0,restitution:.8,shape:"circle",children:N.jsx("div",{className:"icon-round",style:{border:"white 2px solid",backgroundColor:"rgb(0,0,255)",width:"200px",height:"200px"}})}),t>=3&&t<18&&N.jsx(si.Item,{left:n/2,top:0,restitution:.8,children:N.jsx("div",{className:"crossout",style:{width:"200px",height:"400px"}})}),t>=4&&t<19&&N.jsx(si.Item,{left:n-300,top:0,restitution:.8,children:N.jsx("div",{style:{...e,width:"200px",height:"100px"},children:"Find me by my name"})}),t>=5&&t<20&&N.jsx(si.Item,{left:n/2+100,top:0,restitution:.8,children:N.jsxs("div",{style:{...e,backgroundColor:"blue",border:"2px solid white",color:"white",width:"220px",height:"120px",fontSize:"2.5rem"},children:[N.jsx(Gh,{init:34,speed:200})," followers"]})}),t>=6&&t<21&&N.jsx(si.Item,{left:n-400,top:0,restitution:.8,shape:"circle",children:N.jsx("div",{className:"icon-light",style:{...e,width:"150px",height:"150px"}})}),t>=7&&t<22&&N.jsx(si.Item,{left:50,top:0,restitution:.8,children:N.jsx("div",{style:{...e,fontSize:"2.5rem",width:"200px",height:"100px"},children:N.jsx(Gh,{init:87201,speed:100,type:"min"})})}),t>=8&&t<23&&N.jsx(si.Item,{left:n/2,top:0,restitution:.8,children:N.jsx("div",{style:{...e,fontFamily:"clacon",width:"min-content",height:"min-content"},children:"my /room"})}),t>=9&&t<24&&N.jsx(si.Item,{left:200,top:0,restitution:.8,children:N.jsx("div",{style:{...e,backgroundColor:"blue",border:"2px solid white",color:"white",width:"min-content",height:"150px",fontSize:"2rem",fontFamily:"clacon"},children:"Maximise your value"})}),t>=10&&t<25&&N.jsx(si.Item,{left:100,top:0,restitution:.8,shape:"circle",children:N.jsx("div",{className:"icon-light",style:{width:"300px",height:"300px"}})}),t>=11&&t<26&&N.jsx(si.Item,{left:n-400,top:0,restitution:.8,children:N.jsx("div",{className:"crossout",style:{width:"300px",height:"200px"}})}),t>=12&&t<27&&N.jsx(si.Item,{left:100,top:0,restitution:.8,children:N.jsx("div",{className:"crossout",style:{width:"100px",height:"100px"}})}),t>=13&&t<28&&N.jsx(si.Item,{left:n-200,top:0,restitution:.8,children:N.jsx("div",{className:"link",style:{...e,width:"80px",height:"60px",color:"black"},children:"#id"})}),t>=14&&t<29&&N.jsx(si.Item,{left:100,top:0,restitution:.8,children:N.jsx("div",{style:{...e,fontFamily:"clacon",width:"min-content",height:"min-content"},children:"http://www.mypersonalwebpageisthecoolest.com/"})}),t>=15&&t<33&&N.jsx(si.Item,{left:100,top:0,restitution:.8,children:N.jsx("div",{style:{...e,backgroundColor:"blue",border:"2px solid white",color:"white",width:"min-content",height:"min-content"},children:"goodbye"})})]})})},ub=()=>{const t=an(),[e,n]=nt.useState(0),[s,o]=nt.useState(6),[a,c]=nt.useState(6),[d,f]=nt.useState(0),[y,g]=nt.useState(!1),[S,x]=nt.useState(!1),[p,C]=nt.useState(0),B={width:"90vh",height:"90vh",backgroundColor:"rgb(0, 0, 255)",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"},T={width:"50vw",textDecoration:"underline 1em white",textUnderlineOffset:"-0.8em",textDecorationSkipInk:"none",display:"block",zIndex:100,lineHeight:"1.7rem"},M=(F,k)=>Math.floor(Math.random()*(k-F+1))+F;document.querySelectorAll(".grid__item"),nt.useEffect(()=>{setTimeout(()=>{document.querySelectorAll(".grid__item").forEach((F,k)=>{F.innerHTML=`U${M(0,192048)}`})},1)},[]);const I=()=>{let F=M(1,12),k=M(1,parseInt(8-p/2));o(F),c(k),f(d+1),C(p+1)},L=()=>{g(!0);let F=0,k=setInterval(()=>{F++,C(G=>G+1),F>25&&clearInterval(k)},200);setTimeout(()=>{t("/goodbye")},4500)};return N.jsxs("div",{style:{backgroundColor:"black"},children:[N.jsx(lb,{count:p}),N.jsxs(Pt.div,{className:"websitewrapper",animate:y&&{scale:0},children:[N.jsx(Pt.div,{style:B,className:"icon-light",initial:{y:0}}),N.jsx(Pt.div,{style:{position:"absolute",zIndex:"10"},initial:{y:0},children:N.jsxs("span",{style:T,children:["The #id has transformed into the .class. Repetitive use of identical components, the only unique identifier being the ",N.jsx("span",{className:"link",onClick:()=>x(!0),children:"UID"})," in the infinite database of user profiles. We are all created equal, we are all created the same."]})}),N.jsxs(Pt.div,{className:"finalgrid",style:{zIndex:"50"},initial:{y:-window.innerHeight},animate:S&&{y:0},onAnimationComplete:()=>{n(e+1)},children:[N.jsx("div",{className:"esc_grid__item",id:"escape",style:{gridColumn:s,gridRow:a},onMouseMove:d==15?null:I,onMouseEnter:d==15?null:I,onClick:L,children:N.jsx("span",{className:"link",children:"Escape"})}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"}),N.jsx("div",{className:"grid__item"})]})]})]})},cb=()=>(document.title="goodbye",N.jsx("div",{className:"websitewrapper",style:{backgroundColor:"black"}})),hb=()=>{const t={position:"absolute",top:-50,left:-50,color:"white",fontSize:"1rem",fontFamily:"clacon",pointerEvents:"none",zIndex:200};return N.jsxs("div",{id:"cursor",style:t,children:["0",N.jsx("br",{}),"0"]})};var mb={};const db=()=>(onmousemove=t=>{let e=t.target.className;const n=document.querySelector("#cursor");e.includes("click")||e.includes("link")?n.style.display="none":(n.style.display="block",n.style.left=`${t.pageX}px`,n.style.top=`${t.pageY}px`,n.innerHTML=`${t.pageX}<br/>${t.pageY}`)},N.jsxs(N.Fragment,{children:[N.jsx(hb,{}),N.jsx(TC,{basename:mb.PUBLIC_URL,children:N.jsxs(bC,{children:[N.jsx(Di,{path:"/",element:N.jsx(JV,{})}),N.jsx(Di,{path:"/2",element:N.jsx(XV,{})}),N.jsx(Di,{path:"/3",element:N.jsx($V,{})}),N.jsx(Di,{path:"/4",element:N.jsx(ZV,{})}),N.jsx(Di,{path:"/5",element:N.jsx(QV,{})}),N.jsx(Di,{path:"/6",element:N.jsx(KV,{})}),N.jsx(Di,{path:"/7",element:N.jsx(YV,{})}),N.jsx(Di,{path:"/8",element:N.jsx(tb,{})}),N.jsx(Di,{path:"/9",element:N.jsx(sb,{})}),N.jsx(Di,{path:"/10",element:N.jsx(rb,{})}),N.jsx(Di,{path:"/11",element:N.jsx(ub,{})}),N.jsx(Di,{path:"/goodbye",element:N.jsx(cb,{})})]})})]}));Mc.createRoot(document.getElementById("root")).render(N.jsx(db,{}));
